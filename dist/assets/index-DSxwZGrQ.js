var Ez=Object.defineProperty;var ik=n=>{throw TypeError(n)};var Cz=(n,e,t)=>e in n?Ez(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Pe=(n,e,t)=>Cz(n,typeof e!="symbol"?e+"":e,t),wA=(n,e,t)=>e.has(n)||ik("Cannot "+t);var p=(n,e,t)=>(wA(n,e,"read from private field"),t?t.call(n):e.get(n)),W=(n,e,t)=>e.has(n)?ik("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),B=(n,e,t,r)=>(wA(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),G=(n,e,t)=>(wA(n,e,"access private method"),t);var vr=(n,e,t,r)=>({set _(s){B(n,e,s,t)},get _(){return p(n,e,r)}});function sP(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var Yp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function JE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Az(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var e8={exports:{}},eC={},t8={exports:{}},Wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw=Symbol.for("react.element"),Sz=Symbol.for("react.portal"),Nz=Symbol.for("react.fragment"),Tz=Symbol.for("react.strict_mode"),Pz=Symbol.for("react.profiler"),Iz=Symbol.for("react.provider"),Rz=Symbol.for("react.context"),kz=Symbol.for("react.forward_ref"),Mz=Symbol.for("react.suspense"),Oz=Symbol.for("react.memo"),Dz=Symbol.for("react.lazy"),ok=Symbol.iterator;function jz(n){return n===null||typeof n!="object"?null:(n=ok&&n[ok]||n["@@iterator"],typeof n=="function"?n:null)}var n8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r8=Object.assign,s8={};function U1(n,e,t){this.props=n,this.context=e,this.refs=s8,this.updater=t||n8}U1.prototype.isReactComponent={};U1.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};U1.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function i8(){}i8.prototype=U1.prototype;function iP(n,e,t){this.props=n,this.context=e,this.refs=s8,this.updater=t||n8}var oP=iP.prototype=new i8;oP.constructor=iP;r8(oP,U1.prototype);oP.isPureReactComponent=!0;var ak=Array.isArray,o8=Object.prototype.hasOwnProperty,aP={current:null},a8={key:!0,ref:!0,__self:!0,__source:!0};function l8(n,e,t){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)o8.call(e,r)&&!a8.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=t;else if(1<l){for(var c=Array(l),f=0;f<l;f++)c[f]=arguments[f+2];s.children=c}if(n&&n.defaultProps)for(r in l=n.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Qw,type:n,key:i,ref:o,props:s,_owner:aP.current}}function Lz(n,e){return{$$typeof:Qw,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function lP(n){return typeof n=="object"&&n!==null&&n.$$typeof===Qw}function Bz(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var lk=/\/+/g;function bA(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Bz(""+n.key):e.toString(36)}function I_(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Qw:case Sz:o=!0}}if(o)return o=n,s=s(o),n=r===""?"."+bA(o,0):r,ak(s)?(t="",n!=null&&(t=n.replace(lk,"$&/")+"/"),I_(s,e,t,"",function(f){return f})):s!=null&&(lP(s)&&(s=Lz(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(lk,"$&/")+"/")+n)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ak(n))for(var l=0;l<n.length;l++){i=n[l];var c=r+bA(i,l);o+=I_(i,e,t,c,s)}else if(c=jz(n),typeof c=="function")for(n=c.call(n),l=0;!(i=n.next()).done;)i=i.value,c=r+bA(i,l++),o+=I_(i,e,t,c,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ub(n,e,t){if(n==null)return n;var r=[],s=0;return I_(n,r,"","",function(i){return e.call(t,i,s++)}),r}function Fz(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var _i={current:null},R_={transition:null},Uz={ReactCurrentDispatcher:_i,ReactCurrentBatchConfig:R_,ReactCurrentOwner:aP};function c8(){throw Error("act(...) is not supported in production builds of React.")}Wt.Children={map:Ub,forEach:function(n,e,t){Ub(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Ub(n,function(){e++}),e},toArray:function(n){return Ub(n,function(e){return e})||[]},only:function(n){if(!lP(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Wt.Component=U1;Wt.Fragment=Nz;Wt.Profiler=Pz;Wt.PureComponent=iP;Wt.StrictMode=Tz;Wt.Suspense=Mz;Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uz;Wt.act=c8;Wt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=r8({},n.props),s=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=aP.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)o8.call(e,c)&&!a8.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=t;else if(1<c){l=Array(c);for(var f=0;f<c;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:Qw,type:n.type,key:s,ref:i,props:r,_owner:o}};Wt.createContext=function(n){return n={$$typeof:Rz,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Iz,_context:n},n.Consumer=n};Wt.createElement=l8;Wt.createFactory=function(n){var e=l8.bind(null,n);return e.type=n,e};Wt.createRef=function(){return{current:null}};Wt.forwardRef=function(n){return{$$typeof:kz,render:n}};Wt.isValidElement=lP;Wt.lazy=function(n){return{$$typeof:Dz,_payload:{_status:-1,_result:n},_init:Fz}};Wt.memo=function(n,e){return{$$typeof:Oz,type:n,compare:e===void 0?null:e}};Wt.startTransition=function(n){var e=R_.transition;R_.transition={};try{n()}finally{R_.transition=e}};Wt.unstable_act=c8;Wt.useCallback=function(n,e){return _i.current.useCallback(n,e)};Wt.useContext=function(n){return _i.current.useContext(n)};Wt.useDebugValue=function(){};Wt.useDeferredValue=function(n){return _i.current.useDeferredValue(n)};Wt.useEffect=function(n,e){return _i.current.useEffect(n,e)};Wt.useId=function(){return _i.current.useId()};Wt.useImperativeHandle=function(n,e,t){return _i.current.useImperativeHandle(n,e,t)};Wt.useInsertionEffect=function(n,e){return _i.current.useInsertionEffect(n,e)};Wt.useLayoutEffect=function(n,e){return _i.current.useLayoutEffect(n,e)};Wt.useMemo=function(n,e){return _i.current.useMemo(n,e)};Wt.useReducer=function(n,e,t){return _i.current.useReducer(n,e,t)};Wt.useRef=function(n){return _i.current.useRef(n)};Wt.useState=function(n){return _i.current.useState(n)};Wt.useSyncExternalStore=function(n,e,t){return _i.current.useSyncExternalStore(n,e,t)};Wt.useTransition=function(){return _i.current.useTransition()};Wt.version="18.3.1";t8.exports=Wt;var M=t8.exports;const Dc=JE(M),tC=sP({__proto__:null,default:Dc},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zz=M,Hz=Symbol.for("react.element"),Vz=Symbol.for("react.fragment"),Wz=Object.prototype.hasOwnProperty,Gz=zz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$z={key:!0,ref:!0,__self:!0,__source:!0};function u8(n,e,t){var r,s={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Wz.call(e,r)&&!$z.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Hz,type:n,key:i,ref:o,props:s,_owner:Gz.current}}eC.Fragment=Vz;eC.jsx=u8;eC.jsxs=u8;e8.exports=eC;var h=e8.exports,d8={exports:{}},Mo={},h8={exports:{}},f8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(Q,ue){var he=Q.length;Q.push(ue);e:for(;0<he;){var Ee=he-1>>>1,_e=Q[Ee];if(0<s(_e,ue))Q[Ee]=ue,Q[he]=_e,he=Ee;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ue=Q[0],he=Q.pop();if(he!==ue){Q[0]=he;e:for(var Ee=0,_e=Q.length,Oe=_e>>>1;Ee<Oe;){var De=2*(Ee+1)-1,ze=Q[De],be=De+1,Te=Q[be];if(0>s(ze,he))be<_e&&0>s(Te,ze)?(Q[Ee]=Te,Q[be]=he,Ee=be):(Q[Ee]=ze,Q[De]=he,Ee=De);else if(be<_e&&0>s(Te,he))Q[Ee]=Te,Q[be]=he,Ee=be;else break e}}return ue}function s(Q,ue){var he=Q.sortIndex-ue.sortIndex;return he!==0?he:Q.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],f=[],g=1,y=null,_=3,E=!1,P=!1,S=!1,I=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Q){for(var ue=t(f);ue!==null;){if(ue.callback===null)r(f);else if(ue.startTime<=Q)r(f),ue.sortIndex=ue.expirationTime,e(c,ue);else break;ue=t(f)}}function D(Q){if(S=!1,T(Q),!P)if(t(c)!==null)P=!0,fe(U);else{var ue=t(f);ue!==null&&oe(D,ue.startTime-Q)}}function U(Q,ue){P=!1,S&&(S=!1,N(X),X=-1),E=!0;var he=_;try{for(T(ue),y=t(c);y!==null&&(!(y.expirationTime>ue)||Q&&!se());){var Ee=y.callback;if(typeof Ee=="function"){y.callback=null,_=y.priorityLevel;var _e=Ee(y.expirationTime<=ue);ue=n.unstable_now(),typeof _e=="function"?y.callback=_e:y===t(c)&&r(c),T(ue)}else r(c);y=t(c)}if(y!==null)var Oe=!0;else{var De=t(f);De!==null&&oe(D,De.startTime-ue),Oe=!1}return Oe}finally{y=null,_=he,E=!1}}var z=!1,F=null,X=-1,Z=5,ne=-1;function se(){return!(n.unstable_now()-ne<Z)}function ee(){if(F!==null){var Q=n.unstable_now();ne=Q;var ue=!0;try{ue=F(!0,Q)}finally{ue?ce():(z=!1,F=null)}}else z=!1}var ce;if(typeof k=="function")ce=function(){k(ee)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,re=de.port2;de.port1.onmessage=ee,ce=function(){re.postMessage(null)}}else ce=function(){I(ee,0)};function fe(Q){F=Q,z||(z=!0,ce())}function oe(Q,ue){X=I(function(){Q(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){P||E||(P=!0,fe(U))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(Q){switch(_){case 1:case 2:case 3:var ue=3;break;default:ue=_}var he=_;_=ue;try{return Q()}finally{_=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,ue){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var he=_;_=Q;try{return ue()}finally{_=he}},n.unstable_scheduleCallback=function(Q,ue,he){var Ee=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ee+he:Ee):he=Ee,Q){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=he+_e,Q={id:g++,callback:ue,priorityLevel:Q,startTime:he,expirationTime:_e,sortIndex:-1},he>Ee?(Q.sortIndex=he,e(f,Q),t(c)===null&&Q===t(f)&&(S?(N(X),X=-1):S=!0,oe(D,he-Ee))):(Q.sortIndex=_e,e(c,Q),P||E||(P=!0,fe(U))),Q},n.unstable_shouldYield=se,n.unstable_wrapCallback=function(Q){var ue=_;return function(){var he=_;_=ue;try{return Q.apply(this,arguments)}finally{_=he}}}})(f8);h8.exports=f8;var qz=h8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xz=M,Ro=qz;function ke(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m8=new Set,bv={};function wp(n,e){y1(n,e),y1(n+"Capture",e)}function y1(n,e){for(bv[n]=e,n=0;n<e.length;n++)m8.add(e[n])}var Iu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),LS=Object.prototype.hasOwnProperty,Yz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ck={},uk={};function Kz(n){return LS.call(uk,n)?!0:LS.call(ck,n)?!1:Yz.test(n)?uk[n]=!0:(ck[n]=!0,!1)}function Zz(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Qz(n,e,t,r){if(e===null||typeof e>"u"||Zz(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ei(n,e,t,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ds={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ds[n]=new Ei(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ds[e]=new Ei(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ds[n]=new Ei(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ds[n]=new Ei(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ds[n]=new Ei(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ds[n]=new Ei(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ds[n]=new Ei(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ds[n]=new Ei(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ds[n]=new Ei(n,5,!1,n.toLowerCase(),null,!1,!1)});var cP=/[\-:]([a-z])/g;function uP(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(cP,uP);Ds[e]=new Ei(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(cP,uP);Ds[e]=new Ei(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(cP,uP);Ds[e]=new Ei(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ds[n]=new Ei(n,1,!1,n.toLowerCase(),null,!1,!1)});Ds.xlinkHref=new Ei("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ds[n]=new Ei(n,1,!1,n.toLowerCase(),null,!0,!0)});function dP(n,e,t,r){var s=Ds.hasOwnProperty(e)?Ds[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Qz(e,t,s,r)&&(t=null),r||s===null?Kz(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Bu=Xz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zb=Symbol.for("react.element"),ag=Symbol.for("react.portal"),lg=Symbol.for("react.fragment"),hP=Symbol.for("react.strict_mode"),BS=Symbol.for("react.profiler"),p8=Symbol.for("react.provider"),g8=Symbol.for("react.context"),fP=Symbol.for("react.forward_ref"),FS=Symbol.for("react.suspense"),US=Symbol.for("react.suspense_list"),mP=Symbol.for("react.memo"),cd=Symbol.for("react.lazy"),x8=Symbol.for("react.offscreen"),dk=Symbol.iterator;function wx(n){return n===null||typeof n!="object"?null:(n=dk&&n[dk]||n["@@iterator"],typeof n=="function"?n:null)}var pr=Object.assign,_A;function Dx(n){if(_A===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);_A=e&&e[1]||""}return`
`+_A+n}var EA=!1;function CA(n,e){if(!n||EA)return"";EA=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(n,[],e)}else{try{e.call()}catch(f){r=f}n.call(e.prototype)}else{try{throw Error()}catch(f){r=f}n()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var s=f.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=l);break}}}finally{EA=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Dx(n):""}function Jz(n){switch(n.tag){case 5:return Dx(n.type);case 16:return Dx("Lazy");case 13:return Dx("Suspense");case 19:return Dx("SuspenseList");case 0:case 2:case 15:return n=CA(n.type,!1),n;case 11:return n=CA(n.type.render,!1),n;case 1:return n=CA(n.type,!0),n;default:return""}}function zS(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case lg:return"Fragment";case ag:return"Portal";case BS:return"Profiler";case hP:return"StrictMode";case FS:return"Suspense";case US:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case g8:return(n.displayName||"Context")+".Consumer";case p8:return(n._context.displayName||"Context")+".Provider";case fP:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case mP:return e=n.displayName||null,e!==null?e:zS(n.type)||"Memo";case cd:e=n._payload,n=n._init;try{return zS(n(e))}catch{}}return null}function eH(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zS(e);case 8:return e===hP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ph(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function v8(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tH(n){var e=v8(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Hb(n){n._valueTracker||(n._valueTracker=tH(n))}function y8(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=v8(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function N2(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function HS(n,e){var t=e.checked;return pr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function hk(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Ph(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function w8(n,e){e=e.checked,e!=null&&dP(n,"checked",e,!1)}function VS(n,e){w8(n,e);var t=Ph(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?WS(n,e.type,t):e.hasOwnProperty("defaultValue")&&WS(n,e.type,Ph(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function fk(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function WS(n,e,t){(e!=="number"||N2(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var jx=Array.isArray;function Sg(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Ph(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function GS(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ke(91));return pr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function mk(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ke(92));if(jx(t)){if(1<t.length)throw Error(ke(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ph(t)}}function b8(n,e){var t=Ph(e.value),r=Ph(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function pk(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function _8(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $S(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?_8(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Vb,E8=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Vb=Vb||document.createElement("div"),Vb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vb.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function _v(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var cv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nH=["Webkit","ms","Moz","O"];Object.keys(cv).forEach(function(n){nH.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),cv[e]=cv[n]})});function C8(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||cv.hasOwnProperty(n)&&cv[n]?(""+e).trim():e+"px"}function A8(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=C8(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var rH=pr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qS(n,e){if(e){if(rH[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ke(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ke(62))}}function XS(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var YS=null;function pP(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var KS=null,Ng=null,Tg=null;function gk(n){if(n=tb(n)){if(typeof KS!="function")throw Error(ke(280));var e=n.stateNode;e&&(e=oC(e),KS(n.stateNode,n.type,e))}}function S8(n){Ng?Tg?Tg.push(n):Tg=[n]:Ng=n}function N8(){if(Ng){var n=Ng,e=Tg;if(Tg=Ng=null,gk(n),e)for(n=0;n<e.length;n++)gk(e[n])}}function T8(n,e){return n(e)}function P8(){}var AA=!1;function I8(n,e,t){if(AA)return n(e,t);AA=!0;try{return T8(n,e,t)}finally{AA=!1,(Ng!==null||Tg!==null)&&(P8(),N8())}}function Ev(n,e){var t=n.stateNode;if(t===null)return null;var r=oC(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ke(231,e,typeof t));return t}var ZS=!1;if(Iu)try{var bx={};Object.defineProperty(bx,"passive",{get:function(){ZS=!0}}),window.addEventListener("test",bx,bx),window.removeEventListener("test",bx,bx)}catch{ZS=!1}function sH(n,e,t,r,s,i,o,l,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(t,f)}catch(g){this.onError(g)}}var uv=!1,T2=null,P2=!1,QS=null,iH={onError:function(n){uv=!0,T2=n}};function oH(n,e,t,r,s,i,o,l,c){uv=!1,T2=null,sH.apply(iH,arguments)}function aH(n,e,t,r,s,i,o,l,c){if(oH.apply(this,arguments),uv){if(uv){var f=T2;uv=!1,T2=null}else throw Error(ke(198));P2||(P2=!0,QS=f)}}function bp(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function R8(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function xk(n){if(bp(n)!==n)throw Error(ke(188))}function lH(n){var e=n.alternate;if(!e){if(e=bp(n),e===null)throw Error(ke(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return xk(s),n;if(i===r)return xk(s),e;i=i.sibling}throw Error(ke(188))}if(t.return!==r.return)t=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===t){o=!0,t=s,r=i;break}if(l===r){o=!0,r=s,t=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===t){o=!0,t=i,r=s;break}if(l===r){o=!0,r=i,t=s;break}l=l.sibling}if(!o)throw Error(ke(189))}}if(t.alternate!==r)throw Error(ke(190))}if(t.tag!==3)throw Error(ke(188));return t.stateNode.current===t?n:e}function k8(n){return n=lH(n),n!==null?M8(n):null}function M8(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=M8(n);if(e!==null)return e;n=n.sibling}return null}var O8=Ro.unstable_scheduleCallback,vk=Ro.unstable_cancelCallback,cH=Ro.unstable_shouldYield,uH=Ro.unstable_requestPaint,Rr=Ro.unstable_now,dH=Ro.unstable_getCurrentPriorityLevel,gP=Ro.unstable_ImmediatePriority,D8=Ro.unstable_UserBlockingPriority,I2=Ro.unstable_NormalPriority,hH=Ro.unstable_LowPriority,j8=Ro.unstable_IdlePriority,nC=null,tc=null;function fH(n){if(tc&&typeof tc.onCommitFiberRoot=="function")try{tc.onCommitFiberRoot(nC,n,void 0,(n.current.flags&128)===128)}catch{}}var Ja=Math.clz32?Math.clz32:gH,mH=Math.log,pH=Math.LN2;function gH(n){return n>>>=0,n===0?32:31-(mH(n)/pH|0)|0}var Wb=64,Gb=4194304;function Lx(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function R2(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var l=o&~s;l!==0?r=Lx(l):(i&=o,i!==0&&(r=Lx(i)))}else o=t&~s,o!==0?r=Lx(o):i!==0&&(r=Lx(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Ja(e),s=1<<t,r|=n[t],e&=~s;return r}function xH(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vH(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-Ja(i),l=1<<o,c=s[o];c===-1?(!(l&t)||l&r)&&(s[o]=xH(l,e)):c<=e&&(n.expiredLanes|=l),i&=~l}}function JS(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function L8(){var n=Wb;return Wb<<=1,!(Wb&4194240)&&(Wb=64),n}function SA(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Jw(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ja(e),n[e]=t}function yH(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-Ja(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function xP(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Ja(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var bn=0;function B8(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var F8,vP,U8,z8,H8,eN=!1,$b=[],vh=null,yh=null,wh=null,Cv=new Map,Av=new Map,hd=[],wH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yk(n,e){switch(n){case"focusin":case"focusout":vh=null;break;case"dragenter":case"dragleave":yh=null;break;case"mouseover":case"mouseout":wh=null;break;case"pointerover":case"pointerout":Cv.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Av.delete(e.pointerId)}}function _x(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=tb(e),e!==null&&vP(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function bH(n,e,t,r,s){switch(e){case"focusin":return vh=_x(vh,n,e,t,r,s),!0;case"dragenter":return yh=_x(yh,n,e,t,r,s),!0;case"mouseover":return wh=_x(wh,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return Cv.set(i,_x(Cv.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Av.set(i,_x(Av.get(i)||null,n,e,t,r,s)),!0}return!1}function V8(n){var e=kf(n.target);if(e!==null){var t=bp(e);if(t!==null){if(e=t.tag,e===13){if(e=R8(t),e!==null){n.blockedOn=e,H8(n.priority,function(){U8(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function k_(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=tN(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);YS=r,t.target.dispatchEvent(r),YS=null}else return e=tb(t),e!==null&&vP(e),n.blockedOn=t,!1;e.shift()}return!0}function wk(n,e,t){k_(n)&&t.delete(e)}function _H(){eN=!1,vh!==null&&k_(vh)&&(vh=null),yh!==null&&k_(yh)&&(yh=null),wh!==null&&k_(wh)&&(wh=null),Cv.forEach(wk),Av.forEach(wk)}function Ex(n,e){n.blockedOn===e&&(n.blockedOn=null,eN||(eN=!0,Ro.unstable_scheduleCallback(Ro.unstable_NormalPriority,_H)))}function Sv(n){function e(s){return Ex(s,n)}if(0<$b.length){Ex($b[0],n);for(var t=1;t<$b.length;t++){var r=$b[t];r.blockedOn===n&&(r.blockedOn=null)}}for(vh!==null&&Ex(vh,n),yh!==null&&Ex(yh,n),wh!==null&&Ex(wh,n),Cv.forEach(e),Av.forEach(e),t=0;t<hd.length;t++)r=hd[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<hd.length&&(t=hd[0],t.blockedOn===null);)V8(t),t.blockedOn===null&&hd.shift()}var Pg=Bu.ReactCurrentBatchConfig,k2=!0;function EH(n,e,t,r){var s=bn,i=Pg.transition;Pg.transition=null;try{bn=1,yP(n,e,t,r)}finally{bn=s,Pg.transition=i}}function CH(n,e,t,r){var s=bn,i=Pg.transition;Pg.transition=null;try{bn=4,yP(n,e,t,r)}finally{bn=s,Pg.transition=i}}function yP(n,e,t,r){if(k2){var s=tN(n,e,t,r);if(s===null)jA(n,e,r,M2,t),yk(n,r);else if(bH(s,n,e,t,r))r.stopPropagation();else if(yk(n,r),e&4&&-1<wH.indexOf(n)){for(;s!==null;){var i=tb(s);if(i!==null&&F8(i),i=tN(n,e,t,r),i===null&&jA(n,e,r,M2,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else jA(n,e,r,null,t)}}var M2=null;function tN(n,e,t,r){if(M2=null,n=pP(r),n=kf(n),n!==null)if(e=bp(n),e===null)n=null;else if(t=e.tag,t===13){if(n=R8(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return M2=n,null}function W8(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dH()){case gP:return 1;case D8:return 4;case I2:case hH:return 16;case j8:return 536870912;default:return 16}default:return 16}}var fh=null,wP=null,M_=null;function G8(){if(M_)return M_;var n,e=wP,t=e.length,r,s="value"in fh?fh.value:fh.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===s[i-r];r++);return M_=s.slice(n,1<r?1-r:void 0)}function O_(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function qb(){return!0}function bk(){return!1}function Oo(n){function e(t,r,s,i,o){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qb:bk,this.isPropagationStopped=bk,this}return pr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=qb)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=qb)},persist:function(){},isPersistent:qb}),e}var z1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bP=Oo(z1),eb=pr({},z1,{view:0,detail:0}),AH=Oo(eb),NA,TA,Cx,rC=pr({},eb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_P,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Cx&&(Cx&&n.type==="mousemove"?(NA=n.screenX-Cx.screenX,TA=n.screenY-Cx.screenY):TA=NA=0,Cx=n),NA)},movementY:function(n){return"movementY"in n?n.movementY:TA}}),_k=Oo(rC),SH=pr({},rC,{dataTransfer:0}),NH=Oo(SH),TH=pr({},eb,{relatedTarget:0}),PA=Oo(TH),PH=pr({},z1,{animationName:0,elapsedTime:0,pseudoElement:0}),IH=Oo(PH),RH=pr({},z1,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),kH=Oo(RH),MH=pr({},z1,{data:0}),Ek=Oo(MH),OH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LH(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=jH[n])?!!e[n]:!1}function _P(){return LH}var BH=pr({},eb,{key:function(n){if(n.key){var e=OH[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=O_(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?DH[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_P,charCode:function(n){return n.type==="keypress"?O_(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?O_(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),FH=Oo(BH),UH=pr({},rC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ck=Oo(UH),zH=pr({},eb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_P}),HH=Oo(zH),VH=pr({},z1,{propertyName:0,elapsedTime:0,pseudoElement:0}),WH=Oo(VH),GH=pr({},rC,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$H=Oo(GH),qH=[9,13,27,32],EP=Iu&&"CompositionEvent"in window,dv=null;Iu&&"documentMode"in document&&(dv=document.documentMode);var XH=Iu&&"TextEvent"in window&&!dv,$8=Iu&&(!EP||dv&&8<dv&&11>=dv),Ak=" ",Sk=!1;function q8(n,e){switch(n){case"keyup":return qH.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X8(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var cg=!1;function YH(n,e){switch(n){case"compositionend":return X8(e);case"keypress":return e.which!==32?null:(Sk=!0,Ak);case"textInput":return n=e.data,n===Ak&&Sk?null:n;default:return null}}function KH(n,e){if(cg)return n==="compositionend"||!EP&&q8(n,e)?(n=G8(),M_=wP=fh=null,cg=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $8&&e.locale!=="ko"?null:e.data;default:return null}}var ZH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nk(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!ZH[n.type]:e==="textarea"}function Y8(n,e,t,r){S8(r),e=O2(e,"onChange"),0<e.length&&(t=new bP("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var hv=null,Nv=null;function QH(n){oD(n,0)}function sC(n){var e=hg(n);if(y8(e))return n}function JH(n,e){if(n==="change")return e}var K8=!1;if(Iu){var IA;if(Iu){var RA="oninput"in document;if(!RA){var Tk=document.createElement("div");Tk.setAttribute("oninput","return;"),RA=typeof Tk.oninput=="function"}IA=RA}else IA=!1;K8=IA&&(!document.documentMode||9<document.documentMode)}function Pk(){hv&&(hv.detachEvent("onpropertychange",Z8),Nv=hv=null)}function Z8(n){if(n.propertyName==="value"&&sC(Nv)){var e=[];Y8(e,Nv,n,pP(n)),I8(QH,e)}}function eV(n,e,t){n==="focusin"?(Pk(),hv=e,Nv=t,hv.attachEvent("onpropertychange",Z8)):n==="focusout"&&Pk()}function tV(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return sC(Nv)}function nV(n,e){if(n==="click")return sC(e)}function rV(n,e){if(n==="input"||n==="change")return sC(e)}function sV(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var nl=typeof Object.is=="function"?Object.is:sV;function Tv(n,e){if(nl(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!LS.call(e,s)||!nl(n[s],e[s]))return!1}return!0}function Ik(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Rk(n,e){var t=Ik(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Ik(t)}}function Q8(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Q8(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function J8(){for(var n=window,e=N2();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=N2(n.document)}return e}function CP(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function iV(n){var e=J8(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Q8(t.ownerDocument.documentElement,t)){if(r!==null&&CP(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=Rk(t,i);var o=Rk(t,r);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var oV=Iu&&"documentMode"in document&&11>=document.documentMode,ug=null,nN=null,fv=null,rN=!1;function kk(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;rN||ug==null||ug!==N2(r)||(r=ug,"selectionStart"in r&&CP(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fv&&Tv(fv,r)||(fv=r,r=O2(nN,"onSelect"),0<r.length&&(e=new bP("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=ug)))}function Xb(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var dg={animationend:Xb("Animation","AnimationEnd"),animationiteration:Xb("Animation","AnimationIteration"),animationstart:Xb("Animation","AnimationStart"),transitionend:Xb("Transition","TransitionEnd")},kA={},eD={};Iu&&(eD=document.createElement("div").style,"AnimationEvent"in window||(delete dg.animationend.animation,delete dg.animationiteration.animation,delete dg.animationstart.animation),"TransitionEvent"in window||delete dg.transitionend.transition);function iC(n){if(kA[n])return kA[n];if(!dg[n])return n;var e=dg[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in eD)return kA[n]=e[t];return n}var tD=iC("animationend"),nD=iC("animationiteration"),rD=iC("animationstart"),sD=iC("transitionend"),iD=new Map,Mk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hh(n,e){iD.set(n,e),wp(e,[n])}for(var MA=0;MA<Mk.length;MA++){var OA=Mk[MA],aV=OA.toLowerCase(),lV=OA[0].toUpperCase()+OA.slice(1);Hh(aV,"on"+lV)}Hh(tD,"onAnimationEnd");Hh(nD,"onAnimationIteration");Hh(rD,"onAnimationStart");Hh("dblclick","onDoubleClick");Hh("focusin","onFocus");Hh("focusout","onBlur");Hh(sD,"onTransitionEnd");y1("onMouseEnter",["mouseout","mouseover"]);y1("onMouseLeave",["mouseout","mouseover"]);y1("onPointerEnter",["pointerout","pointerover"]);y1("onPointerLeave",["pointerout","pointerover"]);wp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wp("onBeforeInput",["compositionend","keypress","textInput","paste"]);wp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bx="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bx));function Ok(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,aH(r,e,void 0,n),n.currentTarget=null}function oD(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,f=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Ok(s,l,f),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,f=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Ok(s,l,f),i=c}}}if(P2)throw n=QS,P2=!1,QS=null,n}function Zn(n,e){var t=e[lN];t===void 0&&(t=e[lN]=new Set);var r=n+"__bubble";t.has(r)||(aD(e,n,2,!1),t.add(r))}function DA(n,e,t){var r=0;e&&(r|=4),aD(t,n,r,e)}var Yb="_reactListening"+Math.random().toString(36).slice(2);function Pv(n){if(!n[Yb]){n[Yb]=!0,m8.forEach(function(t){t!=="selectionchange"&&(cV.has(t)||DA(t,!1,n),DA(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Yb]||(e[Yb]=!0,DA("selectionchange",!1,e))}}function aD(n,e,t,r){switch(W8(e)){case 1:var s=EH;break;case 4:s=CH;break;default:s=yP}t=s.bind(null,e,t,n),s=void 0,!ZS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function jA(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=kf(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}I8(function(){var f=i,g=pP(t),y=[];e:{var _=iD.get(n);if(_!==void 0){var E=bP,P=n;switch(n){case"keypress":if(O_(t)===0)break e;case"keydown":case"keyup":E=FH;break;case"focusin":P="focus",E=PA;break;case"focusout":P="blur",E=PA;break;case"beforeblur":case"afterblur":E=PA;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=_k;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=NH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=HH;break;case tD:case nD:case rD:E=IH;break;case sD:E=WH;break;case"scroll":E=AH;break;case"wheel":E=$H;break;case"copy":case"cut":case"paste":E=kH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Ck}var S=(e&4)!==0,I=!S&&n==="scroll",N=S?_!==null?_+"Capture":null:_;S=[];for(var k=f,T;k!==null;){T=k;var D=T.stateNode;if(T.tag===5&&D!==null&&(T=D,N!==null&&(D=Ev(k,N),D!=null&&S.push(Iv(k,D,T)))),I)break;k=k.return}0<S.length&&(_=new E(_,P,null,t,g),y.push({event:_,listeners:S}))}}if(!(e&7)){e:{if(_=n==="mouseover"||n==="pointerover",E=n==="mouseout"||n==="pointerout",_&&t!==YS&&(P=t.relatedTarget||t.fromElement)&&(kf(P)||P[Ru]))break e;if((E||_)&&(_=g.window===g?g:(_=g.ownerDocument)?_.defaultView||_.parentWindow:window,E?(P=t.relatedTarget||t.toElement,E=f,P=P?kf(P):null,P!==null&&(I=bp(P),P!==I||P.tag!==5&&P.tag!==6)&&(P=null)):(E=null,P=f),E!==P)){if(S=_k,D="onMouseLeave",N="onMouseEnter",k="mouse",(n==="pointerout"||n==="pointerover")&&(S=Ck,D="onPointerLeave",N="onPointerEnter",k="pointer"),I=E==null?_:hg(E),T=P==null?_:hg(P),_=new S(D,k+"leave",E,t,g),_.target=I,_.relatedTarget=T,D=null,kf(g)===f&&(S=new S(N,k+"enter",P,t,g),S.target=T,S.relatedTarget=I,D=S),I=D,E&&P)t:{for(S=E,N=P,k=0,T=S;T;T=Op(T))k++;for(T=0,D=N;D;D=Op(D))T++;for(;0<k-T;)S=Op(S),k--;for(;0<T-k;)N=Op(N),T--;for(;k--;){if(S===N||N!==null&&S===N.alternate)break t;S=Op(S),N=Op(N)}S=null}else S=null;E!==null&&Dk(y,_,E,S,!1),P!==null&&I!==null&&Dk(y,I,P,S,!0)}}e:{if(_=f?hg(f):window,E=_.nodeName&&_.nodeName.toLowerCase(),E==="select"||E==="input"&&_.type==="file")var U=JH;else if(Nk(_))if(K8)U=rV;else{U=tV;var z=eV}else(E=_.nodeName)&&E.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(U=nV);if(U&&(U=U(n,f))){Y8(y,U,t,g);break e}z&&z(n,_,f),n==="focusout"&&(z=_._wrapperState)&&z.controlled&&_.type==="number"&&WS(_,"number",_.value)}switch(z=f?hg(f):window,n){case"focusin":(Nk(z)||z.contentEditable==="true")&&(ug=z,nN=f,fv=null);break;case"focusout":fv=nN=ug=null;break;case"mousedown":rN=!0;break;case"contextmenu":case"mouseup":case"dragend":rN=!1,kk(y,t,g);break;case"selectionchange":if(oV)break;case"keydown":case"keyup":kk(y,t,g)}var F;if(EP)e:{switch(n){case"compositionstart":var X="onCompositionStart";break e;case"compositionend":X="onCompositionEnd";break e;case"compositionupdate":X="onCompositionUpdate";break e}X=void 0}else cg?q8(n,t)&&(X="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(X="onCompositionStart");X&&($8&&t.locale!=="ko"&&(cg||X!=="onCompositionStart"?X==="onCompositionEnd"&&cg&&(F=G8()):(fh=g,wP="value"in fh?fh.value:fh.textContent,cg=!0)),z=O2(f,X),0<z.length&&(X=new Ek(X,n,null,t,g),y.push({event:X,listeners:z}),F?X.data=F:(F=X8(t),F!==null&&(X.data=F)))),(F=XH?YH(n,t):KH(n,t))&&(f=O2(f,"onBeforeInput"),0<f.length&&(g=new Ek("onBeforeInput","beforeinput",null,t,g),y.push({event:g,listeners:f}),g.data=F))}oD(y,e)})}function Iv(n,e,t){return{instance:n,listener:e,currentTarget:t}}function O2(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ev(n,t),i!=null&&r.unshift(Iv(n,i,s)),i=Ev(n,e),i!=null&&r.push(Iv(n,i,s))),n=n.return}return r}function Op(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Dk(n,e,t,r,s){for(var i=e._reactName,o=[];t!==null&&t!==r;){var l=t,c=l.alternate,f=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&f!==null&&(l=f,s?(c=Ev(t,i),c!=null&&o.unshift(Iv(t,c,l))):s||(c=Ev(t,i),c!=null&&o.push(Iv(t,c,l)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var uV=/\r\n?/g,dV=/\u0000|\uFFFD/g;function jk(n){return(typeof n=="string"?n:""+n).replace(uV,`
`).replace(dV,"")}function Kb(n,e,t){if(e=jk(e),jk(n)!==e&&t)throw Error(ke(425))}function D2(){}var sN=null,iN=null;function oN(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var aN=typeof setTimeout=="function"?setTimeout:void 0,hV=typeof clearTimeout=="function"?clearTimeout:void 0,Lk=typeof Promise=="function"?Promise:void 0,fV=typeof queueMicrotask=="function"?queueMicrotask:typeof Lk<"u"?function(n){return Lk.resolve(null).then(n).catch(mV)}:aN;function mV(n){setTimeout(function(){throw n})}function LA(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),Sv(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);Sv(e)}function bh(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Bk(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var H1=Math.random().toString(36).slice(2),Yl="__reactFiber$"+H1,Rv="__reactProps$"+H1,Ru="__reactContainer$"+H1,lN="__reactEvents$"+H1,pV="__reactListeners$"+H1,gV="__reactHandles$"+H1;function kf(n){var e=n[Yl];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ru]||t[Yl]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Bk(n);n!==null;){if(t=n[Yl])return t;n=Bk(n)}return e}n=t,t=n.parentNode}return null}function tb(n){return n=n[Yl]||n[Ru],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function hg(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ke(33))}function oC(n){return n[Rv]||null}var cN=[],fg=-1;function Vh(n){return{current:n}}function er(n){0>fg||(n.current=cN[fg],cN[fg]=null,fg--)}function Vn(n,e){fg++,cN[fg]=n.current,n.current=e}var Ih={},ei=Vh(Ih),zi=Vh(!1),ip=Ih;function w1(n,e){var t=n.type.contextTypes;if(!t)return Ih;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Hi(n){return n=n.childContextTypes,n!=null}function j2(){er(zi),er(ei)}function Fk(n,e,t){if(ei.current!==Ih)throw Error(ke(168));Vn(ei,e),Vn(zi,t)}function lD(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ke(108,eH(n)||"Unknown",s));return pr({},t,r)}function L2(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ih,ip=ei.current,Vn(ei,n),Vn(zi,zi.current),!0}function Uk(n,e,t){var r=n.stateNode;if(!r)throw Error(ke(169));t?(n=lD(n,e,ip),r.__reactInternalMemoizedMergedChildContext=n,er(zi),er(ei),Vn(ei,n)):er(zi),Vn(zi,t)}var Uc=null,aC=!1,BA=!1;function cD(n){Uc===null?Uc=[n]:Uc.push(n)}function xV(n){aC=!0,cD(n)}function Wh(){if(!BA&&Uc!==null){BA=!0;var n=0,e=bn;try{var t=Uc;for(bn=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Uc=null,aC=!1}catch(s){throw Uc!==null&&(Uc=Uc.slice(n+1)),O8(gP,Wh),s}finally{bn=e,BA=!1}}return null}var mg=[],pg=0,B2=null,F2=0,la=[],ca=0,op=null,Eu=1,Cu="";function pf(n,e){mg[pg++]=F2,mg[pg++]=B2,B2=n,F2=e}function uD(n,e,t){la[ca++]=Eu,la[ca++]=Cu,la[ca++]=op,op=n;var r=Eu;n=Cu;var s=32-Ja(r)-1;r&=~(1<<s),t+=1;var i=32-Ja(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Eu=1<<32-Ja(e)+s|t<<s|r,Cu=i+n}else Eu=1<<i|t<<s|r,Cu=n}function AP(n){n.return!==null&&(pf(n,1),uD(n,1,0))}function SP(n){for(;n===B2;)B2=mg[--pg],mg[pg]=null,F2=mg[--pg],mg[pg]=null;for(;n===op;)op=la[--ca],la[ca]=null,Cu=la[--ca],la[ca]=null,Eu=la[--ca],la[ca]=null}var No=null,So=null,ir=!1,Ya=null;function dD(n,e){var t=ha(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function zk(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,No=n,So=bh(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,No=n,So=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=op!==null?{id:Eu,overflow:Cu}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ha(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,No=n,So=null,!0):!1;default:return!1}}function uN(n){return(n.mode&1)!==0&&(n.flags&128)===0}function dN(n){if(ir){var e=So;if(e){var t=e;if(!zk(n,e)){if(uN(n))throw Error(ke(418));e=bh(t.nextSibling);var r=No;e&&zk(n,e)?dD(r,t):(n.flags=n.flags&-4097|2,ir=!1,No=n)}}else{if(uN(n))throw Error(ke(418));n.flags=n.flags&-4097|2,ir=!1,No=n}}}function Hk(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;No=n}function Zb(n){if(n!==No)return!1;if(!ir)return Hk(n),ir=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!oN(n.type,n.memoizedProps)),e&&(e=So)){if(uN(n))throw hD(),Error(ke(418));for(;e;)dD(n,e),e=bh(e.nextSibling)}if(Hk(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ke(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){So=bh(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}So=null}}else So=No?bh(n.stateNode.nextSibling):null;return!0}function hD(){for(var n=So;n;)n=bh(n.nextSibling)}function b1(){So=No=null,ir=!1}function NP(n){Ya===null?Ya=[n]:Ya.push(n)}var vV=Bu.ReactCurrentBatchConfig;function Ax(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ke(309));var r=t.stateNode}if(!r)throw Error(ke(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(ke(284));if(!t._owner)throw Error(ke(290,n))}return n}function Qb(n,e){throw n=Object.prototype.toString.call(e),Error(ke(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Vk(n){var e=n._init;return e(n._payload)}function fD(n){function e(N,k){if(n){var T=N.deletions;T===null?(N.deletions=[k],N.flags|=16):T.push(k)}}function t(N,k){if(!n)return null;for(;k!==null;)e(N,k),k=k.sibling;return null}function r(N,k){for(N=new Map;k!==null;)k.key!==null?N.set(k.key,k):N.set(k.index,k),k=k.sibling;return N}function s(N,k){return N=Ah(N,k),N.index=0,N.sibling=null,N}function i(N,k,T){return N.index=T,n?(T=N.alternate,T!==null?(T=T.index,T<k?(N.flags|=2,k):T):(N.flags|=2,k)):(N.flags|=1048576,k)}function o(N){return n&&N.alternate===null&&(N.flags|=2),N}function l(N,k,T,D){return k===null||k.tag!==6?(k=GA(T,N.mode,D),k.return=N,k):(k=s(k,T),k.return=N,k)}function c(N,k,T,D){var U=T.type;return U===lg?g(N,k,T.props.children,D,T.key):k!==null&&(k.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===cd&&Vk(U)===k.type)?(D=s(k,T.props),D.ref=Ax(N,k,T),D.return=N,D):(D=z_(T.type,T.key,T.props,null,N.mode,D),D.ref=Ax(N,k,T),D.return=N,D)}function f(N,k,T,D){return k===null||k.tag!==4||k.stateNode.containerInfo!==T.containerInfo||k.stateNode.implementation!==T.implementation?(k=$A(T,N.mode,D),k.return=N,k):(k=s(k,T.children||[]),k.return=N,k)}function g(N,k,T,D,U){return k===null||k.tag!==7?(k=sp(T,N.mode,D,U),k.return=N,k):(k=s(k,T),k.return=N,k)}function y(N,k,T){if(typeof k=="string"&&k!==""||typeof k=="number")return k=GA(""+k,N.mode,T),k.return=N,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case zb:return T=z_(k.type,k.key,k.props,null,N.mode,T),T.ref=Ax(N,null,k),T.return=N,T;case ag:return k=$A(k,N.mode,T),k.return=N,k;case cd:var D=k._init;return y(N,D(k._payload),T)}if(jx(k)||wx(k))return k=sp(k,N.mode,T,null),k.return=N,k;Qb(N,k)}return null}function _(N,k,T,D){var U=k!==null?k.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return U!==null?null:l(N,k,""+T,D);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case zb:return T.key===U?c(N,k,T,D):null;case ag:return T.key===U?f(N,k,T,D):null;case cd:return U=T._init,_(N,k,U(T._payload),D)}if(jx(T)||wx(T))return U!==null?null:g(N,k,T,D,null);Qb(N,T)}return null}function E(N,k,T,D,U){if(typeof D=="string"&&D!==""||typeof D=="number")return N=N.get(T)||null,l(k,N,""+D,U);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case zb:return N=N.get(D.key===null?T:D.key)||null,c(k,N,D,U);case ag:return N=N.get(D.key===null?T:D.key)||null,f(k,N,D,U);case cd:var z=D._init;return E(N,k,T,z(D._payload),U)}if(jx(D)||wx(D))return N=N.get(T)||null,g(k,N,D,U,null);Qb(k,D)}return null}function P(N,k,T,D){for(var U=null,z=null,F=k,X=k=0,Z=null;F!==null&&X<T.length;X++){F.index>X?(Z=F,F=null):Z=F.sibling;var ne=_(N,F,T[X],D);if(ne===null){F===null&&(F=Z);break}n&&F&&ne.alternate===null&&e(N,F),k=i(ne,k,X),z===null?U=ne:z.sibling=ne,z=ne,F=Z}if(X===T.length)return t(N,F),ir&&pf(N,X),U;if(F===null){for(;X<T.length;X++)F=y(N,T[X],D),F!==null&&(k=i(F,k,X),z===null?U=F:z.sibling=F,z=F);return ir&&pf(N,X),U}for(F=r(N,F);X<T.length;X++)Z=E(F,N,X,T[X],D),Z!==null&&(n&&Z.alternate!==null&&F.delete(Z.key===null?X:Z.key),k=i(Z,k,X),z===null?U=Z:z.sibling=Z,z=Z);return n&&F.forEach(function(se){return e(N,se)}),ir&&pf(N,X),U}function S(N,k,T,D){var U=wx(T);if(typeof U!="function")throw Error(ke(150));if(T=U.call(T),T==null)throw Error(ke(151));for(var z=U=null,F=k,X=k=0,Z=null,ne=T.next();F!==null&&!ne.done;X++,ne=T.next()){F.index>X?(Z=F,F=null):Z=F.sibling;var se=_(N,F,ne.value,D);if(se===null){F===null&&(F=Z);break}n&&F&&se.alternate===null&&e(N,F),k=i(se,k,X),z===null?U=se:z.sibling=se,z=se,F=Z}if(ne.done)return t(N,F),ir&&pf(N,X),U;if(F===null){for(;!ne.done;X++,ne=T.next())ne=y(N,ne.value,D),ne!==null&&(k=i(ne,k,X),z===null?U=ne:z.sibling=ne,z=ne);return ir&&pf(N,X),U}for(F=r(N,F);!ne.done;X++,ne=T.next())ne=E(F,N,X,ne.value,D),ne!==null&&(n&&ne.alternate!==null&&F.delete(ne.key===null?X:ne.key),k=i(ne,k,X),z===null?U=ne:z.sibling=ne,z=ne);return n&&F.forEach(function(ee){return e(N,ee)}),ir&&pf(N,X),U}function I(N,k,T,D){if(typeof T=="object"&&T!==null&&T.type===lg&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case zb:e:{for(var U=T.key,z=k;z!==null;){if(z.key===U){if(U=T.type,U===lg){if(z.tag===7){t(N,z.sibling),k=s(z,T.props.children),k.return=N,N=k;break e}}else if(z.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===cd&&Vk(U)===z.type){t(N,z.sibling),k=s(z,T.props),k.ref=Ax(N,z,T),k.return=N,N=k;break e}t(N,z);break}else e(N,z);z=z.sibling}T.type===lg?(k=sp(T.props.children,N.mode,D,T.key),k.return=N,N=k):(D=z_(T.type,T.key,T.props,null,N.mode,D),D.ref=Ax(N,k,T),D.return=N,N=D)}return o(N);case ag:e:{for(z=T.key;k!==null;){if(k.key===z)if(k.tag===4&&k.stateNode.containerInfo===T.containerInfo&&k.stateNode.implementation===T.implementation){t(N,k.sibling),k=s(k,T.children||[]),k.return=N,N=k;break e}else{t(N,k);break}else e(N,k);k=k.sibling}k=$A(T,N.mode,D),k.return=N,N=k}return o(N);case cd:return z=T._init,I(N,k,z(T._payload),D)}if(jx(T))return P(N,k,T,D);if(wx(T))return S(N,k,T,D);Qb(N,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,k!==null&&k.tag===6?(t(N,k.sibling),k=s(k,T),k.return=N,N=k):(t(N,k),k=GA(T,N.mode,D),k.return=N,N=k),o(N)):t(N,k)}return I}var _1=fD(!0),mD=fD(!1),U2=Vh(null),z2=null,gg=null,TP=null;function PP(){TP=gg=z2=null}function IP(n){var e=U2.current;er(U2),n._currentValue=e}function hN(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Ig(n,e){z2=n,TP=gg=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Fi=!0),n.firstContext=null)}function ga(n){var e=n._currentValue;if(TP!==n)if(n={context:n,memoizedValue:e,next:null},gg===null){if(z2===null)throw Error(ke(308));gg=n,z2.dependencies={lanes:0,firstContext:n}}else gg=gg.next=n;return e}var Mf=null;function RP(n){Mf===null?Mf=[n]:Mf.push(n)}function pD(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,RP(e)):(t.next=s.next,s.next=t),e.interleaved=t,ku(n,r)}function ku(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ud=!1;function kP(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gD(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Au(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function _h(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,sn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ku(n,t)}return s=r.interleaved,s===null?(e.next=e,RP(r)):(e.next=s.next,s.next=e),r.interleaved=e,ku(n,t)}function D_(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,xP(n,t)}}function Wk(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function H2(n,e,t,r){var s=n.updateQueue;ud=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,f=c.next;c.next=null,o===null?i=f:o.next=f,o=c;var g=n.alternate;g!==null&&(g=g.updateQueue,l=g.lastBaseUpdate,l!==o&&(l===null?g.firstBaseUpdate=f:l.next=f,g.lastBaseUpdate=c))}if(i!==null){var y=s.baseState;o=0,g=f=c=null,l=i;do{var _=l.lane,E=l.eventTime;if((r&_)===_){g!==null&&(g=g.next={eventTime:E,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=n,S=l;switch(_=e,E=t,S.tag){case 1:if(P=S.payload,typeof P=="function"){y=P.call(E,y,_);break e}y=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=S.payload,_=typeof P=="function"?P.call(E,y,_):P,_==null)break e;y=pr({},y,_);break e;case 2:ud=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,_=s.effects,_===null?s.effects=[l]:_.push(l))}else E={eventTime:E,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},g===null?(f=g=E,c=y):g=g.next=E,o|=_;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);if(g===null&&(c=y),s.baseState=c,s.firstBaseUpdate=f,s.lastBaseUpdate=g,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);lp|=o,n.lanes=o,n.memoizedState=y}}function Gk(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(ke(191,s));s.call(r)}}}var nb={},nc=Vh(nb),kv=Vh(nb),Mv=Vh(nb);function Of(n){if(n===nb)throw Error(ke(174));return n}function MP(n,e){switch(Vn(Mv,e),Vn(kv,n),Vn(nc,nb),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$S(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=$S(e,n)}er(nc),Vn(nc,e)}function E1(){er(nc),er(kv),er(Mv)}function xD(n){Of(Mv.current);var e=Of(nc.current),t=$S(e,n.type);e!==t&&(Vn(kv,n),Vn(nc,t))}function OP(n){kv.current===n&&(er(nc),er(kv))}var dr=Vh(0);function V2(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var FA=[];function DP(){for(var n=0;n<FA.length;n++)FA[n]._workInProgressVersionPrimary=null;FA.length=0}var j_=Bu.ReactCurrentDispatcher,UA=Bu.ReactCurrentBatchConfig,ap=0,hr=null,Kr=null,ps=null,W2=!1,mv=!1,Ov=0,yV=0;function Us(){throw Error(ke(321))}function jP(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!nl(n[t],e[t]))return!1;return!0}function LP(n,e,t,r,s,i){if(ap=i,hr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,j_.current=n===null||n.memoizedState===null?EV:CV,n=t(r,s),mv){i=0;do{if(mv=!1,Ov=0,25<=i)throw Error(ke(301));i+=1,ps=Kr=null,e.updateQueue=null,j_.current=AV,n=t(r,s)}while(mv)}if(j_.current=G2,e=Kr!==null&&Kr.next!==null,ap=0,ps=Kr=hr=null,W2=!1,e)throw Error(ke(300));return n}function BP(){var n=Ov!==0;return Ov=0,n}function El(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ps===null?hr.memoizedState=ps=n:ps=ps.next=n,ps}function xa(){if(Kr===null){var n=hr.alternate;n=n!==null?n.memoizedState:null}else n=Kr.next;var e=ps===null?hr.memoizedState:ps.next;if(e!==null)ps=e,Kr=n;else{if(n===null)throw Error(ke(310));Kr=n,n={memoizedState:Kr.memoizedState,baseState:Kr.baseState,baseQueue:Kr.baseQueue,queue:Kr.queue,next:null},ps===null?hr.memoizedState=ps=n:ps=ps.next=n}return ps}function Dv(n,e){return typeof e=="function"?e(n):e}function zA(n){var e=xa(),t=e.queue;if(t===null)throw Error(ke(311));t.lastRenderedReducer=n;var r=Kr,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,f=i;do{var g=f.lane;if((ap&g)===g)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:n(r,f.action);else{var y={lane:g,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(l=c=y,o=r):c=c.next=y,hr.lanes|=g,lp|=g}f=f.next}while(f!==null&&f!==i);c===null?o=r:c.next=l,nl(r,e.memoizedState)||(Fi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,hr.lanes|=i,lp|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function HA(n){var e=xa(),t=e.queue;if(t===null)throw Error(ke(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do i=n(i,o.action),o=o.next;while(o!==s);nl(i,e.memoizedState)||(Fi=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function vD(){}function yD(n,e){var t=hr,r=xa(),s=e(),i=!nl(r.memoizedState,s);if(i&&(r.memoizedState=s,Fi=!0),r=r.queue,FP(_D.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||ps!==null&&ps.memoizedState.tag&1){if(t.flags|=2048,jv(9,bD.bind(null,t,r,s,e),void 0,null),gs===null)throw Error(ke(349));ap&30||wD(t,e,s)}return s}function wD(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=hr.updateQueue,e===null?(e={lastEffect:null,stores:null},hr.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function bD(n,e,t,r){e.value=t,e.getSnapshot=r,ED(e)&&CD(n)}function _D(n,e,t){return t(function(){ED(e)&&CD(n)})}function ED(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!nl(n,t)}catch{return!0}}function CD(n){var e=ku(n,1);e!==null&&el(e,n,1,-1)}function $k(n){var e=El();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dv,lastRenderedState:n},e.queue=n,n=n.dispatch=_V.bind(null,hr,n),[e.memoizedState,n]}function jv(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=hr.updateQueue,e===null?(e={lastEffect:null,stores:null},hr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function AD(){return xa().memoizedState}function L_(n,e,t,r){var s=El();hr.flags|=n,s.memoizedState=jv(1|e,t,void 0,r===void 0?null:r)}function lC(n,e,t,r){var s=xa();r=r===void 0?null:r;var i=void 0;if(Kr!==null){var o=Kr.memoizedState;if(i=o.destroy,r!==null&&jP(r,o.deps)){s.memoizedState=jv(e,t,i,r);return}}hr.flags|=n,s.memoizedState=jv(1|e,t,i,r)}function qk(n,e){return L_(8390656,8,n,e)}function FP(n,e){return lC(2048,8,n,e)}function SD(n,e){return lC(4,2,n,e)}function ND(n,e){return lC(4,4,n,e)}function TD(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function PD(n,e,t){return t=t!=null?t.concat([n]):null,lC(4,4,TD.bind(null,e,n),t)}function UP(){}function ID(n,e){var t=xa();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&jP(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function RD(n,e){var t=xa();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&jP(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function kD(n,e,t){return ap&21?(nl(t,e)||(t=L8(),hr.lanes|=t,lp|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Fi=!0),n.memoizedState=t)}function wV(n,e){var t=bn;bn=t!==0&&4>t?t:4,n(!0);var r=UA.transition;UA.transition={};try{n(!1),e()}finally{bn=t,UA.transition=r}}function MD(){return xa().memoizedState}function bV(n,e,t){var r=Ch(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},OD(n))DD(e,t);else if(t=pD(n,e,t,r),t!==null){var s=yi();el(t,n,r,s),jD(t,e,r)}}function _V(n,e,t){var r=Ch(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(OD(n))DD(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,t);if(s.hasEagerState=!0,s.eagerState=l,nl(l,o)){var c=e.interleaved;c===null?(s.next=s,RP(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}t=pD(n,e,s,r),t!==null&&(s=yi(),el(t,n,r,s),jD(t,e,r))}}function OD(n){var e=n.alternate;return n===hr||e!==null&&e===hr}function DD(n,e){mv=W2=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function jD(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,xP(n,t)}}var G2={readContext:ga,useCallback:Us,useContext:Us,useEffect:Us,useImperativeHandle:Us,useInsertionEffect:Us,useLayoutEffect:Us,useMemo:Us,useReducer:Us,useRef:Us,useState:Us,useDebugValue:Us,useDeferredValue:Us,useTransition:Us,useMutableSource:Us,useSyncExternalStore:Us,useId:Us,unstable_isNewReconciler:!1},EV={readContext:ga,useCallback:function(n,e){return El().memoizedState=[n,e===void 0?null:e],n},useContext:ga,useEffect:qk,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,L_(4194308,4,TD.bind(null,e,n),t)},useLayoutEffect:function(n,e){return L_(4194308,4,n,e)},useInsertionEffect:function(n,e){return L_(4,2,n,e)},useMemo:function(n,e){var t=El();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=El();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=bV.bind(null,hr,n),[r.memoizedState,n]},useRef:function(n){var e=El();return n={current:n},e.memoizedState=n},useState:$k,useDebugValue:UP,useDeferredValue:function(n){return El().memoizedState=n},useTransition:function(){var n=$k(!1),e=n[0];return n=wV.bind(null,n[1]),El().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=hr,s=El();if(ir){if(t===void 0)throw Error(ke(407));t=t()}else{if(t=e(),gs===null)throw Error(ke(349));ap&30||wD(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,qk(_D.bind(null,r,i,n),[n]),r.flags|=2048,jv(9,bD.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=El(),e=gs.identifierPrefix;if(ir){var t=Cu,r=Eu;t=(r&~(1<<32-Ja(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Ov++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=yV++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},CV={readContext:ga,useCallback:ID,useContext:ga,useEffect:FP,useImperativeHandle:PD,useInsertionEffect:SD,useLayoutEffect:ND,useMemo:RD,useReducer:zA,useRef:AD,useState:function(){return zA(Dv)},useDebugValue:UP,useDeferredValue:function(n){var e=xa();return kD(e,Kr.memoizedState,n)},useTransition:function(){var n=zA(Dv)[0],e=xa().memoizedState;return[n,e]},useMutableSource:vD,useSyncExternalStore:yD,useId:MD,unstable_isNewReconciler:!1},AV={readContext:ga,useCallback:ID,useContext:ga,useEffect:FP,useImperativeHandle:PD,useInsertionEffect:SD,useLayoutEffect:ND,useMemo:RD,useReducer:HA,useRef:AD,useState:function(){return HA(Dv)},useDebugValue:UP,useDeferredValue:function(n){var e=xa();return Kr===null?e.memoizedState=n:kD(e,Kr.memoizedState,n)},useTransition:function(){var n=HA(Dv)[0],e=xa().memoizedState;return[n,e]},useMutableSource:vD,useSyncExternalStore:yD,useId:MD,unstable_isNewReconciler:!1};function Ra(n,e){if(n&&n.defaultProps){e=pr({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function fN(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:pr({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var cC={isMounted:function(n){return(n=n._reactInternals)?bp(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=yi(),s=Ch(n),i=Au(r,s);i.payload=e,t!=null&&(i.callback=t),e=_h(n,i,s),e!==null&&(el(e,n,s,r),D_(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=yi(),s=Ch(n),i=Au(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=_h(n,i,s),e!==null&&(el(e,n,s,r),D_(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=yi(),r=Ch(n),s=Au(t,r);s.tag=2,e!=null&&(s.callback=e),e=_h(n,s,r),e!==null&&(el(e,n,r,t),D_(e,n,r))}};function Xk(n,e,t,r,s,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Tv(t,r)||!Tv(s,i):!0}function LD(n,e,t){var r=!1,s=Ih,i=e.contextType;return typeof i=="object"&&i!==null?i=ga(i):(s=Hi(e)?ip:ei.current,r=e.contextTypes,i=(r=r!=null)?w1(n,s):Ih),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cC,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function Yk(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&cC.enqueueReplaceState(e,e.state,null)}function mN(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},kP(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ga(i):(i=Hi(e)?ip:ei.current,s.context=w1(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(fN(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&cC.enqueueReplaceState(s,s.state,null),H2(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function C1(n,e){try{var t="",r=e;do t+=Jz(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function VA(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function pN(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var SV=typeof WeakMap=="function"?WeakMap:Map;function BD(n,e,t){t=Au(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){q2||(q2=!0,AN=r),pN(n,e)},t}function FD(n,e,t){t=Au(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){pN(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){pN(n,e),typeof r!="function"&&(Eh===null?Eh=new Set([this]):Eh.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Kk(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new SV;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=UV.bind(null,n,e,t),e.then(n,n))}function Zk(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Qk(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Au(-1,1),e.tag=2,_h(t,e,1))),t.lanes|=1),n)}var NV=Bu.ReactCurrentOwner,Fi=!1;function pi(n,e,t,r){e.child=n===null?mD(e,null,t,r):_1(e,n.child,t,r)}function Jk(n,e,t,r,s){t=t.render;var i=e.ref;return Ig(e,s),r=LP(n,e,t,r,i,s),t=BP(),n!==null&&!Fi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Mu(n,e,s)):(ir&&t&&AP(e),e.flags|=1,pi(n,e,r,s),e.child)}function e4(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!XP(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,UD(n,e,i,r,s)):(n=z_(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:Tv,t(o,r)&&n.ref===e.ref)return Mu(n,e,s)}return e.flags|=1,n=Ah(i,r),n.ref=e.ref,n.return=e,e.child=n}function UD(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(Tv(i,r)&&n.ref===e.ref)if(Fi=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&(Fi=!0);else return e.lanes=n.lanes,Mu(n,e,s)}return gN(n,e,t,r,s)}function zD(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vn(vg,wo),wo|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Vn(vg,wo),wo|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,Vn(vg,wo),wo|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,Vn(vg,wo),wo|=r;return pi(n,e,s,t),e.child}function HD(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function gN(n,e,t,r,s){var i=Hi(t)?ip:ei.current;return i=w1(e,i),Ig(e,s),t=LP(n,e,t,r,i,s),r=BP(),n!==null&&!Fi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Mu(n,e,s)):(ir&&r&&AP(e),e.flags|=1,pi(n,e,t,s),e.child)}function t4(n,e,t,r,s){if(Hi(t)){var i=!0;L2(e)}else i=!1;if(Ig(e,s),e.stateNode===null)B_(n,e),LD(e,t,r),mN(e,t,r,s),r=!0;else if(n===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,f=t.contextType;typeof f=="object"&&f!==null?f=ga(f):(f=Hi(t)?ip:ei.current,f=w1(e,f));var g=t.getDerivedStateFromProps,y=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function";y||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==f)&&Yk(e,o,r,f),ud=!1;var _=e.memoizedState;o.state=_,H2(e,r,o,s),c=e.memoizedState,l!==r||_!==c||zi.current||ud?(typeof g=="function"&&(fN(e,t,g,r),c=e.memoizedState),(l=ud||Xk(e,t,l,r,_,c,f))?(y||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=f,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,gD(n,e),l=e.memoizedProps,f=e.type===e.elementType?l:Ra(e.type,l),o.props=f,y=e.pendingProps,_=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=ga(c):(c=Hi(t)?ip:ei.current,c=w1(e,c));var E=t.getDerivedStateFromProps;(g=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==y||_!==c)&&Yk(e,o,r,c),ud=!1,_=e.memoizedState,o.state=_,H2(e,r,o,s);var P=e.memoizedState;l!==y||_!==P||zi.current||ud?(typeof E=="function"&&(fN(e,t,E,r),P=e.memoizedState),(f=ud||Xk(e,t,f,r,_,P,c)||!1)?(g||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&_===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&_===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=c,r=f):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&_===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&_===n.memoizedState||(e.flags|=1024),r=!1)}return xN(n,e,t,r,i,s)}function xN(n,e,t,r,s,i){HD(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Uk(e,t,!1),Mu(n,e,i);r=e.stateNode,NV.current=e;var l=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=_1(e,n.child,null,i),e.child=_1(e,null,l,i)):pi(n,e,l,i),e.memoizedState=r.state,s&&Uk(e,t,!0),e.child}function VD(n){var e=n.stateNode;e.pendingContext?Fk(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Fk(n,e.context,!1),MP(n,e.containerInfo)}function n4(n,e,t,r,s){return b1(),NP(s),e.flags|=256,pi(n,e,t,r),e.child}var vN={dehydrated:null,treeContext:null,retryLane:0};function yN(n){return{baseLanes:n,cachePool:null,transitions:null}}function WD(n,e,t){var r=e.pendingProps,s=dr.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=n!==null&&n.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Vn(dr,s&1),n===null)return dN(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=hC(o,r,0,null),n=sp(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=yN(t),e.memoizedState=vN,n):zP(e,o));if(s=n.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return TV(n,e,o,r,l,s,t);if(i){i=r.fallback,o=e.mode,s=n.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ah(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ah(l,i):(i=sp(i,o,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=n.child.memoizedState,o=o===null?yN(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=vN,r}return i=n.child,n=i.sibling,r=Ah(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function zP(n,e){return e=hC({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Jb(n,e,t,r){return r!==null&&NP(r),_1(e,n.child,null,t),n=zP(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function TV(n,e,t,r,s,i,o){if(t)return e.flags&256?(e.flags&=-257,r=VA(Error(ke(422))),Jb(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=hC({mode:"visible",children:r.children},s,0,null),i=sp(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&_1(e,n.child,null,o),e.child.memoizedState=yN(o),e.memoizedState=vN,i);if(!(e.mode&1))return Jb(n,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ke(419)),r=VA(i,r,void 0),Jb(n,e,o,r)}if(l=(o&n.childLanes)!==0,Fi||l){if(r=gs,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ku(n,s),el(r,n,s,-1))}return qP(),r=VA(Error(ke(421))),Jb(n,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=zV.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,So=bh(s.nextSibling),No=e,ir=!0,Ya=null,n!==null&&(la[ca++]=Eu,la[ca++]=Cu,la[ca++]=op,Eu=n.id,Cu=n.overflow,op=e),e=zP(e,r.children),e.flags|=4096,e)}function r4(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),hN(n.return,e,t)}function WA(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function GD(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(pi(n,e,r.children,t),r=dr.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&r4(n,t,e);else if(n.tag===19)r4(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Vn(dr,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&V2(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),WA(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&V2(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}WA(e,!0,t,null,i);break;case"together":WA(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function B_(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Mu(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),lp|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ke(153));if(e.child!==null){for(n=e.child,t=Ah(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ah(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function PV(n,e,t){switch(e.tag){case 3:VD(e),b1();break;case 5:xD(e);break;case 1:Hi(e.type)&&L2(e);break;case 4:MP(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Vn(U2,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Vn(dr,dr.current&1),e.flags|=128,null):t&e.child.childLanes?WD(n,e,t):(Vn(dr,dr.current&1),n=Mu(n,e,t),n!==null?n.sibling:null);Vn(dr,dr.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return GD(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Vn(dr,dr.current),r)break;return null;case 22:case 23:return e.lanes=0,zD(n,e,t)}return Mu(n,e,t)}var $D,wN,qD,XD;$D=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};wN=function(){};qD=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,Of(nc.current);var i=null;switch(t){case"input":s=HS(n,s),r=HS(n,r),i=[];break;case"select":s=pr({},s,{value:void 0}),r=pr({},r,{value:void 0}),i=[];break;case"textarea":s=GS(n,s),r=GS(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=D2)}qS(t,r);var o;t=null;for(f in s)if(!r.hasOwnProperty(f)&&s.hasOwnProperty(f)&&s[f]!=null)if(f==="style"){var l=s[f];for(o in l)l.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(bv.hasOwnProperty(f)?i||(i=[]):(i=i||[]).push(f,null));for(f in r){var c=r[f];if(l=s!=null?s[f]:void 0,r.hasOwnProperty(f)&&c!==l&&(c!=null||l!=null))if(f==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(i||(i=[]),i.push(f,t)),t=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(bv.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&Zn("scroll",n),i||l===c||(i=[])):(i=i||[]).push(f,c))}t&&(i=i||[]).push("style",t);var f=i;(e.updateQueue=f)&&(e.flags|=4)}};XD=function(n,e,t,r){t!==r&&(e.flags|=4)};function Sx(n,e){if(!ir)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function zs(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function IV(n,e,t){var r=e.pendingProps;switch(SP(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zs(e),null;case 1:return Hi(e.type)&&j2(),zs(e),null;case 3:return r=e.stateNode,E1(),er(zi),er(ei),DP(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Zb(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ya!==null&&(TN(Ya),Ya=null))),wN(n,e),zs(e),null;case 5:OP(e);var s=Of(Mv.current);if(t=e.type,n!==null&&e.stateNode!=null)qD(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ke(166));return zs(e),null}if(n=Of(nc.current),Zb(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[Yl]=e,r[Rv]=i,n=(e.mode&1)!==0,t){case"dialog":Zn("cancel",r),Zn("close",r);break;case"iframe":case"object":case"embed":Zn("load",r);break;case"video":case"audio":for(s=0;s<Bx.length;s++)Zn(Bx[s],r);break;case"source":Zn("error",r);break;case"img":case"image":case"link":Zn("error",r),Zn("load",r);break;case"details":Zn("toggle",r);break;case"input":hk(r,i),Zn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Zn("invalid",r);break;case"textarea":mk(r,i),Zn("invalid",r)}qS(t,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Kb(r.textContent,l,n),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Kb(r.textContent,l,n),s=["children",""+l]):bv.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Zn("scroll",r)}switch(t){case"input":Hb(r),fk(r,i,!0);break;case"textarea":Hb(r),pk(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=D2)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=_8(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Yl]=e,n[Rv]=r,$D(n,e,!1,!1),e.stateNode=n;e:{switch(o=XS(t,r),t){case"dialog":Zn("cancel",n),Zn("close",n),s=r;break;case"iframe":case"object":case"embed":Zn("load",n),s=r;break;case"video":case"audio":for(s=0;s<Bx.length;s++)Zn(Bx[s],n);s=r;break;case"source":Zn("error",n),s=r;break;case"img":case"image":case"link":Zn("error",n),Zn("load",n),s=r;break;case"details":Zn("toggle",n),s=r;break;case"input":hk(n,r),s=HS(n,r),Zn("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=pr({},r,{value:void 0}),Zn("invalid",n);break;case"textarea":mk(n,r),s=GS(n,r),Zn("invalid",n);break;default:s=r}qS(t,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?A8(n,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&E8(n,c)):i==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&_v(n,c):typeof c=="number"&&_v(n,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bv.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Zn("scroll",n):c!=null&&dP(n,i,c,o))}switch(t){case"input":Hb(n),fk(n,r,!1);break;case"textarea":Hb(n),pk(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Ph(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?Sg(n,!!r.multiple,i,!1):r.defaultValue!=null&&Sg(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=D2)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zs(e),null;case 6:if(n&&e.stateNode!=null)XD(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ke(166));if(t=Of(Mv.current),Of(nc.current),Zb(e)){if(r=e.stateNode,t=e.memoizedProps,r[Yl]=e,(i=r.nodeValue!==t)&&(n=No,n!==null))switch(n.tag){case 3:Kb(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Kb(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Yl]=e,e.stateNode=r}return zs(e),null;case 13:if(er(dr),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ir&&So!==null&&e.mode&1&&!(e.flags&128))hD(),b1(),e.flags|=98560,i=!1;else if(i=Zb(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(ke(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ke(317));i[Yl]=e}else b1(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zs(e),i=!1}else Ya!==null&&(TN(Ya),Ya=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||dr.current&1?Zr===0&&(Zr=3):qP())),e.updateQueue!==null&&(e.flags|=4),zs(e),null);case 4:return E1(),wN(n,e),n===null&&Pv(e.stateNode.containerInfo),zs(e),null;case 10:return IP(e.type._context),zs(e),null;case 17:return Hi(e.type)&&j2(),zs(e),null;case 19:if(er(dr),i=e.memoizedState,i===null)return zs(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Sx(i,!1);else{if(Zr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=V2(n),o!==null){for(e.flags|=128,Sx(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Vn(dr,dr.current&1|2),e.child}n=n.sibling}i.tail!==null&&Rr()>A1&&(e.flags|=128,r=!0,Sx(i,!1),e.lanes=4194304)}else{if(!r)if(n=V2(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Sx(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ir)return zs(e),null}else 2*Rr()-i.renderingStartTime>A1&&t!==1073741824&&(e.flags|=128,r=!0,Sx(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Rr(),e.sibling=null,t=dr.current,Vn(dr,r?t&1|2:t&1),e):(zs(e),null);case 22:case 23:return $P(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wo&1073741824&&(zs(e),e.subtreeFlags&6&&(e.flags|=8192)):zs(e),null;case 24:return null;case 25:return null}throw Error(ke(156,e.tag))}function RV(n,e){switch(SP(e),e.tag){case 1:return Hi(e.type)&&j2(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return E1(),er(zi),er(ei),DP(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return OP(e),null;case 13:if(er(dr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ke(340));b1()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return er(dr),null;case 4:return E1(),null;case 10:return IP(e.type._context),null;case 22:case 23:return $P(),null;case 24:return null;default:return null}}var e_=!1,Ks=!1,kV=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function xg(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Sr(n,e,r)}else t.current=null}function bN(n,e,t){try{t()}catch(r){Sr(n,e,r)}}var s4=!1;function MV(n,e){if(sN=k2,n=J8(),CP(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,l=-1,c=-1,f=0,g=0,y=n,_=null;t:for(;;){for(var E;y!==t||s!==0&&y.nodeType!==3||(l=o+s),y!==i||r!==0&&y.nodeType!==3||(c=o+r),y.nodeType===3&&(o+=y.nodeValue.length),(E=y.firstChild)!==null;)_=y,y=E;for(;;){if(y===n)break t;if(_===t&&++f===s&&(l=o),_===i&&++g===r&&(c=o),(E=y.nextSibling)!==null)break;y=_,_=y.parentNode}y=E}t=l===-1||c===-1?null:{start:l,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(iN={focusedElem:n,selectionRange:t},k2=!1,Ye=e;Ye!==null;)if(e=Ye,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ye=n;else for(;Ye!==null;){e=Ye;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var S=P.memoizedProps,I=P.memoizedState,N=e.stateNode,k=N.getSnapshotBeforeUpdate(e.elementType===e.type?S:Ra(e.type,S),I);N.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(D){Sr(e,e.return,D)}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}return P=s4,s4=!1,P}function pv(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&bN(e,t,i)}s=s.next}while(s!==r)}}function uC(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function _N(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function YD(n){var e=n.alternate;e!==null&&(n.alternate=null,YD(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Yl],delete e[Rv],delete e[lN],delete e[pV],delete e[gV])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function KD(n){return n.tag===5||n.tag===3||n.tag===4}function i4(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||KD(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function EN(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=D2));else if(r!==4&&(n=n.child,n!==null))for(EN(n,e,t),n=n.sibling;n!==null;)EN(n,e,t),n=n.sibling}function CN(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(CN(n,e,t),n=n.sibling;n!==null;)CN(n,e,t),n=n.sibling}var Ns=null,Xa=!1;function Ju(n,e,t){for(t=t.child;t!==null;)ZD(n,e,t),t=t.sibling}function ZD(n,e,t){if(tc&&typeof tc.onCommitFiberUnmount=="function")try{tc.onCommitFiberUnmount(nC,t)}catch{}switch(t.tag){case 5:Ks||xg(t,e);case 6:var r=Ns,s=Xa;Ns=null,Ju(n,e,t),Ns=r,Xa=s,Ns!==null&&(Xa?(n=Ns,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ns.removeChild(t.stateNode));break;case 18:Ns!==null&&(Xa?(n=Ns,t=t.stateNode,n.nodeType===8?LA(n.parentNode,t):n.nodeType===1&&LA(n,t),Sv(n)):LA(Ns,t.stateNode));break;case 4:r=Ns,s=Xa,Ns=t.stateNode.containerInfo,Xa=!0,Ju(n,e,t),Ns=r,Xa=s;break;case 0:case 11:case 14:case 15:if(!Ks&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&bN(t,e,o),s=s.next}while(s!==r)}Ju(n,e,t);break;case 1:if(!Ks&&(xg(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(l){Sr(t,e,l)}Ju(n,e,t);break;case 21:Ju(n,e,t);break;case 22:t.mode&1?(Ks=(r=Ks)||t.memoizedState!==null,Ju(n,e,t),Ks=r):Ju(n,e,t);break;default:Ju(n,e,t)}}function o4(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new kV),e.forEach(function(r){var s=HV.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function Sa(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ns=l.stateNode,Xa=!1;break e;case 3:Ns=l.stateNode.containerInfo,Xa=!0;break e;case 4:Ns=l.stateNode.containerInfo,Xa=!0;break e}l=l.return}if(Ns===null)throw Error(ke(160));ZD(i,o,s),Ns=null,Xa=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(f){Sr(s,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)QD(e,n),e=e.sibling}function QD(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Sa(e,n),yl(n),r&4){try{pv(3,n,n.return),uC(3,n)}catch(S){Sr(n,n.return,S)}try{pv(5,n,n.return)}catch(S){Sr(n,n.return,S)}}break;case 1:Sa(e,n),yl(n),r&512&&t!==null&&xg(t,t.return);break;case 5:if(Sa(e,n),yl(n),r&512&&t!==null&&xg(t,t.return),n.flags&32){var s=n.stateNode;try{_v(s,"")}catch(S){Sr(n,n.return,S)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&w8(s,i),XS(l,o);var f=XS(l,i);for(o=0;o<c.length;o+=2){var g=c[o],y=c[o+1];g==="style"?A8(s,y):g==="dangerouslySetInnerHTML"?E8(s,y):g==="children"?_v(s,y):dP(s,g,y,f)}switch(l){case"input":VS(s,i);break;case"textarea":b8(s,i);break;case"select":var _=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?Sg(s,!!i.multiple,E,!1):_!==!!i.multiple&&(i.defaultValue!=null?Sg(s,!!i.multiple,i.defaultValue,!0):Sg(s,!!i.multiple,i.multiple?[]:"",!1))}s[Rv]=i}catch(S){Sr(n,n.return,S)}}break;case 6:if(Sa(e,n),yl(n),r&4){if(n.stateNode===null)throw Error(ke(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(S){Sr(n,n.return,S)}}break;case 3:if(Sa(e,n),yl(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Sv(e.containerInfo)}catch(S){Sr(n,n.return,S)}break;case 4:Sa(e,n),yl(n);break;case 13:Sa(e,n),yl(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(WP=Rr())),r&4&&o4(n);break;case 22:if(g=t!==null&&t.memoizedState!==null,n.mode&1?(Ks=(f=Ks)||g,Sa(e,n),Ks=f):Sa(e,n),yl(n),r&8192){if(f=n.memoizedState!==null,(n.stateNode.isHidden=f)&&!g&&n.mode&1)for(Ye=n,g=n.child;g!==null;){for(y=Ye=g;Ye!==null;){switch(_=Ye,E=_.child,_.tag){case 0:case 11:case 14:case 15:pv(4,_,_.return);break;case 1:xg(_,_.return);var P=_.stateNode;if(typeof P.componentWillUnmount=="function"){r=_,t=_.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(S){Sr(r,t,S)}}break;case 5:xg(_,_.return);break;case 22:if(_.memoizedState!==null){l4(y);continue}}E!==null?(E.return=_,Ye=E):l4(y)}g=g.sibling}e:for(g=null,y=n;;){if(y.tag===5){if(g===null){g=y;try{s=y.stateNode,f?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=y.stateNode,c=y.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=C8("display",o))}catch(S){Sr(n,n.return,S)}}}else if(y.tag===6){if(g===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(S){Sr(n,n.return,S)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===n)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;g===y&&(g=null),y=y.return}g===y&&(g=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Sa(e,n),yl(n),r&4&&o4(n);break;case 21:break;default:Sa(e,n),yl(n)}}function yl(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(KD(t)){var r=t;break e}t=t.return}throw Error(ke(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(_v(s,""),r.flags&=-33);var i=i4(n);CN(n,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=i4(n);EN(n,l,o);break;default:throw Error(ke(161))}}catch(c){Sr(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function OV(n,e,t){Ye=n,JD(n)}function JD(n,e,t){for(var r=(n.mode&1)!==0;Ye!==null;){var s=Ye,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||e_;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ks;l=e_;var f=Ks;if(e_=o,(Ks=c)&&!f)for(Ye=s;Ye!==null;)o=Ye,c=o.child,o.tag===22&&o.memoizedState!==null?c4(s):c!==null?(c.return=o,Ye=c):c4(s);for(;i!==null;)Ye=i,JD(i),i=i.sibling;Ye=s,e_=l,Ks=f}a4(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ye=i):a4(n)}}function a4(n){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ks||uC(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ks)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Ra(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Gk(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Gk(e,o,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var g=f.memoizedState;if(g!==null){var y=g.dehydrated;y!==null&&Sv(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}Ks||e.flags&512&&_N(e)}catch(_){Sr(e,e.return,_)}}if(e===n){Ye=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}}function l4(n){for(;Ye!==null;){var e=Ye;if(e===n){Ye=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ye=t;break}Ye=e.return}}function c4(n){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{uC(4,e)}catch(c){Sr(e,t,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Sr(e,s,c)}}var i=e.return;try{_N(e)}catch(c){Sr(e,i,c)}break;case 5:var o=e.return;try{_N(e)}catch(c){Sr(e,o,c)}}}catch(c){Sr(e,e.return,c)}if(e===n){Ye=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Ye=l;break}Ye=e.return}}var DV=Math.ceil,$2=Bu.ReactCurrentDispatcher,HP=Bu.ReactCurrentOwner,fa=Bu.ReactCurrentBatchConfig,sn=0,gs=null,Fr=null,Rs=0,wo=0,vg=Vh(0),Zr=0,Lv=null,lp=0,dC=0,VP=0,gv=null,Bi=null,WP=0,A1=1/0,jc=null,q2=!1,AN=null,Eh=null,t_=!1,mh=null,X2=0,xv=0,SN=null,F_=-1,U_=0;function yi(){return sn&6?Rr():F_!==-1?F_:F_=Rr()}function Ch(n){return n.mode&1?sn&2&&Rs!==0?Rs&-Rs:vV.transition!==null?(U_===0&&(U_=L8()),U_):(n=bn,n!==0||(n=window.event,n=n===void 0?16:W8(n.type)),n):1}function el(n,e,t,r){if(50<xv)throw xv=0,SN=null,Error(ke(185));Jw(n,t,r),(!(sn&2)||n!==gs)&&(n===gs&&(!(sn&2)&&(dC|=t),Zr===4&&fd(n,Rs)),Vi(n,r),t===1&&sn===0&&!(e.mode&1)&&(A1=Rr()+500,aC&&Wh()))}function Vi(n,e){var t=n.callbackNode;vH(n,e);var r=R2(n,n===gs?Rs:0);if(r===0)t!==null&&vk(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&vk(t),e===1)n.tag===0?xV(u4.bind(null,n)):cD(u4.bind(null,n)),fV(function(){!(sn&6)&&Wh()}),t=null;else{switch(B8(r)){case 1:t=gP;break;case 4:t=D8;break;case 16:t=I2;break;case 536870912:t=j8;break;default:t=I2}t=a6(t,e6.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function e6(n,e){if(F_=-1,U_=0,sn&6)throw Error(ke(327));var t=n.callbackNode;if(Rg()&&n.callbackNode!==t)return null;var r=R2(n,n===gs?Rs:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Y2(n,r);else{e=r;var s=sn;sn|=2;var i=n6();(gs!==n||Rs!==e)&&(jc=null,A1=Rr()+500,rp(n,e));do try{BV();break}catch(l){t6(n,l)}while(!0);PP(),$2.current=i,sn=s,Fr!==null?e=0:(gs=null,Rs=0,e=Zr)}if(e!==0){if(e===2&&(s=JS(n),s!==0&&(r=s,e=NN(n,s))),e===1)throw t=Lv,rp(n,0),fd(n,r),Vi(n,Rr()),t;if(e===6)fd(n,r);else{if(s=n.current.alternate,!(r&30)&&!jV(s)&&(e=Y2(n,r),e===2&&(i=JS(n),i!==0&&(r=i,e=NN(n,i))),e===1))throw t=Lv,rp(n,0),fd(n,r),Vi(n,Rr()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(ke(345));case 2:gf(n,Bi,jc);break;case 3:if(fd(n,r),(r&130023424)===r&&(e=WP+500-Rr(),10<e)){if(R2(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){yi(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=aN(gf.bind(null,n,Bi,jc),e);break}gf(n,Bi,jc);break;case 4:if(fd(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var o=31-Ja(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Rr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*DV(r/1960))-r,10<r){n.timeoutHandle=aN(gf.bind(null,n,Bi,jc),r);break}gf(n,Bi,jc);break;case 5:gf(n,Bi,jc);break;default:throw Error(ke(329))}}}return Vi(n,Rr()),n.callbackNode===t?e6.bind(null,n):null}function NN(n,e){var t=gv;return n.current.memoizedState.isDehydrated&&(rp(n,e).flags|=256),n=Y2(n,e),n!==2&&(e=Bi,Bi=t,e!==null&&TN(e)),n}function TN(n){Bi===null?Bi=n:Bi.push.apply(Bi,n)}function jV(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!nl(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fd(n,e){for(e&=~VP,e&=~dC,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ja(e),r=1<<t;n[t]=-1,e&=~r}}function u4(n){if(sn&6)throw Error(ke(327));Rg();var e=R2(n,0);if(!(e&1))return Vi(n,Rr()),null;var t=Y2(n,e);if(n.tag!==0&&t===2){var r=JS(n);r!==0&&(e=r,t=NN(n,r))}if(t===1)throw t=Lv,rp(n,0),fd(n,e),Vi(n,Rr()),t;if(t===6)throw Error(ke(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,gf(n,Bi,jc),Vi(n,Rr()),null}function GP(n,e){var t=sn;sn|=1;try{return n(e)}finally{sn=t,sn===0&&(A1=Rr()+500,aC&&Wh())}}function cp(n){mh!==null&&mh.tag===0&&!(sn&6)&&Rg();var e=sn;sn|=1;var t=fa.transition,r=bn;try{if(fa.transition=null,bn=1,n)return n()}finally{bn=r,fa.transition=t,sn=e,!(sn&6)&&Wh()}}function $P(){wo=vg.current,er(vg)}function rp(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,hV(t)),Fr!==null)for(t=Fr.return;t!==null;){var r=t;switch(SP(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&j2();break;case 3:E1(),er(zi),er(ei),DP();break;case 5:OP(r);break;case 4:E1();break;case 13:er(dr);break;case 19:er(dr);break;case 10:IP(r.type._context);break;case 22:case 23:$P()}t=t.return}if(gs=n,Fr=n=Ah(n.current,null),Rs=wo=e,Zr=0,Lv=null,VP=dC=lp=0,Bi=gv=null,Mf!==null){for(e=0;e<Mf.length;e++)if(t=Mf[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}t.pending=r}Mf=null}return n}function t6(n,e){do{var t=Fr;try{if(PP(),j_.current=G2,W2){for(var r=hr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}W2=!1}if(ap=0,ps=Kr=hr=null,mv=!1,Ov=0,HP.current=null,t===null||t.return===null){Zr=1,Lv=e,Fr=null;break}e:{var i=n,o=t.return,l=t,c=e;if(e=Rs,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,g=l,y=g.tag;if(!(g.mode&1)&&(y===0||y===11||y===15)){var _=g.alternate;_?(g.updateQueue=_.updateQueue,g.memoizedState=_.memoizedState,g.lanes=_.lanes):(g.updateQueue=null,g.memoizedState=null)}var E=Zk(o);if(E!==null){E.flags&=-257,Qk(E,o,l,i,e),E.mode&1&&Kk(i,f,e),e=E,c=f;var P=e.updateQueue;if(P===null){var S=new Set;S.add(c),e.updateQueue=S}else P.add(c);break e}else{if(!(e&1)){Kk(i,f,e),qP();break e}c=Error(ke(426))}}else if(ir&&l.mode&1){var I=Zk(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Qk(I,o,l,i,e),NP(C1(c,l));break e}}i=c=C1(c,l),Zr!==4&&(Zr=2),gv===null?gv=[i]:gv.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var N=BD(i,c,e);Wk(i,N);break e;case 1:l=c;var k=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof k.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Eh===null||!Eh.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=FD(i,l,e);Wk(i,D);break e}}i=i.return}while(i!==null)}s6(t)}catch(U){e=U,Fr===t&&t!==null&&(Fr=t=t.return);continue}break}while(!0)}function n6(){var n=$2.current;return $2.current=G2,n===null?G2:n}function qP(){(Zr===0||Zr===3||Zr===2)&&(Zr=4),gs===null||!(lp&268435455)&&!(dC&268435455)||fd(gs,Rs)}function Y2(n,e){var t=sn;sn|=2;var r=n6();(gs!==n||Rs!==e)&&(jc=null,rp(n,e));do try{LV();break}catch(s){t6(n,s)}while(!0);if(PP(),sn=t,$2.current=r,Fr!==null)throw Error(ke(261));return gs=null,Rs=0,Zr}function LV(){for(;Fr!==null;)r6(Fr)}function BV(){for(;Fr!==null&&!cH();)r6(Fr)}function r6(n){var e=o6(n.alternate,n,wo);n.memoizedProps=n.pendingProps,e===null?s6(n):Fr=e,HP.current=null}function s6(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=RV(t,e),t!==null){t.flags&=32767,Fr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Zr=6,Fr=null;return}}else if(t=IV(t,e,wo),t!==null){Fr=t;return}if(e=e.sibling,e!==null){Fr=e;return}Fr=e=n}while(e!==null);Zr===0&&(Zr=5)}function gf(n,e,t){var r=bn,s=fa.transition;try{fa.transition=null,bn=1,FV(n,e,t,r)}finally{fa.transition=s,bn=r}return null}function FV(n,e,t,r){do Rg();while(mh!==null);if(sn&6)throw Error(ke(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ke(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(yH(n,i),n===gs&&(Fr=gs=null,Rs=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||t_||(t_=!0,a6(I2,function(){return Rg(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=fa.transition,fa.transition=null;var o=bn;bn=1;var l=sn;sn|=4,HP.current=null,MV(n,t),QD(t,n),iV(iN),k2=!!sN,iN=sN=null,n.current=t,OV(t),uH(),sn=l,bn=o,fa.transition=i}else n.current=t;if(t_&&(t_=!1,mh=n,X2=s),i=n.pendingLanes,i===0&&(Eh=null),fH(t.stateNode),Vi(n,Rr()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(q2)throw q2=!1,n=AN,AN=null,n;return X2&1&&n.tag!==0&&Rg(),i=n.pendingLanes,i&1?n===SN?xv++:(xv=0,SN=n):xv=0,Wh(),null}function Rg(){if(mh!==null){var n=B8(X2),e=fa.transition,t=bn;try{if(fa.transition=null,bn=16>n?16:n,mh===null)var r=!1;else{if(n=mh,mh=null,X2=0,sn&6)throw Error(ke(331));var s=sn;for(sn|=4,Ye=n.current;Ye!==null;){var i=Ye,o=i.child;if(Ye.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var f=l[c];for(Ye=f;Ye!==null;){var g=Ye;switch(g.tag){case 0:case 11:case 15:pv(8,g,i)}var y=g.child;if(y!==null)y.return=g,Ye=y;else for(;Ye!==null;){g=Ye;var _=g.sibling,E=g.return;if(YD(g),g===f){Ye=null;break}if(_!==null){_.return=E,Ye=_;break}Ye=E}}}var P=i.alternate;if(P!==null){var S=P.child;if(S!==null){P.child=null;do{var I=S.sibling;S.sibling=null,S=I}while(S!==null)}}Ye=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ye=o;else e:for(;Ye!==null;){if(i=Ye,i.flags&2048)switch(i.tag){case 0:case 11:case 15:pv(9,i,i.return)}var N=i.sibling;if(N!==null){N.return=i.return,Ye=N;break e}Ye=i.return}}var k=n.current;for(Ye=k;Ye!==null;){o=Ye;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Ye=T;else e:for(o=k;Ye!==null;){if(l=Ye,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:uC(9,l)}}catch(U){Sr(l,l.return,U)}if(l===o){Ye=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,Ye=D;break e}Ye=l.return}}if(sn=s,Wh(),tc&&typeof tc.onPostCommitFiberRoot=="function")try{tc.onPostCommitFiberRoot(nC,n)}catch{}r=!0}return r}finally{bn=t,fa.transition=e}}return!1}function d4(n,e,t){e=C1(t,e),e=BD(n,e,1),n=_h(n,e,1),e=yi(),n!==null&&(Jw(n,1,e),Vi(n,e))}function Sr(n,e,t){if(n.tag===3)d4(n,n,t);else for(;e!==null;){if(e.tag===3){d4(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Eh===null||!Eh.has(r))){n=C1(t,n),n=FD(e,n,1),e=_h(e,n,1),n=yi(),e!==null&&(Jw(e,1,n),Vi(e,n));break}}e=e.return}}function UV(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=yi(),n.pingedLanes|=n.suspendedLanes&t,gs===n&&(Rs&t)===t&&(Zr===4||Zr===3&&(Rs&130023424)===Rs&&500>Rr()-WP?rp(n,0):VP|=t),Vi(n,e)}function i6(n,e){e===0&&(n.mode&1?(e=Gb,Gb<<=1,!(Gb&130023424)&&(Gb=4194304)):e=1);var t=yi();n=ku(n,e),n!==null&&(Jw(n,e,t),Vi(n,t))}function zV(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),i6(n,t)}function HV(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(ke(314))}r!==null&&r.delete(e),i6(n,t)}var o6;o6=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||zi.current)Fi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Fi=!1,PV(n,e,t);Fi=!!(n.flags&131072)}else Fi=!1,ir&&e.flags&1048576&&uD(e,F2,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;B_(n,e),n=e.pendingProps;var s=w1(e,ei.current);Ig(e,t),s=LP(null,e,r,n,s,t);var i=BP();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Hi(r)?(i=!0,L2(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,kP(e),s.updater=cC,e.stateNode=s,s._reactInternals=e,mN(e,r,n,t),e=xN(null,e,r,!0,i,t)):(e.tag=0,ir&&i&&AP(e),pi(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(B_(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=WV(r),n=Ra(r,n),s){case 0:e=gN(null,e,r,n,t);break e;case 1:e=t4(null,e,r,n,t);break e;case 11:e=Jk(null,e,r,n,t);break e;case 14:e=e4(null,e,r,Ra(r.type,n),t);break e}throw Error(ke(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ra(r,s),gN(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ra(r,s),t4(n,e,r,s,t);case 3:e:{if(VD(e),n===null)throw Error(ke(387));r=e.pendingProps,i=e.memoizedState,s=i.element,gD(n,e),H2(e,r,null,t);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=C1(Error(ke(423)),e),e=n4(n,e,r,t,s);break e}else if(r!==s){s=C1(Error(ke(424)),e),e=n4(n,e,r,t,s);break e}else for(So=bh(e.stateNode.containerInfo.firstChild),No=e,ir=!0,Ya=null,t=mD(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(b1(),r===s){e=Mu(n,e,t);break e}pi(n,e,r,t)}e=e.child}return e;case 5:return xD(e),n===null&&dN(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,o=s.children,oN(r,s)?o=null:i!==null&&oN(r,i)&&(e.flags|=32),HD(n,e),pi(n,e,o,t),e.child;case 6:return n===null&&dN(e),null;case 13:return WD(n,e,t);case 4:return MP(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=_1(e,null,r,t):pi(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ra(r,s),Jk(n,e,r,s,t);case 7:return pi(n,e,e.pendingProps,t),e.child;case 8:return pi(n,e,e.pendingProps.children,t),e.child;case 12:return pi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Vn(U2,r._currentValue),r._currentValue=o,i!==null)if(nl(i.value,o)){if(i.children===s.children&&!zi.current){e=Mu(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Au(-1,t&-t),c.tag=2;var f=i.updateQueue;if(f!==null){f=f.shared;var g=f.pending;g===null?c.next=c:(c.next=g.next,g.next=c),f.pending=c}}i.lanes|=t,c=i.alternate,c!==null&&(c.lanes|=t),hN(i.return,t,e),l.lanes|=t;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ke(341));o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),hN(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}pi(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ig(e,t),s=ga(s),r=r(s),e.flags|=1,pi(n,e,r,t),e.child;case 14:return r=e.type,s=Ra(r,e.pendingProps),s=Ra(r.type,s),e4(n,e,r,s,t);case 15:return UD(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ra(r,s),B_(n,e),e.tag=1,Hi(r)?(n=!0,L2(e)):n=!1,Ig(e,t),LD(e,r,s),mN(e,r,s,t),xN(null,e,r,!0,n,t);case 19:return GD(n,e,t);case 22:return zD(n,e,t)}throw Error(ke(156,e.tag))};function a6(n,e){return O8(n,e)}function VV(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ha(n,e,t,r){return new VV(n,e,t,r)}function XP(n){return n=n.prototype,!(!n||!n.isReactComponent)}function WV(n){if(typeof n=="function")return XP(n)?1:0;if(n!=null){if(n=n.$$typeof,n===fP)return 11;if(n===mP)return 14}return 2}function Ah(n,e){var t=n.alternate;return t===null?(t=ha(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function z_(n,e,t,r,s,i){var o=2;if(r=n,typeof n=="function")XP(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case lg:return sp(t.children,s,i,e);case hP:o=8,s|=8;break;case BS:return n=ha(12,t,e,s|2),n.elementType=BS,n.lanes=i,n;case FS:return n=ha(13,t,e,s),n.elementType=FS,n.lanes=i,n;case US:return n=ha(19,t,e,s),n.elementType=US,n.lanes=i,n;case x8:return hC(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case p8:o=10;break e;case g8:o=9;break e;case fP:o=11;break e;case mP:o=14;break e;case cd:o=16,r=null;break e}throw Error(ke(130,n==null?n:typeof n,""))}return e=ha(o,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function sp(n,e,t,r){return n=ha(7,n,r,e),n.lanes=t,n}function hC(n,e,t,r){return n=ha(22,n,r,e),n.elementType=x8,n.lanes=t,n.stateNode={isHidden:!1},n}function GA(n,e,t){return n=ha(6,n,null,e),n.lanes=t,n}function $A(n,e,t){return e=ha(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function GV(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=SA(0),this.expirationTimes=SA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=SA(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function YP(n,e,t,r,s,i,o,l,c){return n=new GV(n,e,t,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ha(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},kP(i),n}function $V(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ag,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function l6(n){if(!n)return Ih;n=n._reactInternals;e:{if(bp(n)!==n||n.tag!==1)throw Error(ke(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Hi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ke(171))}if(n.tag===1){var t=n.type;if(Hi(t))return lD(n,t,e)}return e}function c6(n,e,t,r,s,i,o,l,c){return n=YP(t,r,!0,n,s,i,o,l,c),n.context=l6(null),t=n.current,r=yi(),s=Ch(t),i=Au(r,s),i.callback=e??null,_h(t,i,s),n.current.lanes=s,Jw(n,s,r),Vi(n,r),n}function fC(n,e,t,r){var s=e.current,i=yi(),o=Ch(s);return t=l6(t),e.context===null?e.context=t:e.pendingContext=t,e=Au(i,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=_h(s,e,o),n!==null&&(el(n,s,o,i),D_(n,s,o)),o}function K2(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function h4(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function KP(n,e){h4(n,e),(n=n.alternate)&&h4(n,e)}function qV(){return null}var u6=typeof reportError=="function"?reportError:function(n){console.error(n)};function ZP(n){this._internalRoot=n}mC.prototype.render=ZP.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ke(409));fC(n,e,null,null)};mC.prototype.unmount=ZP.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;cp(function(){fC(null,n,null,null)}),e[Ru]=null}};function mC(n){this._internalRoot=n}mC.prototype.unstable_scheduleHydration=function(n){if(n){var e=z8();n={blockedOn:null,target:n,priority:e};for(var t=0;t<hd.length&&e!==0&&e<hd[t].priority;t++);hd.splice(t,0,n),t===0&&V8(n)}};function QP(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function pC(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function f4(){}function XV(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var f=K2(o);i.call(f)}}var o=c6(e,r,n,0,null,!1,!1,"",f4);return n._reactRootContainer=o,n[Ru]=o.current,Pv(n.nodeType===8?n.parentNode:n),cp(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var f=K2(c);l.call(f)}}var c=YP(n,0,!1,null,null,!1,!1,"",f4);return n._reactRootContainer=c,n[Ru]=c.current,Pv(n.nodeType===8?n.parentNode:n),cp(function(){fC(e,c,t,r)}),c}function gC(n,e,t,r,s){var i=t._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=K2(o);l.call(c)}}fC(e,o,n,s)}else o=XV(t,e,n,s,r);return K2(o)}F8=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Lx(e.pendingLanes);t!==0&&(xP(e,t|1),Vi(e,Rr()),!(sn&6)&&(A1=Rr()+500,Wh()))}break;case 13:cp(function(){var r=ku(n,1);if(r!==null){var s=yi();el(r,n,1,s)}}),KP(n,1)}};vP=function(n){if(n.tag===13){var e=ku(n,134217728);if(e!==null){var t=yi();el(e,n,134217728,t)}KP(n,134217728)}};U8=function(n){if(n.tag===13){var e=Ch(n),t=ku(n,e);if(t!==null){var r=yi();el(t,n,e,r)}KP(n,e)}};z8=function(){return bn};H8=function(n,e){var t=bn;try{return bn=n,e()}finally{bn=t}};KS=function(n,e,t){switch(e){case"input":if(VS(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=oC(r);if(!s)throw Error(ke(90));y8(r),VS(r,s)}}}break;case"textarea":b8(n,t);break;case"select":e=t.value,e!=null&&Sg(n,!!t.multiple,e,!1)}};T8=GP;P8=cp;var YV={usingClientEntryPoint:!1,Events:[tb,hg,oC,S8,N8,GP]},Nx={findFiberByHostInstance:kf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KV={bundleType:Nx.bundleType,version:Nx.version,rendererPackageName:Nx.rendererPackageName,rendererConfig:Nx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bu.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=k8(n),n===null?null:n.stateNode},findFiberByHostInstance:Nx.findFiberByHostInstance||qV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var n_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!n_.isDisabled&&n_.supportsFiber)try{nC=n_.inject(KV),tc=n_}catch{}}Mo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YV;Mo.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!QP(e))throw Error(ke(200));return $V(n,e,null,t)};Mo.createRoot=function(n,e){if(!QP(n))throw Error(ke(299));var t=!1,r="",s=u6;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=YP(n,1,!1,null,null,t,!1,r,s),n[Ru]=e.current,Pv(n.nodeType===8?n.parentNode:n),new ZP(e)};Mo.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ke(188)):(n=Object.keys(n).join(","),Error(ke(268,n)));return n=k8(e),n=n===null?null:n.stateNode,n};Mo.flushSync=function(n){return cp(n)};Mo.hydrate=function(n,e,t){if(!pC(e))throw Error(ke(200));return gC(null,n,e,!0,t)};Mo.hydrateRoot=function(n,e,t){if(!QP(n))throw Error(ke(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",o=u6;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=c6(e,null,n,1,t??null,s,!1,i,o),n[Ru]=e.current,Pv(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new mC(e)};Mo.render=function(n,e,t){if(!pC(e))throw Error(ke(200));return gC(null,n,e,!1,t)};Mo.unmountComponentAtNode=function(n){if(!pC(n))throw Error(ke(40));return n._reactRootContainer?(cp(function(){gC(null,null,n,!1,function(){n._reactRootContainer=null,n[Ru]=null})}),!0):!1};Mo.unstable_batchedUpdates=GP;Mo.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!pC(t))throw Error(ke(200));if(n==null||n._reactInternals===void 0)throw Error(ke(38));return gC(n,e,t,!1,r)};Mo.version="18.3.1-next-f1338f8080-20240426";function d6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d6)}catch(n){console.error(n)}}d6(),d8.exports=Mo;var V1=d8.exports;const ZV=JE(V1);var h6,m4=V1;h6=m4.createRoot,m4.hydrateRoot;function QV(n,e){const t=M.createContext(e),r=i=>{const{children:o,...l}=i,c=M.useMemo(()=>l,Object.values(l));return h.jsx(t.Provider,{value:c,children:o})};r.displayName=n+"Provider";function s(i){const o=M.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${n}\``)}return[r,s]}function ya(n,e=[]){let t=[];function r(i,o){const l=M.createContext(o),c=t.length;t=[...t,o];const f=y=>{var N;const{scope:_,children:E,...P}=y,S=((N=_==null?void 0:_[n])==null?void 0:N[c])||l,I=M.useMemo(()=>P,Object.values(P));return h.jsx(S.Provider,{value:I,children:E})};f.displayName=i+"Provider";function g(y,_){var S;const E=((S=_==null?void 0:_[n])==null?void 0:S[c])||l,P=M.useContext(E);if(P)return P;if(o!==void 0)return o;throw new Error(`\`${y}\` must be used within \`${i}\``)}return[f,g]}const s=()=>{const i=t.map(o=>M.createContext(o));return function(l){const c=(l==null?void 0:l[n])||i;return M.useMemo(()=>({[`__scope${n}`]:{...l,[n]:c}}),[l,c])}};return s.scopeName=n,[r,JV(s,...e)]}function JV(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:f})=>{const y=c(i)[`__scope${f}`];return{...l,...y}},{});return M.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function p4(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function dc(...n){return e=>{let t=!1;const r=n.map(s=>{const i=p4(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():p4(n[s],null)}}}}function Jt(...n){return M.useCallback(dc(...n),n)}function Ue(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}var Jr=globalThis!=null&&globalThis.document?M.useLayoutEffect:()=>{},eW=tC[" useId ".trim().toString()]||(()=>{}),tW=0;function tl(n){const[e,t]=M.useState(eW());return Jr(()=>{t(r=>r??String(tW++))},[n]),e?`radix-${e}`:""}var nW=tC[" useInsertionEffect ".trim().toString()]||Jr;function Rh({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,i,o]=rW({defaultProp:e,onChange:t}),l=n!==void 0,c=l?n:s;{const g=M.useRef(n!==void 0);M.useEffect(()=>{const y=g.current;y!==l&&console.warn(`${r} is changing from ${y?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=l},[l,r])}const f=M.useCallback(g=>{var y;if(l){const _=sW(g)?g(n):g;_!==n&&((y=o.current)==null||y.call(o,_))}else i(g)},[l,n,i,o]);return[c,f]}function rW({defaultProp:n,onChange:e}){const[t,r]=M.useState(n),s=M.useRef(t),i=M.useRef(e);return nW(()=>{i.current=e},[e]),M.useEffect(()=>{var o;s.current!==t&&((o=i.current)==null||o.call(i,t),s.current=t)},[t,s]),[t,r,i]}function sW(n){return typeof n=="function"}function iW(n){const e=oW(n),t=M.forwardRef((r,s)=>{const{children:i,...o}=r,l=M.Children.toArray(i),c=l.find(lW);if(c){const f=c.props.children,g=l.map(y=>y===c?M.Children.count(f)>1?M.Children.only(null):M.isValidElement(f)?f.props.children:null:y);return h.jsx(e,{...o,ref:s,children:M.isValidElement(f)?M.cloneElement(f,void 0,g):null})}return h.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}function oW(n){const e=M.forwardRef((t,r)=>{const{children:s,...i}=t;if(M.isValidElement(s)){const o=uW(s),l=cW(i,s.props);return s.type!==M.Fragment&&(l.ref=r?dc(r,o):o),M.cloneElement(s,l)}return M.Children.count(s)>1?M.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var aW=Symbol("radix.slottable");function lW(n){return M.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===aW}function cW(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function uW(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var dW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_t=dW.reduce((n,e)=>{const t=iW(`Primitive.${e}`),r=M.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function f6(n,e){n&&V1.flushSync(()=>n.dispatchEvent(e))}function rl(n){const e=M.useRef(n);return M.useEffect(()=>{e.current=n}),M.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function hW(n,e=globalThis==null?void 0:globalThis.document){const t=rl(n);M.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var fW="DismissableLayer",PN="dismissableLayer.update",mW="dismissableLayer.pointerDownOutside",pW="dismissableLayer.focusOutside",g4,m6=M.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),W1=M.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=n,f=M.useContext(m6),[g,y]=M.useState(null),_=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,E]=M.useState({}),P=Jt(e,F=>y(F)),S=Array.from(f.layers),[I]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),N=S.indexOf(I),k=g?S.indexOf(g):-1,T=f.layersWithOutsidePointerEventsDisabled.size>0,D=k>=N,U=vW(F=>{const X=F.target,Z=[...f.branches].some(ne=>ne.contains(X));!D||Z||(s==null||s(F),o==null||o(F),F.defaultPrevented||l==null||l())},_),z=yW(F=>{const X=F.target;[...f.branches].some(ne=>ne.contains(X))||(i==null||i(F),o==null||o(F),F.defaultPrevented||l==null||l())},_);return hW(F=>{k===f.layers.size-1&&(r==null||r(F),!F.defaultPrevented&&l&&(F.preventDefault(),l()))},_),M.useEffect(()=>{if(g)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(g4=_.body.style.pointerEvents,_.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(g)),f.layers.add(g),x4(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(_.body.style.pointerEvents=g4)}},[g,_,t,f]),M.useEffect(()=>()=>{g&&(f.layers.delete(g),f.layersWithOutsidePointerEventsDisabled.delete(g),x4())},[g,f]),M.useEffect(()=>{const F=()=>E({});return document.addEventListener(PN,F),()=>document.removeEventListener(PN,F)},[]),h.jsx(_t.div,{...c,ref:P,style:{pointerEvents:T?D?"auto":"none":void 0,...n.style},onFocusCapture:Ue(n.onFocusCapture,z.onFocusCapture),onBlurCapture:Ue(n.onBlurCapture,z.onBlurCapture),onPointerDownCapture:Ue(n.onPointerDownCapture,U.onPointerDownCapture)})});W1.displayName=fW;var gW="DismissableLayerBranch",xW=M.forwardRef((n,e)=>{const t=M.useContext(m6),r=M.useRef(null),s=Jt(e,r);return M.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),h.jsx(_t.div,{...n,ref:s})});xW.displayName=gW;function vW(n,e=globalThis==null?void 0:globalThis.document){const t=rl(n),r=M.useRef(!1),s=M.useRef(()=>{});return M.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){p6(mW,t,f,{discrete:!0})};const f={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function yW(n,e=globalThis==null?void 0:globalThis.document){const t=rl(n),r=M.useRef(!1);return M.useEffect(()=>{const s=i=>{i.target&&!r.current&&p6(pW,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function x4(){const n=new CustomEvent(PN);document.dispatchEvent(n)}function p6(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?f6(s,i):s.dispatchEvent(i)}var qA="focusScope.autoFocusOnMount",XA="focusScope.autoFocusOnUnmount",v4={bubbles:!1,cancelable:!0},wW="FocusScope",rb=M.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=n,[l,c]=M.useState(null),f=rl(s),g=rl(i),y=M.useRef(null),_=Jt(e,S=>c(S)),E=M.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;M.useEffect(()=>{if(r){let S=function(T){if(E.paused||!l)return;const D=T.target;l.contains(D)?y.current=D:id(y.current,{select:!0})},I=function(T){if(E.paused||!l)return;const D=T.relatedTarget;D!==null&&(l.contains(D)||id(y.current,{select:!0}))},N=function(T){if(document.activeElement===document.body)for(const U of T)U.removedNodes.length>0&&id(l)};document.addEventListener("focusin",S),document.addEventListener("focusout",I);const k=new MutationObserver(N);return l&&k.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",I),k.disconnect()}}},[r,l,E.paused]),M.useEffect(()=>{if(l){w4.add(E);const S=document.activeElement;if(!l.contains(S)){const N=new CustomEvent(qA,v4);l.addEventListener(qA,f),l.dispatchEvent(N),N.defaultPrevented||(bW(SW(g6(l)),{select:!0}),document.activeElement===S&&id(l))}return()=>{l.removeEventListener(qA,f),setTimeout(()=>{const N=new CustomEvent(XA,v4);l.addEventListener(XA,g),l.dispatchEvent(N),N.defaultPrevented||id(S??document.body,{select:!0}),l.removeEventListener(XA,g),w4.remove(E)},0)}}},[l,f,g,E]);const P=M.useCallback(S=>{if(!t&&!r||E.paused)return;const I=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,N=document.activeElement;if(I&&N){const k=S.currentTarget,[T,D]=_W(k);T&&D?!S.shiftKey&&N===D?(S.preventDefault(),t&&id(T,{select:!0})):S.shiftKey&&N===T&&(S.preventDefault(),t&&id(D,{select:!0})):N===k&&S.preventDefault()}},[t,r,E.paused]);return h.jsx(_t.div,{tabIndex:-1,...o,ref:_,onKeyDown:P})});rb.displayName=wW;function bW(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(id(r,{select:e}),document.activeElement!==t)return}function _W(n){const e=g6(n),t=y4(e,n),r=y4(e.reverse(),n);return[t,r]}function g6(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function y4(n,e){for(const t of n)if(!EW(t,{upTo:e}))return t}function EW(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function CW(n){return n instanceof HTMLInputElement&&"select"in n}function id(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&CW(n)&&e&&n.select()}}var w4=AW();function AW(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=b4(n,e),n.unshift(e)},remove(e){var t;n=b4(n,e),(t=n[0])==null||t.resume()}}}function b4(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function SW(n){return n.filter(e=>e.tagName!=="A")}var NW="Portal",sb=M.forwardRef((n,e)=>{var l;const{container:t,...r}=n,[s,i]=M.useState(!1);Jr(()=>i(!0),[]);const o=t||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?ZV.createPortal(h.jsx(_t.div,{...r,ref:e}),o):null});sb.displayName=NW;function TW(n,e){return M.useReducer((t,r)=>e[t][r]??t,n)}var Do=n=>{const{present:e,children:t}=n,r=PW(e),s=typeof t=="function"?t({present:r.isPresent}):M.Children.only(t),i=Jt(r.ref,IW(s));return typeof t=="function"||r.isPresent?M.cloneElement(s,{ref:i}):null};Do.displayName="Presence";function PW(n){const[e,t]=M.useState(),r=M.useRef(null),s=M.useRef(n),i=M.useRef("none"),o=n?"mounted":"unmounted",[l,c]=TW(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return M.useEffect(()=>{const f=r_(r.current);i.current=l==="mounted"?f:"none"},[l]),Jr(()=>{const f=r.current,g=s.current;if(g!==n){const _=i.current,E=r_(f);n?c("MOUNT"):E==="none"||(f==null?void 0:f.display)==="none"?c("UNMOUNT"):c(g&&_!==E?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,c]),Jr(()=>{if(e){let f;const g=e.ownerDocument.defaultView??window,y=E=>{const S=r_(r.current).includes(CSS.escape(E.animationName));if(E.target===e&&S&&(c("ANIMATION_END"),!s.current)){const I=e.style.animationFillMode;e.style.animationFillMode="forwards",f=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=I)})}},_=E=>{E.target===e&&(i.current=r_(r.current))};return e.addEventListener("animationstart",_),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{g.clearTimeout(f),e.removeEventListener("animationstart",_),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:M.useCallback(f=>{r.current=f?getComputedStyle(f):null,t(f)},[])}}function r_(n){return(n==null?void 0:n.animationName)||"none"}function IW(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var YA=0;function xC(){M.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??_4()),document.body.insertAdjacentElement("beforeend",n[1]??_4()),YA++,()=>{YA===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),YA--}},[])}function _4(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var IN=function(n,e){return IN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])},IN(n,e)};function x6(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");IN(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ua=function(){return ua=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ua.apply(this,arguments)};function Gh(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function v6(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var l=n.length-1;l>=0;l--)(o=n[l])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i}function y6(n,e){return function(t,r){e(t,r,n)}}function w6(n,e,t,r,s,i){function o(N){if(N!==void 0&&typeof N!="function")throw new TypeError("Function expected");return N}for(var l=r.kind,c=l==="getter"?"get":l==="setter"?"set":"value",f=!e&&n?r.static?n:n.prototype:null,g=e||(f?Object.getOwnPropertyDescriptor(f,r.name):{}),y,_=!1,E=t.length-1;E>=0;E--){var P={};for(var S in r)P[S]=S==="access"?{}:r[S];for(var S in r.access)P.access[S]=r.access[S];P.addInitializer=function(N){if(_)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(N||null))};var I=(0,t[E])(l==="accessor"?{get:g.get,set:g.set}:g[c],P);if(l==="accessor"){if(I===void 0)continue;if(I===null||typeof I!="object")throw new TypeError("Object expected");(y=o(I.get))&&(g.get=y),(y=o(I.set))&&(g.set=y),(y=o(I.init))&&s.unshift(y)}else(y=o(I))&&(l==="field"?s.unshift(y):g[c]=y)}f&&Object.defineProperty(f,r.name,g),_=!0}function b6(n,e,t){for(var r=arguments.length>2,s=0;s<e.length;s++)t=r?e[s].call(n,t):e[s].call(n);return r?t:void 0}function _6(n){return typeof n=="symbol"?n:"".concat(n)}function E6(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function C6(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function rt(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(g){try{f(r.next(g))}catch(y){o(y)}}function c(g){try{f(r.throw(g))}catch(y){o(y)}}function f(g){g.done?i(g.value):s(g.value).then(l,c)}f((r=r.apply(n,e||[])).next())})}function A6(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(f){return function(g){return c([f,g])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(r=1,s&&(i=f[0]&2?s.return:f[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,f[1])).done)return i;switch(s=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,s=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(g){f=[6,g],s=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var vC=Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]};function S6(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&vC(e,n,t)}function Z2(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function JP(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return i}function N6(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(JP(arguments[e]));return n}function T6(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),s=0,e=0;e<t;e++)for(var i=arguments[e],o=0,l=i.length;o<l;o++,s++)r[s]=i[o];return r}function eI(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}function S1(n){return this instanceof S1?(this.v=n,this):new S1(n)}function P6(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(E){return function(P){return Promise.resolve(P).then(E,y)}}function l(E,P){r[E]&&(s[E]=function(S){return new Promise(function(I,N){i.push([E,S,I,N])>1||c(E,S)})},P&&(s[E]=P(s[E])))}function c(E,P){try{f(r[E](P))}catch(S){_(i[0][3],S)}}function f(E){E.value instanceof S1?Promise.resolve(E.value.v).then(g,y):_(i[0][2],E)}function g(E){c("next",E)}function y(E){c("throw",E)}function _(E,P){E(P),i.shift(),i.length&&c(i[0][0],i[0][1])}}function I6(n){var e,t;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=n[s]?function(o){return(t=!t)?{value:S1(n[s](o)),done:!1}:i?i(o):o}:i}}function R6(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Z2=="function"?Z2(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(o){return new Promise(function(l,c){o=n[i](o),s(l,c,o.done,o.value)})}}function s(i,o,l,c){Promise.resolve(c).then(function(f){i({value:f,done:l})},o)}}function k6(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var RW=Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e},RN=function(n){return RN=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},RN(n)};function M6(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=RN(n),r=0;r<t.length;r++)t[r]!=="default"&&vC(e,n,t[r]);return RW(e,n),e}function O6(n){return n&&n.__esModule?n:{default:n}}function D6(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function j6(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t}function L6(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function B6(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,s;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}var kW=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function F6(n){function e(i){n.error=n.hasError?new kW(i,n.error,"An error was suppressed during disposal."):i,n.hasError=!0}var t,r=0;function s(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(s);if(t.dispose){var i=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(i).then(s,function(o){return e(o),s()})}else r|=1}catch(o){e(o)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return s()}function U6(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,s,i,o){return r?e?".jsx":".js":s&&(!i||!o)?t:s+i+"."+o.toLowerCase()+"js"}):n}const MW={__extends:x6,__assign:ua,__rest:Gh,__decorate:v6,__param:y6,__esDecorate:w6,__runInitializers:b6,__propKey:_6,__setFunctionName:E6,__metadata:C6,__awaiter:rt,__generator:A6,__createBinding:vC,__exportStar:S6,__values:Z2,__read:JP,__spread:N6,__spreadArrays:T6,__spreadArray:eI,__await:S1,__asyncGenerator:P6,__asyncDelegator:I6,__asyncValues:R6,__makeTemplateObject:k6,__importStar:M6,__importDefault:O6,__classPrivateFieldGet:D6,__classPrivateFieldSet:j6,__classPrivateFieldIn:L6,__addDisposableResource:B6,__disposeResources:F6,__rewriteRelativeImportExtension:U6},OW=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:B6,get __assign(){return ua},__asyncDelegator:I6,__asyncGenerator:P6,__asyncValues:R6,__await:S1,__awaiter:rt,__classPrivateFieldGet:D6,__classPrivateFieldIn:L6,__classPrivateFieldSet:j6,__createBinding:vC,__decorate:v6,__disposeResources:F6,__esDecorate:w6,__exportStar:S6,__extends:x6,__generator:A6,__importDefault:O6,__importStar:M6,__makeTemplateObject:k6,__metadata:C6,__param:y6,__propKey:_6,__read:JP,__rest:Gh,__rewriteRelativeImportExtension:U6,__runInitializers:b6,__setFunctionName:E6,__spread:N6,__spreadArray:eI,__spreadArrays:T6,__values:Z2,default:MW},Symbol.toStringTag,{value:"Module"}));var H_="right-scroll-bar-position",V_="width-before-scroll-bar",DW="with-scroll-bars-hidden",jW="--removed-body-scroll-bar-size";function KA(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function LW(n,e){var t=M.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var BW=typeof window<"u"?M.useLayoutEffect:M.useEffect,E4=new WeakMap;function FW(n,e){var t=LW(null,function(r){return n.forEach(function(s){return KA(s,r)})});return BW(function(){var r=E4.get(t);if(r){var s=new Set(r),i=new Set(n),o=t.current;s.forEach(function(l){i.has(l)||KA(l,null)}),i.forEach(function(l){s.has(l)||KA(l,o)})}E4.set(t,n)},[n]),t}function UW(n){return n}function zW(n,e){e===void 0&&(e=UW);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var o=e(i,r);return t.push(o),function(){t=t.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(l){return i(l)},filter:function(){return t}}},assignMedium:function(i){r=!0;var o=[];if(t.length){var l=t;t=[],l.forEach(i),o=t}var c=function(){var g=o;o=[],g.forEach(i)},f=function(){return Promise.resolve().then(c)};f(),t={push:function(g){o.push(g),f()},filter:function(g){return o=o.filter(g),t}}}};return s}function HW(n){n===void 0&&(n={});var e=zW(null);return e.options=ua({async:!0,ssr:!1},n),e}var z6=function(n){var e=n.sideCar,t=Gh(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return M.createElement(r,ua({},t))};z6.isSideCarExport=!0;function VW(n,e){return n.useMedium(e),z6}var H6=HW(),ZA=function(){},yC=M.forwardRef(function(n,e){var t=M.useRef(null),r=M.useState({onScrollCapture:ZA,onWheelCapture:ZA,onTouchMoveCapture:ZA}),s=r[0],i=r[1],o=n.forwardProps,l=n.children,c=n.className,f=n.removeScrollBar,g=n.enabled,y=n.shards,_=n.sideCar,E=n.noRelative,P=n.noIsolation,S=n.inert,I=n.allowPinchZoom,N=n.as,k=N===void 0?"div":N,T=n.gapMode,D=Gh(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),U=_,z=FW([t,e]),F=ua(ua({},D),s);return M.createElement(M.Fragment,null,g&&M.createElement(U,{sideCar:H6,removeScrollBar:f,shards:y,noRelative:E,noIsolation:P,inert:S,setCallbacks:i,allowPinchZoom:!!I,lockRef:t,gapMode:T}),o?M.cloneElement(M.Children.only(l),ua(ua({},F),{ref:z})):M.createElement(k,ua({},F,{className:c,ref:z}),l))});yC.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yC.classNames={fullWidth:V_,zeroRight:H_};var WW=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function GW(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=WW();return e&&n.setAttribute("nonce",e),n}function $W(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function qW(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var XW=function(){var n=0,e=null;return{add:function(t){n==0&&(e=GW())&&($W(e,t),qW(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},YW=function(){var n=XW();return function(e,t){M.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},V6=function(){var n=YW(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},KW={left:0,top:0,right:0,gap:0},QA=function(n){return parseInt(n||"",10)||0},ZW=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[QA(t),QA(r),QA(s)]},QW=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return KW;var e=ZW(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},JW=V6(),kg="data-scroll-locked",eG=function(n,e,t,r){var s=n.left,i=n.top,o=n.right,l=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(DW,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(kg,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(H_,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(V_,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(H_," .").concat(H_,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(V_," .").concat(V_,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(kg,`] {
    `).concat(jW,": ").concat(l,`px;
  }
`)},C4=function(){var n=parseInt(document.body.getAttribute(kg)||"0",10);return isFinite(n)?n:0},tG=function(){M.useEffect(function(){return document.body.setAttribute(kg,(C4()+1).toString()),function(){var n=C4()-1;n<=0?document.body.removeAttribute(kg):document.body.setAttribute(kg,n.toString())}},[])},nG=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;tG();var i=M.useMemo(function(){return QW(s)},[s]);return M.createElement(JW,{styles:eG(i,!e,s,t?"":"!important")})},kN=!1;if(typeof window<"u")try{var s_=Object.defineProperty({},"passive",{get:function(){return kN=!0,!0}});window.addEventListener("test",s_,s_),window.removeEventListener("test",s_,s_)}catch{kN=!1}var Dp=kN?{passive:!1}:!1,rG=function(n){return n.tagName==="TEXTAREA"},W6=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!rG(n)&&t[e]==="visible")},sG=function(n){return W6(n,"overflowY")},iG=function(n){return W6(n,"overflowX")},A4=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=G6(n,r);if(s){var i=$6(n,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},oG=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},aG=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},G6=function(n,e){return n==="v"?sG(e):iG(e)},$6=function(n,e){return n==="v"?oG(e):aG(e)},lG=function(n,e){return n==="h"&&e==="rtl"?-1:1},cG=function(n,e,t,r,s){var i=lG(n,window.getComputedStyle(e).direction),o=i*r,l=t.target,c=e.contains(l),f=!1,g=o>0,y=0,_=0;do{if(!l)break;var E=$6(n,l),P=E[0],S=E[1],I=E[2],N=S-I-i*P;(P||N)&&G6(n,l)&&(y+=N,_+=P);var k=l.parentNode;l=k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE?k.host:k}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(g&&Math.abs(y)<1||!g&&Math.abs(_)<1)&&(f=!0),f},i_=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},S4=function(n){return[n.deltaX,n.deltaY]},N4=function(n){return n&&"current"in n?n.current:n},uG=function(n,e){return n[0]===e[0]&&n[1]===e[1]},dG=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},hG=0,jp=[];function fG(n){var e=M.useRef([]),t=M.useRef([0,0]),r=M.useRef(),s=M.useState(hG++)[0],i=M.useState(V6)[0],o=M.useRef(n);M.useEffect(function(){o.current=n},[n]),M.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var S=eI([n.lockRef.current],(n.shards||[]).map(N4),!0).filter(Boolean);return S.forEach(function(I){return I.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),S.forEach(function(I){return I.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var l=M.useCallback(function(S,I){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!o.current.allowPinchZoom;var N=i_(S),k=t.current,T="deltaX"in S?S.deltaX:k[0]-N[0],D="deltaY"in S?S.deltaY:k[1]-N[1],U,z=S.target,F=Math.abs(T)>Math.abs(D)?"h":"v";if("touches"in S&&F==="h"&&z.type==="range")return!1;var X=A4(F,z);if(!X)return!0;if(X?U=F:(U=F==="v"?"h":"v",X=A4(F,z)),!X)return!1;if(!r.current&&"changedTouches"in S&&(T||D)&&(r.current=U),!U)return!0;var Z=r.current||U;return cG(Z,I,S,Z==="h"?T:D)},[]),c=M.useCallback(function(S){var I=S;if(!(!jp.length||jp[jp.length-1]!==i)){var N="deltaY"in I?S4(I):i_(I),k=e.current.filter(function(U){return U.name===I.type&&(U.target===I.target||I.target===U.shadowParent)&&uG(U.delta,N)})[0];if(k&&k.should){I.cancelable&&I.preventDefault();return}if(!k){var T=(o.current.shards||[]).map(N4).filter(Boolean).filter(function(U){return U.contains(I.target)}),D=T.length>0?l(I,T[0]):!o.current.noIsolation;D&&I.cancelable&&I.preventDefault()}}},[]),f=M.useCallback(function(S,I,N,k){var T={name:S,delta:I,target:N,should:k,shadowParent:mG(N)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(D){return D!==T})},1)},[]),g=M.useCallback(function(S){t.current=i_(S),r.current=void 0},[]),y=M.useCallback(function(S){f(S.type,S4(S),S.target,l(S,n.lockRef.current))},[]),_=M.useCallback(function(S){f(S.type,i_(S),S.target,l(S,n.lockRef.current))},[]);M.useEffect(function(){return jp.push(i),n.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:_}),document.addEventListener("wheel",c,Dp),document.addEventListener("touchmove",c,Dp),document.addEventListener("touchstart",g,Dp),function(){jp=jp.filter(function(S){return S!==i}),document.removeEventListener("wheel",c,Dp),document.removeEventListener("touchmove",c,Dp),document.removeEventListener("touchstart",g,Dp)}},[]);var E=n.removeScrollBar,P=n.inert;return M.createElement(M.Fragment,null,P?M.createElement(i,{styles:dG(s)}):null,E?M.createElement(nG,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function mG(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const pG=VW(H6,fG);var ib=M.forwardRef(function(n,e){return M.createElement(yC,ua({},n,{ref:e,sideCar:pG}))});ib.classNames=yC.classNames;var gG=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Lp=new WeakMap,o_=new WeakMap,a_={},JA=0,q6=function(n){return n&&(n.host||q6(n.parentNode))},xG=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=q6(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},vG=function(n,e,t,r){var s=xG(e,Array.isArray(n)?n:[n]);a_[t]||(a_[t]=new WeakMap);var i=a_[t],o=[],l=new Set,c=new Set(s),f=function(y){!y||l.has(y)||(l.add(y),f(y.parentNode))};s.forEach(f);var g=function(y){!y||c.has(y)||Array.prototype.forEach.call(y.children,function(_){if(l.has(_))g(_);else try{var E=_.getAttribute(r),P=E!==null&&E!=="false",S=(Lp.get(_)||0)+1,I=(i.get(_)||0)+1;Lp.set(_,S),i.set(_,I),o.push(_),S===1&&P&&o_.set(_,!0),I===1&&_.setAttribute(t,"true"),P||_.setAttribute(r,"true")}catch(N){console.error("aria-hidden: cannot operate on ",_,N)}})};return g(e),l.clear(),JA++,function(){o.forEach(function(y){var _=Lp.get(y)-1,E=i.get(y)-1;Lp.set(y,_),i.set(y,E),_||(o_.has(y)||y.removeAttribute(r),o_.delete(y)),E||y.removeAttribute(t)}),JA--,JA||(Lp=new WeakMap,Lp=new WeakMap,o_=new WeakMap,a_={})}},wC=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=gG(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),vG(r,s,t,"aria-hidden")):function(){return null}};function yG(n){const e=wG(n),t=M.forwardRef((r,s)=>{const{children:i,...o}=r,l=M.Children.toArray(i),c=l.find(_G);if(c){const f=c.props.children,g=l.map(y=>y===c?M.Children.count(f)>1?M.Children.only(null):M.isValidElement(f)?f.props.children:null:y);return h.jsx(e,{...o,ref:s,children:M.isValidElement(f)?M.cloneElement(f,void 0,g):null})}return h.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}function wG(n){const e=M.forwardRef((t,r)=>{const{children:s,...i}=t;if(M.isValidElement(s)){const o=CG(s),l=EG(i,s.props);return s.type!==M.Fragment&&(l.ref=r?dc(r,o):o),M.cloneElement(s,l)}return M.Children.count(s)>1?M.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var bG=Symbol("radix.slottable");function _G(n){return M.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===bG}function EG(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function CG(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var bC="Dialog",[X6,Y6]=ya(bC),[AG,cl]=X6(bC),K6=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=n,l=M.useRef(null),c=M.useRef(null),[f,g]=Rh({prop:r,defaultProp:s??!1,onChange:i,caller:bC});return h.jsx(AG,{scope:e,triggerRef:l,contentRef:c,contentId:tl(),titleId:tl(),descriptionId:tl(),open:f,onOpenChange:g,onOpenToggle:M.useCallback(()=>g(y=>!y),[g]),modal:o,children:t})};K6.displayName=bC;var Z6="DialogTrigger",Q6=M.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=cl(Z6,t),i=Jt(e,s.triggerRef);return h.jsx(_t.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":rI(s.open),...r,ref:i,onClick:Ue(n.onClick,s.onOpenToggle)})});Q6.displayName=Z6;var tI="DialogPortal",[SG,J6]=X6(tI,{forceMount:void 0}),ej=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,i=cl(tI,e);return h.jsx(SG,{scope:e,forceMount:t,children:M.Children.map(r,o=>h.jsx(Do,{present:t||i.open,children:h.jsx(sb,{asChild:!0,container:s,children:o})}))})};ej.displayName=tI;var Q2="DialogOverlay",tj=M.forwardRef((n,e)=>{const t=J6(Q2,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=cl(Q2,n.__scopeDialog);return i.modal?h.jsx(Do,{present:r||i.open,children:h.jsx(TG,{...s,ref:e})}):null});tj.displayName=Q2;var NG=yG("DialogOverlay.RemoveScroll"),TG=M.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=cl(Q2,t);return h.jsx(ib,{as:NG,allowPinchZoom:!0,shards:[s.contentRef],children:h.jsx(_t.div,{"data-state":rI(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),up="DialogContent",nj=M.forwardRef((n,e)=>{const t=J6(up,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=cl(up,n.__scopeDialog);return h.jsx(Do,{present:r||i.open,children:i.modal?h.jsx(PG,{...s,ref:e}):h.jsx(IG,{...s,ref:e})})});nj.displayName=up;var PG=M.forwardRef((n,e)=>{const t=cl(up,n.__scopeDialog),r=M.useRef(null),s=Jt(e,t.contentRef,r);return M.useEffect(()=>{const i=r.current;if(i)return wC(i)},[]),h.jsx(rj,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ue(n.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ue(n.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Ue(n.onFocusOutside,i=>i.preventDefault())})}),IG=M.forwardRef((n,e)=>{const t=cl(up,n.__scopeDialog),r=M.useRef(!1),s=M.useRef(!1);return h.jsx(rj,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=n.onCloseAutoFocus)==null||o.call(n,i),i.defaultPrevented||(r.current||(l=t.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,f;(c=n.onInteractOutside)==null||c.call(n,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((f=t.triggerRef.current)==null?void 0:f.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),rj=M.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=n,l=cl(up,t),c=M.useRef(null),f=Jt(e,c);return xC(),h.jsxs(h.Fragment,{children:[h.jsx(rb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:h.jsx(W1,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":rI(l.open),...o,ref:f,onDismiss:()=>l.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(kG,{titleId:l.titleId}),h.jsx(OG,{contentRef:c,descriptionId:l.descriptionId})]})]})}),nI="DialogTitle",sj=M.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=cl(nI,t);return h.jsx(_t.h2,{id:s.titleId,...r,ref:e})});sj.displayName=nI;var ij="DialogDescription",oj=M.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=cl(ij,t);return h.jsx(_t.p,{id:s.descriptionId,...r,ref:e})});oj.displayName=ij;var aj="DialogClose",lj=M.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=cl(aj,t);return h.jsx(_t.button,{type:"button",...r,ref:e,onClick:Ue(n.onClick,()=>s.onOpenChange(!1))})});lj.displayName=aj;function rI(n){return n?"open":"closed"}var cj="DialogTitleWarning",[RG,uj]=QV(cj,{contentName:up,titleName:nI,docsSlug:"dialog"}),kG=({titleId:n})=>{const e=uj(cj),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return M.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},MG="DialogDescriptionWarning",OG=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${uj(MG).contentName}}.`;return M.useEffect(()=>{var i;const s=(i=n.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},dj=K6,DG=Q6,hj=ej,sI=tj,iI=nj,oI=sj,aI=oj,lI=lj,jG=Symbol("radix.slottable");function LG(n){const e=({children:t})=>h.jsx(h.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=jG,e}var fj="AlertDialog",[BG]=ya(fj,[Y6]),Fu=Y6(),mj=n=>{const{__scopeAlertDialog:e,...t}=n,r=Fu(e);return h.jsx(dj,{...r,...t,modal:!0})};mj.displayName=fj;var FG="AlertDialogTrigger",UG=M.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,s=Fu(t);return h.jsx(DG,{...s,...r,ref:e})});UG.displayName=FG;var zG="AlertDialogPortal",pj=n=>{const{__scopeAlertDialog:e,...t}=n,r=Fu(e);return h.jsx(hj,{...r,...t})};pj.displayName=zG;var HG="AlertDialogOverlay",gj=M.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,s=Fu(t);return h.jsx(sI,{...s,...r,ref:e})});gj.displayName=HG;var Mg="AlertDialogContent",[VG,WG]=BG(Mg),GG=LG("AlertDialogContent"),xj=M.forwardRef((n,e)=>{const{__scopeAlertDialog:t,children:r,...s}=n,i=Fu(t),o=M.useRef(null),l=Jt(e,o),c=M.useRef(null);return h.jsx(RG,{contentName:Mg,titleName:vj,docsSlug:"alert-dialog",children:h.jsx(VG,{scope:t,cancelRef:c,children:h.jsxs(iI,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:Ue(s.onOpenAutoFocus,f=>{var g;f.preventDefault(),(g=c.current)==null||g.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[h.jsx(GG,{children:r}),h.jsx(qG,{contentRef:o})]})})})});xj.displayName=Mg;var vj="AlertDialogTitle",yj=M.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,s=Fu(t);return h.jsx(oI,{...s,...r,ref:e})});yj.displayName=vj;var wj="AlertDialogDescription",bj=M.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,s=Fu(t);return h.jsx(aI,{...s,...r,ref:e})});bj.displayName=wj;var $G="AlertDialogAction",_j=M.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,s=Fu(t);return h.jsx(lI,{...s,...r,ref:e})});_j.displayName=$G;var Ej="AlertDialogCancel",Cj=M.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,{cancelRef:s}=WG(Ej,t),i=Fu(t),o=Jt(e,s);return h.jsx(lI,{...i,...r,ref:o})});Cj.displayName=Ej;var qG=({contentRef:n})=>{const e=`\`${Mg}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Mg}\` by passing a \`${wj}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Mg}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return M.useEffect(()=>{var r;document.getElementById((r=n.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,n]),null},XG=mj,YG=pj,Aj=gj,Sj=xj,Nj=_j,Tj=Cj,Pj=yj,Ij=bj;function Rj(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=Rj(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function kj(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=Rj(n))&&(r&&(r+=" "),r+=e);return r}const cI="-",KG=n=>{const e=QG(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const l=o.split(cI);return l[0]===""&&l.length!==1&&l.shift(),Mj(l,e)||ZG(o)},getConflictingClassGroupIds:(o,l)=>{const c=t[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},Mj=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?Mj(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=n.join(cI);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},T4=/^\[(.+)\]$/,ZG=n=>{if(T4.test(n)){const e=T4.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},QG=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return e$(Object.entries(n.classGroups),t).forEach(([i,o])=>{MN(o,r,i,e)}),r},MN=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const i=s===""?e:P4(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(JG(s)){MN(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,o])=>{MN(o,P4(e,i),t,r)})})},P4=(n,e)=>{let t=n;return e.split(cI).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},JG=n=>n.isThemeGetter,e$=(n,e)=>e?n.map(([t,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[t,s]}):n,t$=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(i,o)=>{t.set(i,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){t.has(i)?t.set(i,o):s(i,o)}}},Oj="!",n$=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let f=0,g=0,y;for(let I=0;I<l.length;I++){let N=l[I];if(f===0){if(N===s&&(r||l.slice(I,I+i)===e)){c.push(l.slice(g,I)),g=I+i;continue}if(N==="/"){y=I;continue}}N==="["?f++:N==="]"&&f--}const _=c.length===0?l:l.substring(g),E=_.startsWith(Oj),P=E?_.substring(1):_,S=y&&y>g?y-g:void 0;return{modifiers:c,hasImportantModifier:E,baseClassName:P,maybePostfixModifierPosition:S}};return t?l=>t({className:l,parseClassName:o}):o},r$=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},s$=n=>({cache:t$(n.cacheSize),parseClassName:n$(n),...KG(n)}),i$=/\s+/,o$=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=n.trim().split(i$);let l="";for(let c=o.length-1;c>=0;c-=1){const f=o[c],{modifiers:g,hasImportantModifier:y,baseClassName:_,maybePostfixModifierPosition:E}=t(f);let P=!!E,S=r(P?_.substring(0,E):_);if(!S){if(!P){l=f+(l.length>0?" "+l:l);continue}if(S=r(_),!S){l=f+(l.length>0?" "+l:l);continue}P=!1}const I=r$(g).join(":"),N=y?I+Oj:I,k=N+S;if(i.includes(k))continue;i.push(k);const T=s(S,P);for(let D=0;D<T.length;++D){const U=T[D];i.push(N+U)}l=f+(l.length>0?" "+l:l)}return l};function a$(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Dj(e))&&(r&&(r+=" "),r+=t);return r}const Dj=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=Dj(n[r]))&&(t&&(t+=" "),t+=e);return t};function l$(n,...e){let t,r,s,i=o;function o(c){const f=e.reduce((g,y)=>y(g),n());return t=s$(f),r=t.cache.get,s=t.cache.set,i=l,l(c)}function l(c){const f=r(c);if(f)return f;const g=o$(c,t);return s(c,g),g}return function(){return i(a$.apply(null,arguments))}}const Kn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},jj=/^\[(?:([a-z-]+):)?(.+)\]$/i,c$=/^\d+\/\d+$/,u$=new Set(["px","full","screen"]),d$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,h$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,f$=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,m$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,p$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Nc=n=>Og(n)||u$.has(n)||c$.test(n),ed=n=>G1(n,"length",E$),Og=n=>!!n&&!Number.isNaN(Number(n)),eS=n=>G1(n,"number",Og),Tx=n=>!!n&&Number.isInteger(Number(n)),g$=n=>n.endsWith("%")&&Og(n.slice(0,-1)),kt=n=>jj.test(n),td=n=>d$.test(n),x$=new Set(["length","size","percentage"]),v$=n=>G1(n,x$,Lj),y$=n=>G1(n,"position",Lj),w$=new Set(["image","url"]),b$=n=>G1(n,w$,A$),_$=n=>G1(n,"",C$),Px=()=>!0,G1=(n,e,t)=>{const r=jj.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},E$=n=>h$.test(n)&&!f$.test(n),Lj=()=>!1,C$=n=>m$.test(n),A$=n=>p$.test(n),S$=()=>{const n=Kn("colors"),e=Kn("spacing"),t=Kn("blur"),r=Kn("brightness"),s=Kn("borderColor"),i=Kn("borderRadius"),o=Kn("borderSpacing"),l=Kn("borderWidth"),c=Kn("contrast"),f=Kn("grayscale"),g=Kn("hueRotate"),y=Kn("invert"),_=Kn("gap"),E=Kn("gradientColorStops"),P=Kn("gradientColorStopPositions"),S=Kn("inset"),I=Kn("margin"),N=Kn("opacity"),k=Kn("padding"),T=Kn("saturate"),D=Kn("scale"),U=Kn("sepia"),z=Kn("skew"),F=Kn("space"),X=Kn("translate"),Z=()=>["auto","contain","none"],ne=()=>["auto","hidden","clip","visible","scroll"],se=()=>["auto",kt,e],ee=()=>[kt,e],ce=()=>["",Nc,ed],de=()=>["auto",Og,kt],re=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],fe=()=>["solid","dashed","dotted","double","none"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Q=()=>["start","end","center","between","around","evenly","stretch"],ue=()=>["","0",kt],he=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ee=()=>[Og,kt];return{cacheSize:500,separator:":",theme:{colors:[Px],spacing:[Nc,ed],blur:["none","",td,kt],brightness:Ee(),borderColor:[n],borderRadius:["none","","full",td,kt],borderSpacing:ee(),borderWidth:ce(),contrast:Ee(),grayscale:ue(),hueRotate:Ee(),invert:ue(),gap:ee(),gradientColorStops:[n],gradientColorStopPositions:[g$,ed],inset:se(),margin:se(),opacity:Ee(),padding:ee(),saturate:Ee(),scale:Ee(),sepia:ue(),skew:Ee(),space:ee(),translate:ee()},classGroups:{aspect:[{aspect:["auto","square","video",kt]}],container:["container"],columns:[{columns:[td]}],"break-after":[{"break-after":he()}],"break-before":[{"break-before":he()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...re(),kt]}],overflow:[{overflow:ne()}],"overflow-x":[{"overflow-x":ne()}],"overflow-y":[{"overflow-y":ne()}],overscroll:[{overscroll:Z()}],"overscroll-x":[{"overscroll-x":Z()}],"overscroll-y":[{"overscroll-y":Z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Tx,kt]}],basis:[{basis:se()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",kt]}],grow:[{grow:ue()}],shrink:[{shrink:ue()}],order:[{order:["first","last","none",Tx,kt]}],"grid-cols":[{"grid-cols":[Px]}],"col-start-end":[{col:["auto",{span:["full",Tx,kt]},kt]}],"col-start":[{"col-start":de()}],"col-end":[{"col-end":de()}],"grid-rows":[{"grid-rows":[Px]}],"row-start-end":[{row:["auto",{span:[Tx,kt]},kt]}],"row-start":[{"row-start":de()}],"row-end":[{"row-end":de()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",kt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",kt]}],gap:[{gap:[_]}],"gap-x":[{"gap-x":[_]}],"gap-y":[{"gap-y":[_]}],"justify-content":[{justify:["normal",...Q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[k]}],px:[{px:[k]}],py:[{py:[k]}],ps:[{ps:[k]}],pe:[{pe:[k]}],pt:[{pt:[k]}],pr:[{pr:[k]}],pb:[{pb:[k]}],pl:[{pl:[k]}],m:[{m:[I]}],mx:[{mx:[I]}],my:[{my:[I]}],ms:[{ms:[I]}],me:[{me:[I]}],mt:[{mt:[I]}],mr:[{mr:[I]}],mb:[{mb:[I]}],ml:[{ml:[I]}],"space-x":[{"space-x":[F]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[F]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",kt,e]}],"min-w":[{"min-w":[kt,e,"min","max","fit"]}],"max-w":[{"max-w":[kt,e,"none","full","min","max","fit","prose",{screen:[td]},td]}],h:[{h:[kt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[kt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[kt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[kt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",td,ed]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",eS]}],"font-family":[{font:[Px]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",kt]}],"line-clamp":[{"line-clamp":["none",Og,eS]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Nc,kt]}],"list-image":[{"list-image":["none",kt]}],"list-style-type":[{list:["none","disc","decimal",kt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[N]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...fe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Nc,ed]}],"underline-offset":[{"underline-offset":["auto",Nc,kt]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ee()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",kt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",kt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[N]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...re(),y$]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",v$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},b$]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[P]}],"gradient-via-pos":[{via:[P]}],"gradient-to-pos":[{to:[P]}],"gradient-from":[{from:[E]}],"gradient-via":[{via:[E]}],"gradient-to":[{to:[E]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[N]}],"border-style":[{border:[...fe(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[N]}],"divide-style":[{divide:fe()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...fe()]}],"outline-offset":[{"outline-offset":[Nc,kt]}],"outline-w":[{outline:[Nc,ed]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[N]}],"ring-offset-w":[{"ring-offset":[Nc,ed]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",td,_$]}],"shadow-color":[{shadow:[Px]}],opacity:[{opacity:[N]}],"mix-blend":[{"mix-blend":[...oe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":oe()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",td,kt]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[y]}],saturate:[{saturate:[T]}],sepia:[{sepia:[U]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[N]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[U]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",kt]}],duration:[{duration:Ee()}],ease:[{ease:["linear","in","out","in-out",kt]}],delay:[{delay:Ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",kt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[Tx,kt]}],"translate-x":[{"translate-x":[X]}],"translate-y":[{"translate-y":[X]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",kt]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",kt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ee()}],"scroll-mx":[{"scroll-mx":ee()}],"scroll-my":[{"scroll-my":ee()}],"scroll-ms":[{"scroll-ms":ee()}],"scroll-me":[{"scroll-me":ee()}],"scroll-mt":[{"scroll-mt":ee()}],"scroll-mr":[{"scroll-mr":ee()}],"scroll-mb":[{"scroll-mb":ee()}],"scroll-ml":[{"scroll-ml":ee()}],"scroll-p":[{"scroll-p":ee()}],"scroll-px":[{"scroll-px":ee()}],"scroll-py":[{"scroll-py":ee()}],"scroll-ps":[{"scroll-ps":ee()}],"scroll-pe":[{"scroll-pe":ee()}],"scroll-pt":[{"scroll-pt":ee()}],"scroll-pr":[{"scroll-pr":ee()}],"scroll-pb":[{"scroll-pb":ee()}],"scroll-pl":[{"scroll-pl":ee()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",kt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Nc,ed,eS]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},N$=l$(S$);function et(...n){return N$(kj(n))}var T$=Symbol.for("react.lazy"),J2=tC[" use ".trim().toString()];function P$(n){return typeof n=="object"&&n!==null&&"then"in n}function Bj(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===T$&&"_payload"in n&&P$(n._payload)}function uI(n){const e=R$(n),t=M.forwardRef((r,s)=>{let{children:i,...o}=r;Bj(i)&&typeof J2=="function"&&(i=J2(i._payload));const l=M.Children.toArray(i),c=l.find(M$);if(c){const f=c.props.children,g=l.map(y=>y===c?M.Children.count(f)>1?M.Children.only(null):M.isValidElement(f)?f.props.children:null:y);return h.jsx(e,{...o,ref:s,children:M.isValidElement(f)?M.cloneElement(f,void 0,g):null})}return h.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var I$=uI("Slot");function R$(n){const e=M.forwardRef((t,r)=>{let{children:s,...i}=t;if(Bj(s)&&typeof J2=="function"&&(s=J2(s._payload)),M.isValidElement(s)){const o=D$(s),l=O$(i,s.props);return s.type!==M.Fragment&&(l.ref=r?dc(r,o):o),M.cloneElement(s,l)}return M.Children.count(s)>1?M.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var k$=Symbol("radix.slottable");function M$(n){return M.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===k$}function O$(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function D$(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const I4=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,R4=kj,dI=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return R4(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(f=>{const g=t==null?void 0:t[f],y=i==null?void 0:i[f];if(g===null)return null;const _=I4(g)||I4(y);return s[f][_]}),l=t&&Object.entries(t).reduce((f,g)=>{let[y,_]=g;return _===void 0||(f[y]=_),f},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,g)=>{let{class:y,className:_,...E}=g;return Object.entries(E).every(P=>{let[S,I]=P;return Array.isArray(I)?I.includes({...i,...l}[S]):{...i,...l}[S]===I})?[...f,y,_]:f},[]);return R4(n,o,c,t==null?void 0:t.class,t==null?void 0:t.className)},Bv=dI("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all duration-200 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 cursor-pointer",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",elegant:"bg-transparent border border-foreground text-foreground hover:bg-foreground hover:text-background focus-visible:shadow-[0_0_15px_hsl(var(--glow-white-hover))]"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Je=M.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},i)=>{const o=r?I$:"button";return h.jsx(o,{className:et(Bv({variant:e,size:t,className:n})),ref:i,...s})});Je.displayName="Button";const dp=XG,j$=YG,Fj=M.forwardRef(({className:n,...e},t)=>h.jsx(Aj,{className:et("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e,ref:t}));Fj.displayName=Aj.displayName;const kh=M.forwardRef(({className:n,...e},t)=>h.jsxs(j$,{children:[h.jsx(Fj,{}),h.jsx(Sj,{ref:t,className:et("fixed left-[50%] top-[50%] z-50 grid w-full max-w-md translate-x-[-50%] translate-y-[-50%] gap-4 border border-border/10 bg-card/95 backdrop-blur-md p-6 shadow-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...e})]}));kh.displayName=Sj.displayName;const Mh=({className:n,...e})=>h.jsx("div",{className:et("flex flex-col space-y-2 text-center sm:text-left",n),...e});Mh.displayName="AlertDialogHeader";const Oh=({className:n,...e})=>h.jsx("div",{className:et("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});Oh.displayName="AlertDialogFooter";const Dh=M.forwardRef(({className:n,...e},t)=>h.jsx(Pj,{ref:t,className:et("text-2xl font-light tracking-[0.02em]",n),...e}));Dh.displayName=Pj.displayName;const hI=M.forwardRef(({className:n,...e},t)=>h.jsx(Ij,{ref:t,className:et("text-[15px] text-muted-foreground leading-relaxed",n),...e}));hI.displayName=Ij.displayName;const jh=M.forwardRef(({className:n,...e},t)=>h.jsx(Nj,{ref:t,className:et(Bv({variant:"outline"}),"h-11 px-8 bg-transparent border border-border/15 hover:border-border/30 hover:bg-accent/30 font-light transition-all duration-200",n),...e}));jh.displayName=Nj.displayName;const ob=M.forwardRef(({className:n,...e},t)=>h.jsx(Tj,{ref:t,className:et(Bv({variant:"outline"}),"mt-2 sm:mt-0 h-11 px-6 bg-transparent border border-border/15 hover:border-border/30 hover:bg-accent/30 font-light transition-all duration-200",n),...e}));ob.displayName=Tj.displayName;const Uj=M.createContext(void 0);function L$({children:n}){const[e,t]=M.useState(!1),[r,s]=M.useState({title:"",message:"",type:"info"}),i=M.useCallback(c=>{s(c),t(!0)},[]),o=M.useCallback(()=>{t(!1),r.onClose&&r.onClose()},[r]),l=c=>{if(r.title)return r.title;switch(c){case"success":return"Sucesso";case"error":return"Erro";case"warning":return"Ateno";case"info":default:return"Informao"}};return h.jsxs(Uj.Provider,{value:{showModal:i,hideModal:o},children:[n,h.jsx(dp,{open:e,onOpenChange:t,children:h.jsxs(kh,{className:"bg-card/95 border border-border/10 backdrop-blur-md shadow-2xl",children:[h.jsxs(Mh,{className:"space-y-4",children:[h.jsx(Dh,{className:"text-2xl font-light tracking-[0.02em] text-foreground",children:l(r.type)}),h.jsx("div",{className:"h-[0.5px] bg-gradient-to-r from-transparent via-border/40 to-transparent"})]}),h.jsx("div",{className:"py-4",children:h.jsx("p",{className:"text-muted-foreground text-[15px] leading-relaxed whitespace-pre-line",children:r.message})}),h.jsx(Oh,{children:h.jsx(jh,{onClick:o,className:"h-11 px-8 bg-transparent border border-border/15 hover:border-border/30 hover:bg-accent/30 text-foreground transition-all duration-200 font-light",children:"Entendi"})})]})})]})}function B$(){const n=M.useContext(Uj);if(!n)throw new Error("useModal must be used within a ModalProvider");return n}const xe={success:(n,e)=>{if(typeof window<"u"){const t=new CustomEvent("showModal",{detail:{message:n,title:e,type:"success"}});window.dispatchEvent(t)}},error:(n,e)=>{if(typeof window<"u"){const t=new CustomEvent("showModal",{detail:{message:n,title:e,type:"error"}});window.dispatchEvent(t)}},info:(n,e)=>{if(typeof window<"u"){const t=new CustomEvent("showModal",{detail:{message:n,title:e,type:"info"}});window.dispatchEvent(t)}},warning:(n,e)=>{if(typeof window<"u"){const t=new CustomEvent("showModal",{detail:{message:n,title:e,type:"warning"}});window.dispatchEvent(t)}}};function F$(){const{showModal:n}=B$();return Dc.useEffect(()=>{const e=t=>{const r=t,{message:s,title:i,type:o}=r.detail;n({message:s,title:i,type:o})};return window.addEventListener("showModal",e),()=>window.removeEventListener("showModal",e)},[n]),null}const U$=["top","right","bottom","left"],Lh=Math.min,_o=Math.max,eE=Math.round,l_=Math.floor,rc=n=>({x:n,y:n}),z$={left:"right",right:"left",bottom:"top",top:"bottom"},H$={start:"end",end:"start"};function ON(n,e,t){return _o(n,Lh(e,t))}function Ou(n,e){return typeof n=="function"?n(e):n}function Du(n){return n.split("-")[0]}function $1(n){return n.split("-")[1]}function fI(n){return n==="x"?"y":"x"}function mI(n){return n==="y"?"height":"width"}const V$=new Set(["top","bottom"]);function Jl(n){return V$.has(Du(n))?"y":"x"}function pI(n){return fI(Jl(n))}function W$(n,e,t){t===void 0&&(t=!1);const r=$1(n),s=pI(n),i=mI(s);let o=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=tE(o)),[o,tE(o)]}function G$(n){const e=tE(n);return[DN(n),e,DN(e)]}function DN(n){return n.replace(/start|end/g,e=>H$[e])}const k4=["left","right"],M4=["right","left"],$$=["top","bottom"],q$=["bottom","top"];function X$(n,e,t){switch(n){case"top":case"bottom":return t?e?M4:k4:e?k4:M4;case"left":case"right":return e?$$:q$;default:return[]}}function Y$(n,e,t,r){const s=$1(n);let i=X$(Du(n),t==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(DN)))),i}function tE(n){return n.replace(/left|right|bottom|top/g,e=>z$[e])}function K$(n){return{top:0,right:0,bottom:0,left:0,...n}}function zj(n){return typeof n!="number"?K$(n):{top:n,right:n,bottom:n,left:n}}function nE(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function O4(n,e,t){let{reference:r,floating:s}=n;const i=Jl(e),o=pI(e),l=mI(o),c=Du(e),f=i==="y",g=r.x+r.width/2-s.width/2,y=r.y+r.height/2-s.height/2,_=r[l]/2-s[l]/2;let E;switch(c){case"top":E={x:g,y:r.y-s.height};break;case"bottom":E={x:g,y:r.y+r.height};break;case"right":E={x:r.x+r.width,y};break;case"left":E={x:r.x-s.width,y};break;default:E={x:r.x,y:r.y}}switch($1(e)){case"start":E[o]-=_*(t&&f?-1:1);break;case"end":E[o]+=_*(t&&f?-1:1);break}return E}const Z$=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=t,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let f=await o.getElementRects({reference:n,floating:e,strategy:s}),{x:g,y}=O4(f,r,c),_=r,E={},P=0;for(let S=0;S<l.length;S++){const{name:I,fn:N}=l[S],{x:k,y:T,data:D,reset:U}=await N({x:g,y,initialPlacement:r,placement:_,strategy:s,middlewareData:E,rects:f,platform:o,elements:{reference:n,floating:e}});g=k??g,y=T??y,E={...E,[I]:{...E[I],...D}},U&&P<=50&&(P++,typeof U=="object"&&(U.placement&&(_=U.placement),U.rects&&(f=U.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:s}):U.rects),{x:g,y}=O4(f,_,c)),S=-1)}return{x:g,y,placement:_,strategy:s,middlewareData:E}};async function Fv(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=n,{boundary:f="clippingAncestors",rootBoundary:g="viewport",elementContext:y="floating",altBoundary:_=!1,padding:E=0}=Ou(e,n),P=zj(E),I=l[_?y==="floating"?"reference":"floating":y],N=nE(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(I)))==null||t?I:I.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:f,rootBoundary:g,strategy:c})),k=y==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),D=await(i.isElement==null?void 0:i.isElement(T))?await(i.getScale==null?void 0:i.getScale(T))||{x:1,y:1}:{x:1,y:1},U=nE(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:k,offsetParent:T,strategy:c}):k);return{top:(N.top-U.top+P.top)/D.y,bottom:(U.bottom-N.bottom+P.bottom)/D.y,left:(N.left-U.left+P.left)/D.x,right:(U.right-N.right+P.right)/D.x}}const Q$=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:f,padding:g=0}=Ou(n,e)||{};if(f==null)return{};const y=zj(g),_={x:t,y:r},E=pI(s),P=mI(E),S=await o.getDimensions(f),I=E==="y",N=I?"top":"left",k=I?"bottom":"right",T=I?"clientHeight":"clientWidth",D=i.reference[P]+i.reference[E]-_[E]-i.floating[P],U=_[E]-i.reference[E],z=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let F=z?z[T]:0;(!F||!await(o.isElement==null?void 0:o.isElement(z)))&&(F=l.floating[T]||i.floating[P]);const X=D/2-U/2,Z=F/2-S[P]/2-1,ne=Lh(y[N],Z),se=Lh(y[k],Z),ee=ne,ce=F-S[P]-se,de=F/2-S[P]/2+X,re=ON(ee,de,ce),fe=!c.arrow&&$1(s)!=null&&de!==re&&i.reference[P]/2-(de<ee?ne:se)-S[P]/2<0,oe=fe?de<ee?de-ee:de-ce:0;return{[E]:_[E]+oe,data:{[E]:re,centerOffset:de-re-oe,...fe&&{alignmentOffset:oe}},reset:fe}}}),J$=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:f}=e,{mainAxis:g=!0,crossAxis:y=!0,fallbackPlacements:_,fallbackStrategy:E="bestFit",fallbackAxisSideDirection:P="none",flipAlignment:S=!0,...I}=Ou(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const N=Du(s),k=Jl(l),T=Du(l)===l,D=await(c.isRTL==null?void 0:c.isRTL(f.floating)),U=_||(T||!S?[tE(l)]:G$(l)),z=P!=="none";!_&&z&&U.push(...Y$(l,S,P,D));const F=[l,...U],X=await Fv(e,I),Z=[];let ne=((r=i.flip)==null?void 0:r.overflows)||[];if(g&&Z.push(X[N]),y){const de=W$(s,o,D);Z.push(X[de[0]],X[de[1]])}if(ne=[...ne,{placement:s,overflows:Z}],!Z.every(de=>de<=0)){var se,ee;const de=(((se=i.flip)==null?void 0:se.index)||0)+1,re=F[de];if(re&&(!(y==="alignment"?k!==Jl(re):!1)||ne.every(Q=>Jl(Q.placement)===k?Q.overflows[0]>0:!0)))return{data:{index:de,overflows:ne},reset:{placement:re}};let fe=(ee=ne.filter(oe=>oe.overflows[0]<=0).sort((oe,Q)=>oe.overflows[1]-Q.overflows[1])[0])==null?void 0:ee.placement;if(!fe)switch(E){case"bestFit":{var ce;const oe=(ce=ne.filter(Q=>{if(z){const ue=Jl(Q.placement);return ue===k||ue==="y"}return!0}).map(Q=>[Q.placement,Q.overflows.filter(ue=>ue>0).reduce((ue,he)=>ue+he,0)]).sort((Q,ue)=>Q[1]-ue[1])[0])==null?void 0:ce[0];oe&&(fe=oe);break}case"initialPlacement":fe=l;break}if(s!==fe)return{reset:{placement:fe}}}return{}}}};function D4(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function j4(n){return U$.some(e=>n[e]>=0)}const eq=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=Ou(n,e);switch(r){case"referenceHidden":{const i=await Fv(e,{...s,elementContext:"reference"}),o=D4(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:j4(o)}}}case"escaped":{const i=await Fv(e,{...s,altBoundary:!0}),o=D4(i,t.floating);return{data:{escapedOffsets:o,escaped:j4(o)}}}default:return{}}}}},Hj=new Set(["left","top"]);async function tq(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Du(t),l=$1(t),c=Jl(t)==="y",f=Hj.has(o)?-1:1,g=i&&c?-1:1,y=Ou(e,n);let{mainAxis:_,crossAxis:E,alignmentAxis:P}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return l&&typeof P=="number"&&(E=l==="end"?P*-1:P),c?{x:E*g,y:_*f}:{x:_*f,y:E*g}}const nq=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await tq(e,n);return o===((t=l.offset)==null?void 0:t.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},rq=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:I=>{let{x:N,y:k}=I;return{x:N,y:k}}},...c}=Ou(n,e),f={x:t,y:r},g=await Fv(e,c),y=Jl(Du(s)),_=fI(y);let E=f[_],P=f[y];if(i){const I=_==="y"?"top":"left",N=_==="y"?"bottom":"right",k=E+g[I],T=E-g[N];E=ON(k,E,T)}if(o){const I=y==="y"?"top":"left",N=y==="y"?"bottom":"right",k=P+g[I],T=P-g[N];P=ON(k,P,T)}const S=l.fn({...e,[_]:E,[y]:P});return{...S,data:{x:S.x-t,y:S.y-r,enabled:{[_]:i,[y]:o}}}}}},sq=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:f=!0}=Ou(n,e),g={x:t,y:r},y=Jl(s),_=fI(y);let E=g[_],P=g[y];const S=Ou(l,e),I=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(c){const T=_==="y"?"height":"width",D=i.reference[_]-i.floating[T]+I.mainAxis,U=i.reference[_]+i.reference[T]-I.mainAxis;E<D?E=D:E>U&&(E=U)}if(f){var N,k;const T=_==="y"?"width":"height",D=Hj.has(Du(s)),U=i.reference[y]-i.floating[T]+(D&&((N=o.offset)==null?void 0:N[y])||0)+(D?0:I.crossAxis),z=i.reference[y]+i.reference[T]+(D?0:((k=o.offset)==null?void 0:k[y])||0)-(D?I.crossAxis:0);P<U?P=U:P>z&&(P=z)}return{[_]:E,[y]:P}}}},iq=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...f}=Ou(n,e),g=await Fv(e,f),y=Du(s),_=$1(s),E=Jl(s)==="y",{width:P,height:S}=i.floating;let I,N;y==="top"||y==="bottom"?(I=y,N=_===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(N=y,I=_==="end"?"top":"bottom");const k=S-g.top-g.bottom,T=P-g.left-g.right,D=Lh(S-g[I],k),U=Lh(P-g[N],T),z=!e.middlewareData.shift;let F=D,X=U;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(X=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(F=k),z&&!_){const ne=_o(g.left,0),se=_o(g.right,0),ee=_o(g.top,0),ce=_o(g.bottom,0);E?X=P-2*(ne!==0||se!==0?ne+se:_o(g.left,g.right)):F=S-2*(ee!==0||ce!==0?ee+ce:_o(g.top,g.bottom))}await c({...e,availableWidth:X,availableHeight:F});const Z=await o.getDimensions(l.floating);return P!==Z.width||S!==Z.height?{reset:{rects:!0}}:{}}}};function _C(){return typeof window<"u"}function q1(n){return Vj(n)?(n.nodeName||"").toLowerCase():"#document"}function To(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function hc(n){var e;return(e=(Vj(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Vj(n){return _C()?n instanceof Node||n instanceof To(n).Node:!1}function sl(n){return _C()?n instanceof Element||n instanceof To(n).Element:!1}function oc(n){return _C()?n instanceof HTMLElement||n instanceof To(n).HTMLElement:!1}function L4(n){return!_C()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof To(n).ShadowRoot}const oq=new Set(["inline","contents"]);function ab(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=il(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!oq.has(s)}const aq=new Set(["table","td","th"]);function lq(n){return aq.has(q1(n))}const cq=[":popover-open",":modal"];function EC(n){return cq.some(e=>{try{return n.matches(e)}catch{return!1}})}const uq=["transform","translate","scale","rotate","perspective"],dq=["transform","translate","scale","rotate","perspective","filter"],hq=["paint","layout","strict","content"];function gI(n){const e=xI(),t=sl(n)?il(n):n;return uq.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||dq.some(r=>(t.willChange||"").includes(r))||hq.some(r=>(t.contain||"").includes(r))}function fq(n){let e=Bh(n);for(;oc(e)&&!N1(e);){if(gI(e))return e;if(EC(e))return null;e=Bh(e)}return null}function xI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const mq=new Set(["html","body","#document"]);function N1(n){return mq.has(q1(n))}function il(n){return To(n).getComputedStyle(n)}function CC(n){return sl(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Bh(n){if(q1(n)==="html")return n;const e=n.assignedSlot||n.parentNode||L4(n)&&n.host||hc(n);return L4(e)?e.host:e}function Wj(n){const e=Bh(n);return N1(e)?n.ownerDocument?n.ownerDocument.body:n.body:oc(e)&&ab(e)?e:Wj(e)}function Uv(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=Wj(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),o=To(s);if(i){const l=jN(o);return e.concat(o,o.visualViewport||[],ab(s)?s:[],l&&t?Uv(l):[])}return e.concat(s,Uv(s,[],t))}function jN(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Gj(n){const e=il(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=oc(n),i=s?n.offsetWidth:t,o=s?n.offsetHeight:r,l=eE(t)!==i||eE(r)!==o;return l&&(t=i,r=o),{width:t,height:r,$:l}}function vI(n){return sl(n)?n:n.contextElement}function Dg(n){const e=vI(n);if(!oc(e))return rc(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=Gj(e);let o=(i?eE(t.width):t.width)/r,l=(i?eE(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const pq=rc(0);function $j(n){const e=To(n);return!xI()||!e.visualViewport?pq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function gq(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==To(n)?!1:e}function hp(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=vI(n);let o=rc(1);e&&(r?sl(r)&&(o=Dg(r)):o=Dg(n));const l=gq(i,t,r)?$j(i):rc(0);let c=(s.left+l.x)/o.x,f=(s.top+l.y)/o.y,g=s.width/o.x,y=s.height/o.y;if(i){const _=To(i),E=r&&sl(r)?To(r):r;let P=_,S=jN(P);for(;S&&r&&E!==P;){const I=Dg(S),N=S.getBoundingClientRect(),k=il(S),T=N.left+(S.clientLeft+parseFloat(k.paddingLeft))*I.x,D=N.top+(S.clientTop+parseFloat(k.paddingTop))*I.y;c*=I.x,f*=I.y,g*=I.x,y*=I.y,c+=T,f+=D,P=To(S),S=jN(P)}}return nE({width:g,height:y,x:c,y:f})}function AC(n,e){const t=CC(n).scrollLeft;return e?e.left+t:hp(hc(n)).left+t}function qj(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-AC(n,t),s=t.top+e.scrollTop;return{x:r,y:s}}function xq(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",o=hc(r),l=e?EC(e.floating):!1;if(r===o||l&&i)return t;let c={scrollLeft:0,scrollTop:0},f=rc(1);const g=rc(0),y=oc(r);if((y||!y&&!i)&&((q1(r)!=="body"||ab(o))&&(c=CC(r)),oc(r))){const E=hp(r);f=Dg(r),g.x=E.x+r.clientLeft,g.y=E.y+r.clientTop}const _=o&&!y&&!i?qj(o,c):rc(0);return{width:t.width*f.x,height:t.height*f.y,x:t.x*f.x-c.scrollLeft*f.x+g.x+_.x,y:t.y*f.y-c.scrollTop*f.y+g.y+_.y}}function vq(n){return Array.from(n.getClientRects())}function yq(n){const e=hc(n),t=CC(n),r=n.ownerDocument.body,s=_o(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=_o(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+AC(n);const l=-t.scrollTop;return il(r).direction==="rtl"&&(o+=_o(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}const B4=25;function wq(n,e){const t=To(n),r=hc(n),s=t.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const g=xI();(!g||g&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const f=AC(r);if(f<=0){const g=r.ownerDocument,y=g.body,_=getComputedStyle(y),E=g.compatMode==="CSS1Compat"&&parseFloat(_.marginLeft)+parseFloat(_.marginRight)||0,P=Math.abs(r.clientWidth-y.clientWidth-E);P<=B4&&(i-=P)}else f<=B4&&(i+=f);return{width:i,height:o,x:l,y:c}}const bq=new Set(["absolute","fixed"]);function _q(n,e){const t=hp(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=oc(n)?Dg(n):rc(1),o=n.clientWidth*i.x,l=n.clientHeight*i.y,c=s*i.x,f=r*i.y;return{width:o,height:l,x:c,y:f}}function F4(n,e,t){let r;if(e==="viewport")r=wq(n,t);else if(e==="document")r=yq(hc(n));else if(sl(e))r=_q(e,t);else{const s=$j(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return nE(r)}function Xj(n,e){const t=Bh(n);return t===e||!sl(t)||N1(t)?!1:il(t).position==="fixed"||Xj(t,e)}function Eq(n,e){const t=e.get(n);if(t)return t;let r=Uv(n,[],!1).filter(l=>sl(l)&&q1(l)!=="body"),s=null;const i=il(n).position==="fixed";let o=i?Bh(n):n;for(;sl(o)&&!N1(o);){const l=il(o),c=gI(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&bq.has(s.position)||ab(o)&&!c&&Xj(n,o))?r=r.filter(g=>g!==o):s=l,o=Bh(o)}return e.set(n,r),r}function Cq(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const o=[...t==="clippingAncestors"?EC(e)?[]:Eq(e,this._c):[].concat(t),r],l=o[0],c=o.reduce((f,g)=>{const y=F4(e,g,s);return f.top=_o(y.top,f.top),f.right=Lh(y.right,f.right),f.bottom=Lh(y.bottom,f.bottom),f.left=_o(y.left,f.left),f},F4(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Aq(n){const{width:e,height:t}=Gj(n);return{width:e,height:t}}function Sq(n,e,t){const r=oc(e),s=hc(e),i=t==="fixed",o=hp(n,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=rc(0);function f(){c.x=AC(s)}if(r||!r&&!i)if((q1(e)!=="body"||ab(s))&&(l=CC(e)),r){const E=hp(e,!0,i,e);c.x=E.x+e.clientLeft,c.y=E.y+e.clientTop}else s&&f();i&&!r&&s&&f();const g=s&&!r&&!i?qj(s,l):rc(0),y=o.left+l.scrollLeft-c.x-g.x,_=o.top+l.scrollTop-c.y-g.y;return{x:y,y:_,width:o.width,height:o.height}}function tS(n){return il(n).position==="static"}function U4(n,e){if(!oc(n)||il(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return hc(n)===t&&(t=t.ownerDocument.body),t}function Yj(n,e){const t=To(n);if(EC(n))return t;if(!oc(n)){let s=Bh(n);for(;s&&!N1(s);){if(sl(s)&&!tS(s))return s;s=Bh(s)}return t}let r=U4(n,e);for(;r&&lq(r)&&tS(r);)r=U4(r,e);return r&&N1(r)&&tS(r)&&!gI(r)?t:r||fq(n)||t}const Nq=async function(n){const e=this.getOffsetParent||Yj,t=this.getDimensions,r=await t(n.floating);return{reference:Sq(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Tq(n){return il(n).direction==="rtl"}const Pq={convertOffsetParentRelativeRectToViewportRelativeRect:xq,getDocumentElement:hc,getClippingRect:Cq,getOffsetParent:Yj,getElementRects:Nq,getClientRects:vq,getDimensions:Aq,getScale:Dg,isElement:sl,isRTL:Tq};function Kj(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function Iq(n,e){let t=null,r;const s=hc(n);function i(){var l;clearTimeout(r),(l=t)==null||l.disconnect(),t=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const f=n.getBoundingClientRect(),{left:g,top:y,width:_,height:E}=f;if(l||e(),!_||!E)return;const P=l_(y),S=l_(s.clientWidth-(g+_)),I=l_(s.clientHeight-(y+E)),N=l_(g),T={rootMargin:-P+"px "+-S+"px "+-I+"px "+-N+"px",threshold:_o(0,Lh(1,c))||1};let D=!0;function U(z){const F=z[0].intersectionRatio;if(F!==c){if(!D)return o();F?o(!1,F):r=setTimeout(()=>{o(!1,1e-7)},1e3)}F===1&&!Kj(f,n.getBoundingClientRect())&&o(),D=!1}try{t=new IntersectionObserver(U,{...T,root:s.ownerDocument})}catch{t=new IntersectionObserver(U,T)}t.observe(n)}return o(!0),i}function Rq(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,f=vI(n),g=s||i?[...f?Uv(f):[],...Uv(e)]:[];g.forEach(N=>{s&&N.addEventListener("scroll",t,{passive:!0}),i&&N.addEventListener("resize",t)});const y=f&&l?Iq(f,t):null;let _=-1,E=null;o&&(E=new ResizeObserver(N=>{let[k]=N;k&&k.target===f&&E&&(E.unobserve(e),cancelAnimationFrame(_),_=requestAnimationFrame(()=>{var T;(T=E)==null||T.observe(e)})),t()}),f&&!c&&E.observe(f),E.observe(e));let P,S=c?hp(n):null;c&&I();function I(){const N=hp(n);S&&!Kj(S,N)&&t(),S=N,P=requestAnimationFrame(I)}return t(),()=>{var N;g.forEach(k=>{s&&k.removeEventListener("scroll",t),i&&k.removeEventListener("resize",t)}),y==null||y(),(N=E)==null||N.disconnect(),E=null,c&&cancelAnimationFrame(P)}}const kq=nq,Mq=rq,Oq=J$,Dq=iq,jq=eq,z4=Q$,Lq=sq,Bq=(n,e,t)=>{const r=new Map,s={platform:Pq,...t},i={...s.platform,_c:r};return Z$(n,e,{...s,platform:i})};var Fq=typeof document<"u",Uq=function(){},W_=Fq?M.useLayoutEffect:Uq;function rE(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!rE(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!rE(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function Zj(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function H4(n,e){const t=Zj(n);return Math.round(e*t)/t}function nS(n){const e=M.useRef(n);return W_(()=>{e.current=n}),e}function zq(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:f}=n,[g,y]=M.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[_,E]=M.useState(r);rE(_,r)||E(r);const[P,S]=M.useState(null),[I,N]=M.useState(null),k=M.useCallback(Q=>{Q!==z.current&&(z.current=Q,S(Q))},[]),T=M.useCallback(Q=>{Q!==F.current&&(F.current=Q,N(Q))},[]),D=i||P,U=o||I,z=M.useRef(null),F=M.useRef(null),X=M.useRef(g),Z=c!=null,ne=nS(c),se=nS(s),ee=nS(f),ce=M.useCallback(()=>{if(!z.current||!F.current)return;const Q={placement:e,strategy:t,middleware:_};se.current&&(Q.platform=se.current),Bq(z.current,F.current,Q).then(ue=>{const he={...ue,isPositioned:ee.current!==!1};de.current&&!rE(X.current,he)&&(X.current=he,V1.flushSync(()=>{y(he)}))})},[_,e,t,se,ee]);W_(()=>{f===!1&&X.current.isPositioned&&(X.current.isPositioned=!1,y(Q=>({...Q,isPositioned:!1})))},[f]);const de=M.useRef(!1);W_(()=>(de.current=!0,()=>{de.current=!1}),[]),W_(()=>{if(D&&(z.current=D),U&&(F.current=U),D&&U){if(ne.current)return ne.current(D,U,ce);ce()}},[D,U,ce,ne,Z]);const re=M.useMemo(()=>({reference:z,floating:F,setReference:k,setFloating:T}),[k,T]),fe=M.useMemo(()=>({reference:D,floating:U}),[D,U]),oe=M.useMemo(()=>{const Q={position:t,left:0,top:0};if(!fe.floating)return Q;const ue=H4(fe.floating,g.x),he=H4(fe.floating,g.y);return l?{...Q,transform:"translate("+ue+"px, "+he+"px)",...Zj(fe.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ue,top:he}},[t,l,fe.floating,g.x,g.y]);return M.useMemo(()=>({...g,update:ce,refs:re,elements:fe,floatingStyles:oe}),[g,ce,re,fe,oe])}const Hq=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?z4({element:r.current,padding:s}).fn(t):{}:r?z4({element:r,padding:s}).fn(t):{}}}},Vq=(n,e)=>({...kq(n),options:[n,e]}),Wq=(n,e)=>({...Mq(n),options:[n,e]}),Gq=(n,e)=>({...Lq(n),options:[n,e]}),$q=(n,e)=>({...Oq(n),options:[n,e]}),qq=(n,e)=>({...Dq(n),options:[n,e]}),Xq=(n,e)=>({...jq(n),options:[n,e]}),Yq=(n,e)=>({...Hq(n),options:[n,e]});var Kq="Arrow",Qj=M.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return h.jsx(_t.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});Qj.displayName=Kq;var Zq=Qj;function Jj(n){const[e,t]=M.useState(void 0);return Jr(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,f=Array.isArray(c)?c[0]:c;o=f.inlineSize,l=f.blockSize}else o=n.offsetWidth,l=n.offsetHeight;t({width:o,height:l})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var yI="Popper",[eL,$h]=ya(yI),[Qq,tL]=eL(yI),nL=n=>{const{__scopePopper:e,children:t}=n,[r,s]=M.useState(null);return h.jsx(Qq,{scope:e,anchor:r,onAnchorChange:s,children:t})};nL.displayName=yI;var rL="PopperAnchor",sL=M.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=tL(rL,t),o=M.useRef(null),l=Jt(e,o),c=M.useRef(null);return M.useEffect(()=>{const f=c.current;c.current=(r==null?void 0:r.current)||o.current,f!==c.current&&i.onAnchorChange(c.current)}),r?null:h.jsx(_t.div,{...s,ref:l})});sL.displayName=rL;var wI="PopperContent",[Jq,eX]=eL(wI),iL=M.forwardRef((n,e)=>{var Te,Ze,Nt,ut,st,gt;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:f=[],collisionPadding:g=0,sticky:y="partial",hideWhenDetached:_=!1,updatePositionStrategy:E="optimized",onPlaced:P,...S}=n,I=tL(wI,t),[N,k]=M.useState(null),T=Jt(e,at=>k(at)),[D,U]=M.useState(null),z=Jj(D),F=(z==null?void 0:z.width)??0,X=(z==null?void 0:z.height)??0,Z=r+(i!=="center"?"-"+i:""),ne=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},se=Array.isArray(f)?f:[f],ee=se.length>0,ce={padding:ne,boundary:se.filter(nX),altBoundary:ee},{refs:de,floatingStyles:re,placement:fe,isPositioned:oe,middlewareData:Q}=zq({strategy:"fixed",placement:Z,whileElementsMounted:(...at)=>Rq(...at,{animationFrame:E==="always"}),elements:{reference:I.anchor},middleware:[Vq({mainAxis:s+X,alignmentAxis:o}),c&&Wq({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?Gq():void 0,...ce}),c&&$q({...ce}),qq({...ce,apply:({elements:at,rects:$n,availableWidth:gr,availableHeight:xr})=>{const{width:hn,height:Ht}=$n.reference,Et=at.floating.style;Et.setProperty("--radix-popper-available-width",`${gr}px`),Et.setProperty("--radix-popper-available-height",`${xr}px`),Et.setProperty("--radix-popper-anchor-width",`${hn}px`),Et.setProperty("--radix-popper-anchor-height",`${Ht}px`)}}),D&&Yq({element:D,padding:l}),rX({arrowWidth:F,arrowHeight:X}),_&&Xq({strategy:"referenceHidden",...ce})]}),[ue,he]=lL(fe),Ee=rl(P);Jr(()=>{oe&&(Ee==null||Ee())},[oe,Ee]);const _e=(Te=Q.arrow)==null?void 0:Te.x,Oe=(Ze=Q.arrow)==null?void 0:Ze.y,De=((Nt=Q.arrow)==null?void 0:Nt.centerOffset)!==0,[ze,be]=M.useState();return Jr(()=>{N&&be(window.getComputedStyle(N).zIndex)},[N]),h.jsx("div",{ref:de.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:oe?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ze,"--radix-popper-transform-origin":[(ut=Q.transformOrigin)==null?void 0:ut.x,(st=Q.transformOrigin)==null?void 0:st.y].join(" "),...((gt=Q.hide)==null?void 0:gt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:h.jsx(Jq,{scope:t,placedSide:ue,onArrowChange:U,arrowX:_e,arrowY:Oe,shouldHideArrow:De,children:h.jsx(_t.div,{"data-side":ue,"data-align":he,...S,ref:T,style:{...S.style,animation:oe?void 0:"none"}})})})});iL.displayName=wI;var oL="PopperArrow",tX={top:"bottom",right:"left",bottom:"top",left:"right"},aL=M.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=eX(oL,r),o=tX[i.placedSide];return h.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:h.jsx(Zq,{...s,ref:t,style:{...s.style,display:"block"}})})});aL.displayName=oL;function nX(n){return n!==null}var rX=n=>({name:"transformOrigin",options:n,fn(e){var I,N,k;const{placement:t,rects:r,middlewareData:s}=e,o=((I=s.arrow)==null?void 0:I.centerOffset)!==0,l=o?0:n.arrowWidth,c=o?0:n.arrowHeight,[f,g]=lL(t),y={start:"0%",center:"50%",end:"100%"}[g],_=(((N=s.arrow)==null?void 0:N.x)??0)+l/2,E=(((k=s.arrow)==null?void 0:k.y)??0)+c/2;let P="",S="";return f==="bottom"?(P=o?y:`${_}px`,S=`${-c}px`):f==="top"?(P=o?y:`${_}px`,S=`${r.floating.height+c}px`):f==="right"?(P=`${-c}px`,S=o?y:`${E}px`):f==="left"&&(P=`${r.floating.width+c}px`,S=o?y:`${E}px`),{data:{x:P,y:S}}}});function lL(n){const[e,t="center"]=n.split("-");return[e,t]}var bI=nL,lb=sL,SC=iL,NC=aL,sX=Symbol("radix.slottable");function iX(n){const e=({children:t})=>h.jsx(h.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=sX,e}var cL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),oX="VisuallyHidden",uL=M.forwardRef((n,e)=>h.jsx(_t.span,{...n,ref:e,style:{...cL,...n.style}}));uL.displayName=oX;var aX=uL,[TC]=ya("Tooltip",[$h]),_I=$h(),dL="TooltipProvider",lX=700,V4="tooltip.open",[cX,hL]=TC(dL),fL=n=>{const{__scopeTooltip:e,delayDuration:t=lX,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=n,o=M.useRef(!0),l=M.useRef(!1),c=M.useRef(0);return M.useEffect(()=>{const f=c.current;return()=>window.clearTimeout(f)},[]),h.jsx(cX,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:M.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:M.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:M.useCallback(f=>{l.current=f},[]),disableHoverableContent:s,children:i})};fL.displayName=dL;var mL="Tooltip",[Kce,PC]=TC(mL),LN="TooltipTrigger",uX=M.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=PC(LN,t),i=hL(LN,t),o=_I(t),l=M.useRef(null),c=Jt(e,l,s.onTriggerChange),f=M.useRef(!1),g=M.useRef(!1),y=M.useCallback(()=>f.current=!1,[]);return M.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),h.jsx(lb,{asChild:!0,...o,children:h.jsx(_t.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Ue(n.onPointerMove,_=>{_.pointerType!=="touch"&&!g.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),g.current=!0)}),onPointerLeave:Ue(n.onPointerLeave,()=>{s.onTriggerLeave(),g.current=!1}),onPointerDown:Ue(n.onPointerDown,()=>{s.open&&s.onClose(),f.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:Ue(n.onFocus,()=>{f.current||s.onOpen()}),onBlur:Ue(n.onBlur,s.onClose),onClick:Ue(n.onClick,s.onClose)})})});uX.displayName=LN;var dX="TooltipPortal",[Zce,hX]=TC(dX,{forceMount:void 0}),T1="TooltipContent",pL=M.forwardRef((n,e)=>{const t=hX(T1,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...i}=n,o=PC(T1,n.__scopeTooltip);return h.jsx(Do,{present:r||o.open,children:o.disableHoverableContent?h.jsx(gL,{side:s,...i,ref:e}):h.jsx(fX,{side:s,...i,ref:e})})}),fX=M.forwardRef((n,e)=>{const t=PC(T1,n.__scopeTooltip),r=hL(T1,n.__scopeTooltip),s=M.useRef(null),i=Jt(e,s),[o,l]=M.useState(null),{trigger:c,onClose:f}=t,g=s.current,{onPointerInTransitChange:y}=r,_=M.useCallback(()=>{l(null),y(!1)},[y]),E=M.useCallback((P,S)=>{const I=P.currentTarget,N={x:P.clientX,y:P.clientY},k=vX(N,I.getBoundingClientRect()),T=yX(N,k),D=wX(S.getBoundingClientRect()),U=_X([...T,...D]);l(U),y(!0)},[y]);return M.useEffect(()=>()=>_(),[_]),M.useEffect(()=>{if(c&&g){const P=I=>E(I,g),S=I=>E(I,c);return c.addEventListener("pointerleave",P),g.addEventListener("pointerleave",S),()=>{c.removeEventListener("pointerleave",P),g.removeEventListener("pointerleave",S)}}},[c,g,E,_]),M.useEffect(()=>{if(o){const P=S=>{const I=S.target,N={x:S.clientX,y:S.clientY},k=(c==null?void 0:c.contains(I))||(g==null?void 0:g.contains(I)),T=!bX(N,o);k?_():T&&(_(),f())};return document.addEventListener("pointermove",P),()=>document.removeEventListener("pointermove",P)}},[c,g,o,f,_]),h.jsx(gL,{...n,ref:i})}),[mX,pX]=TC(mL,{isInside:!1}),gX=iX("TooltipContent"),gL=M.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=n,c=PC(T1,t),f=_I(t),{onClose:g}=c;return M.useEffect(()=>(document.addEventListener(V4,g),()=>document.removeEventListener(V4,g)),[g]),M.useEffect(()=>{if(c.trigger){const y=_=>{const E=_.target;E!=null&&E.contains(c.trigger)&&g()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[c.trigger,g]),h.jsx(W1,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:y=>y.preventDefault(),onDismiss:g,children:h.jsxs(SC,{"data-state":c.stateAttribute,...f,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(gX,{children:r}),h.jsx(mX,{scope:t,isInside:!0,children:h.jsx(aX,{id:c.contentId,role:"tooltip",children:s||r})})]})})});pL.displayName=T1;var xL="TooltipArrow",xX=M.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=_I(t);return pX(xL,t).isInside?null:h.jsx(NC,{...s,...r,ref:e})});xX.displayName=xL;function vX(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,r,s,i)){case i:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function yX(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function wX(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function bX(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],c=e[o],f=l.x,g=l.y,y=c.x,_=c.y;g>r!=_>r&&t<(y-f)*(r-g)/(_-g)+f&&(s=!s)}return s}function _X(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),EX(e)}function EX(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var CX=fL,vL=pL;const AX=CX,SX=M.forwardRef(({className:n,sideOffset:e=4,...t},r)=>h.jsx(vL,{ref:r,sideOffset:e,className:et("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));SX.displayName=vL.displayName;var IC=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},NX={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},gd,rP,WO,TX=(WO=class{constructor(){W(this,gd,NX);W(this,rP,!1)}setTimeoutProvider(n){B(this,gd,n)}setTimeout(n,e){return p(this,gd).setTimeout(n,e)}clearTimeout(n){p(this,gd).clearTimeout(n)}setInterval(n,e){return p(this,gd).setInterval(n,e)}clearInterval(n){p(this,gd).clearInterval(n)}},gd=new WeakMap,rP=new WeakMap,WO),BN=new TX;function PX(n){setTimeout(n,0)}var RC=typeof window>"u"||"Deno"in globalThis;function ka(){}function IX(n,e){return typeof n=="function"?n(e):n}function RX(n){return typeof n=="number"&&n>=0&&n!==1/0}function kX(n,e){return Math.max(n+(e||0)-Date.now(),0)}function FN(n,e){return typeof n=="function"?n(e):n}function MX(n,e){return typeof n=="function"?n(e):n}function W4(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=n;if(o){if(r){if(e.queryHash!==EI(o,e.options))return!1}else if(!Hv(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function G4(n,e){const{exact:t,status:r,predicate:s,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(zv(e.options.mutationKey)!==zv(i))return!1}else if(!Hv(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function EI(n,e){return((e==null?void 0:e.queryKeyHashFn)||zv)(n)}function zv(n){return JSON.stringify(n,(e,t)=>UN(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function Hv(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Hv(n[t],e[t])):!1}var OX=Object.prototype.hasOwnProperty;function yL(n,e){if(n===e)return n;const t=$4(n)&&$4(e);if(!t&&!(UN(n)&&UN(e)))return e;const s=(t?n:Object.keys(n)).length,i=t?e:Object.keys(e),o=i.length,l=t?new Array(o):{};let c=0;for(let f=0;f<o;f++){const g=t?f:i[f],y=n[g],_=e[g];if(y===_){l[g]=y,(t?f<s:OX.call(n,g))&&c++;continue}if(y===null||_===null||typeof y!="object"||typeof _!="object"){l[g]=_;continue}const E=yL(y,_);l[g]=E,E===y&&c++}return s===o&&c===s?n:l}function $4(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function UN(n){if(!q4(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!q4(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function q4(n){return Object.prototype.toString.call(n)==="[object Object]"}function DX(n){return new Promise(e=>{BN.setTimeout(e,n)})}function jX(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?yL(n,e):e}function LX(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function BX(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var CI=Symbol();function wL(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===CI?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var jf,xd,Ug,GO,FX=(GO=class extends IC{constructor(){super();W(this,jf);W(this,xd);W(this,Ug);B(this,Ug,e=>{if(!RC&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){p(this,xd)||this.setEventListener(p(this,Ug))}onUnsubscribe(){var e;this.hasListeners()||((e=p(this,xd))==null||e.call(this),B(this,xd,void 0))}setEventListener(e){var t;B(this,Ug,e),(t=p(this,xd))==null||t.call(this),B(this,xd,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){p(this,jf)!==e&&(B(this,jf,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof p(this,jf)=="boolean"?p(this,jf):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},jf=new WeakMap,xd=new WeakMap,Ug=new WeakMap,GO),bL=new FX;function UX(){let n,e;const t=new Promise((s,i)=>{n=s,e=i});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}var zX=PX;function HX(){let n=[],e=0,t=l=>{l()},r=l=>{l()},s=zX;const i=l=>{e?n.push(l):s(()=>{t(l)})},o=()=>{const l=n;n=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{t(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var gi=HX(),zg,vd,Hg,$O,VX=($O=class extends IC{constructor(){super();W(this,zg,!0);W(this,vd);W(this,Hg);B(this,Hg,e=>{if(!RC&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){p(this,vd)||this.setEventListener(p(this,Hg))}onUnsubscribe(){var e;this.hasListeners()||((e=p(this,vd))==null||e.call(this),B(this,vd,void 0))}setEventListener(e){var t;B(this,Hg,e),(t=p(this,vd))==null||t.call(this),B(this,vd,e(this.setOnline.bind(this)))}setOnline(e){p(this,zg)!==e&&(B(this,zg,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return p(this,zg)}},zg=new WeakMap,vd=new WeakMap,Hg=new WeakMap,$O),sE=new VX;function WX(n){return Math.min(1e3*2**n,3e4)}function _L(n){return(n??"online")==="online"?sE.isOnline():!0}var zN=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function EL(n){let e=!1,t=0,r;const s=UX(),i=()=>s.status!=="pending",o=S=>{var I;if(!i()){const N=new zN(S);_(N),(I=n.onCancel)==null||I.call(n,N)}},l=()=>{e=!0},c=()=>{e=!1},f=()=>bL.isFocused()&&(n.networkMode==="always"||sE.isOnline())&&n.canRun(),g=()=>_L(n.networkMode)&&n.canRun(),y=S=>{i()||(r==null||r(),s.resolve(S))},_=S=>{i()||(r==null||r(),s.reject(S))},E=()=>new Promise(S=>{var I;r=N=>{(i()||f())&&S(N)},(I=n.onPause)==null||I.call(n)}).then(()=>{var S;r=void 0,i()||(S=n.onContinue)==null||S.call(n)}),P=()=>{if(i())return;let S;const I=t===0?n.initialPromise:void 0;try{S=I??n.fn()}catch(N){S=Promise.reject(N)}Promise.resolve(S).then(y).catch(N=>{var z;if(i())return;const k=n.retry??(RC?0:3),T=n.retryDelay??WX,D=typeof T=="function"?T(t,N):T,U=k===!0||typeof k=="number"&&t<k||typeof k=="function"&&k(t,N);if(e||!U){_(N);return}t++,(z=n.onFail)==null||z.call(n,t,N),DX(D).then(()=>f()?void 0:E()).then(()=>{e?_(N):P()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:c,canStart:g,start:()=>(g()?P():E().then(P),s)}}var Lf,qO,CL=(qO=class{constructor(){W(this,Lf)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),RX(this.gcTime)&&B(this,Lf,BN.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(RC?1/0:5*60*1e3))}clearGcTimeout(){p(this,Lf)&&(BN.clearTimeout(p(this,Lf)),B(this,Lf,void 0))}},Lf=new WeakMap,qO),Bf,Vg,Xo,Ff,as,oy,Uf,Oa,Ic,XO,GX=(XO=class extends CL{constructor(e){super();W(this,Oa);W(this,Bf);W(this,Vg);W(this,Xo);W(this,Ff);W(this,as);W(this,oy);W(this,Uf);B(this,Uf,!1),B(this,oy,e.defaultOptions),this.setOptions(e.options),this.observers=[],B(this,Ff,e.client),B(this,Xo,p(this,Ff).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,B(this,Bf,Y4(this.options)),this.state=e.state??p(this,Bf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=p(this,as))==null?void 0:e.promise}setOptions(e){if(this.options={...p(this,oy),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=Y4(this.options);t.data!==void 0&&(this.setState(X4(t.data,t.dataUpdatedAt)),B(this,Bf,t))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&p(this,Xo).remove(this)}setData(e,t){const r=jX(this.state.data,e,this.options);return G(this,Oa,Ic).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){G(this,Oa,Ic).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,s;const t=(r=p(this,as))==null?void 0:r.promise;return(s=p(this,as))==null||s.cancel(e),t?t.then(ka).catch(ka):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(p(this,Bf))}isActive(){return this.observers.some(e=>MX(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===CI||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>FN(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!kX(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=p(this,as))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=p(this,as))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),p(this,Xo).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(p(this,as)&&(p(this,Uf)?p(this,as).cancel({revert:!0}):p(this,as).cancelRetry()),this.scheduleGc()),p(this,Xo).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||G(this,Oa,Ic).call(this,{type:"invalidate"})}async fetch(e,t){var c,f,g,y,_,E,P,S,I,N,k,T;if(this.state.fetchStatus!=="idle"&&((c=p(this,as))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(p(this,as))return p(this,as).continueRetry(),p(this,as).promise}if(e&&this.setOptions(e),!this.options.queryFn){const D=this.observers.find(U=>U.options.queryFn);D&&this.setOptions(D.options)}const r=new AbortController,s=D=>{Object.defineProperty(D,"signal",{enumerable:!0,get:()=>(B(this,Uf,!0),r.signal)})},i=()=>{const D=wL(this.options,t),z=(()=>{const F={client:p(this,Ff),queryKey:this.queryKey,meta:this.meta};return s(F),F})();return B(this,Uf,!1),this.options.persister?this.options.persister(D,z,this):D(z)},l=(()=>{const D={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:p(this,Ff),state:this.state,fetchFn:i};return s(D),D})();(f=this.options.behavior)==null||f.onFetch(l,this),B(this,Vg,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((g=l.fetchOptions)==null?void 0:g.meta))&&G(this,Oa,Ic).call(this,{type:"fetch",meta:(y=l.fetchOptions)==null?void 0:y.meta}),B(this,as,EL({initialPromise:t==null?void 0:t.initialPromise,fn:l.fetchFn,onCancel:D=>{D instanceof zN&&D.revert&&this.setState({...p(this,Vg),fetchStatus:"idle"}),r.abort()},onFail:(D,U)=>{G(this,Oa,Ic).call(this,{type:"failed",failureCount:D,error:U})},onPause:()=>{G(this,Oa,Ic).call(this,{type:"pause"})},onContinue:()=>{G(this,Oa,Ic).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const D=await p(this,as).start();if(D===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(D),(E=(_=p(this,Xo).config).onSuccess)==null||E.call(_,D,this),(S=(P=p(this,Xo).config).onSettled)==null||S.call(P,D,this.state.error,this),D}catch(D){if(D instanceof zN){if(D.silent)return p(this,as).promise;if(D.revert){if(this.state.data===void 0)throw D;return this.state.data}}throw G(this,Oa,Ic).call(this,{type:"error",error:D}),(N=(I=p(this,Xo).config).onError)==null||N.call(I,D,this),(T=(k=p(this,Xo).config).onSettled)==null||T.call(k,this.state.data,D,this),D}finally{this.scheduleGc()}}},Bf=new WeakMap,Vg=new WeakMap,Xo=new WeakMap,Ff=new WeakMap,as=new WeakMap,oy=new WeakMap,Uf=new WeakMap,Oa=new WeakSet,Ic=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...$X(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,...X4(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return B(this,Vg,e.manual?s:void 0),s;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),gi.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),p(this,Xo).notify({query:this,type:"updated",action:e})})},XO);function $X(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:_L(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function X4(n,e){return{data:n,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Y4(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}function K4(n){return{onFetch:(e,t)=>{var g,y,_,E,P;const r=e.options,s=(_=(y=(g=e.fetchOptions)==null?void 0:g.meta)==null?void 0:y.fetchMore)==null?void 0:_.direction,i=((E=e.state.data)==null?void 0:E.pages)||[],o=((P=e.state.data)==null?void 0:P.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const f=async()=>{let S=!1;const I=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?S=!0:e.signal.addEventListener("abort",()=>{S=!0}),e.signal)})},N=wL(e.options,e.fetchOptions),k=async(T,D,U)=>{if(S)return Promise.reject();if(D==null&&T.pages.length)return Promise.resolve(T);const F=(()=>{const se={client:e.client,queryKey:e.queryKey,pageParam:D,direction:U?"backward":"forward",meta:e.options.meta};return I(se),se})(),X=await N(F),{maxPages:Z}=e.options,ne=U?BX:LX;return{pages:ne(T.pages,X,Z),pageParams:ne(T.pageParams,D,Z)}};if(s&&i.length){const T=s==="backward",D=T?qX:Z4,U={pages:i,pageParams:o},z=D(r,U);l=await k(U,z,T)}else{const T=n??i.length;do{const D=c===0?o[0]??r.initialPageParam:Z4(r,l);if(c>0&&D==null)break;l=await k(l,D),c++}while(c<T)}return l};e.options.persister?e.fetchFn=()=>{var S,I;return(I=(S=e.options).persister)==null?void 0:I.call(S,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=f}}}function Z4(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function qX(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var ay,Cl,ci,zf,Al,od,YO,XX=(YO=class extends CL{constructor(e){super();W(this,Al);W(this,ay);W(this,Cl);W(this,ci);W(this,zf);B(this,ay,e.client),this.mutationId=e.mutationId,B(this,ci,e.mutationCache),B(this,Cl,[]),this.state=e.state||YX(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){p(this,Cl).includes(e)||(p(this,Cl).push(e),this.clearGcTimeout(),p(this,ci).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){B(this,Cl,p(this,Cl).filter(t=>t!==e)),this.scheduleGc(),p(this,ci).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){p(this,Cl).length||(this.state.status==="pending"?this.scheduleGc():p(this,ci).remove(this))}continue(){var e;return((e=p(this,zf))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,l,c,f,g,y,_,E,P,S,I,N,k,T,D,U,z,F,X,Z;const t=()=>{G(this,Al,od).call(this,{type:"continue"})},r={client:p(this,ay),meta:this.options.meta,mutationKey:this.options.mutationKey};B(this,zf,EL({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(ne,se)=>{G(this,Al,od).call(this,{type:"failed",failureCount:ne,error:se})},onPause:()=>{G(this,Al,od).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>p(this,ci).canRun(this)}));const s=this.state.status==="pending",i=!p(this,zf).canStart();try{if(s)t();else{G(this,Al,od).call(this,{type:"pending",variables:e,isPaused:i}),await((l=(o=p(this,ci).config).onMutate)==null?void 0:l.call(o,e,this,r));const se=await((f=(c=this.options).onMutate)==null?void 0:f.call(c,e,r));se!==this.state.context&&G(this,Al,od).call(this,{type:"pending",context:se,variables:e,isPaused:i})}const ne=await p(this,zf).start();return await((y=(g=p(this,ci).config).onSuccess)==null?void 0:y.call(g,ne,e,this.state.context,this,r)),await((E=(_=this.options).onSuccess)==null?void 0:E.call(_,ne,e,this.state.context,r)),await((S=(P=p(this,ci).config).onSettled)==null?void 0:S.call(P,ne,null,this.state.variables,this.state.context,this,r)),await((N=(I=this.options).onSettled)==null?void 0:N.call(I,ne,null,e,this.state.context,r)),G(this,Al,od).call(this,{type:"success",data:ne}),ne}catch(ne){try{throw await((T=(k=p(this,ci).config).onError)==null?void 0:T.call(k,ne,e,this.state.context,this,r)),await((U=(D=this.options).onError)==null?void 0:U.call(D,ne,e,this.state.context,r)),await((F=(z=p(this,ci).config).onSettled)==null?void 0:F.call(z,void 0,ne,this.state.variables,this.state.context,this,r)),await((Z=(X=this.options).onSettled)==null?void 0:Z.call(X,void 0,ne,e,this.state.context,r)),ne}finally{G(this,Al,od).call(this,{type:"error",error:ne})}}finally{p(this,ci).runNext(this)}}},ay=new WeakMap,Cl=new WeakMap,ci=new WeakMap,zf=new WeakMap,Al=new WeakSet,od=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),gi.batch(()=>{p(this,Cl).forEach(r=>{r.onMutationUpdate(e)}),p(this,ci).notify({mutation:this,type:"updated",action:e})})},YO);function YX(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var zc,Da,ly,KO,KX=(KO=class extends IC{constructor(e={}){super();W(this,zc);W(this,Da);W(this,ly);this.config=e,B(this,zc,new Set),B(this,Da,new Map),B(this,ly,0)}build(e,t,r){const s=new XX({client:e,mutationCache:this,mutationId:++vr(this,ly)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){p(this,zc).add(e);const t=c_(e);if(typeof t=="string"){const r=p(this,Da).get(t);r?r.push(e):p(this,Da).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(p(this,zc).delete(e)){const t=c_(e);if(typeof t=="string"){const r=p(this,Da).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&p(this,Da).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=c_(e);if(typeof t=="string"){const r=p(this,Da).get(t),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=c_(e);if(typeof t=="string"){const s=(r=p(this,Da).get(t))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){gi.batch(()=>{p(this,zc).forEach(e=>{this.notify({type:"removed",mutation:e})}),p(this,zc).clear(),p(this,Da).clear()})}getAll(){return Array.from(p(this,zc))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>G4(t,r))}findAll(e={}){return this.getAll().filter(t=>G4(e,t))}notify(e){gi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return gi.batch(()=>Promise.all(e.map(t=>t.continue().catch(ka))))}},zc=new WeakMap,Da=new WeakMap,ly=new WeakMap,KO);function c_(n){var e;return(e=n.options.scope)==null?void 0:e.id}var Sl,ZO,ZX=(ZO=class extends IC{constructor(e={}){super();W(this,Sl);this.config=e,B(this,Sl,new Map)}build(e,t,r){const s=t.queryKey,i=t.queryHash??EI(s,t);let o=this.get(i);return o||(o=new GX({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){p(this,Sl).has(e.queryHash)||(p(this,Sl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=p(this,Sl).get(e.queryHash);t&&(e.destroy(),t===e&&p(this,Sl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){gi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return p(this,Sl).get(e)}getAll(){return[...p(this,Sl).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>W4(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>W4(e,r)):t}notify(e){gi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){gi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){gi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Sl=new WeakMap,ZO),yr,yd,wd,Wg,Gg,bd,$g,qg,QO,QX=(QO=class{constructor(n={}){W(this,yr);W(this,yd);W(this,wd);W(this,Wg);W(this,Gg);W(this,bd);W(this,$g);W(this,qg);B(this,yr,n.queryCache||new ZX),B(this,yd,n.mutationCache||new KX),B(this,wd,n.defaultOptions||{}),B(this,Wg,new Map),B(this,Gg,new Map),B(this,bd,0)}mount(){vr(this,bd)._++,p(this,bd)===1&&(B(this,$g,bL.subscribe(async n=>{n&&(await this.resumePausedMutations(),p(this,yr).onFocus())})),B(this,qg,sE.subscribe(async n=>{n&&(await this.resumePausedMutations(),p(this,yr).onOnline())})))}unmount(){var n,e;vr(this,bd)._--,p(this,bd)===0&&((n=p(this,$g))==null||n.call(this),B(this,$g,void 0),(e=p(this,qg))==null||e.call(this),B(this,qg,void 0))}isFetching(n){return p(this,yr).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return p(this,yd).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=p(this,yr).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=p(this,yr).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(FN(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return p(this,yr).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=p(this,yr).get(r.queryHash),i=s==null?void 0:s.state.data,o=IX(e,i);if(o!==void 0)return p(this,yr).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return gi.batch(()=>p(this,yr).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=p(this,yr).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=p(this,yr);gi.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=p(this,yr);return gi.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=gi.batch(()=>p(this,yr).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(ka).catch(ka)}invalidateQueries(n,e={}){return gi.batch(()=>(p(this,yr).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=gi.batch(()=>p(this,yr).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(ka)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ka)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=p(this,yr).build(this,e);return t.isStaleByTime(FN(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(ka).catch(ka)}fetchInfiniteQuery(n){return n.behavior=K4(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(ka).catch(ka)}ensureInfiniteQueryData(n){return n.behavior=K4(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return sE.isOnline()?p(this,yd).resumePausedMutations():Promise.resolve()}getQueryCache(){return p(this,yr)}getMutationCache(){return p(this,yd)}getDefaultOptions(){return p(this,wd)}setDefaultOptions(n){B(this,wd,n)}setQueryDefaults(n,e){p(this,Wg).set(zv(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...p(this,Wg).values()],t={};return e.forEach(r=>{Hv(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){p(this,Gg).set(zv(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...p(this,Gg).values()],t={};return e.forEach(r=>{Hv(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...p(this,wd).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=EI(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===CI&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...p(this,wd).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){p(this,yr).clear(),p(this,yd).clear()}},yr=new WeakMap,yd=new WeakMap,wd=new WeakMap,Wg=new WeakMap,Gg=new WeakMap,bd=new WeakMap,$g=new WeakMap,qg=new WeakMap,QO),JX=M.createContext(void 0),eY=({client:n,children:e})=>(M.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),h.jsx(JX.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vv(){return Vv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Vv.apply(this,arguments)}var ph;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ph||(ph={}));const Q4="popstate";function tY(n){n===void 0&&(n={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return HN("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:iE(s)}return rY(e,t,null,n)}function fr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function AI(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nY(){return Math.random().toString(36).substr(2,8)}function J4(n,e){return{usr:n.state,key:n.key,idx:e}}function HN(n,e,t,r){return t===void 0&&(t=null),Vv({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?X1(e):e,{state:t,key:e&&e.key||r||nY()})}function iE(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function X1(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function rY(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=ph.Pop,c=null,f=g();f==null&&(f=0,o.replaceState(Vv({},o.state,{idx:f}),""));function g(){return(o.state||{idx:null}).idx}function y(){l=ph.Pop;let I=g(),N=I==null?null:I-f;f=I,c&&c({action:l,location:S.location,delta:N})}function _(I,N){l=ph.Push;let k=HN(S.location,I,N);f=g()+1;let T=J4(k,f),D=S.createHref(k);try{o.pushState(T,"",D)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(D)}i&&c&&c({action:l,location:S.location,delta:1})}function E(I,N){l=ph.Replace;let k=HN(S.location,I,N);f=g();let T=J4(k,f),D=S.createHref(k);o.replaceState(T,"",D),i&&c&&c({action:l,location:S.location,delta:0})}function P(I){let N=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof I=="string"?I:iE(I);return k=k.replace(/ $/,"%20"),fr(N,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,N)}let S={get action(){return l},get location(){return n(s,o)},listen(I){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Q4,y),c=I,()=>{s.removeEventListener(Q4,y),c=null}},createHref(I){return e(s,I)},createURL:P,encodeLocation(I){let N=P(I);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:_,replace:E,go(I){return o.go(I)}};return S}var eM;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(eM||(eM={}));function sY(n,e,t){return t===void 0&&(t="/"),iY(n,e,t)}function iY(n,e,t,r){let s=typeof e=="string"?X1(e):e,i=P1(s.pathname||"/",t);if(i==null)return null;let o=AL(n);oY(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let f=xY(i);l=pY(o[c],f)}return l}function AL(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(fr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=Sh([r,c.relativePath]),g=t.concat(c);i.children&&i.children.length>0&&(fr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),AL(i.children,e,g,f)),!(i.path==null&&!i.index)&&e.push({path:f,score:fY(f,i.index),routesMeta:g})};return n.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of SL(i.path))s(i,o,c)}),e}function SL(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=SL(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function oY(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:mY(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const aY=/^:[\w-]+$/,lY=3,cY=2,uY=1,dY=10,hY=-2,tM=n=>n==="*";function fY(n,e){let t=n.split("/"),r=t.length;return t.some(tM)&&(r+=hY),e&&(r+=cY),t.filter(s=>!tM(s)).reduce((s,i)=>s+(aY.test(i)?lY:i===""?uY:dY),r)}function mY(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function pY(n,e,t){let{routesMeta:r}=n,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],f=l===r.length-1,g=i==="/"?e:e.slice(i.length)||"/",y=VN({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},g),_=c.route;if(!y)return null;Object.assign(s,y.params),o.push({params:s,pathname:Sh([i,y.pathname]),pathnameBase:_Y(Sh([i,y.pathnameBase])),route:_}),y.pathnameBase!=="/"&&(i=Sh([i,y.pathnameBase]))}return o}function VN(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=gY(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((f,g,y)=>{let{paramName:_,isOptional:E}=g;if(_==="*"){let S=l[y]||"";o=i.slice(0,i.length-S.length).replace(/(.)\/+$/,"$1")}const P=l[y];return E&&!P?f[_]=void 0:f[_]=(P||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:o,pattern:n}}function gY(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),AI(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function xY(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return AI(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function P1(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const vY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yY=n=>vY.test(n);function wY(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?X1(n):n,i;if(t)if(yY(t))i=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),AI(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+t))}t.startsWith("/")?i=nM(t.substring(1),"/"):i=nM(t,e)}else i=e;return{pathname:i,search:EY(r),hash:CY(s)}}function nM(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function rS(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bY(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function SI(n,e){let t=bY(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function NI(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=X1(n):(s=Vv({},n),fr(!s.pathname||!s.pathname.includes("?"),rS("?","pathname","search",s)),fr(!s.pathname||!s.pathname.includes("#"),rS("#","pathname","hash",s)),fr(!s.search||!s.search.includes("#"),rS("#","search","hash",s)));let i=n===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=t;else{let y=e.length-1;if(!r&&o.startsWith("..")){let _=o.split("/");for(;_[0]==="..";)_.shift(),y-=1;s.pathname=_.join("/")}l=y>=0?e[y]:"/"}let c=wY(s,l),f=o&&o!=="/"&&o.endsWith("/"),g=(i||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||g)&&(c.pathname+="/"),c}const Sh=n=>n.join("/").replace(/\/\/+/g,"/"),_Y=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),EY=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,CY=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function AY(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const NL=["post","put","patch","delete"];new Set(NL);const SY=["get",...NL];new Set(SY);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wv(){return Wv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wv.apply(this,arguments)}const kC=M.createContext(null),TL=M.createContext(null),Uu=M.createContext(null),MC=M.createContext(null),zu=M.createContext({outlet:null,matches:[],isDataRoute:!1}),PL=M.createContext(null);function NY(n,e){let{relative:t}=e===void 0?{}:e;Y1()||fr(!1);let{basename:r,navigator:s}=M.useContext(Uu),{hash:i,pathname:o,search:l}=OC(n,{relative:t}),c=o;return r!=="/"&&(c=o==="/"?r:Sh([r,o])),s.createHref({pathname:c,search:l,hash:i})}function Y1(){return M.useContext(MC)!=null}function fc(){return Y1()||fr(!1),M.useContext(MC).location}function IL(n){M.useContext(Uu).static||M.useLayoutEffect(n)}function ul(){let{isDataRoute:n}=M.useContext(zu);return n?UY():TY()}function TY(){Y1()||fr(!1);let n=M.useContext(kC),{basename:e,future:t,navigator:r}=M.useContext(Uu),{matches:s}=M.useContext(zu),{pathname:i}=fc(),o=JSON.stringify(SI(s,t.v7_relativeSplatPath)),l=M.useRef(!1);return IL(()=>{l.current=!0}),M.useCallback(function(f,g){if(g===void 0&&(g={}),!l.current)return;if(typeof f=="number"){r.go(f);return}let y=NI(f,JSON.parse(o),i,g.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Sh([e,y.pathname])),(g.replace?r.replace:r.push)(y,g.state,g)},[e,r,o,i,n])}function RL(){let{matches:n}=M.useContext(zu),e=n[n.length-1];return e?e.params:{}}function OC(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=M.useContext(Uu),{matches:s}=M.useContext(zu),{pathname:i}=fc(),o=JSON.stringify(SI(s,r.v7_relativeSplatPath));return M.useMemo(()=>NI(n,JSON.parse(o),i,t==="path"),[n,o,i,t])}function PY(n,e){return IY(n,e)}function IY(n,e,t,r){Y1()||fr(!1);let{navigator:s}=M.useContext(Uu),{matches:i}=M.useContext(zu),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let f=fc(),g;if(e){var y;let I=typeof e=="string"?X1(e):e;c==="/"||(y=I.pathname)!=null&&y.startsWith(c)||fr(!1),g=I}else g=f;let _=g.pathname||"/",E=_;if(c!=="/"){let I=c.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(I.length).join("/")}let P=sY(n,{pathname:E}),S=DY(P&&P.map(I=>Object.assign({},I,{params:Object.assign({},l,I.params),pathname:Sh([c,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?c:Sh([c,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),i,t,r);return e&&S?M.createElement(MC.Provider,{value:{location:Wv({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:ph.Pop}},S):S}function RY(){let n=FY(),e=AY(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:s},t):null,null)}const kY=M.createElement(RY,null);class MY extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?M.createElement(zu.Provider,{value:this.props.routeContext},M.createElement(PL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OY(n){let{routeContext:e,match:t,children:r}=n,s=M.useContext(kC);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(zu.Provider,{value:e},r)}function DY(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=(s=t)==null?void 0:s.errors;if(l!=null){let g=o.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);g>=0||fr(!1),o=o.slice(0,Math.min(o.length,g+1))}let c=!1,f=-1;if(t&&r&&r.v7_partialHydration)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=g),y.route.id){let{loaderData:_,errors:E}=t,P=y.route.loader&&_[y.route.id]===void 0&&(!E||E[y.route.id]===void 0);if(y.route.lazy||P){c=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((g,y,_)=>{let E,P=!1,S=null,I=null;t&&(E=l&&y.route.id?l[y.route.id]:void 0,S=y.route.errorElement||kY,c&&(f<0&&_===0?(zY("route-fallback"),P=!0,I=null):f===_&&(P=!0,I=y.route.hydrateFallbackElement||null)));let N=e.concat(o.slice(0,_+1)),k=()=>{let T;return E?T=S:P?T=I:y.route.Component?T=M.createElement(y.route.Component,null):y.route.element?T=y.route.element:T=g,M.createElement(OY,{match:y,routeContext:{outlet:g,matches:N,isDataRoute:t!=null},children:T})};return t&&(y.route.ErrorBoundary||y.route.errorElement||_===0)?M.createElement(MY,{location:t.location,revalidation:t.revalidation,component:S,error:E,children:k(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):k()},null)}var kL=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(kL||{}),ML=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(ML||{});function jY(n){let e=M.useContext(kC);return e||fr(!1),e}function LY(n){let e=M.useContext(TL);return e||fr(!1),e}function BY(n){let e=M.useContext(zu);return e||fr(!1),e}function OL(n){let e=BY(),t=e.matches[e.matches.length-1];return t.route.id||fr(!1),t.route.id}function FY(){var n;let e=M.useContext(PL),t=LY(),r=OL();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function UY(){let{router:n}=jY(kL.UseNavigateStable),e=OL(ML.UseNavigateStable),t=M.useRef(!1);return IL(()=>{t.current=!0}),M.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Wv({fromRouteId:e},i)))},[n,e])}const rM={};function zY(n,e,t){rM[n]||(rM[n]=!0)}function HY(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function hf(n){let{to:e,replace:t,state:r,relative:s}=n;Y1()||fr(!1);let{future:i,static:o}=M.useContext(Uu),{matches:l}=M.useContext(zu),{pathname:c}=fc(),f=ul(),g=NI(e,SI(l,i.v7_relativeSplatPath),c,s==="path"),y=JSON.stringify(g);return M.useEffect(()=>f(JSON.parse(y),{replace:t,state:r,relative:s}),[f,y,s,t,r]),null}function Mt(n){fr(!1)}function VY(n){let{basename:e="/",children:t=null,location:r,navigationType:s=ph.Pop,navigator:i,static:o=!1,future:l}=n;Y1()&&fr(!1);let c=e.replace(/^\/*/,"/"),f=M.useMemo(()=>({basename:c,navigator:i,static:o,future:Wv({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=X1(r));let{pathname:g="/",search:y="",hash:_="",state:E=null,key:P="default"}=r,S=M.useMemo(()=>{let I=P1(g,c);return I==null?null:{location:{pathname:I,search:y,hash:_,state:E,key:P},navigationType:s}},[c,g,y,_,E,P,s]);return S==null?null:M.createElement(Uu.Provider,{value:f},M.createElement(MC.Provider,{children:t,value:S}))}function WY(n){let{children:e,location:t}=n;return PY(WN(e),t)}new Promise(()=>{});function WN(n,e){e===void 0&&(e=[]);let t=[];return M.Children.forEach(n,(r,s)=>{if(!M.isValidElement(r))return;let i=[...e,s];if(r.type===M.Fragment){t.push.apply(t,WN(r.props.children,i));return}r.type!==Mt&&fr(!1),!r.props.index||!r.props.children||fr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=WN(r.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oE(){return oE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},oE.apply(this,arguments)}function DL(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function GY(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function $Y(n,e){return n.button===0&&(!e||e==="_self")&&!GY(n)}const qY=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],XY=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],YY="6";try{window.__reactRouterVersion=YY}catch{}const KY=M.createContext({isTransitioning:!1}),ZY="startTransition",sM=tC[ZY];function QY(n){let{basename:e,children:t,future:r,window:s}=n,i=M.useRef();i.current==null&&(i.current=tY({window:s,v5Compat:!0}));let o=i.current,[l,c]=M.useState({action:o.action,location:o.location}),{v7_startTransition:f}=r||{},g=M.useCallback(y=>{f&&sM?sM(()=>c(y)):c(y)},[c,f]);return M.useLayoutEffect(()=>o.listen(g),[o,g]),M.useEffect(()=>HY(r),[r]),M.createElement(VY,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,future:r})}const JY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tK=M.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:f,preventScrollReset:g,viewTransition:y}=e,_=DL(e,qY),{basename:E}=M.useContext(Uu),P,S=!1;if(typeof f=="string"&&eK.test(f)&&(P=f,JY))try{let T=new URL(window.location.href),D=f.startsWith("//")?new URL(T.protocol+f):new URL(f),U=P1(D.pathname,E);D.origin===T.origin&&U!=null?f=U+D.search+D.hash:S=!0}catch{}let I=NY(f,{relative:s}),N=sK(f,{replace:o,state:l,target:c,preventScrollReset:g,relative:s,viewTransition:y});function k(T){r&&r(T),T.defaultPrevented||N(T)}return M.createElement("a",oE({},_,{href:P||I,onClick:S||i?r:k,ref:t,target:c}))}),nK=M.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:f,children:g}=e,y=DL(e,XY),_=OC(c,{relative:y.relative}),E=fc(),P=M.useContext(TL),{navigator:S,basename:I}=M.useContext(Uu),N=P!=null&&iK(_)&&f===!0,k=S.encodeLocation?S.encodeLocation(_).pathname:_.pathname,T=E.pathname,D=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;s||(T=T.toLowerCase(),D=D?D.toLowerCase():null,k=k.toLowerCase()),D&&I&&(D=P1(D,I)||D);const U=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let z=T===k||!o&&T.startsWith(k)&&T.charAt(U)==="/",F=D!=null&&(D===k||!o&&D.startsWith(k)&&D.charAt(k.length)==="/"),X={isActive:z,isPending:F,isTransitioning:N},Z=z?r:void 0,ne;typeof i=="function"?ne=i(X):ne=[i,z?"active":null,F?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let se=typeof l=="function"?l(X):l;return M.createElement(tK,oE({},y,{"aria-current":Z,className:ne,ref:t,style:se,to:c,viewTransition:f}),typeof g=="function"?g(X):g)});var GN;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(GN||(GN={}));var iM;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(iM||(iM={}));function rK(n){let e=M.useContext(kC);return e||fr(!1),e}function sK(n,e){let{target:t,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=ul(),f=fc(),g=OC(n,{relative:o});return M.useCallback(y=>{if($Y(y,t)){y.preventDefault();let _=r!==void 0?r:iE(f)===iE(g);c(n,{replace:_,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[f,c,g,r,s,t,n,i,o,l])}function iK(n,e){e===void 0&&(e={});let t=M.useContext(KY);t==null&&fr(!1);let{basename:r}=rK(GN.useViewTransitionState),s=OC(n,{relative:e.relative});if(!t.isTransitioning)return!1;let i=P1(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=P1(t.nextLocation.pathname,r)||t.nextLocation.pathname;return VN(s.pathname,o)!=null||VN(s.pathname,i)!=null}const jL=M.createContext(void 0);function oK({children:n,defaultTheme:e="dark"}){const[t,r]=M.useState(()=>localStorage.getItem("signea-theme")||e);M.useEffect(()=>{const i=window.document.documentElement;i.classList.remove("light","dark"),i.classList.add(t),localStorage.setItem("signea-theme",t)},[t]);const s=()=>{r(i=>i==="dark"?"light":"dark")};return h.jsx(jL.Provider,{value:{theme:t,toggleTheme:s},children:n})}function aK(){const n=M.useContext(jL);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n}const LL=M.createContext(void 0),lK=["user","approver","organizer","campus"];function cK({children:n}){const[e,t]=M.useState("user"),r=i=>{s(i)&&t(i)},s=i=>lK.includes(i);return h.jsx(LL.Provider,{value:{currentProfile:e,setProfile:r,hasPermission:s},children:n})}function uK(){const n=M.useContext(LL);if(!n)throw new Error("useProfile must be used within ProfileProvider");return n}const dK=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class TI extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class hK extends TI{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class oM extends TI{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class aM extends TI{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var $N;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})($N||($N={}));class fK{constructor(e,{headers:t={},customFetch:r,region:s=$N.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=dK(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return rt(this,arguments,void 0,function*(t,r={}){var s;let i,o;try{const{headers:l,method:c,body:f,signal:g,timeout:y}=r;let _={},{region:E}=r;E||(E=this.region);const P=new URL(`${this.url}/${t}`);E&&E!=="any"&&(_["x-region"]=E,P.searchParams.set("forceFunctionRegion",E));let S;f&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",S=f):typeof f=="string"?(_["Content-Type"]="text/plain",S=f):typeof FormData<"u"&&f instanceof FormData?S=f:(_["Content-Type"]="application/json",S=JSON.stringify(f)):S=f;let I=g;y&&(o=new AbortController,i=setTimeout(()=>o.abort(),y),g?(I=o.signal,g.addEventListener("abort",()=>o.abort())):I=o.signal);const N=yield this.fetch(P.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),l),body:S,signal:I}).catch(U=>{throw new hK(U)}),k=N.headers.get("x-relay-error");if(k&&k==="true")throw new oM(N);if(!N.ok)throw new aM(N);let T=((s=N.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),D;return T==="application/json"?D=yield N.json():T==="application/octet-stream"||T==="application/pdf"?D=yield N.blob():T==="text/event-stream"?D=N:T==="multipart/form-data"?D=yield N.formData():D=yield N.text(),{data:D,error:null,response:N}}catch(l){return{data:null,error:l,response:l instanceof aM||l instanceof oM?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var xi={};const K1=Az(OW);var u_={},d_={},h_={},f_={},m_={},p_={},lM;function BL(){if(lM)return p_;lM=1,Object.defineProperty(p_,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return p_.default=n,p_}var cM;function FL(){if(cM)return m_;cM=1,Object.defineProperty(m_,"__esModule",{value:!0});const e=K1.__importDefault(BL());class t{constructor(s){var i,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(o=s.isMaybeSingle)!==null&&o!==void 0?o:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var f,g,y,_;let E=null,P=null,S=null,I=c.status,N=c.statusText;if(c.ok){if(this.method!=="HEAD"){const U=await c.text();U===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?P=U:P=JSON.parse(U))}const T=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),D=(y=c.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");T&&D&&D.length>1&&(S=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(P)&&(P.length>1?(E={code:"PGRST116",details:`Results contain ${P.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},P=null,S=null,I=406,N="Not Acceptable"):P.length===1?P=P[0]:P=null)}else{const T=await c.text();try{E=JSON.parse(T),Array.isArray(E)&&c.status===404&&(P=[],E=null,I=200,N="OK")}catch{c.status===404&&T===""?(I=204,N="No Content"):E={message:T}}if(E&&this.isMaybeSingle&&(!((_=E==null?void 0:E.details)===null||_===void 0)&&_.includes("0 rows"))&&(E=null,I=200,N="OK"),E&&this.shouldThrowOnError)throw new e.default(E)}return{error:E,data:P,count:S,status:I,statusText:N}});return this.shouldThrowOnError||(l=l.catch(c=>{var f,g,y,_,E,P;let S="";const I=c==null?void 0:c.cause;if(I){const N=(f=I==null?void 0:I.message)!==null&&f!==void 0?f:"",k=(g=I==null?void 0:I.code)!==null&&g!==void 0?g:"";S=`${(y=c==null?void 0:c.name)!==null&&y!==void 0?y:"FetchError"}: ${c==null?void 0:c.message}`,S+=`

Caused by: ${(_=I==null?void 0:I.name)!==null&&_!==void 0?_:"Error"}: ${N}`,k&&(S+=` (${k})`),I!=null&&I.stack&&(S+=`
${I.stack}`)}else S=(E=c==null?void 0:c.stack)!==null&&E!==void 0?E:"";return{error:{message:`${(P=c==null?void 0:c.name)!==null&&P!==void 0?P:"FetchError"}: ${c==null?void 0:c.message}`,details:S,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(s,i)}returns(){return this}overrideTypes(){return this}}return m_.default=t,m_}var uM;function UL(){if(uM)return f_;uM=1,Object.defineProperty(f_,"__esModule",{value:!0});const e=K1.__importDefault(FL());class t extends e.default{select(s){let i=!1;const o=(s??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const f=c?`${c}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,f=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(f,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:f="text"}={}){var g;const y=[s?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),_=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${_}"; options=${y};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return f_.default=t,f_}var dM;function PI(){if(dM)return h_;dM=1,Object.defineProperty(h_,"__esModule",{value:!0});const e=K1.__importDefault(UL()),t=new RegExp("[,()]");class r extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(c=>typeof c=="string"&&t.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:c}={}){let f="";c==="plain"?f="pl":c==="phrase"?f="ph":c==="websearch"&&(f="w");const g=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${f}fts${g}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}}return h_.default=r,h_}var hM;function zL(){if(hM)return d_;hM=1,Object.defineProperty(d_,"__esModule",{value:!0});const e=K1.__importDefault(PI());class t{constructor(s,{headers:i={},schema:o,fetch:l}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(s,i){const{head:o=!1,count:l}=i??{},c=o?"HEAD":"GET";let f=!1;const g=(s??"*").split("").map(y=>/\s/.test(y)&&!f?"":(y==='"'&&(f=!f),y)).join("");return this.url.searchParams.set("select",g),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var l;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(f.length>0){const g=[...new Set(f)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var f;const g="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const y=s.reduce((_,E)=>_.concat(Object.keys(E)),[]);if(y.length>0){const _=[...new Set(y)].map(E=>`"${E}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(s,{count:i}={}){var o;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return d_.default=t,d_}var fM;function mK(){if(fM)return u_;fM=1,Object.defineProperty(u_,"__esModule",{value:!0});const n=K1,e=n.__importDefault(zL()),t=n.__importDefault(PI());class r{constructor(i,{headers:o={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(i){const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new r(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:c=!1,count:f}={}){var g;let y;const _=new URL(`${this.url}/rpc/${i}`);let E;l||c?(y=l?"HEAD":"GET",Object.entries(o).filter(([S,I])=>I!==void 0).map(([S,I])=>[S,Array.isArray(I)?`{${I.join(",")}}`:`${I}`]).forEach(([S,I])=>{_.searchParams.append(S,I)})):(y="POST",E=o);const P=new Headers(this.headers);return f&&P.set("Prefer",`count=${f}`),new t.default({method:y,url:_,headers:P,schema:this.schemaName,body:E,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return u_.default=r,u_}Object.defineProperty(xi,"__esModule",{value:!0});var HL=xi.PostgrestError=QL=xi.PostgrestBuilder=KL=xi.PostgrestTransformBuilder=XL=xi.PostgrestFilterBuilder=$L=xi.PostgrestQueryBuilder=WL=xi.PostgrestClient=void 0;const Z1=K1,VL=Z1.__importDefault(mK());var WL=xi.PostgrestClient=VL.default;const GL=Z1.__importDefault(zL());var $L=xi.PostgrestQueryBuilder=GL.default;const qL=Z1.__importDefault(PI());var XL=xi.PostgrestFilterBuilder=qL.default;const YL=Z1.__importDefault(UL());var KL=xi.PostgrestTransformBuilder=YL.default;const ZL=Z1.__importDefault(FL());var QL=xi.PostgrestBuilder=ZL.default;const JL=Z1.__importDefault(BL());HL=xi.PostgrestError=JL.default;var e5=xi.default={PostgrestClient:VL.default,PostgrestQueryBuilder:GL.default,PostgrestFilterBuilder:qL.default,PostgrestTransformBuilder:YL.default,PostgrestBuilder:ZL.default,PostgrestError:JL.default};const pK=sP({__proto__:null,get PostgrestBuilder(){return QL},get PostgrestClient(){return WL},get PostgrestError(){return HL},get PostgrestFilterBuilder(){return XL},get PostgrestQueryBuilder(){return $L},get PostgrestTransformBuilder(){return KL},default:e5},[xi]),{PostgrestClient:gK,PostgrestQueryBuilder:Qce,PostgrestFilterBuilder:Jce,PostgrestTransformBuilder:eue,PostgrestBuilder:tue,PostgrestError:nue}=e5||pK;class xK{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const vK="2.83.0",yK=`realtime-js/${vK}`,t5="1.0.0",wK="2.0.0",mM=t5,qN=1e4,bK=1e3,_K=100;var Sf;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Sf||(Sf={}));var Gr;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Gr||(Gr={}));var aa;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(aa||(aa={}));var XN;(function(n){n.websocket="websocket"})(XN||(XN={}));var Nf;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Nf||(Nf={}));class EK{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,t){if(this._isArrayBuffer(e.payload))return t(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodePush(e){var t,r;const{event:s,topic:i,payload:o}=e,l=(t=e.ref)!==null&&t!==void 0?t:"",c=(r=e.join_ref)!==null&&r!==void 0?r:"",f=this.META_LENGTH+c.length+l.length+i.length+s.length,g=new ArrayBuffer(this.HEADER_LENGTH+f);let y=new DataView(g),_=0;y.setUint8(_++,this.KINDS.push),y.setUint8(_++,c.length),y.setUint8(_++,l.length),y.setUint8(_++,i.length),y.setUint8(_++,s.length),Array.from(c,P=>y.setUint8(_++,P.charCodeAt(0))),Array.from(l,P=>y.setUint8(_++,P.charCodeAt(0))),Array.from(i,P=>y.setUint8(_++,P.charCodeAt(0))),Array.from(s,P=>y.setUint8(_++,P.charCodeAt(0)));var E=new Uint8Array(g.byteLength+o.byteLength);return E.set(new Uint8Array(g),0),E.set(new Uint8Array(o),g.byteLength),E.buffer}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r,s,i;const o=e.topic,l=(t=e.ref)!==null&&t!==void 0?t:"",c=(r=e.join_ref)!==null&&r!==void 0?r:"",f=e.payload.event,g=(i=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&i!==void 0?i:new ArrayBuffer(0),y=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+f.length,_=new ArrayBuffer(this.HEADER_LENGTH+y);let E=new DataView(_),P=0;E.setUint8(P++,this.KINDS.userBroadcastPush),E.setUint8(P++,c.length),E.setUint8(P++,l.length),E.setUint8(P++,o.length),E.setUint8(P++,f.length),E.setUint8(P++,this.BINARY_ENCODING),Array.from(c,I=>E.setUint8(P++,I.charCodeAt(0))),Array.from(l,I=>E.setUint8(P++,I.charCodeAt(0))),Array.from(o,I=>E.setUint8(P++,I.charCodeAt(0))),Array.from(f,I=>E.setUint8(P++,I.charCodeAt(0)));var S=new Uint8Array(_.byteLength+g.byteLength);return S.set(new Uint8Array(_),0),S.set(new Uint8Array(g),_.byteLength),S.buffer}_encodeJsonUserBroadcastPush(e){var t,r,s,i;const o=e.topic,l=(t=e.ref)!==null&&t!==void 0?t:"",c=(r=e.join_ref)!==null&&r!==void 0?r:"",f=e.payload.event,g=(i=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&i!==void 0?i:{},_=new TextEncoder().encode(JSON.stringify(g)).buffer,E=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+f.length,P=new ArrayBuffer(this.HEADER_LENGTH+E);let S=new DataView(P),I=0;S.setUint8(I++,this.KINDS.userBroadcastPush),S.setUint8(I++,c.length),S.setUint8(I++,l.length),S.setUint8(I++,o.length),S.setUint8(I++,f.length),S.setUint8(I++,this.JSON_ENCODING),Array.from(c,k=>S.setUint8(I++,k.charCodeAt(0))),Array.from(l,k=>S.setUint8(I++,k.charCodeAt(0))),Array.from(o,k=>S.setUint8(I++,k.charCodeAt(0))),Array.from(f,k=>S.setUint8(I++,k.charCodeAt(0)));var N=new Uint8Array(P.byteLength+_.byteLength);return N.set(new Uint8Array(P),0),N.set(new Uint8Array(_),P.byteLength),N.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,o,l,c]=r;return t({join_ref:s,ref:i,topic:o,event:l,payload:c})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.push:return this._decodePush(e,t,s);case this.KINDS.reply:return this._decodeReply(e,t,s);case this.KINDS.broadcast:return this._decodeBroadcast(e,t,s);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,s)}}_decodePush(e,t,r){const s=t.getUint8(1),i=t.getUint8(2),o=t.getUint8(3);let l=this.HEADER_LENGTH+this.META_LENGTH-1;const c=r.decode(e.slice(l,l+s));l=l+s;const f=r.decode(e.slice(l,l+i));l=l+i;const g=r.decode(e.slice(l,l+o));l=l+o;const y=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{join_ref:c,ref:null,topic:f,event:g,payload:y}}_decodeReply(e,t,r){const s=t.getUint8(1),i=t.getUint8(2),o=t.getUint8(3),l=t.getUint8(4);let c=this.HEADER_LENGTH+this.META_LENGTH;const f=r.decode(e.slice(c,c+s));c=c+s;const g=r.decode(e.slice(c,c+i));c=c+i;const y=r.decode(e.slice(c,c+o));c=c+o;const _=r.decode(e.slice(c,c+l));c=c+l;const E=JSON.parse(r.decode(e.slice(c,e.byteLength))),P={status:_,response:E};return{join_ref:f,ref:g,topic:y,event:aa.reply,payload:P}}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+i));o=o+i;const f=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{join_ref:null,ref:null,topic:l,event:c,payload:f}}_decodeUserBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2),o=t.getUint8(3),l=t.getUint8(4);let c=this.HEADER_LENGTH+4;const f=r.decode(e.slice(c,c+s));c=c+s;const g=r.decode(e.slice(c,c+i));c=c+i;const y=r.decode(e.slice(c,c+o));c=c+o;const _=e.slice(c,e.byteLength),E=l===this.JSON_ENCODING?JSON.parse(r.decode(_)):_,P={type:this.BROADCAST,event:g,payload:E};return o>0&&(P.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST,payload:P}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}}class n5{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Un;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Un||(Un={}));const pM=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=CK(o,n,e,s),i),{}):{}},CK=(n,e,t,r)=>{const s=e.find(l=>l.name===n),i=s==null?void 0:s.type,o=t[n];return i&&!r.includes(i)?r5(i,o):YN(o)},r5=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return TK(e,t)}switch(n){case Un.bool:return AK(e);case Un.float4:case Un.float8:case Un.int2:case Un.int4:case Un.int8:case Un.numeric:case Un.oid:return SK(e);case Un.json:case Un.jsonb:return NK(e);case Un.timestamp:return PK(e);case Un.abstime:case Un.date:case Un.daterange:case Un.int4range:case Un.int8range:case Un.money:case Un.reltime:case Un.text:case Un.time:case Un.timestamptz:case Un.timetz:case Un.tsrange:case Un.tstzrange:return YN(e);default:return YN(e)}},YN=n=>n,AK=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},SK=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},NK=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},TK=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>r5(e,l))}return n},PK=n=>typeof n=="string"?n.replace(" ","T"):n,s5=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class sS{constructor(e,t,r={},s=qN){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var gM;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(gM||(gM={}));class vv{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vv.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=vv.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=vv.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),o=this.transformState(t),l={},c={};return this.map(i,(f,g)=>{o[f]||(c[f]=g)}),this.map(o,(f,g)=>{const y=i[f];if(y){const _=g.map(I=>I.presence_ref),E=y.map(I=>I.presence_ref),P=g.filter(I=>E.indexOf(I.presence_ref)<0),S=y.filter(I=>_.indexOf(I.presence_ref)<0);P.length>0&&(l[f]=P),S.length>0&&(c[f]=S)}else l[f]=g}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var f;const g=(f=e[l])!==null&&f!==void 0?f:[];if(e[l]=this.cloneDeep(c),g.length>0){const y=e[l].map(E=>E.presence_ref),_=g.filter(E=>y.indexOf(E.presence_ref)<0);e[l].unshift(..._)}r(l,g,c)}),this.map(o,(l,c)=>{let f=e[l];if(!f)return;const g=c.map(y=>y.presence_ref);f=f.filter(y=>g.indexOf(y.presence_ref)<0),e[l]=f,s(l,f,c),f.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xM;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(xM||(xM={}));var yv;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(yv||(yv={}));var Lc;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Lc||(Lc={}));class II{constructor(e,t={config:{}},r){var s,i;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Gr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new sS(this,aa.join,this.params,this.timeout),this.rejoinTimer=new n5(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Gr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Gr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Gr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Gr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Gr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(aa.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new vv(this),this.broadcastEndpointURL=s5(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Gr.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,f=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(E=>E.filter))!==null&&s!==void 0?s:[],g=!!this.bindings[yv.PRESENCE]&&this.bindings[yv.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,y={},_={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:g}),postgres_changes:f,private:c};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(E=>e==null?void 0:e(Lc.CHANNEL_ERROR,E)),this._onClose(()=>e==null?void 0:e(Lc.CLOSED)),this.updateJoinPayload(Object.assign({config:_},y)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:E})=>{var P;if(this.socket.setAuth(),E===void 0){e==null||e(Lc.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,I=(P=S==null?void 0:S.length)!==null&&P!==void 0?P:0,N=[];for(let k=0;k<I;k++){const T=S[k],{filter:{event:D,schema:U,table:z,filter:F}}=T,X=E&&E[k];if(X&&X.event===D&&X.schema===U&&X.table===z&&X.filter===F)N.push(Object.assign(Object.assign({},T),{id:X.id}));else{this.unsubscribe(),this.state=Gr.errored,e==null||e(Lc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,e&&e(Lc.SUBSCRIBED);return}}).receive("error",E=>{this.state=Gr.errored,e==null||e(Lc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Lc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Gr.joined&&e===yv.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const f=await l.json();c=f.error||f.message||c}catch{}return Promise.reject(new Error(c))}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),f.receive("ok",()=>i("ok")),f.receive("error",()=>i("error")),f.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Gr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(aa.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new sS(this,aa.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Gr.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new sS(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>_K){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:f,join:g}=aa;if(r&&[l,c,f,g].indexOf(o)>=0&&r!==this._joinRef())return;let _=this._onMessage(o,t,r);if(t&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(E=>{var P,S,I;return((P=E.filter)===null||P===void 0?void 0:P.event)==="*"||((I=(S=E.filter)===null||S===void 0?void 0:S.event)===null||I===void 0?void 0:I.toLocaleLowerCase())===o}).map(E=>E.callback(_,r)):(i=this.bindings[o])===null||i===void 0||i.filter(E=>{var P,S,I,N,k,T;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in E){const D=E.id,U=(P=E.filter)===null||P===void 0?void 0:P.event;return D&&((S=t.ids)===null||S===void 0?void 0:S.includes(D))&&(U==="*"||(U==null?void 0:U.toLocaleLowerCase())===((I=t.data)===null||I===void 0?void 0:I.type.toLocaleLowerCase()))}else{const D=(k=(N=E==null?void 0:E.filter)===null||N===void 0?void 0:N.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return D==="*"||D===((T=t==null?void 0:t.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===o}).map(E=>{if(typeof _=="object"&&"ids"in _){const P=_.data,{schema:S,table:I,commit_timestamp:N,type:k,errors:T}=P;_=Object.assign(Object.assign({},{schema:S,table:I,commit_timestamp:N,eventType:k,new:{},old:{},errors:T}),this._getPayloadRecords(P))}E.callback(_,r)})}_isClosed(){return this.state===Gr.closed}_isJoined(){return this.state===Gr.joined}_isJoining(){return this.state===Gr.joining}_isLeaving(){return this.state===Gr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&II.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(aa.close,{},e)}_onError(e){this._on(aa.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Gr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=pM(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=pM(e.columns,e.old_record)),t}}const iS=()=>{},g_={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},IK=[1e3,2e3,5e3,1e4],RK=1e4,kK=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class MK{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qN,this.transport=null,this.heartbeatIntervalMs=g_.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=iS,this.ref=0,this.reconnectTimer=null,this.vsn=mM,this.logger=iS,this.conn=null,this.sendBuffer=[],this.serializer=new EK,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${XN.websocket}`,this.httpEndpoint=s5(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xK.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Sf.connecting:return Nf.Connecting;case Sf.open:return Nf.Open;case Sf.closing:return Nf.Closing;default:return Nf.Closed}}isConnected(){return this.connectionState()===Nf.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new II(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(bK,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},g_.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=t,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(s,i,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Sf.open||this.conn.readyState===Sf.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(aa.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([kK],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const s={access_token:t,version:yK};t&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(aa.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new n5(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},g_.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,i,o,l,c,f,g,y,_,E;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:qN,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:g_.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:iS,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:mM,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e==null?void 0:e.reconnectAfterMs)!==null&&f!==void 0?f:P=>IK[P-1]||RK,this.vsn){case t5:this.encode=(g=e==null?void 0:e.encode)!==null&&g!==void 0?g:(P,S)=>S(JSON.stringify(P)),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:(P,S)=>S(JSON.parse(P));break;case wK:this.encode=(_=e==null?void 0:e.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(E=e==null?void 0:e.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class RI extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ur(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class OK extends RI{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class KN extends RI{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const kI=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),DK=()=>Response,ZN=n=>{if(Array.isArray(n))return n.map(t=>ZN(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=ZN(r)}),e},jK=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},oS=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},LK=(n,e,t)=>rt(void 0,void 0,void 0,function*(){const r=yield DK();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{const i=n.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new OK(oS(s),i,o))}).catch(s=>{e(new KN(oS(s),s))}):e(new KN(oS(n),n))}),BK=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?s:(jK(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function cb(n,e,t,r,s,i){return rt(this,void 0,void 0,function*(){return new Promise((o,l)=>{n(t,BK(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>LK(c,l,r))})})}function Gv(n,e,t,r){return rt(this,void 0,void 0,function*(){return cb(n,"GET",e,t,r)})}function Ma(n,e,t,r,s){return rt(this,void 0,void 0,function*(){return cb(n,"POST",e,r,s,t)})}function QN(n,e,t,r,s){return rt(this,void 0,void 0,function*(){return cb(n,"PUT",e,r,s,t)})}function FK(n,e,t,r){return rt(this,void 0,void 0,function*(){return cb(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function MI(n,e,t,r,s){return rt(this,void 0,void 0,function*(){return cb(n,"DELETE",e,r,s,t)})}class UK{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return rt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ur(e))return{data:null,error:e};throw e}})}}var i5;class zK{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[i5]="BlobDownloadBuilder",this.promise=null}asStream(){return new UK(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return rt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ur(e))return{data:null,error:e};throw e}})}}i5=Symbol.toStringTag;const HK={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vM={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class VK{constructor(e,t={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=kI(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,s){return rt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},vM),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const f=this._removeEmptyFolders(t),g=this._getFinalPath(f),y=yield(e=="PUT"?QN:Ma)(this.fetch,`${this.url}/object/${g}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:f,id:y.Id,fullPath:y.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ur(i))return{data:null,error:i};throw i}})}upload(e,t,r){return rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return rt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const f=Object.assign({upsert:vM.upsert},s),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",f.cacheControl)):(c=r,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType);const y=yield QN(this.fetch,l.toString(),c,{headers:g});return{data:{path:i,fullPath:y.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ur(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return rt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield Ma(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new RI("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}update(e,t,r){return rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return rt(this,void 0,void 0,function*(){try{return{data:yield Ma(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ur(s))return{data:null,error:s};throw s}})}copy(e,t,r){return rt(this,void 0,void 0,function*(){try{return{data:{path:(yield Ma(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ur(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return rt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Ma(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ur(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return rt(this,void 0,void 0,function*(){try{const s=yield Ma(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ur(s))return{data:null,error:s};throw s}})}download(e,t){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(e),c=()=>Gv(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new zK(c,this.shouldThrowOnError)}info(e){return rt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Gv(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ZN(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}exists(e){return rt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield FK(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r)&&r instanceof KN){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&s.push(c);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${f}`)}}}remove(e){return rt(this,void 0,void 0,function*(){try{return{data:yield MI(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}list(e,t,r){return rt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},HK),t),{prefix:e||""});return{data:yield Ma(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ur(s))return{data:null,error:s};throw s}})}listV2(e,t){return rt(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Ma(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const o5="2.83.0",a5={"X-Client-Info":`storage-js/${o5}`};class WK{constructor(e,t={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},a5),t),this.fetch=kI(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return rt(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield Gv(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}getBucket(e){return rt(this,void 0,void 0,function*(){try{return{data:yield Gv(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}createBucket(e){return rt(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield Ma(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ur(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return rt(this,void 0,void 0,function*(){try{return{data:yield QN(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}emptyBucket(e){return rt(this,void 0,void 0,function*(){try{return{data:yield Ma(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}deleteBucket(e){return rt(this,void 0,void 0,function*(){try{return{data:yield MI(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class GK{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},a5),t),this.fetch=kI(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return rt(this,void 0,void 0,function*(){try{return{data:yield Ma(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}listBuckets(e){return rt(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const r=t.toString(),s=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Gv(this.fetch,s,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}deleteBucket(e){return rt(this,void 0,void 0,function*(){try{return{data:yield MI(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ur(t))return{data:null,error:t};throw t}})}}const OI={"X-Client-Info":`storage-js/${o5}`,"Content-Type":"application/json"};class l5 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Co(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class aS extends l5{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class $K extends l5{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var yM;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(yM||(yM={}));const DI=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),qK=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},wM=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),XK=(n,e,t)=>rt(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const s=n.status||500,i=n;if(typeof i.json=="function")i.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";e(new aS(wM(o),s,l))}).catch(()=>{const o=s+"",l=i.statusText||`HTTP ${s} error`;e(new aS(l,s,o))});else{const o=s+"",l=i.statusText||`HTTP ${s} error`;e(new aS(l,s,o))}}else e(new $K(wM(n),n))}),YK=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return r?(qK(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),t)):s};function KK(n,e,t,r,s,i){return rt(this,void 0,void 0,function*(){return new Promise((o,l)=>{n(t,YK(e,r,s,i)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const f=c.headers.get("content-type");return!f||!f.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>XK(c,l,r))})})}function Ao(n,e,t,r,s){return rt(this,void 0,void 0,function*(){return KK(n,"POST",e,r,s,t)})}class ZK{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},OI),t),this.fetch=DI(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return rt(this,void 0,void 0,function*(){try{return{data:(yield Ao(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Co(t))return{data:null,error:t};throw t}})}getIndex(e,t){return rt(this,void 0,void 0,function*(){try{return{data:yield Ao(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Co(r))return{data:null,error:r};throw r}})}listIndexes(e){return rt(this,void 0,void 0,function*(){try{return{data:yield Ao(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Co(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return rt(this,void 0,void 0,function*(){try{return{data:(yield Ao(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Co(r))return{data:null,error:r};throw r}})}}class QK{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},OI),t),this.fetch=DI(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return rt(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ao(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Co(t))return{data:null,error:t};throw t}})}getVectors(e){return rt(this,void 0,void 0,function*(){try{return{data:yield Ao(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Co(t))return{data:null,error:t};throw t}})}listVectors(e){return rt(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Ao(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Co(t))return{data:null,error:t};throw t}})}queryVectors(e){return rt(this,void 0,void 0,function*(){try{return{data:yield Ao(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Co(t))return{data:null,error:t};throw t}})}deleteVectors(e){return rt(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ao(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Co(t))return{data:null,error:t};throw t}})}}class JK{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},OI),t),this.fetch=DI(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return rt(this,void 0,void 0,function*(){try{return{data:(yield Ao(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Co(t))return{data:null,error:t};throw t}})}getBucket(e){return rt(this,void 0,void 0,function*(){try{return{data:yield Ao(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Co(t))return{data:null,error:t};throw t}})}listBuckets(){return rt(this,arguments,void 0,function*(e={}){try{return{data:yield Ao(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Co(t))return{data:null,error:t};throw t}})}deleteBucket(e){return rt(this,void 0,void 0,function*(){try{return{data:(yield Ao(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Co(t))return{data:null,error:t};throw t}})}}class eZ extends JK{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new tZ(this.url,this.headers,e,this.fetch)}}class tZ extends ZK{constructor(e,t,r,s){super(e,t,s),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return rt(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return rt(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return rt(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return rt(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new nZ(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class nZ extends QK{constructor(e,t,r,s,i){super(e,t,i),this.vectorBucketName=r,this.indexName=s}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return rt(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return rt(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return rt(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return rt(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return rt(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class rZ extends WK{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new VK(this.url,this.headers,e,this.fetch)}get vectors(){return new eZ(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new GK(this.url+"/iceberg",this.headers,this.fetch)}}const sZ="2.83.0";let Fx="";typeof Deno<"u"?Fx="deno":typeof document<"u"?Fx="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Fx="react-native":Fx="node";const iZ={"X-Client-Info":`supabase-js-${Fx}/${sZ}`},oZ={headers:iZ},aZ={schema:"public"},lZ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cZ={},uZ=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),dZ=()=>Headers,hZ=(n,e,t)=>{const r=uZ(t),s=dZ();return async(i,o)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:n;let f=new s(o==null?void 0:o.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:f}))}};function fZ(n){return n.endsWith("/")?n:n+"/"}function mZ(n,e){var t,r;const{db:s,auth:i,realtime:o,global:l}=n,{db:c,auth:f,realtime:g,global:y}=e,_={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},f),i),realtime:Object.assign(Object.assign({},g),o),storage:{},global:Object.assign(Object.assign(Object.assign({},y),l),{headers:Object.assign(Object.assign({},(t=y==null?void 0:y.headers)!==null&&t!==void 0?t:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?_.accessToken=n.accessToken:delete _.accessToken,_}function pZ(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(fZ(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const c5="2.83.0",Kp=30*1e3,JN=3,lS=JN*Kp,gZ="http://localhost:9999",xZ="supabase.auth.token",vZ={"X-Client-Info":`gotrue-js/${c5}`},eT="X-Supabase-Api-Version",u5={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yZ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wZ=10*60*1e3;class $v extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function it(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class bZ extends $v{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function _Z(n){return it(n)&&n.name==="AuthApiError"}class Tf extends $v{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class qh extends $v{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class Zi extends qh{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function EZ(n){return it(n)&&n.name==="AuthSessionMissingError"}class Bp extends qh{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class x_ extends qh{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class v_ extends qh{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function CZ(n){return it(n)&&n.name==="AuthImplicitGrantRedirectError"}class bM extends qh{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tT extends qh{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function cS(n){return it(n)&&n.name==="AuthRetryableFetchError"}class _M extends qh{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class nT extends qh{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const aE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),EM=` 	
\r=`.split(""),AZ=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<EM.length;e+=1)n[EM[e].charCodeAt(0)]=-2;for(let e=0;e<aE.length;e+=1)n[aE[e].charCodeAt(0)]=e;return n})();function CM(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(aE[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(aE[r]),e.queuedBits-=6}}function d5(n,e,t){const r=AZ[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function AM(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{TZ(o,r,t)};for(let o=0;o<n.length;o+=1)d5(n.charCodeAt(o),s,i);return e.join("")}function SZ(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function NZ(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}SZ(r,e)}}function TZ(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function jg(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)d5(n.charCodeAt(s),t,r);return new Uint8Array(e)}function PZ(n){const e=[];return NZ(n,t=>e.push(t)),new Uint8Array(e)}function Df(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return n.forEach(s=>CM(s,t,r)),CM(null,t,r),e.join("")}function IZ(n){return Math.round(Date.now()/1e3)+n}function RZ(){return Symbol("auth-callback")}const bs=()=>typeof window<"u"&&typeof document<"u",ff={tested:!1,writable:!1},h5=()=>{if(!bs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ff.tested)return ff.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ff.tested=!0,ff.writable=!0}catch{ff.tested=!0,ff.writable=!1}return ff.writable};function kZ(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const f5=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),MZ=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Zp=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},mf=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},nd=async(n,e)=>{await n.removeItem(e)};class DC{constructor(){this.promise=new DC.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}DC.promiseConstructor=Promise;function uS(n){const e=n.split(".");if(e.length!==3)throw new nT("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!yZ.test(e[r]))throw new nT("JWT not in base64url format");return{header:JSON.parse(AM(e[0])),payload:JSON.parse(AM(e[1])),signature:jg(e[2]),raw:{header:e[0],payload:e[1]}}}async function OZ(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function DZ(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function jZ(n){return("0"+n.toString(16)).substr(-2)}function LZ(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,jZ).join("")}async function BZ(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function FZ(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await BZ(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fp(n,e,t=!1){const r=LZ();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await Zp(n,`${e}-code-verifier`,s);const i=await FZ(r);return[i,r===i?"plain":"s256"]}const UZ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zZ(n){const e=n.headers.get(eT);if(!e||!e.match(UZ))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function HZ(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function VZ(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const WZ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Up(n){if(!WZ.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function dS(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function GZ(n,e){return new Proxy(n,{get:(t,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,s)}})}function SM(n){return JSON.parse(JSON.stringify(n))}const xf=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),$Z=[502,503,504];async function NM(n){var e;if(!MZ(n))throw new tT(xf(n),0);if($Z.includes(n.status))throw new tT(xf(n),n.status);let t;try{t=await n.json()}catch(i){throw new Tf(xf(i),i)}let r;const s=zZ(n);if(s&&s.getTime()>=u5["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new _M(xf(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Zi}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new _M(xf(t),n.status,t.weak_password.reasons);throw new bZ(xf(t),n.status||500,r)}const qZ=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function dt(n,e,t,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[eT]||(i[eT]=u5["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await XZ(n,e,t+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function XZ(n,e,t,r,s,i){const o=qZ(e,r,s,i);let l;try{l=await n(t,Object.assign({},o))}catch(c){throw console.error(c),new tT(xf(c),0)}if(l.ok||await NM(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await NM(c)}}function Na(n){var e;let t=null;ZZ(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=IZ(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function TM(n){const e=Na(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function md(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function YZ(n){return{data:n,error:null}}function KZ(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,o=Gh(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function PM(n){return n}function ZZ(n){return n.access_token&&n.refresh_token&&n.expires_in}const hS=["global","local","others"];class QZ{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=f5(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=hS[0]){if(hS.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${hS.join(", ")}`);try{return await dt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:md})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Gh(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:KZ,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(it(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await dt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:md})}catch(t){if(it(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,o,l,c;try{const f={nextPage:null,lastPage:0,total:0},g=await dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:PM});if(g.error)throw g.error;const y=await g.json(),_=(o=g.headers.get("x-total-count"))!==null&&o!==void 0?o:0,E=(c=(l=g.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return E.length>0&&(E.forEach(P=>{const S=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(P.split(";")[1].split("=")[1]);f[`${I}Page`]=S}),f.total=parseInt(_)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(it(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){Up(e);try{return await dt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:md})}catch(t){if(it(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Up(e);try{return await dt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:md})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Up(e);try{return await dt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:md})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Up(e.userId);try{const{data:t,error:r}=await dt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(it(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Up(e.userId),Up(e.id);try{return{data:await dt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(it(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,s,i,o,l,c;try{const f={nextPage:null,lastPage:0,total:0},g=await dt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:PM});if(g.error)throw g.error;const y=await g.json(),_=(o=g.headers.get("x-total-count"))!==null&&o!==void 0?o:0,E=(c=(l=g.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return E.length>0&&(E.forEach(P=>{const S=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(P.split(";")[1].split("=")[1]);f[`${I}Page`]=S}),f.total=parseInt(_)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(it(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await dt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(it(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await dt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(it(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await dt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(it(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await dt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(it(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await dt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(it(t))return{data:null,error:t};throw t}}}function IM(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const zp={debug:!!(globalThis&&h5()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class m5 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class JZ extends m5{}async function eQ(n,e,t){zp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),zp.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){zp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{zp.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw zp.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new JZ(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(zp.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function tQ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function p5(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function nQ(n){return parseInt(n,16)}function rQ(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function sQ(n){var e;const{chainId:t,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:f,scheme:g,uri:y,version:_}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const E=p5(n.address),P=g?`${g}://${r}`:r,S=n.statement?`${n.statement}
`:"",I=`${P} wants you to sign in with your Ethereum account:
${E}

${S}`;let N=`URI: ${y}
Version: ${_}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(N+=`
Expiration Time: ${s.toISOString()}`),l&&(N+=`
Not Before: ${l.toISOString()}`),c&&(N+=`
Request ID: ${c}`),f){let k=`
Resources:`;for(const T of f){if(!T||typeof T!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${T}`);k+=`
- ${T}`}N+=k}return`${I}
${N}`}class Br extends Error{constructor({message:e,code:t,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=t}}class lE extends Br{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function iQ({error:n,options:e}){var t,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Br({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=i.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Br({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Br({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Br({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Br({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Br({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Br({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Br({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(g5(o)){if(i.rp.id!==o)return new Br({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Br({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Br({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Br({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Br({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function oQ({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Br({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Br({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(g5(r)){if(t.rpId!==r)return new Br({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Br({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Br({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Br({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class aQ{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const lQ=new aQ;function cQ(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,s=Gh(n,["challenge","user","excludeCredentials"]),i=jg(e).buffer,o=Object.assign(Object.assign({},t),{id:jg(t.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const f=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},f),{id:jg(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function uQ(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=Gh(n,["challenge","allowCredentials"]),s=jg(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(t&&t.length>0){i.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){const l=t[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:jg(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function dQ(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Df(new Uint8Array(n.response.attestationObject)),clientDataJSON:Df(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function hQ(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),s=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Df(new Uint8Array(s.authenticatorData)),clientDataJSON:Df(new Uint8Array(s.clientDataJSON)),signature:Df(new Uint8Array(s.signature)),userHandle:s.userHandle?Df(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function g5(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function RM(){var n,e;return!!(bs()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function fQ(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new lE("Browser returned unexpected credential type",e)}:{data:null,error:new lE("Empty credential response",e)}}catch(e){return{data:null,error:iQ({error:e,options:n})}}}async function mQ(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new lE("Browser returned unexpected credential type",e)}:{data:null,error:new lE("Empty credential response",e)}}catch(e){return{data:null,error:oQ({error:e,options:n})}}}const pQ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},gQ={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function cE(...n){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),t=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of n)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(t(o))r[i]=o;else if(e(o)){const l=r[i];e(l)?r[i]=cE(l,o):r[i]=cE(o)}else r[i]=o}return r}function xQ(n,e){return cE(pQ,n,e||{})}function vQ(n,e){return cE(gQ,n,e||{})}class yQ{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:s},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!o)return{data:null,error:l};const c=s??lQ.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:f}=o.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(o.webauthn.type){case"create":{const f=xQ(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:g,error:y}=await fQ({publicKey:f,signal:c});return g?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const f=vQ(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:g,error:y}=await mQ(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:f,signal:c}));return g?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(o){return it(o)?{data:null,error:o}:{data:null,error:new Tf("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!t)return{data:null,error:new $v("rpId is required for WebAuthn authentication")};try{if(!RM())return{data:null,error:new Tf("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:t,rpOrigins:r,credential_response:c.credential_response}})}catch(o){return it(o)?{data:null,error:o}:{data:null,error:new Tf("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!t)return{data:null,error:new $v("rpId is required for WebAuthn registration")};try{if(!RM())return{data:null,error:new Tf("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(g=>{var y;return(y=g.data)===null||y===void 0?void 0:y.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===e&&_.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:l};const{data:c,error:f}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:s},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:t,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:f}}catch(o){return it(o)?{data:null,error:o}:{data:null,error:new Tf("Unexpected error in register",o)}}}}tQ();const wQ={url:gZ,storageKey:xZ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vZ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function kM(n,e,t){return await t()}const Hp={};class qv{get jwks(){var e,t;return(t=(e=Hp[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Hp[this.storageKey]=Object.assign(Object.assign({},Hp[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Hp[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Hp[this.storageKey]=Object.assign(Object.assign({},Hp[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},wQ),e);if(this.storageKey=i.storageKey,this.instanceID=(t=qv.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,qv.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&bs()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new QZ({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=f5(i.fetch),this.lock=i.lock||kM,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:bs()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=eQ:this.lock=kM,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new yQ(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:h5()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=IM(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=IM(this.memoryStorage)),bs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${c5}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},r="none";if(bs()&&(t=kZ(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),bs()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),CZ(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return it(t)?this._returnResult({error:t}):this._returnResult({error:new Tf("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Na}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:f,session:c},error:null})}catch(i){if(it(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:g,password:y,options:_}=e;let E=null,P=null;this.flowType==="pkce"&&([E,P]=await Fp(this.storage,this.storageKey)),i=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:g,password:y,data:(t=_==null?void 0:_.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:E,code_challenge_method:P},xform:Na})}else if("phone"in e){const{phone:g,password:y,options:_}=e;i=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},channel:(s=_==null?void 0:_.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:Na})}else throw new x_("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:f,session:c},error:null})}catch(i){if(it(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:TM})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:TM})}else throw new x_("You must provide either an email or phone number and a password");const{data:r,error:s}=t;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new Bp;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(it(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,s,i,o,l,c,f,g,y,_;let E,P;if("message"in e)E=e.message,P=e.signature;else{const{chain:S,wallet:I,statement:N,options:k}=e;let T;if(bs())if(typeof I=="object")T=I;else{const Z=window;if("ethereum"in Z&&typeof Z.ethereum=="object"&&"request"in Z.ethereum&&typeof Z.ethereum.request=="function")T=Z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=I}const D=new URL((t=k==null?void 0:k.url)!==null&&t!==void 0?t:window.location.href),U=await T.request({method:"eth_requestAccounts"}).then(Z=>Z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=p5(U[0]);let F=(r=k==null?void 0:k.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!F){const Z=await T.request({method:"eth_chainId"});F=nQ(Z)}const X={domain:D.host,address:z,statement:N,uri:D.href,version:"1",chainId:F,nonce:(s=k==null?void 0:k.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=k==null?void 0:k.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=k==null?void 0:k.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=k==null?void 0:k.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(f=k==null?void 0:k.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(g=k==null?void 0:k.signInWithEthereum)===null||g===void 0?void 0:g.resources};E=sQ(X),P=await T.request({method:"personal_sign",params:[rQ(E),z]})}try{const{data:S,error:I}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:P},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Na});if(I)throw I;if(!S||!S.session||!S.user){const N=new Bp;return this._returnResult({data:{user:null,session:null},error:N})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:I})}catch(S){if(it(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(e){var t,r,s,i,o,l,c,f,g,y,_,E;let P,S;if("message"in e)P=e.message,S=e.signature;else{const{chain:I,wallet:N,statement:k,options:T}=e;let D;if(bs())if(typeof N=="object")D=N;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))D=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=N}const U=new URL((t=T==null?void 0:T.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in D&&D.signIn){const z=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T==null?void 0:T.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),k?{statement:k}:null));let F;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")F=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)F=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)P=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),S=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");P=[`${U.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(s=(r=T==null?void 0:T.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=T==null?void 0:T.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((o=T==null?void 0:T.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((l=T==null?void 0:T.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((c=T==null?void 0:T.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((f=T==null?void 0:T.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((y=(g=T==null?void 0:T.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...T.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const z=await D.signMessage(new TextEncoder().encode(P),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=z}}try{const{data:I,error:N}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:P,signature:Df(S)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:Na});if(N)throw N;if(!I||!I.session||!I.user){const k=new Bp;return this._returnResult({data:{user:null,session:null},error:k})}return I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),this._returnResult({data:Object.assign({},I),error:N})}catch(I){if(it(I))return this._returnResult({data:{user:null,session:null},error:I});throw I}}async _exchangeCodeForSession(e){const t=await mf(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:i,error:o}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Na});if(await nd(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new Bp;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(it(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:o}=e,l=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Na}),{data:c,error:f}=l;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!c||!c.session||!c.user){const g=new Bp;return this._returnResult({data:{user:null,session:null},error:g})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:f})}catch(t){if(it(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,s,i,o;try{if("email"in e){const{email:l,options:c}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Fp(this.storage,this.storageKey));const{error:y}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in e){const{phone:l,options:c}=e,{data:f,error:g}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:g})}throw new x_("You must provide either an email or phone number.")}catch(l){if(it(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Na});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,f=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:f,session:c},error:null})}catch(s){if(it(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var t,r,s,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Fp(this.storage,this.storageKey));const f=await dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:YZ});return!((i=f.data)===null||i===void 0)&&i.url&&bs()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(l){if(it(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Zi;const{error:s}=await dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(it(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await dt(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:l}=await dt(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new x_("You must provide either an email or phone number and a type")}catch(t){if(it(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await mf(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<lS:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await mf(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=dS()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=GZ(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:md}):await this._useSession(async t=>{var r,s,i;const{data:o,error:l}=t;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Zi}:await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:md})})}catch(t){if(it(t))return EZ(t)&&(await this._removeSession(),await nd(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Zi;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Fp(this.storage,this.storageKey));const{data:f,error:g}=await dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:md});if(g)throw g;return o.user=f.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(it(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Zi;const t=Date.now()/1e3;let r=t,s=!0,i=null;const{payload:o}=uS(e.access_token);if(o.exp&&(r=o.exp,s=r<=t),s){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(t){if(it(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Zi;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(it(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!bs())throw new v_("No browser detected.");if(e.error||e.error_description||e.error_code)throw new v_(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new bM("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new v_("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new bM("No code detected.");const{data:k,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:f}=e;if(!i||!l||!o||!f)throw new v_("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(l);let _=g+y;c&&(_=parseInt(c));const E=_-g;E*1e3<=Kp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${y}s`);const P=_-y;g-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,_,g):g-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,_,g);const{data:S,error:I}=await this._getUser(i);if(I)throw I;const N={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:y,expires_at:_,refresh_token:o,token_type:f,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:N,redirectType:e.type},error:null})}catch(r){if(it(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await mf(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(_Z(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await nd(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=RZ(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Fp(this.storage,this.storageKey,!0));try{return await dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(it(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(it(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,c,f,g;const{data:y,error:_}=i;if(_)throw _;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await dt(this.fetch,"GET",E,{headers:this.headers,jwt:(g=(f=y.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return bs()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(it(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:s,data:{session:i}}=t;if(s)throw s;const{options:o,provider:l,token:c,access_token:f,nonce:g}=e,y=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:f,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Na}),{data:_,error:E}=y;return E?this._returnResult({data:{user:null,session:null},error:E}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new Bp}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:E}))}catch(s){if(it(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:o}=t;if(o)throw o;return await dt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(it(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await DZ(async s=>(s>0&&await OZ(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Na})),(s,i)=>{const o=200*Math.pow(2,s);return i&&cS(i)&&Date.now()+o-r<Kp})}catch(r){if(this._debug(t,"error",r),it(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),bs()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await mf(this.storage,this.storageKey);if(s&&this.userStorage){let o=await mf(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Zp(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:dS()}else if(s&&!s.user&&!s.user){const o=await mf(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await nd(this.storage,this.storageKey+"-user"),await Zp(this.storage,this.storageKey,s)):s.user=dS()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<lS;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${lS}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),cS(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Zi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new DC;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Zi;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),it(i)){const o={data:null,error:i};return cS(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Zp(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const i=SM(s);await Zp(this.storage,this.storageKey,i)}else{const s=SM(t);await Zp(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await nd(this.storage,this.storageKey),await nd(this.storage,this.storageKey+"-code-verifier"),await nd(this.storage,this.storageKey+"-user"),this.userStorage&&await nd(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&bs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Kp);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Kp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Kp}ms, refresh threshold is ${JN} ticks`),s<=JN&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof m5)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Fp(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?this._returnResult({data:null,error:i}):await dt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(it(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:o}=t;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:f}=await dt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(e.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(t){if(it(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?dQ(e.webauthn.credential_response):hQ(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await dt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(t){if(it(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return this._returnResult({data:null,error:i});const o=await dt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:cQ(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:uQ(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(it(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=uS(r.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(l="aal2");const f=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await dt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Zi})})}catch(t){if(it(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Zi});const o=await dt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&bs()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Zi});const o=await dt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&bs()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await dt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Zi})})}catch(e){if(it(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await dt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Zi})})}catch(t){if(it(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(l=>l.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+wZ>s)return r;const{data:i,error:o}=await dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:E,error:P}=await this.getSession();if(P||!E.session)return this._returnResult({data:null,error:P});r=E.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=uS(r);t!=null&&t.allowExpired||HZ(i.exp);const f=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!f){const{error:E}=await this.getUser(r);if(E)throw E;return{data:{claims:i,header:s,signature:o},error:null}}const g=VZ(s.alg),y=await crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,o,PZ(`${l}.${c}`)))throw new nT("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}}qv.nextInstanceID={};const bQ=qv;class _Q extends bQ{constructor(e){super(e)}}class EQ{constructor(e,t,r){var s,i,o;this.supabaseUrl=e,this.supabaseKey=t;const l=pZ(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,f={db:aZ,realtime:cZ,auth:Object.assign(Object.assign({},lZ),{storageKey:c}),global:oZ},g=mZ(r??{},f);this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=g.global.headers)!==null&&i!==void 0?i:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(y,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=g.auth)!==null&&o!==void 0?o:{},this.headers,g.global.fetch),this.fetch=hZ(t,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new gK(new URL("rest/v1",l).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new rZ(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new fK(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:o,flowType:l,lock:c,debug:f,throwOnError:g},y,_){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _Q({url:this.authUrl.href,headers:Object.assign(Object.assign({},E),y),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:i,flowType:l,lock:c,debug:f,throwOnError:g,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(P=>P.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new MK(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const CQ=(n,e,t)=>new EQ(n,e,t);function AQ(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}AQ()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const SQ="https://kbamxhckknaydaybcstd.supabase.co",NQ="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtiYW14aGNra25heWRheWJjc3RkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5ODY2MDUsImV4cCI6MjA3ODU2MjYwNX0.JsP-hPJ8ZCxxrS8hqiB03WPnePzQ50yc3enhu_DIHdQ",Ce=CQ(SQ,NQ),jI=60*60*1e3,LI=async()=>{try{const{data:{session:n}}=await Ce.auth.getSession();if(n)return await rT(n.user.email||""),!0;const e=localStorage.getItem("session_token"),t=localStorage.getItem("session_email");if(!e||!t)return!1;const{data:r,error:s}=await Ce.from("usuarios").select("session_token, session_expires_at, last_activity_at").eq("email",t).eq("session_token",e).single();if(s||!r)return fS(),!1;const i=new Date(r.session_expires_at),o=new Date;if(i<o)return await MM(t),fS(),!1;if(r.last_activity_at){const l=new Date(r.last_activity_at);if(o.getTime()-l.getTime()>jI)return await MM(t),fS(),!1}return await rT(t),!0}catch(n){return console.error("Erro ao verificar sesso:",n),!1}},rT=async n=>{try{const e=localStorage.getItem("session_token");if(!e)return;const t=new Date,r=new Date(t.getTime()+jI);await Ce.from("usuarios").update({last_activity_at:t.toISOString(),session_expires_at:r.toISOString()}).eq("email",n).eq("session_token",e)}catch(e){console.error("Erro ao atualizar atividade:",e)}},MM=async n=>{try{await Ce.from("usuarios").update({session_token:null,session_expires_at:null}).eq("email",n)}catch(e){console.error("Erro ao limpar sesso no BD:",e)}},fS=()=>{localStorage.removeItem("session_token"),localStorage.removeItem("session_email")},OM=()=>{let n;const e=async()=>{clearTimeout(n);const r=localStorage.getItem("session_email");r&&await rT(r),n=setTimeout(async()=>{await LI()||(window.location.href="/login")},jI)},t=["mousedown","keydown","scroll","touchstart","click"];return t.forEach(r=>{document.addEventListener(r,e,{passive:!0})}),e(),()=>{clearTimeout(n),t.forEach(r=>{document.removeEventListener(r,e)})}};function nn({children:n}){const e=ul(),t=fc(),[r,s]=M.useState(null),[i,o]=M.useState(!0);return M.useEffect(()=>{let l=!0,c;(async()=>{try{const y=await LI();if(!l)return;y?(s(!0),o(!1),c=OM()):(s(!1),o(!1),e("/login",{replace:!0,state:{from:t.pathname}}))}catch(y){console.error("Erro ao verificar autenticao:",y),l&&(s(!1),o(!1))}})();const{data:{subscription:g}}=Ce.auth.onAuthStateChange(async(y,_)=>{l&&(y==="SIGNED_OUT"||!_?(s(!1),xe.info("Sesso encerrada. Faa login novamente."),e("/login",{replace:!0})):(y==="SIGNED_IN"||y==="TOKEN_REFRESHED")&&(s(!0),c&&c(),c=OM()))});return()=>{l=!1,g.unsubscribe(),c&&c()}},[e,t.pathname]),i?h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),h.jsx("p",{className:"text-muted-foreground",children:"Verificando autenticao..."})]})}):r?h.jsx(h.Fragment,{children:n}):null}const ub=M.forwardRef(({className:n,activeClassName:e,pendingClassName:t,to:r,...s},i)=>h.jsx(nK,{ref:i,to:r,className:({isActive:o,isPending:l})=>et(n,o&&e,l&&t),...s}));ub.displayName="NavLink";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQ=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),x5=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IQ=M.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>M.createElement("svg",{ref:c,...PQ,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:x5("lucide",s),...l},[...o.map(([f,g])=>M.createElement(f,g)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=(n,e)=>{const t=M.forwardRef(({className:r,...s},i)=>M.createElement(IQ,{ref:i,iconNode:e,className:x5(`lucide-${TQ(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=vt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RQ=vt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=vt("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=vt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MQ=vt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=vt("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=vt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=vt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OQ=vt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=vt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=vt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=vt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=vt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=vt("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=vt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DQ=vt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jQ=vt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=vt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=vt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=vt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=vt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BQ=vt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=vt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQ=vt("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=vt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UQ=vt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=vt("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=vt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQ=vt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HQ=vt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=vt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=vt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WQ=vt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=vt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=vt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=vt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=vt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=vt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Q=vt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=vt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XQ=vt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=vt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=vt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=vt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=vt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=vt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),YQ=[{path:"/usuario/eventos",label:"Eventos",icon:or},{path:"/usuario/minhas-inscricoes",label:"Minhas Inscries",icon:jQ},{path:"/usuario/registrar-presenca",label:"Registrar Presena",icon:Nh},{path:"/usuario/meus-certificados",label:"Meus Certificados",icon:Su},{path:"/usuario/perfil",label:"Perfil",icon:BC},{path:"/usuario/minhas-solicitacoes",label:"Minhas Solicitaes",icon:ac},{path:"/validar-certificado",label:"Validar Certificado",icon:bi}];function KQ(){return h.jsxs("aside",{className:"w-64 border-r border-border bg-card/30 backdrop-blur-sm flex flex-col",children:[h.jsx("div",{className:"p-6",children:h.jsx("h2",{className:"text-sm font-light text-muted-foreground uppercase tracking-wider",children:"Menu Usurio"})}),h.jsx("nav",{className:"flex-1 px-3 space-y-1",children:YQ.map(n=>{const e=n.icon;return h.jsxs(ub,{to:n.path,className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors hover:bg-accent hover:text-accent-foreground",activeClassName:"bg-muted text-primary font-medium",children:[h.jsx(e,{className:"w-4 h-4"}),n.label]},n.path)})})]})}function ZQ(n,e=[]){let t=[];function r(i,o){const l=M.createContext(o);l.displayName=i+"Context";const c=t.length;t=[...t,o];const f=y=>{var N;const{scope:_,children:E,...P}=y,S=((N=_==null?void 0:_[n])==null?void 0:N[c])||l,I=M.useMemo(()=>P,Object.values(P));return h.jsx(S.Provider,{value:I,children:E})};f.displayName=i+"Provider";function g(y,_){var S;const E=((S=_==null?void 0:_[n])==null?void 0:S[c])||l,P=M.useContext(E);if(P)return P;if(o!==void 0)return o;throw new Error(`\`${y}\` must be used within \`${i}\``)}return[f,g]}const s=()=>{const i=t.map(o=>M.createContext(o));return function(l){const c=(l==null?void 0:l[n])||i;return M.useMemo(()=>({[`__scope${n}`]:{...l,[n]:c}}),[l,c])}};return s.scopeName=n,[r,QQ(s,...e)]}function QQ(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:f})=>{const y=c(i)[`__scope${f}`];return{...l,...y}},{});return M.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var JQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],zI=JQ.reduce((n,e)=>{const t=uI(`Primitive.${e}`),r=M.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),C5={exports:{}},A5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I1=M;function eJ(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var tJ=typeof Object.is=="function"?Object.is:eJ,nJ=I1.useState,rJ=I1.useEffect,sJ=I1.useLayoutEffect,iJ=I1.useDebugValue;function oJ(n,e){var t=e(),r=nJ({inst:{value:t,getSnapshot:e}}),s=r[0].inst,i=r[1];return sJ(function(){s.value=t,s.getSnapshot=e,pS(s)&&i({inst:s})},[n,t,e]),rJ(function(){return pS(s)&&i({inst:s}),n(function(){pS(s)&&i({inst:s})})},[n]),iJ(t),t}function pS(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!tJ(n,t)}catch{return!0}}function aJ(n,e){return e()}var lJ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?aJ:oJ;A5.useSyncExternalStore=I1.useSyncExternalStore!==void 0?I1.useSyncExternalStore:lJ;C5.exports=A5;var cJ=C5.exports;function uJ(){return cJ.useSyncExternalStore(dJ,()=>!0,()=>!1)}function dJ(){return()=>{}}var HI="Avatar",[hJ]=ZQ(HI),[fJ,S5]=hJ(HI),N5=M.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,i]=M.useState("idle");return h.jsx(fJ,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:h.jsx(zI.span,{...r,ref:e})})});N5.displayName=HI;var T5="AvatarImage",P5=M.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...i}=n,o=S5(T5,t),l=mJ(r,i),c=rl(f=>{s(f),o.onImageLoadingStatusChange(f)});return Jr(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?h.jsx(zI.img,{...i,ref:e,src:r}):null});P5.displayName=T5;var I5="AvatarFallback",R5=M.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,i=S5(I5,t),[o,l]=M.useState(r===void 0);return M.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?h.jsx(zI.span,{...s,ref:e}):null});R5.displayName=I5;function DM(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function mJ(n,{referrerPolicy:e,crossOrigin:t}){const r=uJ(),s=M.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=M.useState(()=>DM(i,n));return Jr(()=>{l(DM(i,n))},[i,n]),Jr(()=>{const c=y=>()=>{l(y)};if(!i)return;const f=c("loaded"),g=c("error");return i.addEventListener("load",f),i.addEventListener("error",g),e&&(i.referrerPolicy=e),typeof t=="string"&&(i.crossOrigin=t),()=>{i.removeEventListener("load",f),i.removeEventListener("error",g)}},[i,t,e]),o}var k5=N5,M5=P5,O5=R5;const VI=M.forwardRef(({className:n,...e},t)=>h.jsx(k5,{ref:t,className:et("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));VI.displayName=k5.displayName;const WI=M.forwardRef(({className:n,...e},t)=>h.jsx(M5,{ref:t,className:et("aspect-square h-full w-full",n),...e}));WI.displayName=M5.displayName;const GI=M.forwardRef(({className:n,...e},t)=>h.jsx(O5,{ref:t,className:et("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));GI.displayName=O5.displayName;function jM(n){const e=pJ(n),t=M.forwardRef((r,s)=>{const{children:i,...o}=r,l=M.Children.toArray(i),c=l.find(xJ);if(c){const f=c.props.children,g=l.map(y=>y===c?M.Children.count(f)>1?M.Children.only(null):M.isValidElement(f)?f.props.children:null:y);return h.jsx(e,{...o,ref:s,children:M.isValidElement(f)?M.cloneElement(f,void 0,g):null})}return h.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}function pJ(n){const e=M.forwardRef((t,r)=>{const{children:s,...i}=t;if(M.isValidElement(s)){const o=yJ(s),l=vJ(i,s.props);return s.type!==M.Fragment&&(l.ref=r?dc(r,o):o),M.cloneElement(s,l)}return M.Children.count(s)>1?M.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var gJ=Symbol("radix.slottable");function xJ(n){return M.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===gJ}function vJ(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function yJ(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function $I(n){const e=n+"CollectionProvider",[t,r]=ya(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=S=>{const{scope:I,children:N}=S,k=Dc.useRef(null),T=Dc.useRef(new Map).current;return h.jsx(s,{scope:I,itemMap:T,collectionRef:k,children:N})};o.displayName=e;const l=n+"CollectionSlot",c=jM(l),f=Dc.forwardRef((S,I)=>{const{scope:N,children:k}=S,T=i(l,N),D=Jt(I,T.collectionRef);return h.jsx(c,{ref:D,children:k})});f.displayName=l;const g=n+"CollectionItemSlot",y="data-radix-collection-item",_=jM(g),E=Dc.forwardRef((S,I)=>{const{scope:N,children:k,...T}=S,D=Dc.useRef(null),U=Jt(I,D),z=i(g,N);return Dc.useEffect(()=>(z.itemMap.set(D,{ref:D,...T}),()=>void z.itemMap.delete(D))),h.jsx(_,{[y]:"",ref:U,children:k})});E.displayName=g;function P(S){const I=i(n+"CollectionConsumer",S);return Dc.useCallback(()=>{const k=I.collectionRef.current;if(!k)return[];const T=Array.from(k.querySelectorAll(`[${y}]`));return Array.from(I.itemMap.values()).sort((z,F)=>T.indexOf(z.ref.current)-T.indexOf(F.ref.current))},[I.collectionRef,I.itemMap])}return[{Provider:o,Slot:f,ItemSlot:E},P,r]}var wJ=M.createContext(void 0);function FC(n){const e=M.useContext(wJ);return n||e||"ltr"}var gS="rovingFocusGroup.onEntryFocus",bJ={bubbles:!1,cancelable:!0},db="RovingFocusGroup",[iT,D5,_J]=$I(db),[EJ,UC]=ya(db,[_J]),[CJ,AJ]=EJ(db),j5=M.forwardRef((n,e)=>h.jsx(iT.Provider,{scope:n.__scopeRovingFocusGroup,children:h.jsx(iT.Slot,{scope:n.__scopeRovingFocusGroup,children:h.jsx(SJ,{...n,ref:e})})}));j5.displayName=db;var SJ=M.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:f,preventScrollOnEntryFocus:g=!1,...y}=n,_=M.useRef(null),E=Jt(e,_),P=FC(i),[S,I]=Rh({prop:o,defaultProp:l??null,onChange:c,caller:db}),[N,k]=M.useState(!1),T=rl(f),D=D5(t),U=M.useRef(!1),[z,F]=M.useState(0);return M.useEffect(()=>{const X=_.current;if(X)return X.addEventListener(gS,T),()=>X.removeEventListener(gS,T)},[T]),h.jsx(CJ,{scope:t,orientation:r,dir:P,loop:s,currentTabStopId:S,onItemFocus:M.useCallback(X=>I(X),[I]),onItemShiftTab:M.useCallback(()=>k(!0),[]),onFocusableItemAdd:M.useCallback(()=>F(X=>X+1),[]),onFocusableItemRemove:M.useCallback(()=>F(X=>X-1),[]),children:h.jsx(_t.div,{tabIndex:N||z===0?-1:0,"data-orientation":r,...y,ref:E,style:{outline:"none",...n.style},onMouseDown:Ue(n.onMouseDown,()=>{U.current=!0}),onFocus:Ue(n.onFocus,X=>{const Z=!U.current;if(X.target===X.currentTarget&&Z&&!N){const ne=new CustomEvent(gS,bJ);if(X.currentTarget.dispatchEvent(ne),!ne.defaultPrevented){const se=D().filter(fe=>fe.focusable),ee=se.find(fe=>fe.active),ce=se.find(fe=>fe.id===S),re=[ee,ce,...se].filter(Boolean).map(fe=>fe.ref.current);F5(re,g)}}U.current=!1}),onBlur:Ue(n.onBlur,()=>k(!1))})})}),L5="RovingFocusGroupItem",B5=M.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...l}=n,c=tl(),f=i||c,g=AJ(L5,t),y=g.currentTabStopId===f,_=D5(t),{onFocusableItemAdd:E,onFocusableItemRemove:P,currentTabStopId:S}=g;return M.useEffect(()=>{if(r)return E(),()=>P()},[r,E,P]),h.jsx(iT.ItemSlot,{scope:t,id:f,focusable:r,active:s,children:h.jsx(_t.span,{tabIndex:y?0:-1,"data-orientation":g.orientation,...l,ref:e,onMouseDown:Ue(n.onMouseDown,I=>{r?g.onItemFocus(f):I.preventDefault()}),onFocus:Ue(n.onFocus,()=>g.onItemFocus(f)),onKeyDown:Ue(n.onKeyDown,I=>{if(I.key==="Tab"&&I.shiftKey){g.onItemShiftTab();return}if(I.target!==I.currentTarget)return;const N=PJ(I,g.orientation,g.dir);if(N!==void 0){if(I.metaKey||I.ctrlKey||I.altKey||I.shiftKey)return;I.preventDefault();let T=_().filter(D=>D.focusable).map(D=>D.ref.current);if(N==="last")T.reverse();else if(N==="prev"||N==="next"){N==="prev"&&T.reverse();const D=T.indexOf(I.currentTarget);T=g.loop?IJ(T,D+1):T.slice(D+1)}setTimeout(()=>F5(T))}}),children:typeof o=="function"?o({isCurrentTabStop:y,hasTabStop:S!=null}):o})})});B5.displayName=L5;var NJ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function TJ(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function PJ(n,e,t){const r=TJ(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return NJ[r]}function F5(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function IJ(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var U5=j5,z5=B5;function RJ(n){const e=kJ(n),t=M.forwardRef((r,s)=>{const{children:i,...o}=r,l=M.Children.toArray(i),c=l.find(OJ);if(c){const f=c.props.children,g=l.map(y=>y===c?M.Children.count(f)>1?M.Children.only(null):M.isValidElement(f)?f.props.children:null:y);return h.jsx(e,{...o,ref:s,children:M.isValidElement(f)?M.cloneElement(f,void 0,g):null})}return h.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}function kJ(n){const e=M.forwardRef((t,r)=>{const{children:s,...i}=t;if(M.isValidElement(s)){const o=jJ(s),l=DJ(i,s.props);return s.type!==M.Fragment&&(l.ref=r?dc(r,o):o),M.cloneElement(s,l)}return M.Children.count(s)>1?M.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var MJ=Symbol("radix.slottable");function OJ(n){return M.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===MJ}function DJ(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function jJ(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var oT=["Enter"," "],LJ=["ArrowDown","PageUp","Home"],H5=["ArrowUp","PageDown","End"],BJ=[...LJ,...H5],FJ={ltr:[...oT,"ArrowRight"],rtl:[...oT,"ArrowLeft"]},UJ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},hb="Menu",[Xv,zJ,HJ]=$I(hb),[_p,V5]=ya(hb,[HJ,$h,UC]),zC=$h(),W5=UC(),[VJ,Ep]=_p(hb),[WJ,fb]=_p(hb),G5=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=n,l=zC(e),[c,f]=M.useState(null),g=M.useRef(!1),y=rl(i),_=FC(s);return M.useEffect(()=>{const E=()=>{g.current=!0,document.addEventListener("pointerdown",P,{capture:!0,once:!0}),document.addEventListener("pointermove",P,{capture:!0,once:!0})},P=()=>g.current=!1;return document.addEventListener("keydown",E,{capture:!0}),()=>{document.removeEventListener("keydown",E,{capture:!0}),document.removeEventListener("pointerdown",P,{capture:!0}),document.removeEventListener("pointermove",P,{capture:!0})}},[]),h.jsx(bI,{...l,children:h.jsx(VJ,{scope:e,open:t,onOpenChange:y,content:c,onContentChange:f,children:h.jsx(WJ,{scope:e,onClose:M.useCallback(()=>y(!1),[y]),isUsingKeyboardRef:g,dir:_,modal:o,children:r})})})};G5.displayName=hb;var GJ="MenuAnchor",qI=M.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=zC(t);return h.jsx(lb,{...s,...r,ref:e})});qI.displayName=GJ;var XI="MenuPortal",[$J,$5]=_p(XI,{forceMount:void 0}),q5=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:s}=n,i=Ep(XI,e);return h.jsx($J,{scope:e,forceMount:t,children:h.jsx(Do,{present:t||i.open,children:h.jsx(sb,{asChild:!0,container:s,children:r})})})};q5.displayName=XI;var ma="MenuContent",[qJ,YI]=_p(ma),X5=M.forwardRef((n,e)=>{const t=$5(ma,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Ep(ma,n.__scopeMenu),o=fb(ma,n.__scopeMenu);return h.jsx(Xv.Provider,{scope:n.__scopeMenu,children:h.jsx(Do,{present:r||i.open,children:h.jsx(Xv.Slot,{scope:n.__scopeMenu,children:o.modal?h.jsx(XJ,{...s,ref:e}):h.jsx(YJ,{...s,ref:e})})})})}),XJ=M.forwardRef((n,e)=>{const t=Ep(ma,n.__scopeMenu),r=M.useRef(null),s=Jt(e,r);return M.useEffect(()=>{const i=r.current;if(i)return wC(i)},[]),h.jsx(KI,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Ue(n.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),YJ=M.forwardRef((n,e)=>{const t=Ep(ma,n.__scopeMenu);return h.jsx(KI,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),KJ=RJ("MenuContent.ScrollLock"),KI=M.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:f,onPointerDownOutside:g,onFocusOutside:y,onInteractOutside:_,onDismiss:E,disableOutsideScroll:P,...S}=n,I=Ep(ma,t),N=fb(ma,t),k=zC(t),T=W5(t),D=zJ(t),[U,z]=M.useState(null),F=M.useRef(null),X=Jt(e,F,I.onContentChange),Z=M.useRef(0),ne=M.useRef(""),se=M.useRef(0),ee=M.useRef(null),ce=M.useRef("right"),de=M.useRef(0),re=P?ib:M.Fragment,fe=P?{as:KJ,allowPinchZoom:!0}:void 0,oe=ue=>{var Te,Ze;const he=ne.current+ue,Ee=D().filter(Nt=>!Nt.disabled),_e=document.activeElement,Oe=(Te=Ee.find(Nt=>Nt.ref.current===_e))==null?void 0:Te.textValue,De=Ee.map(Nt=>Nt.textValue),ze=lee(De,he,Oe),be=(Ze=Ee.find(Nt=>Nt.textValue===ze))==null?void 0:Ze.ref.current;(function Nt(ut){ne.current=ut,window.clearTimeout(Z.current),ut!==""&&(Z.current=window.setTimeout(()=>Nt(""),1e3))})(he),be&&setTimeout(()=>be.focus())};M.useEffect(()=>()=>window.clearTimeout(Z.current),[]),xC();const Q=M.useCallback(ue=>{var Ee,_e;return ce.current===((Ee=ee.current)==null?void 0:Ee.side)&&uee(ue,(_e=ee.current)==null?void 0:_e.area)},[]);return h.jsx(qJ,{scope:t,searchRef:ne,onItemEnter:M.useCallback(ue=>{Q(ue)&&ue.preventDefault()},[Q]),onItemLeave:M.useCallback(ue=>{var he;Q(ue)||((he=F.current)==null||he.focus(),z(null))},[Q]),onTriggerLeave:M.useCallback(ue=>{Q(ue)&&ue.preventDefault()},[Q]),pointerGraceTimerRef:se,onPointerGraceIntentChange:M.useCallback(ue=>{ee.current=ue},[]),children:h.jsx(re,{...fe,children:h.jsx(rb,{asChild:!0,trapped:s,onMountAutoFocus:Ue(i,ue=>{var he;ue.preventDefault(),(he=F.current)==null||he.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:h.jsx(W1,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:f,onPointerDownOutside:g,onFocusOutside:y,onInteractOutside:_,onDismiss:E,children:h.jsx(U5,{asChild:!0,...T,dir:N.dir,orientation:"vertical",loop:r,currentTabStopId:U,onCurrentTabStopIdChange:z,onEntryFocus:Ue(c,ue=>{N.isUsingKeyboardRef.current||ue.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(SC,{role:"menu","aria-orientation":"vertical","data-state":uB(I.open),"data-radix-menu-content":"",dir:N.dir,...k,...S,ref:X,style:{outline:"none",...S.style},onKeyDown:Ue(S.onKeyDown,ue=>{const Ee=ue.target.closest("[data-radix-menu-content]")===ue.currentTarget,_e=ue.ctrlKey||ue.altKey||ue.metaKey,Oe=ue.key.length===1;Ee&&(ue.key==="Tab"&&ue.preventDefault(),!_e&&Oe&&oe(ue.key));const De=F.current;if(ue.target!==De||!BJ.includes(ue.key))return;ue.preventDefault();const be=D().filter(Te=>!Te.disabled).map(Te=>Te.ref.current);H5.includes(ue.key)&&be.reverse(),oee(be)}),onBlur:Ue(n.onBlur,ue=>{ue.currentTarget.contains(ue.target)||(window.clearTimeout(Z.current),ne.current="")}),onPointerMove:Ue(n.onPointerMove,Yv(ue=>{const he=ue.target,Ee=de.current!==ue.clientX;if(ue.currentTarget.contains(he)&&Ee){const _e=ue.clientX>de.current?"right":"left";ce.current=_e,de.current=ue.clientX}}))})})})})})})});X5.displayName=ma;var ZJ="MenuGroup",ZI=M.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return h.jsx(_t.div,{role:"group",...r,ref:e})});ZI.displayName=ZJ;var QJ="MenuLabel",Y5=M.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return h.jsx(_t.div,{...r,ref:e})});Y5.displayName=QJ;var uE="MenuItem",LM="menu.itemSelect",HC=M.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,i=M.useRef(null),o=fb(uE,n.__scopeMenu),l=YI(uE,n.__scopeMenu),c=Jt(e,i),f=M.useRef(!1),g=()=>{const y=i.current;if(!t&&y){const _=new CustomEvent(LM,{bubbles:!0,cancelable:!0});y.addEventListener(LM,E=>r==null?void 0:r(E),{once:!0}),f6(y,_),_.defaultPrevented?f.current=!1:o.onClose()}};return h.jsx(K5,{...s,ref:c,disabled:t,onClick:Ue(n.onClick,g),onPointerDown:y=>{var _;(_=n.onPointerDown)==null||_.call(n,y),f.current=!0},onPointerUp:Ue(n.onPointerUp,y=>{var _;f.current||(_=y.currentTarget)==null||_.click()}),onKeyDown:Ue(n.onKeyDown,y=>{const _=l.searchRef.current!=="";t||_&&y.key===" "||oT.includes(y.key)&&(y.currentTarget.click(),y.preventDefault())})})});HC.displayName=uE;var K5=M.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...i}=n,o=YI(uE,t),l=W5(t),c=M.useRef(null),f=Jt(e,c),[g,y]=M.useState(!1),[_,E]=M.useState("");return M.useEffect(()=>{const P=c.current;P&&E((P.textContent??"").trim())},[i.children]),h.jsx(Xv.ItemSlot,{scope:t,disabled:r,textValue:s??_,children:h.jsx(z5,{asChild:!0,...l,focusable:!r,children:h.jsx(_t.div,{role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:f,onPointerMove:Ue(n.onPointerMove,Yv(P=>{r?o.onItemLeave(P):(o.onItemEnter(P),P.defaultPrevented||P.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ue(n.onPointerLeave,Yv(P=>o.onItemLeave(P))),onFocus:Ue(n.onFocus,()=>y(!0)),onBlur:Ue(n.onBlur,()=>y(!1))})})})}),JJ="MenuCheckboxItem",Z5=M.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return h.jsx(nB,{scope:n.__scopeMenu,checked:t,children:h.jsx(HC,{role:"menuitemcheckbox","aria-checked":dE(t)?"mixed":t,...s,ref:e,"data-state":JI(t),onSelect:Ue(s.onSelect,()=>r==null?void 0:r(dE(t)?!0:!t),{checkForDefaultPrevented:!1})})})});Z5.displayName=JJ;var Q5="MenuRadioGroup",[eee,tee]=_p(Q5,{value:void 0,onValueChange:()=>{}}),J5=M.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,i=rl(r);return h.jsx(eee,{scope:n.__scopeMenu,value:t,onValueChange:i,children:h.jsx(ZI,{...s,ref:e})})});J5.displayName=Q5;var eB="MenuRadioItem",tB=M.forwardRef((n,e)=>{const{value:t,...r}=n,s=tee(eB,n.__scopeMenu),i=t===s.value;return h.jsx(nB,{scope:n.__scopeMenu,checked:i,children:h.jsx(HC,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":JI(i),onSelect:Ue(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,t)},{checkForDefaultPrevented:!1})})})});tB.displayName=eB;var QI="MenuItemIndicator",[nB,nee]=_p(QI,{checked:!1}),rB=M.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,i=nee(QI,t);return h.jsx(Do,{present:r||dE(i.checked)||i.checked===!0,children:h.jsx(_t.span,{...s,ref:e,"data-state":JI(i.checked)})})});rB.displayName=QI;var ree="MenuSeparator",sB=M.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return h.jsx(_t.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});sB.displayName=ree;var see="MenuArrow",iB=M.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=zC(t);return h.jsx(NC,{...s,...r,ref:e})});iB.displayName=see;var iee="MenuSub",[rue,oB]=_p(iee),Ux="MenuSubTrigger",aB=M.forwardRef((n,e)=>{const t=Ep(Ux,n.__scopeMenu),r=fb(Ux,n.__scopeMenu),s=oB(Ux,n.__scopeMenu),i=YI(Ux,n.__scopeMenu),o=M.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,f={__scopeMenu:n.__scopeMenu},g=M.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return M.useEffect(()=>g,[g]),M.useEffect(()=>{const y=l.current;return()=>{window.clearTimeout(y),c(null)}},[l,c]),h.jsx(qI,{asChild:!0,...f,children:h.jsx(K5,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":uB(t.open),...n,ref:dc(e,s.onTriggerChange),onClick:y=>{var _;(_=n.onClick)==null||_.call(n,y),!(n.disabled||y.defaultPrevented)&&(y.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Ue(n.onPointerMove,Yv(y=>{i.onItemEnter(y),!y.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),g()},100))})),onPointerLeave:Ue(n.onPointerLeave,Yv(y=>{var E,P;g();const _=(E=t.content)==null?void 0:E.getBoundingClientRect();if(_){const S=(P=t.content)==null?void 0:P.dataset.side,I=S==="right",N=I?-5:5,k=_[I?"left":"right"],T=_[I?"right":"left"];i.onPointerGraceIntentChange({area:[{x:y.clientX+N,y:y.clientY},{x:k,y:_.top},{x:T,y:_.top},{x:T,y:_.bottom},{x:k,y:_.bottom}],side:S}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(y),y.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ue(n.onKeyDown,y=>{var E;const _=i.searchRef.current!=="";n.disabled||_&&y.key===" "||FJ[r.dir].includes(y.key)&&(t.onOpenChange(!0),(E=t.content)==null||E.focus(),y.preventDefault())})})})});aB.displayName=Ux;var lB="MenuSubContent",cB=M.forwardRef((n,e)=>{const t=$5(ma,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Ep(ma,n.__scopeMenu),o=fb(ma,n.__scopeMenu),l=oB(lB,n.__scopeMenu),c=M.useRef(null),f=Jt(e,c);return h.jsx(Xv.Provider,{scope:n.__scopeMenu,children:h.jsx(Do,{present:r||i.open,children:h.jsx(Xv.Slot,{scope:n.__scopeMenu,children:h.jsx(KI,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:f,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{var y;o.isUsingKeyboardRef.current&&((y=c.current)==null||y.focus()),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:Ue(n.onFocusOutside,g=>{g.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ue(n.onEscapeKeyDown,g=>{o.onClose(),g.preventDefault()}),onKeyDown:Ue(n.onKeyDown,g=>{var E;const y=g.currentTarget.contains(g.target),_=UJ[o.dir].includes(g.key);y&&_&&(i.onOpenChange(!1),(E=l.trigger)==null||E.focus(),g.preventDefault())})})})})})});cB.displayName=lB;function uB(n){return n?"open":"closed"}function dE(n){return n==="indeterminate"}function JI(n){return dE(n)?"indeterminate":n?"checked":"unchecked"}function oee(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function aee(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function lee(n,e,t){const s=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=aee(n,Math.max(i,0));s.length===1&&(o=o.filter(f=>f!==t));const c=o.find(f=>f.toLowerCase().startsWith(s.toLowerCase()));return c!==t?c:void 0}function cee(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],c=e[o],f=l.x,g=l.y,y=c.x,_=c.y;g>r!=_>r&&t<(y-f)*(r-g)/(_-g)+f&&(s=!s)}return s}function uee(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return cee(t,e)}function Yv(n){return e=>e.pointerType==="mouse"?n(e):void 0}var dee=G5,hee=qI,fee=q5,mee=X5,pee=ZI,gee=Y5,xee=HC,vee=Z5,yee=J5,wee=tB,bee=rB,_ee=sB,Eee=iB,Cee=aB,Aee=cB,VC="DropdownMenu",[See]=ya(VC,[V5]),Ci=V5(),[Nee,dB]=See(VC),hB=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:l=!0}=n,c=Ci(e),f=M.useRef(null),[g,y]=Rh({prop:s,defaultProp:i??!1,onChange:o,caller:VC});return h.jsx(Nee,{scope:e,triggerId:tl(),triggerRef:f,contentId:tl(),open:g,onOpenChange:y,onOpenToggle:M.useCallback(()=>y(_=>!_),[y]),modal:l,children:h.jsx(dee,{...c,open:g,onOpenChange:y,dir:r,modal:l,children:t})})};hB.displayName=VC;var fB="DropdownMenuTrigger",mB=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=n,i=dB(fB,t),o=Ci(t);return h.jsx(hee,{asChild:!0,...o,children:h.jsx(_t.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:dc(e,i.triggerRef),onPointerDown:Ue(n.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Ue(n.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});mB.displayName=fB;var Tee="DropdownMenuPortal",pB=n=>{const{__scopeDropdownMenu:e,...t}=n,r=Ci(e);return h.jsx(fee,{...r,...t})};pB.displayName=Tee;var gB="DropdownMenuContent",xB=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=dB(gB,t),i=Ci(t),o=M.useRef(!1);return h.jsx(mee,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Ue(n.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ue(n.onInteractOutside,l=>{const c=l.detail.originalEvent,f=c.button===0&&c.ctrlKey===!0,g=c.button===2||f;(!s.modal||g)&&(o.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xB.displayName=gB;var Pee="DropdownMenuGroup",Iee=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Ci(t);return h.jsx(pee,{...s,...r,ref:e})});Iee.displayName=Pee;var Ree="DropdownMenuLabel",vB=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Ci(t);return h.jsx(gee,{...s,...r,ref:e})});vB.displayName=Ree;var kee="DropdownMenuItem",yB=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Ci(t);return h.jsx(xee,{...s,...r,ref:e})});yB.displayName=kee;var Mee="DropdownMenuCheckboxItem",wB=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Ci(t);return h.jsx(vee,{...s,...r,ref:e})});wB.displayName=Mee;var Oee="DropdownMenuRadioGroup",Dee=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Ci(t);return h.jsx(yee,{...s,...r,ref:e})});Dee.displayName=Oee;var jee="DropdownMenuRadioItem",bB=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Ci(t);return h.jsx(wee,{...s,...r,ref:e})});bB.displayName=jee;var Lee="DropdownMenuItemIndicator",_B=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Ci(t);return h.jsx(bee,{...s,...r,ref:e})});_B.displayName=Lee;var Bee="DropdownMenuSeparator",EB=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Ci(t);return h.jsx(_ee,{...s,...r,ref:e})});EB.displayName=Bee;var Fee="DropdownMenuArrow",Uee=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Ci(t);return h.jsx(Eee,{...s,...r,ref:e})});Uee.displayName=Fee;var zee="DropdownMenuSubTrigger",CB=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Ci(t);return h.jsx(Cee,{...s,...r,ref:e})});CB.displayName=zee;var Hee="DropdownMenuSubContent",AB=M.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Ci(t);return h.jsx(Aee,{...s,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});AB.displayName=Hee;var Vee=hB,Wee=mB,Gee=pB,SB=xB,NB=vB,TB=yB,PB=wB,IB=bB,RB=_B,kB=EB,MB=CB,OB=AB;const BM=Vee,FM=Wee,$ee=M.forwardRef(({className:n,inset:e,children:t,...r},s)=>h.jsxs(MB,{ref:s,className:et("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",n),...r,children:[t,h.jsx(v5,{className:"ml-auto h-4 w-4"})]}));$ee.displayName=MB.displayName;const qee=M.forwardRef(({className:n,...e},t)=>h.jsx(OB,{ref:t,className:et("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));qee.displayName=OB.displayName;const aT=M.forwardRef(({className:n,sideOffset:e=4,...t},r)=>h.jsx(Gee,{children:h.jsx(SB,{ref:r,sideOffset:e,className:et("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));aT.displayName=SB.displayName;const G_=M.forwardRef(({className:n,inset:e,...t},r)=>h.jsx(TB,{ref:r,className:et("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",n),...t}));G_.displayName=TB.displayName;const Xee=M.forwardRef(({className:n,children:e,checked:t,...r},s)=>h.jsxs(PB,{ref:s,className:et("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",n),checked:t,...r,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(RB,{children:h.jsx(FI,{className:"h-4 w-4"})})}),e]}));Xee.displayName=PB.displayName;const Yee=M.forwardRef(({className:n,children:e,...t},r)=>h.jsxs(IB,{ref:r,className:et("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",n),...t,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(RB,{children:h.jsx(DQ,{className:"h-2 w-2 fill-current"})})}),e]}));Yee.displayName=IB.displayName;const lT=M.forwardRef(({className:n,inset:e,...t},r)=>h.jsx(NB,{ref:r,className:et("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));lT.displayName=NB.displayName;const cT=M.forwardRef(({className:n,...e},t)=>h.jsx(kB,{ref:t,className:et("-mx-1 my-1 h-px bg-muted",n),...e}));cT.displayName=kB.displayName;function J1(){const{theme:n,toggleTheme:e}=aK();return h.jsx("button",{onClick:e,className:"relative inline-flex h-9 w-16 items-center rounded-full border border-border bg-muted transition-colors hover:bg-accent cursor-pointer","aria-label":"Toggle theme",children:h.jsx("span",{className:`inline-flex h-7 w-7 items-center justify-center rounded-full bg-foreground text-background transition-transform ${n==="dark"?"translate-x-1":"translate-x-8"}`,children:n==="dark"?h.jsx(WQ,{className:"h-4 w-4"}):h.jsx(XQ,{className:"h-4 w-4"})})})}const UM={user:"Aluno",approver:"Aprovador",organizer:"Docente/Organizador",campus:"Admin"},Kee={user:"/usuario/eventos",approver:"/aprovador/solicitacoes-pendentes",organizer:"/organizador/meus-eventos",campus:"/campus/visao-geral"},Zee=["user","approver","organizer","campus"];function WC(){const n=ul(),{currentProfile:e,setProfile:t,hasPermission:r}=uK(),[s,i]=M.useState(""),[o,l]=M.useState(""),[c,f]=M.useState("");M.useEffect(()=>{const P=async()=>{var I;try{const{data:{session:N}}=await Ce.auth.getSession();if((I=N==null?void 0:N.user)!=null&&I.email){const k=N.user.email;i(k);const{data:T}=await Ce.from("usuarios").select("nome_completo, avatar_url").eq("email",k).single();T&&(T.nome_completo&&l(T.nome_completo),T.avatar_url&&f(T.avatar_url))}}catch(N){console.error("Erro ao buscar dados:",N)}};P();const S=Ce.channel("usuarios-header-changes").on("postgres_changes",{event:"*",schema:"public",table:"usuarios"},I=>{console.log("Mudana detectada:",I),P()}).subscribe();return()=>{Ce.removeChannel(S)}},[]);const g=async()=>{try{const{error:P}=await Ce.auth.signOut();P?xe.error("Erro ao sair"):(localStorage.removeItem("token"),localStorage.removeItem("userType"),xe.success("Logout realizado com sucesso!"),n("/"))}catch{xe.error("Erro ao sair. Tente novamente.")}},y=P=>{t(P),n(Kee[P])},_=()=>{n({user:"/usuario/perfil",organizer:"/organizador/meus-eventos",approver:"/aprovador/solicitacoes-pendentes",campus:"/campus/configuracoes"}[e])},E=()=>o?o.split(" ").map(P=>P.charAt(0)).join("").toUpperCase().slice(0,2):s.charAt(0).toUpperCase();return h.jsx("header",{className:"border-b border-border bg-card/50 backdrop-blur-sm sticky top-0 z-50",children:h.jsxs("div",{className:"px-6 py-4 flex justify-between items-center",children:[h.jsx("h1",{className:"text-xl font-light tracking-wider",children:"SIGNEA"}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs(BM,{children:[h.jsx(FM,{asChild:!0,children:h.jsxs(Je,{variant:"ghost",className:"gap-2",children:[UM[e],h.jsx(jC,{className:"w-4 h-4"})]})}),h.jsxs(aT,{align:"end",className:"w-56",children:[h.jsx(lT,{children:"Mudar Perfil"}),h.jsx(cT,{}),Zee.map(P=>{const S=!r(P);return h.jsxs(G_,{disabled:S,onClick:()=>y(P),className:"gap-2",children:[S&&h.jsx(zQ,{className:"w-4 h-4 text-muted-foreground"}),UM[P]]},P)})]})]}),h.jsx(J1,{}),h.jsxs(BM,{children:[h.jsx(FM,{asChild:!0,children:h.jsx(Je,{variant:"ghost",size:"icon",className:"rounded-full",children:h.jsxs(VI,{className:"h-10 w-10",children:[h.jsx(WI,{src:c||`https://api.dicebear.com/7.x/avataaars/svg?seed=${s}`,alt:o||s,className:"object-cover"}),h.jsx(GI,{children:E()})]})})}),h.jsxs(aT,{align:"end",children:[h.jsx(lT,{children:o||s}),h.jsx(cT,{}),h.jsxs(G_,{onClick:_,children:[h.jsx(BC,{className:"w-4 h-4 mr-2"}),"Meu Perfil"]}),h.jsxs(G_,{onClick:g,children:[h.jsx(HQ,{className:"w-4 h-4 mr-2"}),"Sair"]})]})]})]})]})})}function Vp({children:n}){return h.jsxs("div",{className:"min-h-screen flex w-full bg-background",children:[h.jsx(KQ,{}),h.jsxs("div",{className:"flex-1 flex flex-col",children:[h.jsx(WC,{}),h.jsx("main",{className:"flex-1 p-6 overflow-auto",children:n})]})]})}const Qee=[{path:"/organizador/meus-eventos",label:"Meus Eventos",icon:or},{path:"/organizador/criar-evento",label:"Criar Evento",icon:sT},{path:"/organizador/dias-qrcodes",label:"Dias / QR Codes",icon:kQ},{path:"/organizador/inscricoes",label:"Inscries",icon:Zs},{path:"/organizador/presencas",label:"Presenas",icon:bi},{path:"/organizador/pagamentos",label:"Pagamentos",icon:ic},{path:"/organizador/certificados",label:"Certificados",icon:Su},{path:"/organizador/relatorios",label:"Relatrios",icon:BI}];function Jee(){return h.jsxs("aside",{className:"w-64 border-r border-border bg-card/30 backdrop-blur-sm flex flex-col",children:[h.jsx("div",{className:"p-6",children:h.jsx("h2",{className:"text-sm font-light text-muted-foreground uppercase tracking-wider",children:"Menu Organizador"})}),h.jsx("nav",{className:"flex-1 px-3 space-y-1",children:Qee.map(n=>{const e=n.icon;return h.jsxs(ub,{to:n.path,className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors hover:bg-accent hover:text-accent-foreground",activeClassName:"bg-muted text-primary font-medium",children:[h.jsx(e,{className:"w-4 h-4"}),n.label]},n.path)})})]})}function Tc({children:n}){return h.jsxs("div",{className:"min-h-screen flex w-full bg-background",children:[h.jsx(Jee,{}),h.jsxs("div",{className:"flex-1 flex flex-col",children:[h.jsx(WC,{}),h.jsx("main",{className:"flex-1 p-6 overflow-auto",children:n})]})]})}const ete=[{path:"/aprovador/solicitacoes-pendentes",label:"Solicitaes Pendentes",icon:xs},{path:"/aprovador/solicitacoes-aprovadas",label:"Solicitaes Aprovadas",icon:FQ},{path:"/aprovador/solicitacoes-rejeitadas",label:"Solicitaes Rejeitadas",icon:Po},{path:"/aprovador/historico",label:"Histrico",icon:BI},{path:"/aprovador/relatorios",label:"Relatrios",icon:ac}];function tte(){return h.jsxs("aside",{className:"w-64 border-r border-border bg-card/30 backdrop-blur-sm flex flex-col",children:[h.jsx("div",{className:"p-6",children:h.jsx("h2",{className:"text-sm font-light text-muted-foreground uppercase tracking-wider",children:"Menu Aprovador"})}),h.jsx("nav",{className:"flex-1 px-3 space-y-1",children:ete.map(n=>{const e=n.icon;return h.jsxs(ub,{to:n.path,className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors hover:bg-accent hover:text-accent-foreground",activeClassName:"bg-muted text-primary font-medium",children:[h.jsx(e,{className:"w-4 h-4"}),n.label]},n.path)})})]})}function Wp({children:n}){return h.jsxs("div",{className:"min-h-screen flex w-full bg-background",children:[h.jsx(tte,{}),h.jsxs("div",{className:"flex-1 flex flex-col",children:[h.jsx(WC,{}),h.jsx("main",{className:"flex-1 p-6 overflow-auto",children:n})]})]})}const nte=[{path:"/campus/visao-geral",label:"Viso Geral",icon:RQ},{path:"/campus/eventos",label:"Eventos do Campus",icon:or},{path:"/campus/usuarios",label:"Usurios",icon:Zs},{path:"/campus/certificados",label:"Certificados",icon:Su},{path:"/campus/auditoria",label:"Auditoria",icon:qQ},{path:"/campus/configuracoes",label:"Configuraes",icon:$Q}];function rte(){return h.jsxs("aside",{className:"w-64 border-r border-border bg-card/30 backdrop-blur-sm flex flex-col",children:[h.jsx("div",{className:"p-6",children:h.jsx("h2",{className:"text-sm font-light text-muted-foreground uppercase tracking-wider",children:"Menu Campus"})}),h.jsx("nav",{className:"flex-1 px-3 space-y-1",children:nte.map(n=>{const e=n.icon;return h.jsxs(ub,{to:n.path,className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors hover:bg-accent hover:text-accent-foreground",activeClassName:"bg-muted text-primary font-medium",children:[h.jsx(e,{className:"w-4 h-4"}),n.label]},n.path)})})]})}function Gp({children:n}){return h.jsxs("div",{className:"min-h-screen flex w-full bg-background",children:[h.jsx(rte,{}),h.jsxs("div",{className:"flex-1 flex flex-col",children:[h.jsx(WC,{}),h.jsx("main",{className:"flex-1 p-6 overflow-auto",children:n})]})]})}function zM({children:n}){return h.jsxs("div",{className:"min-h-screen bg-background",children:[h.jsx("header",{className:"border-b border-border bg-card/50 backdrop-blur-sm sticky top-0 z-50",children:h.jsxs("div",{className:"px-6 py-4 flex justify-between items-center",children:[h.jsx("h1",{className:"text-xl font-light tracking-wider",children:"SIGNEA"}),h.jsx(J1,{})]})}),h.jsx("main",{className:"p-6",children:n})]})}const ste=()=>{const n=ul();return h.jsxs("div",{className:"min-h-screen flex items-center justify-center relative",children:[h.jsx("div",{className:"absolute top-4 right-4",children:h.jsx(J1,{})}),h.jsx("div",{className:"w-full max-w-md mx-4",children:h.jsxs("div",{className:"bg-card border border-border rounded-xl p-8 backdrop-blur-sm glow-border",children:[h.jsx("h1",{className:"text-4xl font-light tracking-[0.2em] text-center mb-8",children:"SIGNEA"}),h.jsxs("div",{className:"space-y-4",children:[h.jsx(Je,{variant:"elegant",size:"lg",className:"w-full",onClick:()=>n("/login"),children:"Login"}),h.jsx(Je,{variant:"outline",size:"default",onClick:()=>n("/validar-certificado"),className:"w-full border-border hover:bg-accent/50 hover:text-foreground transition-colors",children:"Validar Certificado"})]})]})})]})},Qt=M.forwardRef(({className:n,type:e,...t},r)=>h.jsx("input",{type:e,className:et("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));Qt.displayName="Input";const ite={};var uT=null;function ote(n){try{return crypto.getRandomValues(new Uint8Array(n))}catch{}try{return ite.randomBytes(n)}catch{}if(!uT)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return uT(n)}function ate(n){uT=n}function eR(n,e){if(n=n||tR,typeof n!="number")throw Error("Illegal arguments: "+typeof n+", "+typeof e);n<4?n=4:n>31&&(n=31);var t=[];return t.push("$2b$"),n<10&&t.push("0"),t.push(n.toString()),t.push("$"),t.push(hE(ote(Kv),Kv)),t.join("")}function DB(n,e,t){if(typeof e=="function"&&(t=e,e=void 0),typeof n=="function"&&(t=n,n=void 0),typeof n>"u")n=tR;else if(typeof n!="number")throw Error("illegal arguments: "+typeof n);function r(s){Ka(function(){try{s(null,eR(n))}catch(i){s(i)}})}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);r(t)}else return new Promise(function(s,i){r(function(o,l){if(o){i(o);return}s(l)})})}function jB(n,e){if(typeof e>"u"&&(e=tR),typeof e=="number"&&(e=eR(e)),typeof n!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof n+", "+typeof e);return dT(n,e)}function LB(n,e,t,r){function s(i){typeof n=="string"&&typeof e=="number"?DB(e,function(o,l){dT(n,l,i,r)}):typeof n=="string"&&typeof e=="string"?dT(n,e,i,r):Ka(i.bind(this,Error("Illegal arguments: "+typeof n+", "+typeof e)))}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);s(t)}else return new Promise(function(i,o){s(function(l,c){if(l){o(l);return}i(c)})})}function BB(n,e){for(var t=n.length^e.length,r=0;r<n.length;++r)t|=n.charCodeAt(r)^e.charCodeAt(r);return t===0}function lte(n,e){if(typeof n!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof n+", "+typeof e);return e.length!==60?!1:BB(jB(n,e.substring(0,e.length-31)),e)}function cte(n,e,t,r){function s(i){if(typeof n!="string"||typeof e!="string"){Ka(i.bind(this,Error("Illegal arguments: "+typeof n+", "+typeof e)));return}if(e.length!==60){Ka(i.bind(this,null,!1));return}LB(n,e.substring(0,29),function(o,l){o?i(o):i(null,BB(l,e))},r)}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);s(t)}else return new Promise(function(i,o){s(function(l,c){if(l){o(l);return}i(c)})})}function ute(n){if(typeof n!="string")throw Error("Illegal arguments: "+typeof n);return parseInt(n.split("$")[2],10)}function dte(n){if(typeof n!="string")throw Error("Illegal arguments: "+typeof n);if(n.length!==60)throw Error("Illegal hash length: "+n.length+" != 60");return n.substring(0,29)}function hte(n){if(typeof n!="string")throw Error("Illegal arguments: "+typeof n);return FB(n)>72}var Ka=typeof setImmediate=="function"?setImmediate:typeof scheduler=="object"&&typeof scheduler.postTask=="function"?scheduler.postTask.bind(scheduler):setTimeout;function FB(n){for(var e=0,t=0,r=0;r<n.length;++r)t=n.charCodeAt(r),t<128?e+=1:t<2048?e+=2:(t&64512)===55296&&(n.charCodeAt(r+1)&64512)===56320?(++r,e+=4):e+=3;return e}function fte(n){for(var e=0,t,r,s=new Array(FB(n)),i=0,o=n.length;i<o;++i)t=n.charCodeAt(i),t<128?s[e++]=t:t<2048?(s[e++]=t>>6|192,s[e++]=t&63|128):(t&64512)===55296&&((r=n.charCodeAt(i+1))&64512)===56320?(t=65536+((t&1023)<<10)+(r&1023),++i,s[e++]=t>>18|240,s[e++]=t>>12&63|128,s[e++]=t>>6&63|128,s[e++]=t&63|128):(s[e++]=t>>12|224,s[e++]=t>>6&63|128,s[e++]=t&63|128);return s}var $p="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),rd=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function hE(n,e){var t=0,r=[],s,i;if(e<=0||e>n.length)throw Error("Illegal len: "+e);for(;t<e;){if(s=n[t++]&255,r.push($p[s>>2&63]),s=(s&3)<<4,t>=e){r.push($p[s&63]);break}if(i=n[t++]&255,s|=i>>4&15,r.push($p[s&63]),s=(i&15)<<2,t>=e){r.push($p[s&63]);break}i=n[t++]&255,s|=i>>6&3,r.push($p[s&63]),r.push($p[i&63])}return r.join("")}function UB(n,e){var t=0,r=n.length,s=0,i=[],o,l,c,f,g,y;if(e<=0)throw Error("Illegal len: "+e);for(;t<r-1&&s<e&&(y=n.charCodeAt(t++),o=y<rd.length?rd[y]:-1,y=n.charCodeAt(t++),l=y<rd.length?rd[y]:-1,!(o==-1||l==-1||(g=o<<2>>>0,g|=(l&48)>>4,i.push(String.fromCharCode(g)),++s>=e||t>=r)||(y=n.charCodeAt(t++),c=y<rd.length?rd[y]:-1,c==-1)||(g=(l&15)<<4>>>0,g|=(c&60)>>2,i.push(String.fromCharCode(g)),++s>=e||t>=r)));)y=n.charCodeAt(t++),f=y<rd.length?rd[y]:-1,g=(c&3)<<6>>>0,g|=f,i.push(String.fromCharCode(g)),++s;var _=[];for(t=0;t<s;t++)_.push(i[t].charCodeAt(0));return _}var Kv=16,tR=10,mte=16,pte=100,HM=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],VM=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],zB=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function Zv(n,e,t,r){var s,i=n[e],o=n[e+1];return i^=t[0],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^t[1],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^t[2],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^t[3],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^t[4],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^t[5],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^t[6],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^t[7],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^t[8],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^t[9],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^t[10],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^t[11],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^t[12],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^t[13],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^t[14],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^t[15],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^t[16],n[e]=o^t[mte+1],n[e+1]=i,n}function Qp(n,e){for(var t=0,r=0;t<4;++t)r=r<<8|n[e]&255,e=(e+1)%n.length;return{key:r,offp:e}}function WM(n,e,t){for(var r=0,s=[0,0],i=e.length,o=t.length,l,c=0;c<i;c++)l=Qp(n,r),r=l.offp,e[c]=e[c]^l.key;for(c=0;c<i;c+=2)s=Zv(s,0,e,t),e[c]=s[0],e[c+1]=s[1];for(c=0;c<o;c+=2)s=Zv(s,0,e,t),t[c]=s[0],t[c+1]=s[1]}function gte(n,e,t,r){for(var s=0,i=[0,0],o=t.length,l=r.length,c,f=0;f<o;f++)c=Qp(e,s),s=c.offp,t[f]=t[f]^c.key;for(s=0,f=0;f<o;f+=2)c=Qp(n,s),s=c.offp,i[0]^=c.key,c=Qp(n,s),s=c.offp,i[1]^=c.key,i=Zv(i,0,t,r),t[f]=i[0],t[f+1]=i[1];for(f=0;f<l;f+=2)c=Qp(n,s),s=c.offp,i[0]^=c.key,c=Qp(n,s),s=c.offp,i[1]^=c.key,i=Zv(i,0,t,r),r[f]=i[0],r[f+1]=i[1]}function GM(n,e,t,r,s){var i=zB.slice(),o=i.length,l;if(t<4||t>31)if(l=Error("Illegal number of rounds (4-31): "+t),r){Ka(r.bind(this,l));return}else throw l;if(e.length!==Kv)if(l=Error("Illegal salt length: "+e.length+" != "+Kv),r){Ka(r.bind(this,l));return}else throw l;t=1<<t>>>0;var c,f,g=0,y;typeof Int32Array=="function"?(c=new Int32Array(HM),f=new Int32Array(VM)):(c=HM.slice(),f=VM.slice()),gte(e,n,c,f);function _(){if(s&&s(g/t),g<t)for(var P=Date.now();g<t&&(g=g+1,WM(n,c,f),WM(e,c,f),!(Date.now()-P>pte)););else{for(g=0;g<64;g++)for(y=0;y<o>>1;y++)Zv(i,y<<1,c,f);var S=[];for(g=0;g<o;g++)S.push((i[g]>>24&255)>>>0),S.push((i[g]>>16&255)>>>0),S.push((i[g]>>8&255)>>>0),S.push((i[g]&255)>>>0);if(r){r(null,S);return}else return S}r&&Ka(_)}if(typeof r<"u")_();else for(var E;;)if(typeof(E=_())<"u")return E||[]}function dT(n,e,t,r){var s;if(typeof n!="string"||typeof e!="string")if(s=Error("Invalid string / salt: Not a string"),t){Ka(t.bind(this,s));return}else throw s;var i,o;if(e.charAt(0)!=="$"||e.charAt(1)!=="2")if(s=Error("Invalid salt version: "+e.substring(0,2)),t){Ka(t.bind(this,s));return}else throw s;if(e.charAt(2)==="$")i="\0",o=3;else{if(i=e.charAt(2),i!=="a"&&i!=="b"&&i!=="y"||e.charAt(3)!=="$")if(s=Error("Invalid salt revision: "+e.substring(2,4)),t){Ka(t.bind(this,s));return}else throw s;o=4}if(e.charAt(o+2)>"$")if(s=Error("Missing salt rounds"),t){Ka(t.bind(this,s));return}else throw s;var l=parseInt(e.substring(o,o+1),10)*10,c=parseInt(e.substring(o+1,o+2),10),f=l+c,g=e.substring(o+3,o+25);n+=i>="a"?"\0":"";var y=fte(n),_=UB(g,Kv);function E(P){var S=[];return S.push("$2"),i>="a"&&S.push(i),S.push("$"),f<10&&S.push("0"),S.push(f.toString()),S.push("$"),S.push(hE(_,_.length)),S.push(hE(P,zB.length*4-1)),S.join("")}if(typeof t>"u")return E(GM(y,_,f));GM(y,_,f,function(P,S){P?t(P,null):t(null,E(S))},r)}function xte(n,e){return hE(n,e)}function vte(n,e){return UB(n,e)}const hT={setRandomFallback:ate,genSaltSync:eR,genSalt:DB,hashSync:jB,hash:LB,compareSync:lte,compare:cte,getRounds:ute,getSalt:dte,truncates:hte,encodeBase64:xte,decodeBase64:vte},yte=()=>{var oe;const n=ul(),e=fc(),[t,r]=M.useState("email"),[s,i]=M.useState(""),[o,l]=M.useState(""),[c,f]=M.useState(["","","","","",""]),[g,y]=M.useState(""),[_,E]=M.useState(!1),[P,S]=M.useState(!1),[I,N]=M.useState(!1),[k,T]=M.useState("email"),[D,U]=M.useState(!1),[z,F]=M.useState(""),X=((oe=e.state)==null?void 0:oe.from)||"/usuario/eventos";M.useEffect(()=>{(async()=>{await LI()&&(xe.info("Voc j est autenticado!"),n(X,{replace:!0}))})();const{data:{subscription:ue}}=Ce.auth.onAuthStateChange((he,Ee)=>{Ee&&n(X,{replace:!0})});return()=>ue.unsubscribe()},[n,X]);const Z=async()=>{if(!s){F("Por favor, insira seu e-mail institucional ou matrcula"),U(!0);return}E(!0);try{let Q=s;if(s.includes("@")){if(!s.endsWith("@iffar.edu.br")&&!s.endsWith("@aluno.iffar.edu.br")){F("Use um e-mail institucional (@iffar.edu.br ou @aluno.iffar.edu.br)"),U(!0),E(!1);return}const{data:_e,error:Oe}=await Ce.from("usuarios").select("email, matricula, senha_hash").eq("email",s).single();if(Oe||!_e){T("email"),N(!0),E(!1);return}l(_e.email),S(!!_e.senha_hash)}else{const{data:_e,error:Oe}=await Ce.from("usuarios").select("email, matricula, senha_hash").eq("matricula",s).single();if(Oe||!_e){T("matricula"),N(!0),E(!1);return}Q=_e.email,l(_e.email),S(!!_e.senha_hash)}r("code");const{data:he,error:Ee}=await Ce.auth.signInWithOtp({email:Q,options:{shouldCreateUser:!1}});Ee?(F("Erro ao enviar cdigo: "+Ee.message),U(!0)):xe.success("Cdigo de 6 dgitos enviado para seu e-mail!")}catch(Q){console.error("Erro no login:",Q),F("Erro ao processar login. Tente novamente."),U(!0)}finally{E(!1)}},ne=()=>{N(!1),n("/cadastro",{state:{emailOrMatricula:s}})},se=()=>{N(!1)},ee=(Q,ue)=>{if(ue.length>1){const Ee=ue.slice(0,6).split(""),_e=[...c];Ee.forEach((ze,be)=>{Q+be<6&&(_e[Q+be]=ze)}),f(_e);const Oe=Math.min(Q+Ee.length-1,5),De=document.getElementById(`code-${Oe}`);De==null||De.focus();return}const he=[...c];if(he[Q]=ue,f(he),ue&&Q<5){const Ee=document.getElementById(`code-${Q+1}`);Ee==null||Ee.focus()}},ce=(Q,ue)=>{if(ue.key==="Backspace"&&!c[Q]&&Q>0){ue.preventDefault();const he=[...c];he[Q-1]="",f(he);const Ee=document.getElementById(`code-${Q-1}`);Ee==null||Ee.focus()}},de=async()=>{const Q=c.join("");if(Q.length!==6){xe.error("Por favor, insira o cdigo completo");return}E(!0);try{const{data:ue,error:he}=await Ce.auth.verifyOtp({email:o,token:Q,type:"email"});he?(F("Cdigo invlido ou expirado. Verifique e tente novamente."),U(!0)):(await fe(o),xe.success("Login realizado com sucesso!"),n(X,{replace:!0}))}catch{F("Erro ao verificar cdigo. Tente novamente."),U(!0)}finally{E(!1)}},re=async()=>{if(!g){F("Por favor, insira sua senha"),U(!0);return}E(!0);try{const{data:Q,error:ue}=await Ce.from("usuarios").select("senha_hash").eq("email",o).single();if(ue||!Q||!Q.senha_hash){F("Erro ao verificar usurio"),U(!0),E(!1);return}if(!await hT.compare(g,Q.senha_hash)){F("Senha incorreta. Verifique e tente novamente."),U(!0),E(!1);return}await fe(o),xe.success("Login realizado com sucesso!"),n(X,{replace:!0})}catch(Q){console.error("Erro ao verificar senha:",Q),F("Erro ao verificar senha. Tente novamente."),U(!0)}finally{E(!1)}},fe=async Q=>{try{const ue=crypto.randomUUID(),he=new Date(Date.now()+60*60*1e3);await Ce.from("usuarios").update({session_token:ue,session_expires_at:he.toISOString(),last_activity_at:new Date().toISOString()}).eq("email",Q),localStorage.setItem("session_token",ue),localStorage.setItem("session_email",Q)}catch(ue){console.error("Erro ao criar sesso:",ue)}};return h.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative",children:[h.jsx("div",{className:"absolute top-4 right-4",children:h.jsx(J1,{})}),h.jsx("div",{className:"w-full max-w-md mx-auto",children:h.jsxs("div",{className:"backdrop-blur-custom bg-card border border-border rounded-xl p-8 glow-border",children:[h.jsx("div",{className:"flex justify-center mb-6",children:h.jsx("img",{src:"/logo-bgremoved.png",alt:"Logo",className:"h-16 w-auto object-contain"})}),h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("h1",{className:"text-2xl font-light tracking-wider text-foreground mb-2",children:"Login"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:t==="email"?"Entre com suas credenciais":t==="code"?"Digite o cdigo enviado":"Use sua senha"})]}),t==="email"?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Qt,{type:"text",placeholder:"E-mail institucional ou Matrcula",value:s,onChange:Q=>i(Q.target.value),className:"h-12 bg-transparent border-border focus:glow-border-hover",disabled:_,onKeyPress:Q=>{Q.key==="Enter"&&Z()}}),h.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Use seu e-mail institucional ou matrcula"})]}),h.jsx(Je,{variant:"elegant",size:"lg",onClick:Z,className:"w-full",disabled:_,children:_?"Verificando...":"Entrar"}),h.jsx("button",{onClick:()=>n("/"),className:"w-full text-sm text-muted-foreground hover:text-foreground transition-colors",disabled:_,children:"Voltar"})]}):t==="code"?h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"flex justify-center gap-2",children:c.map((Q,ue)=>h.jsx("input",{id:`code-${ue}`,type:"text",maxLength:1,value:Q,onChange:he=>ee(ue,he.target.value),onKeyDown:he=>ce(ue,he),className:"w-12 h-12 text-center text-lg bg-transparent border border-border rounded-lg focus:glow-border-hover focus:outline-none",disabled:_},ue))}),h.jsx(Je,{onClick:de,className:"w-full h-12 bg-transparent border border-border hover:glow-border-hover rounded-lg text-foreground font-normal",disabled:_,children:_?"Verificando...":"Confirmar cdigo"}),h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsx("button",{onClick:()=>r("email"),className:"w-full text-sm text-muted-foreground hover:text-foreground transition-colors",disabled:_,children:"Voltar"}),P&&h.jsx("button",{onClick:()=>r("password"),className:"w-full text-sm text-primary hover:text-primary/80 transition-colors",disabled:_,children:"Cdigo no funcionou? Use sua senha-mestra"})]})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm text-muted-foreground",children:"Senha-Mestra"}),h.jsx(Qt,{type:"password",placeholder:"Digite sua senha-mestra",value:g,onChange:Q=>y(Q.target.value),className:"h-12 bg-transparent border-border focus:glow-border-hover",disabled:_,onKeyPress:Q=>{Q.key==="Enter"&&re()}}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"Use a senha-mestra cadastrada como alternativa ao cdigo"})]}),h.jsx(Je,{onClick:re,className:"w-full h-12 bg-transparent border border-border hover:glow-border-hover rounded-lg text-foreground font-normal",disabled:_,children:_?"Verificando...":"Entrar com senha"}),h.jsx("div",{className:"flex flex-col gap-2",children:h.jsx("button",{onClick:()=>r("code"),className:"w-full text-sm text-muted-foreground hover:text-foreground transition-colors",disabled:_,children:"Voltar para cdigo"})})]})]})}),h.jsx(dp,{open:I,onOpenChange:N,children:h.jsxs(kh,{className:"bg-card/95 border border-border/10 backdrop-blur-md shadow-2xl",children:[h.jsxs(Mh,{className:"space-y-4",children:[h.jsx(Dh,{className:"text-2xl font-light tracking-[0.02em] text-foreground",children:"Conta no encontrada"}),h.jsx("div",{className:"h-[0.5px] bg-gradient-to-r from-transparent via-border/40 to-transparent"})]}),h.jsxs("div",{className:"py-4 space-y-4",children:[h.jsx("p",{className:"text-muted-foreground text-[15px] leading-relaxed",children:k==="email"?`No encontramos uma conta com o e-mail ${s}.`:`No encontramos uma conta com a matrcula ${s}.`}),h.jsx("p",{className:"text-foreground/90 text-[15px] font-normal",children:"Vamos criar uma conta para voc!"})]}),h.jsxs(Oh,{className:"gap-3 sm:gap-3",children:[h.jsx(ob,{onClick:se,className:"h-11 px-6 bg-transparent border border-border/15 hover:border-border/30 hover:bg-accent/30 text-muted-foreground hover:text-foreground transition-all duration-200 font-light",children:"Humm, no"}),h.jsx(jh,{onClick:ne,className:"h-11 px-6 bg-transparent border border-primary/15 hover:border-primary/30 hover:bg-primary/5 text-foreground hover:text-foreground transition-all duration-200 font-light",children:"Bora l!"})]})]})}),h.jsx(dp,{open:D,onOpenChange:U,children:h.jsxs(kh,{className:"bg-card/95 border border-border/10 backdrop-blur-md shadow-2xl",children:[h.jsxs(Mh,{className:"space-y-4",children:[h.jsx(Dh,{className:"text-2xl font-light tracking-[0.02em] text-foreground",children:"Ateno"}),h.jsx("div",{className:"h-[0.5px] bg-gradient-to-r from-transparent via-border/40 to-transparent"})]}),h.jsx("div",{className:"py-4",children:h.jsx("p",{className:"text-muted-foreground text-[15px] leading-relaxed",children:z})}),h.jsx(Oh,{children:h.jsx(jh,{onClick:()=>U(!1),className:"h-11 px-8 bg-transparent border border-border/15 hover:border-border/30 hover:bg-accent/30 text-foreground transition-all duration-200 font-light",children:"Entendi"})})]})})]})};function zt(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function ko(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function Ys(n,e){const t=zt(n);return isNaN(e)?ko(n,NaN):(e&&t.setDate(t.getDate()+e),t)}function ol(n,e){const t=zt(n);if(isNaN(e))return ko(n,NaN);if(!e)return t;const r=t.getDate(),s=ko(n,t.getTime());s.setMonth(t.getMonth()+e+1,0);const i=s.getDate();return r>=i?s:(t.setFullYear(s.getFullYear(),s.getMonth(),r),t)}const nR=6048e5,wte=864e5;let bte={};function mb(){return bte}function lc(n,e){var l,c,f,g;const t=mb(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((g=(f=t.locale)==null?void 0:f.options)==null?void 0:g.weekStartsOn)??0,s=zt(n),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function mp(n){return lc(n,{weekStartsOn:1})}function HB(n){const e=zt(n),t=e.getFullYear(),r=ko(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const s=mp(r),i=ko(n,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const o=mp(i);return e.getTime()>=s.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function R1(n){const e=zt(n);return e.setHours(0,0,0,0),e}function fE(n){const e=zt(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Za(n,e){const t=R1(n),r=R1(e),s=+t-fE(t),i=+r-fE(r);return Math.round((s-i)/wte)}function _te(n){const e=HB(n),t=ko(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),mp(t)}function fT(n,e){const t=e*7;return Ys(n,t)}function Ete(n,e){return ol(n,e*12)}function Cte(n){let e;return n.forEach(function(t){const r=zt(t);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function Ate(n){let e;return n.forEach(t=>{const r=zt(t);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function Ui(n,e){const t=R1(n),r=R1(e);return+t==+r}function rR(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Ste(n){if(!rR(n)&&typeof n!="number")return!1;const e=zt(n);return!isNaN(Number(e))}function Qv(n,e){const t=zt(n),r=zt(e),s=t.getFullYear()-r.getFullYear(),i=t.getMonth()-r.getMonth();return s*12+i}function Nte(n,e,t){const r=lc(n,t),s=lc(e,t),i=+r-fE(r),o=+s-fE(s);return Math.round((i-o)/nR)}function $M(n,e){const t=zt(n),r=zt(e),s=qM(t,r),i=Math.abs(Za(t,r));t.setDate(t.getDate()-s*i);const o=+(qM(t,r)===-s),l=s*(i-o);return l===0?0:l}function qM(n,e){const t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function sR(n){const e=zt(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function Tte(n,e){const t=zt(n.start),r=zt(n.end);let s=+t>+r;const i=s?+t:+r,o=s?r:t;o.setHours(0,0,0,0);let l=1;const c=[];for(;+o<=i;)c.push(zt(o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return s?c.reverse():c}function Wi(n){const e=zt(n);return e.setDate(1),e.setHours(0,0,0,0),e}function VB(n){const e=zt(n),t=ko(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function iR(n,e){var l,c,f,g;const t=mb(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((g=(f=t.locale)==null?void 0:f.options)==null?void 0:g.weekStartsOn)??0,s=zt(n),i=s.getDay(),o=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function WB(n){return iR(n,{weekStartsOn:1})}const Pte={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ite=(n,e,t)=>{let r;const s=Pte[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Lg(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const Rte={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},kte={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Mte={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ote={date:Lg({formats:Rte,defaultWidth:"full"}),time:Lg({formats:kte,defaultWidth:"full"}),dateTime:Lg({formats:Mte,defaultWidth:"full"})},Dte={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},jte=(n,e,t,r)=>Dte[n];function Kl(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let s;if(r==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,l=t!=null&&t.width?String(t.width):o;s=n.formattingValues[l]||n.formattingValues[o]}else{const o=n.defaultWidth,l=t!=null&&t.width?String(t.width):n.defaultWidth;s=n.values[l]||n.values[o]}const i=n.argumentCallback?n.argumentCallback(e):e;return s[i]}}const Lte={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Bte={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Fte={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ute={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Hte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Vte=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Wte={ordinalNumber:Vte,era:Kl({values:Lte,defaultWidth:"wide"}),quarter:Kl({values:Bte,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Kl({values:Fte,defaultWidth:"wide"}),day:Kl({values:Ute,defaultWidth:"wide"}),dayPeriod:Kl({values:zte,defaultWidth:"wide",formattingValues:Hte,defaultFormattingWidth:"wide"})};function Zl(n){return(e,t={})=>{const r=t.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],l=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(l)?$te(l,y=>y.test(o)):Gte(l,y=>y.test(o));let f;f=n.valueCallback?n.valueCallback(c):c,f=t.valueCallback?t.valueCallback(f):f;const g=e.slice(o.length);return{value:f,rest:g}}}function Gte(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function $te(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function GB(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const s=r[0],i=e.match(n.parsePattern);if(!i)return null;let o=n.valueCallback?n.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const qte=/^(\d+)(th|st|nd|rd)?/i,Xte=/\d+/i,Yte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Kte={any:[/^b/i,/^(a|c)/i]},Zte={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qte={any:[/1/i,/2/i,/3/i,/4/i]},Jte={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ene={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tne={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nne={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},rne={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},sne={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ine={ordinalNumber:GB({matchPattern:qte,parsePattern:Xte,valueCallback:n=>parseInt(n,10)}),era:Zl({matchPatterns:Yte,defaultMatchWidth:"wide",parsePatterns:Kte,defaultParseWidth:"any"}),quarter:Zl({matchPatterns:Zte,defaultMatchWidth:"wide",parsePatterns:Qte,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Zl({matchPatterns:Jte,defaultMatchWidth:"wide",parsePatterns:ene,defaultParseWidth:"any"}),day:Zl({matchPatterns:tne,defaultMatchWidth:"wide",parsePatterns:nne,defaultParseWidth:"any"}),dayPeriod:Zl({matchPatterns:rne,defaultMatchWidth:"any",parsePatterns:sne,defaultParseWidth:"any"})},$B={code:"en-US",formatDistance:Ite,formatLong:Ote,formatRelative:jte,localize:Wte,match:ine,options:{weekStartsOn:0,firstWeekContainsDate:1}};function one(n){const e=zt(n);return Za(e,VB(e))+1}function qB(n){const e=zt(n),t=+mp(e)-+_te(e);return Math.round(t/nR)+1}function XB(n,e){var g,y,_,E;const t=zt(n),r=t.getFullYear(),s=mb(),i=(e==null?void 0:e.firstWeekContainsDate)??((y=(g=e==null?void 0:e.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??s.firstWeekContainsDate??((E=(_=s.locale)==null?void 0:_.options)==null?void 0:E.firstWeekContainsDate)??1,o=ko(n,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=lc(o,e),c=ko(n,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const f=lc(c,e);return t.getTime()>=l.getTime()?r+1:t.getTime()>=f.getTime()?r:r-1}function ane(n,e){var l,c,f,g;const t=mb(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((g=(f=t.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,s=XB(n,e),i=ko(n,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),lc(i,e)}function YB(n,e){const t=zt(n),r=+lc(t,e)-+ane(t,e);return Math.round(r/nR)+1}function wn(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const sd={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return wn(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):wn(t+1,2)},d(n,e){return wn(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return wn(n.getHours()%12||12,e.length)},H(n,e){return wn(n.getHours(),e.length)},m(n,e){return wn(n.getMinutes(),e.length)},s(n,e){return wn(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return wn(s,e.length)}},qp={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},XM={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return sd.y(n,e)},Y:function(n,e,t,r){const s=XB(n,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return wn(o,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):wn(i,e.length)},R:function(n,e){const t=HB(n);return wn(t,e.length)},u:function(n,e){const t=n.getFullYear();return wn(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return wn(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return wn(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return sd.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return wn(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const s=YB(n,r);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):wn(s,e.length)},I:function(n,e,t){const r=qB(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):wn(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):sd.d(n,e)},D:function(n,e,t){const r=one(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):wn(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return wn(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return wn(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return wn(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const s=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let s;switch(r===12?s=qp.noon:r===0?s=qp.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let s;switch(r>=17?s=qp.evening:r>=12?s=qp.afternoon:r>=4?s=qp.morning:s=qp.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return sd.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):sd.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):wn(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):wn(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):sd.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):sd.s(n,e)},S:function(n,e){return sd.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return KM(r);case"XXXX":case"XX":return vf(r);case"XXXXX":case"XXX":default:return vf(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return KM(r);case"xxxx":case"xx":return vf(r);case"xxxxx":case"xxx":default:return vf(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+YM(r,":");case"OOOO":default:return"GMT"+vf(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+YM(r,":");case"zzzz":default:return"GMT"+vf(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return wn(r,e.length)},T:function(n,e,t){const r=n.getTime();return wn(r,e.length)}};function YM(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Math.trunc(r/60),i=r%60;return i===0?t+String(s):t+String(s)+e+wn(i,2)}function KM(n,e){return n%60===0?(n>0?"-":"+")+wn(Math.abs(n)/60,2):vf(n,e)}function vf(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=wn(Math.trunc(r/60),2),i=wn(r%60,2);return t+s+e+i}const ZM=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},KB=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},lne=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return ZM(n,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",ZM(r,e)).replace("{{time}}",KB(s,e))},cne={p:KB,P:lne},une=/^D+$/,dne=/^Y+$/,hne=["D","DD","YY","YYYY"];function fne(n){return une.test(n)}function mne(n){return dne.test(n)}function pne(n,e,t){const r=gne(n,e,t);if(console.warn(r),hne.includes(n))throw new RangeError(r)}function gne(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const xne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yne=/^'([^]*?)'?$/,wne=/''/g,bne=/[a-zA-Z]/;function ht(n,e,t){var g,y,_,E,P,S,I,N;const r=mb(),s=(t==null?void 0:t.locale)??r.locale??$B,i=(t==null?void 0:t.firstWeekContainsDate)??((y=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??r.firstWeekContainsDate??((E=(_=r.locale)==null?void 0:_.options)==null?void 0:E.firstWeekContainsDate)??1,o=(t==null?void 0:t.weekStartsOn)??((S=(P=t==null?void 0:t.locale)==null?void 0:P.options)==null?void 0:S.weekStartsOn)??r.weekStartsOn??((N=(I=r.locale)==null?void 0:I.options)==null?void 0:N.weekStartsOn)??0,l=zt(n);if(!Ste(l))throw new RangeError("Invalid time value");let c=e.match(vne).map(k=>{const T=k[0];if(T==="p"||T==="P"){const D=cne[T];return D(k,s.formatLong)}return k}).join("").match(xne).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const T=k[0];if(T==="'")return{isToken:!1,value:_ne(k)};if(XM[T])return{isToken:!0,value:k};if(T.match(bne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return{isToken:!1,value:k}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const f={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(k=>{if(!k.isToken)return k.value;const T=k.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&mne(T)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&fne(T))&&pne(T,e,String(n));const D=XM[T[0]];return D(l,T,s.localize,f)}).join("")}function _ne(n){const e=n.match(yne);return e?e[1].replace(wne,"'"):n}function Ene(n){const e=zt(n),t=e.getFullYear(),r=e.getMonth(),s=ko(n,0);return s.setFullYear(t,r+1,0),s.setHours(0,0,0,0),s.getDate()}function Cne(n){return Math.trunc(+zt(n)/1e3)}function Ane(n){const e=zt(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function Sne(n,e){return Nte(Ane(n),Wi(n),e)+1}function mT(n,e){const t=zt(n),r=zt(e);return t.getTime()>r.getTime()}function ZB(n,e){const t=zt(n),r=zt(e);return+t<+r}function oR(n,e){const t=zt(n),r=zt(e);return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()}function Nne(n,e){const t=zt(n),r=zt(e);return t.getFullYear()===r.getFullYear()}function xS(n,e){return Ys(n,-e)}function vS(n,e){const t=zt(n),r=t.getFullYear(),s=t.getDate(),i=ko(n,0);i.setFullYear(r,e,15),i.setHours(0,0,0,0);const o=Ene(i);return t.setMonth(e,Math.min(s,o)),t}function QM(n,e){const t=zt(n);return isNaN(+t)?ko(n,NaN):(t.setFullYear(e),t)}const Tne={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},Pne=(n,e,t)=>{let r;const s=Tne[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"em "+r:"h "+r:r},Ine={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},Rne={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},kne={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Mne={date:Lg({formats:Ine,defaultWidth:"full"}),time:Lg({formats:Rne,defaultWidth:"full"}),dateTime:Lg({formats:kne,defaultWidth:"full"})},One={lastWeek:n=>{const e=n.getDay();return"'"+(e===0||e===6?"ltimo":"ltima")+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},Dne=(n,e,t,r)=>{const s=One[n];return typeof s=="function"?s(e):s},jne={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},Lne={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},Bne={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},Fne={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},Une={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},zne={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},Hne=(n,e)=>{const t=Number(n);return(e==null?void 0:e.unit)==="week"?t+"":t+""},Vne={ordinalNumber:Hne,era:Kl({values:jne,defaultWidth:"wide"}),quarter:Kl({values:Lne,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Kl({values:Bne,defaultWidth:"wide"}),day:Kl({values:Fne,defaultWidth:"wide"}),dayPeriod:Kl({values:Une,defaultWidth:"wide",formattingValues:zne,defaultFormattingWidth:"wide"})},Wne=/^(\d+)[o]?/i,Gne=/\d+/i,$ne={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},qne={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},Xne={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},Yne={any:[/1/i,/2/i,/3/i,/4/i]},Kne={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},Zne={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},Qne={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},Jne={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},ere={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},tre={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},nre={ordinalNumber:GB({matchPattern:Wne,parsePattern:Gne,valueCallback:n=>parseInt(n,10)}),era:Zl({matchPatterns:$ne,defaultMatchWidth:"wide",parsePatterns:qne,defaultParseWidth:"any"}),quarter:Zl({matchPatterns:Xne,defaultMatchWidth:"wide",parsePatterns:Yne,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Zl({matchPatterns:Kne,defaultMatchWidth:"wide",parsePatterns:Zne,defaultParseWidth:"any"}),day:Zl({matchPatterns:Qne,defaultMatchWidth:"wide",parsePatterns:Jne,defaultParseWidth:"any"}),dayPeriod:Zl({matchPatterns:ere,defaultMatchWidth:"any",parsePatterns:tre,defaultParseWidth:"any"})},Xt={code:"pt-BR",formatDistance:Pne,formatLong:Mne,formatRelative:Dne,localize:Vne,match:nre,options:{weekStartsOn:0,firstWeekContainsDate:1}};var pt=function(){return pt=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},pt.apply(this,arguments)};function rre(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function QB(n,e,t){for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}function pb(n){return n.mode==="multiple"}function gb(n){return n.mode==="range"}function GC(n){return n.mode==="single"}var sre={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function ire(n,e){return ht(n,"LLLL y",e)}function ore(n,e){return ht(n,"d",e)}function are(n,e){return ht(n,"LLLL",e)}function lre(n){return"".concat(n)}function cre(n,e){return ht(n,"cccccc",e)}function ure(n,e){return ht(n,"yyyy",e)}var dre=Object.freeze({__proto__:null,formatCaption:ire,formatDay:ore,formatMonthCaption:are,formatWeekNumber:lre,formatWeekdayName:cre,formatYearCaption:ure}),hre=function(n,e,t){return ht(n,"do MMMM (EEEE)",t)},fre=function(){return"Month: "},mre=function(){return"Go to next month"},pre=function(){return"Go to previous month"},gre=function(n,e){return ht(n,"cccc",e)},xre=function(n){return"Week n. ".concat(n)},vre=function(){return"Year: "},yre=Object.freeze({__proto__:null,labelDay:hre,labelMonthDropdown:fre,labelNext:mre,labelPrevious:pre,labelWeekNumber:xre,labelWeekday:gre,labelYearDropdown:vre});function wre(){var n="buttons",e=sre,t=$B,r={},s={},i=1,o={},l=new Date;return{captionLayout:n,classNames:e,formatters:dre,labels:yre,locale:t,modifiersClassNames:r,modifiers:s,numberOfMonths:i,styles:o,today:l,mode:"default"}}function bre(n){var e=n.fromYear,t=n.toYear,r=n.fromMonth,s=n.toMonth,i=n.fromDate,o=n.toDate;return r?i=Wi(r):e&&(i=new Date(e,0,1)),s?o=sR(s):t&&(o=new Date(t,11,31)),{fromDate:i?R1(i):void 0,toDate:o?R1(o):void 0}}var JB=M.createContext(void 0);function _re(n){var e,t=n.initialProps,r=wre(),s=bre(t),i=s.fromDate,o=s.toDate,l=(e=t.captionLayout)!==null&&e!==void 0?e:r.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var c;(GC(t)||pb(t)||gb(t))&&(c=t.onSelect);var f=pt(pt(pt({},r),t),{captionLayout:l,classNames:pt(pt({},r.classNames),t.classNames),components:pt({},t.components),formatters:pt(pt({},r.formatters),t.formatters),fromDate:i,labels:pt(pt({},r.labels),t.labels),mode:t.mode||r.mode,modifiers:pt(pt({},r.modifiers),t.modifiers),modifiersClassNames:pt(pt({},r.modifiersClassNames),t.modifiersClassNames),onSelect:c,styles:pt(pt({},r.styles),t.styles),toDate:o});return h.jsx(JB.Provider,{value:f,children:n.children})}function Gn(){var n=M.useContext(JB);if(!n)throw new Error("useDayPicker must be used within a DayPickerProvider.");return n}function e7(n){var e=Gn(),t=e.locale,r=e.classNames,s=e.styles,i=e.formatters.formatCaption;return h.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:n.id,children:i(n.displayMonth,{locale:t})})}function Ere(n){return h.jsx("svg",pt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},n,{children:h.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function t7(n){var e,t,r=n.onChange,s=n.value,i=n.children,o=n.caption,l=n.className,c=n.style,f=Gn(),g=(t=(e=f.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&t!==void 0?t:Ere;return h.jsxs("div",{className:l,style:c,children:[h.jsx("span",{className:f.classNames.vhidden,children:n["aria-label"]}),h.jsx("select",{name:n.name,"aria-label":n["aria-label"],className:f.classNames.dropdown,style:f.styles.dropdown,value:s,onChange:r,children:i}),h.jsxs("div",{className:f.classNames.caption_label,style:f.styles.caption_label,"aria-hidden":"true",children:[o,h.jsx(g,{className:f.classNames.dropdown_icon,style:f.styles.dropdown_icon})]})]})}function Cre(n){var e,t=Gn(),r=t.fromDate,s=t.toDate,i=t.styles,o=t.locale,l=t.formatters.formatMonthCaption,c=t.classNames,f=t.components,g=t.labels.labelMonthDropdown;if(!r)return h.jsx(h.Fragment,{});if(!s)return h.jsx(h.Fragment,{});var y=[];if(Nne(r,s))for(var _=Wi(r),E=r.getMonth();E<=s.getMonth();E++)y.push(vS(_,E));else for(var _=Wi(new Date),E=0;E<=11;E++)y.push(vS(_,E));var P=function(I){var N=Number(I.target.value),k=vS(Wi(n.displayMonth),N);n.onChange(k)},S=(e=f==null?void 0:f.Dropdown)!==null&&e!==void 0?e:t7;return h.jsx(S,{name:"months","aria-label":g(),className:c.dropdown_month,style:i.dropdown_month,onChange:P,value:n.displayMonth.getMonth(),caption:l(n.displayMonth,{locale:o}),children:y.map(function(I){return h.jsx("option",{value:I.getMonth(),children:l(I,{locale:o})},I.getMonth())})})}function Are(n){var e,t=n.displayMonth,r=Gn(),s=r.fromDate,i=r.toDate,o=r.locale,l=r.styles,c=r.classNames,f=r.components,g=r.formatters.formatYearCaption,y=r.labels.labelYearDropdown,_=[];if(!s)return h.jsx(h.Fragment,{});if(!i)return h.jsx(h.Fragment,{});for(var E=s.getFullYear(),P=i.getFullYear(),S=E;S<=P;S++)_.push(QM(VB(new Date),S));var I=function(k){var T=QM(Wi(t),Number(k.target.value));n.onChange(T)},N=(e=f==null?void 0:f.Dropdown)!==null&&e!==void 0?e:t7;return h.jsx(N,{name:"years","aria-label":y(),className:c.dropdown_year,style:l.dropdown_year,onChange:I,value:t.getFullYear(),caption:g(t,{locale:o}),children:_.map(function(k){return h.jsx("option",{value:k.getFullYear(),children:g(k,{locale:o})},k.getFullYear())})})}function Sre(n,e){var t=M.useState(n),r=t[0],s=t[1],i=e===void 0?r:e;return[i,s]}function Nre(n){var e=n.month,t=n.defaultMonth,r=n.today,s=e||t||r||new Date,i=n.toDate,o=n.fromDate,l=n.numberOfMonths,c=l===void 0?1:l;if(i&&Qv(i,s)<0){var f=-1*(c-1);s=ol(i,f)}return o&&Qv(s,o)<0&&(s=o),Wi(s)}function Tre(){var n=Gn(),e=Nre(n),t=Sre(e,n.month),r=t[0],s=t[1],i=function(o){var l;if(!n.disableNavigation){var c=Wi(o);s(c),(l=n.onMonthChange)===null||l===void 0||l.call(n,c)}};return[r,i]}function Pre(n,e){for(var t=e.reverseMonths,r=e.numberOfMonths,s=Wi(n),i=Wi(ol(s,r)),o=Qv(i,s),l=[],c=0;c<o;c++){var f=ol(s,c);l.push(f)}return t&&(l=l.reverse()),l}function Ire(n,e){if(!e.disableNavigation){var t=e.toDate,r=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,o=r?i:1,l=Wi(n);if(!t)return ol(l,o);var c=Qv(t,n);if(!(c<i))return ol(l,o)}}function Rre(n,e){if(!e.disableNavigation){var t=e.fromDate,r=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,o=r?i:1,l=Wi(n);if(!t)return ol(l,-o);var c=Qv(l,t);if(!(c<=0))return ol(l,-o)}}var n7=M.createContext(void 0);function kre(n){var e=Gn(),t=Tre(),r=t[0],s=t[1],i=Pre(r,e),o=Ire(r,e),l=Rre(r,e),c=function(y){return i.some(function(_){return oR(y,_)})},f=function(y,_){c(y)||(_&&ZB(y,_)?s(ol(y,1+e.numberOfMonths*-1)):s(y))},g={currentMonth:r,displayMonths:i,goToMonth:s,goToDate:f,previousMonth:l,nextMonth:o,isDateDisplayed:c};return h.jsx(n7.Provider,{value:g,children:n.children})}function xb(){var n=M.useContext(n7);if(!n)throw new Error("useNavigation must be used within a NavigationProvider");return n}function JM(n){var e,t=Gn(),r=t.classNames,s=t.styles,i=t.components,o=xb().goToMonth,l=function(g){o(ol(g,n.displayIndex?-n.displayIndex:0))},c=(e=i==null?void 0:i.CaptionLabel)!==null&&e!==void 0?e:e7,f=h.jsx(c,{id:n.id,displayMonth:n.displayMonth});return h.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[h.jsx("div",{className:r.vhidden,children:f}),h.jsx(Cre,{onChange:l,displayMonth:n.displayMonth}),h.jsx(Are,{onChange:l,displayMonth:n.displayMonth})]})}function Mre(n){return h.jsx("svg",pt({width:"16px",height:"16px",viewBox:"0 0 120 120"},n,{children:h.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Ore(n){return h.jsx("svg",pt({width:"16px",height:"16px",viewBox:"0 0 120 120"},n,{children:h.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var mE=M.forwardRef(function(n,e){var t=Gn(),r=t.classNames,s=t.styles,i=[r.button_reset,r.button];n.className&&i.push(n.className);var o=i.join(" "),l=pt(pt({},s.button_reset),s.button);return n.style&&Object.assign(l,n.style),h.jsx("button",pt({},n,{ref:e,type:"button",className:o,style:l}))});function Dre(n){var e,t,r=Gn(),s=r.dir,i=r.locale,o=r.classNames,l=r.styles,c=r.labels,f=c.labelPrevious,g=c.labelNext,y=r.components;if(!n.nextMonth&&!n.previousMonth)return h.jsx(h.Fragment,{});var _=f(n.previousMonth,{locale:i}),E=[o.nav_button,o.nav_button_previous].join(" "),P=g(n.nextMonth,{locale:i}),S=[o.nav_button,o.nav_button_next].join(" "),I=(e=y==null?void 0:y.IconRight)!==null&&e!==void 0?e:Ore,N=(t=y==null?void 0:y.IconLeft)!==null&&t!==void 0?t:Mre;return h.jsxs("div",{className:o.nav,style:l.nav,children:[!n.hidePrevious&&h.jsx(mE,{name:"previous-month","aria-label":_,className:E,style:l.nav_button_previous,disabled:!n.previousMonth,onClick:n.onPreviousClick,children:s==="rtl"?h.jsx(I,{className:o.nav_icon,style:l.nav_icon}):h.jsx(N,{className:o.nav_icon,style:l.nav_icon})}),!n.hideNext&&h.jsx(mE,{name:"next-month","aria-label":P,className:S,style:l.nav_button_next,disabled:!n.nextMonth,onClick:n.onNextClick,children:s==="rtl"?h.jsx(N,{className:o.nav_icon,style:l.nav_icon}):h.jsx(I,{className:o.nav_icon,style:l.nav_icon})})]})}function eO(n){var e=Gn().numberOfMonths,t=xb(),r=t.previousMonth,s=t.nextMonth,i=t.goToMonth,o=t.displayMonths,l=o.findIndex(function(P){return oR(n.displayMonth,P)}),c=l===0,f=l===o.length-1,g=e>1&&(c||!f),y=e>1&&(f||!c),_=function(){r&&i(r)},E=function(){s&&i(s)};return h.jsx(Dre,{displayMonth:n.displayMonth,hideNext:g,hidePrevious:y,nextMonth:s,previousMonth:r,onPreviousClick:_,onNextClick:E})}function jre(n){var e,t=Gn(),r=t.classNames,s=t.disableNavigation,i=t.styles,o=t.captionLayout,l=t.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:e7,f;return s?f=h.jsx(c,{id:n.id,displayMonth:n.displayMonth}):o==="dropdown"?f=h.jsx(JM,{displayMonth:n.displayMonth,id:n.id}):o==="dropdown-buttons"?f=h.jsxs(h.Fragment,{children:[h.jsx(JM,{displayMonth:n.displayMonth,displayIndex:n.displayIndex,id:n.id}),h.jsx(eO,{displayMonth:n.displayMonth,displayIndex:n.displayIndex,id:n.id})]}):f=h.jsxs(h.Fragment,{children:[h.jsx(c,{id:n.id,displayMonth:n.displayMonth,displayIndex:n.displayIndex}),h.jsx(eO,{displayMonth:n.displayMonth,id:n.id})]}),h.jsx("div",{className:r.caption,style:i.caption,children:f})}function Lre(n){var e=Gn(),t=e.footer,r=e.styles,s=e.classNames.tfoot;return t?h.jsx("tfoot",{className:s,style:r.tfoot,children:h.jsx("tr",{children:h.jsx("td",{colSpan:8,children:t})})}):h.jsx(h.Fragment,{})}function Bre(n,e,t){for(var r=t?mp(new Date):lc(new Date,{locale:n,weekStartsOn:e}),s=[],i=0;i<7;i++){var o=Ys(r,i);s.push(o)}return s}function Fre(){var n=Gn(),e=n.classNames,t=n.styles,r=n.showWeekNumber,s=n.locale,i=n.weekStartsOn,o=n.ISOWeek,l=n.formatters.formatWeekdayName,c=n.labels.labelWeekday,f=Bre(s,i,o);return h.jsxs("tr",{style:t.head_row,className:e.head_row,children:[r&&h.jsx("td",{style:t.head_cell,className:e.head_cell}),f.map(function(g,y){return h.jsx("th",{scope:"col",className:e.head_cell,style:t.head_cell,"aria-label":c(g,{locale:s}),children:l(g,{locale:s})},y)})]})}function Ure(){var n,e=Gn(),t=e.classNames,r=e.styles,s=e.components,i=(n=s==null?void 0:s.HeadRow)!==null&&n!==void 0?n:Fre;return h.jsx("thead",{style:r.head,className:t.head,children:h.jsx(i,{})})}function zre(n){var e=Gn(),t=e.locale,r=e.formatters.formatDay;return h.jsx(h.Fragment,{children:r(n.date,{locale:t})})}var aR=M.createContext(void 0);function Hre(n){if(!pb(n.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return h.jsx(aR.Provider,{value:e,children:n.children})}return h.jsx(Vre,{initialProps:n.initialProps,children:n.children})}function Vre(n){var e=n.initialProps,t=n.children,r=e.selected,s=e.min,i=e.max,o=function(f,g,y){var _,E;(_=e.onDayClick)===null||_===void 0||_.call(e,f,g,y);var P=!!(g.selected&&s&&(r==null?void 0:r.length)===s);if(!P){var S=!!(!g.selected&&i&&(r==null?void 0:r.length)===i);if(!S){var I=r?QB([],r):[];if(g.selected){var N=I.findIndex(function(k){return Ui(f,k)});I.splice(N,1)}else I.push(f);(E=e.onSelect)===null||E===void 0||E.call(e,I,f,g,y)}}},l={disabled:[]};r&&l.disabled.push(function(f){var g=i&&r.length>i-1,y=r.some(function(_){return Ui(_,f)});return!!(g&&!y)});var c={selected:r,onDayClick:o,modifiers:l};return h.jsx(aR.Provider,{value:c,children:t})}function lR(){var n=M.useContext(aR);if(!n)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return n}function Wre(n,e){var t=e||{},r=t.from,s=t.to;return r&&s?Ui(s,n)&&Ui(r,n)?void 0:Ui(s,n)?{from:s,to:void 0}:Ui(r,n)?void 0:mT(r,n)?{from:n,to:s}:{from:r,to:n}:s?mT(n,s)?{from:s,to:n}:{from:n,to:s}:r?ZB(n,r)?{from:n,to:r}:{from:r,to:n}:{from:n,to:void 0}}var cR=M.createContext(void 0);function Gre(n){if(!gb(n.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return h.jsx(cR.Provider,{value:e,children:n.children})}return h.jsx($re,{initialProps:n.initialProps,children:n.children})}function $re(n){var e=n.initialProps,t=n.children,r=e.selected,s=r||{},i=s.from,o=s.to,l=e.min,c=e.max,f=function(E,P,S){var I,N;(I=e.onDayClick)===null||I===void 0||I.call(e,E,P,S);var k=Wre(E,r);(N=e.onSelect)===null||N===void 0||N.call(e,k,E,P,S)},g={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(g.range_start=[i],o?(g.range_end=[o],Ui(i,o)||(g.range_middle=[{after:i,before:o}])):g.range_end=[i]):o&&(g.range_start=[o],g.range_end=[o]),l&&(i&&!o&&g.disabled.push({after:xS(i,l-1),before:Ys(i,l-1)}),i&&o&&g.disabled.push({after:i,before:Ys(i,l-1)}),!i&&o&&g.disabled.push({after:xS(o,l-1),before:Ys(o,l-1)})),c){if(i&&!o&&(g.disabled.push({before:Ys(i,-c+1)}),g.disabled.push({after:Ys(i,c-1)})),i&&o){var y=Za(o,i)+1,_=c-y;g.disabled.push({before:xS(i,_)}),g.disabled.push({after:Ys(o,_)})}!i&&o&&(g.disabled.push({before:Ys(o,-c+1)}),g.disabled.push({after:Ys(o,c-1)}))}return h.jsx(cR.Provider,{value:{selected:r,onDayClick:f,modifiers:g},children:t})}function uR(){var n=M.useContext(cR);if(!n)throw new Error("useSelectRange must be used within a SelectRangeProvider");return n}function $_(n){return Array.isArray(n)?QB([],n):n!==void 0?[n]:[]}function qre(n){var e={};return Object.entries(n).forEach(function(t){var r=t[0],s=t[1];e[r]=$_(s)}),e}var al;(function(n){n.Outside="outside",n.Disabled="disabled",n.Selected="selected",n.Hidden="hidden",n.Today="today",n.RangeStart="range_start",n.RangeEnd="range_end",n.RangeMiddle="range_middle"})(al||(al={}));var Xre=al.Selected,Pc=al.Disabled,Yre=al.Hidden,Kre=al.Today,yS=al.RangeEnd,wS=al.RangeMiddle,bS=al.RangeStart,Zre=al.Outside;function Qre(n,e,t){var r,s=(r={},r[Xre]=$_(n.selected),r[Pc]=$_(n.disabled),r[Yre]=$_(n.hidden),r[Kre]=[n.today],r[yS]=[],r[wS]=[],r[bS]=[],r[Zre]=[],r);return n.fromDate&&s[Pc].push({before:n.fromDate}),n.toDate&&s[Pc].push({after:n.toDate}),pb(n)?s[Pc]=s[Pc].concat(e.modifiers[Pc]):gb(n)&&(s[Pc]=s[Pc].concat(t.modifiers[Pc]),s[bS]=t.modifiers[bS],s[wS]=t.modifiers[wS],s[yS]=t.modifiers[yS]),s}var r7=M.createContext(void 0);function Jre(n){var e=Gn(),t=lR(),r=uR(),s=Qre(e,t,r),i=qre(e.modifiers),o=pt(pt({},s),i);return h.jsx(r7.Provider,{value:o,children:n.children})}function s7(){var n=M.useContext(r7);if(!n)throw new Error("useModifiers must be used within a ModifiersProvider");return n}function ese(n){return!!(n&&typeof n=="object"&&"before"in n&&"after"in n)}function tse(n){return!!(n&&typeof n=="object"&&"from"in n)}function nse(n){return!!(n&&typeof n=="object"&&"after"in n)}function rse(n){return!!(n&&typeof n=="object"&&"before"in n)}function sse(n){return!!(n&&typeof n=="object"&&"dayOfWeek"in n)}function ise(n,e){var t,r=e.from,s=e.to;if(r&&s){var i=Za(s,r)<0;i&&(t=[s,r],r=t[0],s=t[1]);var o=Za(n,r)>=0&&Za(s,n)>=0;return o}return s?Ui(s,n):r?Ui(r,n):!1}function ose(n){return rR(n)}function ase(n){return Array.isArray(n)&&n.every(rR)}function lse(n,e){return e.some(function(t){if(typeof t=="boolean")return t;if(ose(t))return Ui(n,t);if(ase(t))return t.includes(n);if(tse(t))return ise(n,t);if(sse(t))return t.dayOfWeek.includes(n.getDay());if(ese(t)){var r=Za(t.before,n),s=Za(t.after,n),i=r>0,o=s<0,l=mT(t.before,t.after);return l?o&&i:i||o}return nse(t)?Za(n,t.after)>0:rse(t)?Za(t.before,n)>0:typeof t=="function"?t(n):!1})}function dR(n,e,t){var r=Object.keys(e).reduce(function(i,o){var l=e[o];return lse(n,l)&&i.push(o),i},[]),s={};return r.forEach(function(i){return s[i]=!0}),t&&!oR(n,t)&&(s.outside=!0),s}function cse(n,e){for(var t=Wi(n[0]),r=sR(n[n.length-1]),s,i,o=t;o<=r;){var l=dR(o,e),c=!l.disabled&&!l.hidden;if(!c){o=Ys(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),s||(s=o),o=Ys(o,1)}return i||s}var use=365;function i7(n,e){var t=e.moveBy,r=e.direction,s=e.context,i=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:n}:o,c=s.weekStartsOn,f=s.fromDate,g=s.toDate,y=s.locale,_={day:Ys,week:fT,month:ol,year:Ete,startOfWeek:function(I){return s.ISOWeek?mp(I):lc(I,{locale:y,weekStartsOn:c})},endOfWeek:function(I){return s.ISOWeek?WB(I):iR(I,{locale:y,weekStartsOn:c})}},E=_[t](n,r==="after"?1:-1);r==="before"&&f?E=Cte([f,E]):r==="after"&&g&&(E=Ate([g,E]));var P=!0;if(i){var S=dR(E,i);P=!S.disabled&&!S.hidden}return P?E:l.count>use?l.lastFocused:i7(E,{moveBy:t,direction:r,context:s,modifiers:i,retry:pt(pt({},l),{count:l.count+1})})}var o7=M.createContext(void 0);function dse(n){var e=xb(),t=s7(),r=M.useState(),s=r[0],i=r[1],o=M.useState(),l=o[0],c=o[1],f=cse(e.displayMonths,t),g=s??(l&&e.isDateDisplayed(l))?l:f,y=function(){c(s),i(void 0)},_=function(I){i(I)},E=Gn(),P=function(I,N){if(s){var k=i7(s,{moveBy:I,direction:N,context:E,modifiers:t});Ui(s,k)||(e.goToDate(k,s),_(k))}},S={focusedDay:s,focusTarget:g,blur:y,focus:_,focusDayAfter:function(){return P("day","after")},focusDayBefore:function(){return P("day","before")},focusWeekAfter:function(){return P("week","after")},focusWeekBefore:function(){return P("week","before")},focusMonthBefore:function(){return P("month","before")},focusMonthAfter:function(){return P("month","after")},focusYearBefore:function(){return P("year","before")},focusYearAfter:function(){return P("year","after")},focusStartOfWeek:function(){return P("startOfWeek","before")},focusEndOfWeek:function(){return P("endOfWeek","after")}};return h.jsx(o7.Provider,{value:S,children:n.children})}function hR(){var n=M.useContext(o7);if(!n)throw new Error("useFocusContext must be used within a FocusProvider");return n}function hse(n,e){var t=s7(),r=dR(n,t,e);return r}var fR=M.createContext(void 0);function fse(n){if(!GC(n.initialProps)){var e={selected:void 0};return h.jsx(fR.Provider,{value:e,children:n.children})}return h.jsx(mse,{initialProps:n.initialProps,children:n.children})}function mse(n){var e=n.initialProps,t=n.children,r=function(i,o,l){var c,f,g;if((c=e.onDayClick)===null||c===void 0||c.call(e,i,o,l),o.selected&&!e.required){(f=e.onSelect)===null||f===void 0||f.call(e,void 0,i,o,l);return}(g=e.onSelect)===null||g===void 0||g.call(e,i,i,o,l)},s={selected:e.selected,onDayClick:r};return h.jsx(fR.Provider,{value:s,children:t})}function a7(){var n=M.useContext(fR);if(!n)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return n}function pse(n,e){var t=Gn(),r=a7(),s=lR(),i=uR(),o=hR(),l=o.focusDayAfter,c=o.focusDayBefore,f=o.focusWeekAfter,g=o.focusWeekBefore,y=o.blur,_=o.focus,E=o.focusMonthBefore,P=o.focusMonthAfter,S=o.focusYearBefore,I=o.focusYearAfter,N=o.focusStartOfWeek,k=o.focusEndOfWeek,T=function(oe){var Q,ue,he,Ee;GC(t)?(Q=r.onDayClick)===null||Q===void 0||Q.call(r,n,e,oe):pb(t)?(ue=s.onDayClick)===null||ue===void 0||ue.call(s,n,e,oe):gb(t)?(he=i.onDayClick)===null||he===void 0||he.call(i,n,e,oe):(Ee=t.onDayClick)===null||Ee===void 0||Ee.call(t,n,e,oe)},D=function(oe){var Q;_(n),(Q=t.onDayFocus)===null||Q===void 0||Q.call(t,n,e,oe)},U=function(oe){var Q;y(),(Q=t.onDayBlur)===null||Q===void 0||Q.call(t,n,e,oe)},z=function(oe){var Q;(Q=t.onDayMouseEnter)===null||Q===void 0||Q.call(t,n,e,oe)},F=function(oe){var Q;(Q=t.onDayMouseLeave)===null||Q===void 0||Q.call(t,n,e,oe)},X=function(oe){var Q;(Q=t.onDayPointerEnter)===null||Q===void 0||Q.call(t,n,e,oe)},Z=function(oe){var Q;(Q=t.onDayPointerLeave)===null||Q===void 0||Q.call(t,n,e,oe)},ne=function(oe){var Q;(Q=t.onDayTouchCancel)===null||Q===void 0||Q.call(t,n,e,oe)},se=function(oe){var Q;(Q=t.onDayTouchEnd)===null||Q===void 0||Q.call(t,n,e,oe)},ee=function(oe){var Q;(Q=t.onDayTouchMove)===null||Q===void 0||Q.call(t,n,e,oe)},ce=function(oe){var Q;(Q=t.onDayTouchStart)===null||Q===void 0||Q.call(t,n,e,oe)},de=function(oe){var Q;(Q=t.onDayKeyUp)===null||Q===void 0||Q.call(t,n,e,oe)},re=function(oe){var Q;switch(oe.key){case"ArrowLeft":oe.preventDefault(),oe.stopPropagation(),t.dir==="rtl"?l():c();break;case"ArrowRight":oe.preventDefault(),oe.stopPropagation(),t.dir==="rtl"?c():l();break;case"ArrowDown":oe.preventDefault(),oe.stopPropagation(),f();break;case"ArrowUp":oe.preventDefault(),oe.stopPropagation(),g();break;case"PageUp":oe.preventDefault(),oe.stopPropagation(),oe.shiftKey?S():E();break;case"PageDown":oe.preventDefault(),oe.stopPropagation(),oe.shiftKey?I():P();break;case"Home":oe.preventDefault(),oe.stopPropagation(),N();break;case"End":oe.preventDefault(),oe.stopPropagation(),k();break}(Q=t.onDayKeyDown)===null||Q===void 0||Q.call(t,n,e,oe)},fe={onClick:T,onFocus:D,onBlur:U,onKeyDown:re,onKeyUp:de,onMouseEnter:z,onMouseLeave:F,onPointerEnter:X,onPointerLeave:Z,onTouchCancel:ne,onTouchEnd:se,onTouchMove:ee,onTouchStart:ce};return fe}function gse(){var n=Gn(),e=a7(),t=lR(),r=uR(),s=GC(n)?e.selected:pb(n)?t.selected:gb(n)?r.selected:void 0;return s}function xse(n){return Object.values(al).includes(n)}function vse(n,e){var t=[n.classNames.day];return Object.keys(e).forEach(function(r){var s=n.modifiersClassNames[r];if(s)t.push(s);else if(xse(r)){var i=n.classNames["day_".concat(r)];i&&t.push(i)}}),t}function yse(n,e){var t=pt({},n.styles.day);return Object.keys(e).forEach(function(r){var s;t=pt(pt({},t),(s=n.modifiersStyles)===null||s===void 0?void 0:s[r])}),t}function wse(n,e,t){var r,s,i,o=Gn(),l=hR(),c=hse(n,e),f=pse(n,c),g=gse(),y=!!(o.onDayClick||o.mode!=="default");M.useEffect(function(){var z;c.outside||l.focusedDay&&y&&Ui(l.focusedDay,n)&&((z=t.current)===null||z===void 0||z.focus())},[l.focusedDay,n,t,y,c.outside]);var _=vse(o,c).join(" "),E=yse(o,c),P=!!(c.outside&&!o.showOutsideDays||c.hidden),S=(i=(s=o.components)===null||s===void 0?void 0:s.DayContent)!==null&&i!==void 0?i:zre,I=h.jsx(S,{date:n,displayMonth:e,activeModifiers:c}),N={style:E,className:_,children:I,role:"gridcell"},k=l.focusTarget&&Ui(l.focusTarget,n)&&!c.outside,T=l.focusedDay&&Ui(l.focusedDay,n),D=pt(pt(pt({},N),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=T||k?0:-1,r)),f),U={isButton:y,isHidden:P,activeModifiers:c,selectedDays:g,buttonProps:D,divProps:N};return U}function bse(n){var e=M.useRef(null),t=wse(n.date,n.displayMonth,e);return t.isHidden?h.jsx("div",{role:"gridcell"}):t.isButton?h.jsx(mE,pt({name:"day",ref:e},t.buttonProps)):h.jsx("div",pt({},t.divProps))}function _se(n){var e=n.number,t=n.dates,r=Gn(),s=r.onWeekNumberClick,i=r.styles,o=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,f=r.formatters.formatWeekNumber,g=f(Number(e),{locale:l});if(!s)return h.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:g});var y=c(Number(e),{locale:l}),_=function(E){s(e,t,E)};return h.jsx(mE,{name:"week-number","aria-label":y,className:o.weeknumber,style:i.weeknumber,onClick:_,children:g})}function Ese(n){var e,t,r=Gn(),s=r.styles,i=r.classNames,o=r.showWeekNumber,l=r.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:bse,f=(t=l==null?void 0:l.WeekNumber)!==null&&t!==void 0?t:_se,g;return o&&(g=h.jsx("td",{className:i.cell,style:s.cell,children:h.jsx(f,{number:n.weekNumber,dates:n.dates})})),h.jsxs("tr",{className:i.row,style:s.row,children:[g,n.dates.map(function(y){return h.jsx("td",{className:i.cell,style:s.cell,role:"presentation",children:h.jsx(c,{displayMonth:n.displayMonth,date:y})},Cne(y))})]})}function tO(n,e,t){for(var r=t!=null&&t.ISOWeek?WB(e):iR(e,t),s=t!=null&&t.ISOWeek?mp(n):lc(n,t),i=Za(r,s),o=[],l=0;l<=i;l++)o.push(Ys(s,l));var c=o.reduce(function(f,g){var y=t!=null&&t.ISOWeek?qB(g):YB(g,t),_=f.find(function(E){return E.weekNumber===y});return _?(_.dates.push(g),f):(f.push({weekNumber:y,dates:[g]}),f)},[]);return c}function Cse(n,e){var t=tO(Wi(n),sR(n),e);if(e!=null&&e.useFixedWeeks){var r=Sne(n,e);if(r<6){var s=t[t.length-1],i=s.dates[s.dates.length-1],o=fT(i,6-r),l=tO(fT(i,1),o,e);t.push.apply(t,l)}}return t}function Ase(n){var e,t,r,s=Gn(),i=s.locale,o=s.classNames,l=s.styles,c=s.hideHead,f=s.fixedWeeks,g=s.components,y=s.weekStartsOn,_=s.firstWeekContainsDate,E=s.ISOWeek,P=Cse(n.displayMonth,{useFixedWeeks:!!f,ISOWeek:E,locale:i,weekStartsOn:y,firstWeekContainsDate:_}),S=(e=g==null?void 0:g.Head)!==null&&e!==void 0?e:Ure,I=(t=g==null?void 0:g.Row)!==null&&t!==void 0?t:Ese,N=(r=g==null?void 0:g.Footer)!==null&&r!==void 0?r:Lre;return h.jsxs("table",{id:n.id,className:o.table,style:l.table,role:"grid","aria-labelledby":n["aria-labelledby"],children:[!c&&h.jsx(S,{}),h.jsx("tbody",{className:o.tbody,style:l.tbody,children:P.map(function(k){return h.jsx(I,{displayMonth:n.displayMonth,dates:k.dates,weekNumber:k.weekNumber},k.weekNumber)})}),h.jsx(N,{displayMonth:n.displayMonth})]})}function Sse(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Nse=Sse()?M.useLayoutEffect:M.useEffect,_S=!1,Tse=0;function nO(){return"react-day-picker-".concat(++Tse)}function Pse(n){var e,t=n??(_S?nO():null),r=M.useState(t),s=r[0],i=r[1];return Nse(function(){s===null&&i(nO())},[]),M.useEffect(function(){_S===!1&&(_S=!0)},[]),(e=n??s)!==null&&e!==void 0?e:void 0}function Ise(n){var e,t,r=Gn(),s=r.dir,i=r.classNames,o=r.styles,l=r.components,c=xb().displayMonths,f=Pse(r.id?"".concat(r.id,"-").concat(n.displayIndex):void 0),g=r.id?"".concat(r.id,"-grid-").concat(n.displayIndex):void 0,y=[i.month],_=o.month,E=n.displayIndex===0,P=n.displayIndex===c.length-1,S=!E&&!P;s==="rtl"&&(e=[E,P],P=e[0],E=e[1]),E&&(y.push(i.caption_start),_=pt(pt({},_),o.caption_start)),P&&(y.push(i.caption_end),_=pt(pt({},_),o.caption_end)),S&&(y.push(i.caption_between),_=pt(pt({},_),o.caption_between));var I=(t=l==null?void 0:l.Caption)!==null&&t!==void 0?t:jre;return h.jsxs("div",{className:y.join(" "),style:_,children:[h.jsx(I,{id:f,displayMonth:n.displayMonth,displayIndex:n.displayIndex}),h.jsx(Ase,{id:g,"aria-labelledby":f,displayMonth:n.displayMonth})]},n.displayIndex)}function Rse(n){var e=Gn(),t=e.classNames,r=e.styles;return h.jsx("div",{className:t.months,style:r.months,children:n.children})}function kse(n){var e,t,r=n.initialProps,s=Gn(),i=hR(),o=xb(),l=M.useState(!1),c=l[0],f=l[1];M.useEffect(function(){s.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),f(!0)))},[s.initialFocus,c,i.focus,i.focusTarget,i]);var g=[s.classNames.root,s.className];s.numberOfMonths>1&&g.push(s.classNames.multiple_months),s.showWeekNumber&&g.push(s.classNames.with_weeknumber);var y=pt(pt({},s.styles.root),s.style),_=Object.keys(r).filter(function(P){return P.startsWith("data-")}).reduce(function(P,S){var I;return pt(pt({},P),(I={},I[S]=r[S],I))},{}),E=(t=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&t!==void 0?t:Rse;return h.jsx("div",pt({className:g.join(" "),style:y,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},_,{children:h.jsx(E,{children:o.displayMonths.map(function(P,S){return h.jsx(Ise,{displayIndex:S,displayMonth:P},S)})})}))}function Mse(n){var e=n.children,t=rre(n,["children"]);return h.jsx(_re,{initialProps:t,children:h.jsx(kre,{children:h.jsx(fse,{initialProps:t,children:h.jsx(Hre,{initialProps:t,children:h.jsx(Gre,{initialProps:t,children:h.jsx(Jre,{children:h.jsx(dse,{children:e})})})})})})})}function Ose(n){return h.jsx(Mse,pt({},n,{children:h.jsx(kse,{initialProps:n})}))}function rO(n,[e,t]){return Math.min(t,Math.max(e,n))}function Dse(n){const e=jse(n),t=M.forwardRef((r,s)=>{const{children:i,...o}=r,l=M.Children.toArray(i),c=l.find(Bse);if(c){const f=c.props.children,g=l.map(y=>y===c?M.Children.count(f)>1?M.Children.only(null):M.isValidElement(f)?f.props.children:null:y);return h.jsx(e,{...o,ref:s,children:M.isValidElement(f)?M.cloneElement(f,void 0,g):null})}return h.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}function jse(n){const e=M.forwardRef((t,r)=>{const{children:s,...i}=t;if(M.isValidElement(s)){const o=Use(s),l=Fse(i,s.props);return s.type!==M.Fragment&&(l.ref=r?dc(r,o):o),M.cloneElement(s,l)}return M.Children.count(s)>1?M.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Lse=Symbol("radix.slottable");function Bse(n){return M.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Lse}function Fse(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function Use(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function l7(n){const e=M.useRef({value:n,previous:n});return M.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var zse=[" ","Enter","ArrowUp","ArrowDown"],Hse=[" ","Enter"],pp="Select",[$C,qC,Vse]=$I(pp),[ex]=ya(pp,[Vse,$h]),XC=$h(),[Wse,Yh]=ex(pp),[Gse,$se]=ex(pp),c7=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:f,name:g,autoComplete:y,disabled:_,required:E,form:P}=n,S=XC(e),[I,N]=M.useState(null),[k,T]=M.useState(null),[D,U]=M.useState(!1),z=FC(f),[F,X]=Rh({prop:r,defaultProp:s??!1,onChange:i,caller:pp}),[Z,ne]=Rh({prop:o,defaultProp:l,onChange:c,caller:pp}),se=M.useRef(null),ee=I?P||!!I.closest("form"):!0,[ce,de]=M.useState(new Set),re=Array.from(ce).map(fe=>fe.props.value).join(";");return h.jsx(bI,{...S,children:h.jsxs(Wse,{required:E,scope:e,trigger:I,onTriggerChange:N,valueNode:k,onValueNodeChange:T,valueNodeHasChildren:D,onValueNodeHasChildrenChange:U,contentId:tl(),value:Z,onValueChange:ne,open:F,onOpenChange:X,dir:z,triggerPointerDownPosRef:se,disabled:_,children:[h.jsx($C.Provider,{scope:e,children:h.jsx(Gse,{scope:n.__scopeSelect,onNativeOptionAdd:M.useCallback(fe=>{de(oe=>new Set(oe).add(fe))},[]),onNativeOptionRemove:M.useCallback(fe=>{de(oe=>{const Q=new Set(oe);return Q.delete(fe),Q})},[]),children:t})}),ee?h.jsxs(M7,{"aria-hidden":!0,required:E,tabIndex:-1,name:g,autoComplete:y,value:Z,onChange:fe=>ne(fe.target.value),disabled:_,form:P,children:[Z===void 0?h.jsx("option",{value:""}):null,Array.from(ce)]},re):null]})})};c7.displayName=pp;var u7="SelectTrigger",d7=M.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,i=XC(t),o=Yh(u7,t),l=o.disabled||r,c=Jt(e,o.onTriggerChange),f=qC(t),g=M.useRef("touch"),[y,_,E]=D7(S=>{const I=f().filter(T=>!T.disabled),N=I.find(T=>T.value===o.value),k=j7(I,S,N);k!==void 0&&o.onValueChange(k.value)}),P=S=>{l||(o.onOpenChange(!0),E()),S&&(o.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)})};return h.jsx(lb,{asChild:!0,...i,children:h.jsx(_t.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":O7(o.value)?"":void 0,...s,ref:c,onClick:Ue(s.onClick,S=>{S.currentTarget.focus(),g.current!=="mouse"&&P(S)}),onPointerDown:Ue(s.onPointerDown,S=>{g.current=S.pointerType;const I=S.target;I.hasPointerCapture(S.pointerId)&&I.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&S.pointerType==="mouse"&&(P(S),S.preventDefault())}),onKeyDown:Ue(s.onKeyDown,S=>{const I=y.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&_(S.key),!(I&&S.key===" ")&&zse.includes(S.key)&&(P(),S.preventDefault())})})})});d7.displayName=u7;var h7="SelectValue",f7=M.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:i,placeholder:o="",...l}=n,c=Yh(h7,t),{onValueNodeHasChildrenChange:f}=c,g=i!==void 0,y=Jt(e,c.onValueNodeChange);return Jr(()=>{f(g)},[f,g]),h.jsx(_t.span,{...l,ref:y,style:{pointerEvents:"none"},children:O7(c.value)?h.jsx(h.Fragment,{children:o}):i})});f7.displayName=h7;var qse="SelectIcon",m7=M.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return h.jsx(_t.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});m7.displayName=qse;var Xse="SelectPortal",p7=n=>h.jsx(sb,{asChild:!0,...n});p7.displayName=Xse;var gp="SelectContent",g7=M.forwardRef((n,e)=>{const t=Yh(gp,n.__scopeSelect),[r,s]=M.useState();if(Jr(()=>{s(new DocumentFragment)},[]),!t.open){const i=r;return i?V1.createPortal(h.jsx(x7,{scope:n.__scopeSelect,children:h.jsx($C.Slot,{scope:n.__scopeSelect,children:h.jsx("div",{children:n.children})})}),i):null}return h.jsx(v7,{...n,ref:e})});g7.displayName=gp;var Pa=10,[x7,Kh]=ex(gp),Yse="SelectContentImpl",Kse=Dse("SelectContent.RemoveScroll"),v7=M.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:f,alignOffset:g,arrowPadding:y,collisionBoundary:_,collisionPadding:E,sticky:P,hideWhenDetached:S,avoidCollisions:I,...N}=n,k=Yh(gp,t),[T,D]=M.useState(null),[U,z]=M.useState(null),F=Jt(e,Te=>D(Te)),[X,Z]=M.useState(null),[ne,se]=M.useState(null),ee=qC(t),[ce,de]=M.useState(!1),re=M.useRef(!1);M.useEffect(()=>{if(T)return wC(T)},[T]),xC();const fe=M.useCallback(Te=>{const[Ze,...Nt]=ee().map(gt=>gt.ref.current),[ut]=Nt.slice(-1),st=document.activeElement;for(const gt of Te)if(gt===st||(gt==null||gt.scrollIntoView({block:"nearest"}),gt===Ze&&U&&(U.scrollTop=0),gt===ut&&U&&(U.scrollTop=U.scrollHeight),gt==null||gt.focus(),document.activeElement!==st))return},[ee,U]),oe=M.useCallback(()=>fe([X,T]),[fe,X,T]);M.useEffect(()=>{ce&&oe()},[ce,oe]);const{onOpenChange:Q,triggerPointerDownPosRef:ue}=k;M.useEffect(()=>{if(T){let Te={x:0,y:0};const Ze=ut=>{var st,gt;Te={x:Math.abs(Math.round(ut.pageX)-(((st=ue.current)==null?void 0:st.x)??0)),y:Math.abs(Math.round(ut.pageY)-(((gt=ue.current)==null?void 0:gt.y)??0))}},Nt=ut=>{Te.x<=10&&Te.y<=10?ut.preventDefault():T.contains(ut.target)||Q(!1),document.removeEventListener("pointermove",Ze),ue.current=null};return ue.current!==null&&(document.addEventListener("pointermove",Ze),document.addEventListener("pointerup",Nt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ze),document.removeEventListener("pointerup",Nt,{capture:!0})}}},[T,Q,ue]),M.useEffect(()=>{const Te=()=>Q(!1);return window.addEventListener("blur",Te),window.addEventListener("resize",Te),()=>{window.removeEventListener("blur",Te),window.removeEventListener("resize",Te)}},[Q]);const[he,Ee]=D7(Te=>{const Ze=ee().filter(st=>!st.disabled),Nt=Ze.find(st=>st.ref.current===document.activeElement),ut=j7(Ze,Te,Nt);ut&&setTimeout(()=>ut.ref.current.focus())}),_e=M.useCallback((Te,Ze,Nt)=>{const ut=!re.current&&!Nt;(k.value!==void 0&&k.value===Ze||ut)&&(Z(Te),ut&&(re.current=!0))},[k.value]),Oe=M.useCallback(()=>T==null?void 0:T.focus(),[T]),De=M.useCallback((Te,Ze,Nt)=>{const ut=!re.current&&!Nt;(k.value!==void 0&&k.value===Ze||ut)&&se(Te)},[k.value]),ze=r==="popper"?pT:y7,be=ze===pT?{side:l,sideOffset:c,align:f,alignOffset:g,arrowPadding:y,collisionBoundary:_,collisionPadding:E,sticky:P,hideWhenDetached:S,avoidCollisions:I}:{};return h.jsx(x7,{scope:t,content:T,viewport:U,onViewportChange:z,itemRefCallback:_e,selectedItem:X,onItemLeave:Oe,itemTextRefCallback:De,focusSelectedItem:oe,selectedItemText:ne,position:r,isPositioned:ce,searchRef:he,children:h.jsx(ib,{as:Kse,allowPinchZoom:!0,children:h.jsx(rb,{asChild:!0,trapped:k.open,onMountAutoFocus:Te=>{Te.preventDefault()},onUnmountAutoFocus:Ue(s,Te=>{var Ze;(Ze=k.trigger)==null||Ze.focus({preventScroll:!0}),Te.preventDefault()}),children:h.jsx(W1,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Te=>Te.preventDefault(),onDismiss:()=>k.onOpenChange(!1),children:h.jsx(ze,{role:"listbox",id:k.contentId,"data-state":k.open?"open":"closed",dir:k.dir,onContextMenu:Te=>Te.preventDefault(),...N,...be,onPlaced:()=>de(!0),ref:F,style:{display:"flex",flexDirection:"column",outline:"none",...N.style},onKeyDown:Ue(N.onKeyDown,Te=>{const Ze=Te.ctrlKey||Te.altKey||Te.metaKey;if(Te.key==="Tab"&&Te.preventDefault(),!Ze&&Te.key.length===1&&Ee(Te.key),["ArrowUp","ArrowDown","Home","End"].includes(Te.key)){let ut=ee().filter(st=>!st.disabled).map(st=>st.ref.current);if(["ArrowUp","End"].includes(Te.key)&&(ut=ut.slice().reverse()),["ArrowUp","ArrowDown"].includes(Te.key)){const st=Te.target,gt=ut.indexOf(st);ut=ut.slice(gt+1)}setTimeout(()=>fe(ut)),Te.preventDefault()}})})})})})})});v7.displayName=Yse;var Zse="SelectItemAlignedPosition",y7=M.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,i=Yh(gp,t),o=Kh(gp,t),[l,c]=M.useState(null),[f,g]=M.useState(null),y=Jt(e,F=>g(F)),_=qC(t),E=M.useRef(!1),P=M.useRef(!0),{viewport:S,selectedItem:I,selectedItemText:N,focusSelectedItem:k}=o,T=M.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&f&&S&&I&&N){const F=i.trigger.getBoundingClientRect(),X=f.getBoundingClientRect(),Z=i.valueNode.getBoundingClientRect(),ne=N.getBoundingClientRect();if(i.dir!=="rtl"){const st=ne.left-X.left,gt=Z.left-st,at=F.left-gt,$n=F.width+at,gr=Math.max($n,X.width),xr=window.innerWidth-Pa,hn=rO(gt,[Pa,Math.max(Pa,xr-gr)]);l.style.minWidth=$n+"px",l.style.left=hn+"px"}else{const st=X.right-ne.right,gt=window.innerWidth-Z.right-st,at=window.innerWidth-F.right-gt,$n=F.width+at,gr=Math.max($n,X.width),xr=window.innerWidth-Pa,hn=rO(gt,[Pa,Math.max(Pa,xr-gr)]);l.style.minWidth=$n+"px",l.style.right=hn+"px"}const se=_(),ee=window.innerHeight-Pa*2,ce=S.scrollHeight,de=window.getComputedStyle(f),re=parseInt(de.borderTopWidth,10),fe=parseInt(de.paddingTop,10),oe=parseInt(de.borderBottomWidth,10),Q=parseInt(de.paddingBottom,10),ue=re+fe+ce+Q+oe,he=Math.min(I.offsetHeight*5,ue),Ee=window.getComputedStyle(S),_e=parseInt(Ee.paddingTop,10),Oe=parseInt(Ee.paddingBottom,10),De=F.top+F.height/2-Pa,ze=ee-De,be=I.offsetHeight/2,Te=I.offsetTop+be,Ze=re+fe+Te,Nt=ue-Ze;if(Ze<=De){const st=se.length>0&&I===se[se.length-1].ref.current;l.style.bottom="0px";const gt=f.clientHeight-S.offsetTop-S.offsetHeight,at=Math.max(ze,be+(st?Oe:0)+gt+oe),$n=Ze+at;l.style.height=$n+"px"}else{const st=se.length>0&&I===se[0].ref.current;l.style.top="0px";const at=Math.max(De,re+S.offsetTop+(st?_e:0)+be)+Nt;l.style.height=at+"px",S.scrollTop=Ze-De+S.offsetTop}l.style.margin=`${Pa}px 0`,l.style.minHeight=he+"px",l.style.maxHeight=ee+"px",r==null||r(),requestAnimationFrame(()=>E.current=!0)}},[_,i.trigger,i.valueNode,l,f,S,I,N,i.dir,r]);Jr(()=>T(),[T]);const[D,U]=M.useState();Jr(()=>{f&&U(window.getComputedStyle(f).zIndex)},[f]);const z=M.useCallback(F=>{F&&P.current===!0&&(T(),k==null||k(),P.current=!1)},[T,k]);return h.jsx(Jse,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:E,onScrollButtonChange:z,children:h.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:D},children:h.jsx(_t.div,{...s,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});y7.displayName=Zse;var Qse="SelectPopperPosition",pT=M.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=Pa,...i}=n,o=XC(t);return h.jsx(SC,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});pT.displayName=Qse;var[Jse,mR]=ex(gp,{}),gT="SelectViewport",w7=M.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,i=Kh(gT,t),o=mR(gT,t),l=Jt(e,i.onViewportChange),c=M.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx($C.Slot,{scope:t,children:h.jsx(_t.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ue(s.onScroll,f=>{const g=f.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:_}=o;if(_!=null&&_.current&&y){const E=Math.abs(c.current-g.scrollTop);if(E>0){const P=window.innerHeight-Pa*2,S=parseFloat(y.style.minHeight),I=parseFloat(y.style.height),N=Math.max(S,I);if(N<P){const k=N+E,T=Math.min(P,k),D=k-T;y.style.height=T+"px",y.style.bottom==="0px"&&(g.scrollTop=D>0?D:0,y.style.justifyContent="flex-end")}}}c.current=g.scrollTop})})})]})});w7.displayName=gT;var b7="SelectGroup",[eie,tie]=ex(b7),nie=M.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=tl();return h.jsx(eie,{scope:t,id:s,children:h.jsx(_t.div,{role:"group","aria-labelledby":s,...r,ref:e})})});nie.displayName=b7;var _7="SelectLabel",E7=M.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=tie(_7,t);return h.jsx(_t.div,{id:s.id,...r,ref:e})});E7.displayName=_7;var pE="SelectItem",[rie,C7]=ex(pE),A7=M.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:i,...o}=n,l=Yh(pE,t),c=Kh(pE,t),f=l.value===r,[g,y]=M.useState(i??""),[_,E]=M.useState(!1),P=Jt(e,k=>{var T;return(T=c.itemRefCallback)==null?void 0:T.call(c,k,r,s)}),S=tl(),I=M.useRef("touch"),N=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(rie,{scope:t,value:r,disabled:s,textId:S,isSelected:f,onItemTextChange:M.useCallback(k=>{y(T=>T||((k==null?void 0:k.textContent)??"").trim())},[]),children:h.jsx($C.ItemSlot,{scope:t,value:r,disabled:s,textValue:g,children:h.jsx(_t.div,{role:"option","aria-labelledby":S,"data-highlighted":_?"":void 0,"aria-selected":f&&_,"data-state":f?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:P,onFocus:Ue(o.onFocus,()=>E(!0)),onBlur:Ue(o.onBlur,()=>E(!1)),onClick:Ue(o.onClick,()=>{I.current!=="mouse"&&N()}),onPointerUp:Ue(o.onPointerUp,()=>{I.current==="mouse"&&N()}),onPointerDown:Ue(o.onPointerDown,k=>{I.current=k.pointerType}),onPointerMove:Ue(o.onPointerMove,k=>{var T;I.current=k.pointerType,s?(T=c.onItemLeave)==null||T.call(c):I.current==="mouse"&&k.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ue(o.onPointerLeave,k=>{var T;k.currentTarget===document.activeElement&&((T=c.onItemLeave)==null||T.call(c))}),onKeyDown:Ue(o.onKeyDown,k=>{var D;((D=c.searchRef)==null?void 0:D.current)!==""&&k.key===" "||(Hse.includes(k.key)&&N(),k.key===" "&&k.preventDefault())})})})})});A7.displayName=pE;var zx="SelectItemText",S7=M.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...i}=n,o=Yh(zx,t),l=Kh(zx,t),c=C7(zx,t),f=$se(zx,t),[g,y]=M.useState(null),_=Jt(e,N=>y(N),c.onItemTextChange,N=>{var k;return(k=l.itemTextRefCallback)==null?void 0:k.call(l,N,c.value,c.disabled)}),E=g==null?void 0:g.textContent,P=M.useMemo(()=>h.jsx("option",{value:c.value,disabled:c.disabled,children:E},c.value),[c.disabled,c.value,E]),{onNativeOptionAdd:S,onNativeOptionRemove:I}=f;return Jr(()=>(S(P),()=>I(P)),[S,I,P]),h.jsxs(h.Fragment,{children:[h.jsx(_t.span,{id:c.textId,...i,ref:_}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?V1.createPortal(i.children,o.valueNode):null]})});S7.displayName=zx;var N7="SelectItemIndicator",T7=M.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return C7(N7,t).isSelected?h.jsx(_t.span,{"aria-hidden":!0,...r,ref:e}):null});T7.displayName=N7;var xT="SelectScrollUpButton",P7=M.forwardRef((n,e)=>{const t=Kh(xT,n.__scopeSelect),r=mR(xT,n.__scopeSelect),[s,i]=M.useState(!1),o=Jt(e,r.onScrollButtonChange);return Jr(()=>{if(t.viewport&&t.isPositioned){let l=function(){const f=c.scrollTop>0;i(f)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),s?h.jsx(R7,{...n,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});P7.displayName=xT;var vT="SelectScrollDownButton",I7=M.forwardRef((n,e)=>{const t=Kh(vT,n.__scopeSelect),r=mR(vT,n.__scopeSelect),[s,i]=M.useState(!1),o=Jt(e,r.onScrollButtonChange);return Jr(()=>{if(t.viewport&&t.isPositioned){let l=function(){const f=c.scrollHeight-c.clientHeight,g=Math.ceil(c.scrollTop)<f;i(g)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),s?h.jsx(R7,{...n,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});I7.displayName=vT;var R7=M.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,i=Kh("SelectScrollButton",t),o=M.useRef(null),l=qC(t),c=M.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return M.useEffect(()=>()=>c(),[c]),Jr(()=>{var g;const f=l().find(y=>y.ref.current===document.activeElement);(g=f==null?void 0:f.ref.current)==null||g.scrollIntoView({block:"nearest"})},[l]),h.jsx(_t.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ue(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ue(s.onPointerMove,()=>{var f;(f=i.onItemLeave)==null||f.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ue(s.onPointerLeave,()=>{c()})})}),sie="SelectSeparator",k7=M.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return h.jsx(_t.div,{"aria-hidden":!0,...r,ref:e})});k7.displayName=sie;var yT="SelectArrow",iie=M.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=XC(t),i=Yh(yT,t),o=Kh(yT,t);return i.open&&o.position==="popper"?h.jsx(NC,{...s,...r,ref:e}):null});iie.displayName=yT;var oie="SelectBubbleInput",M7=M.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const s=M.useRef(null),i=Jt(r,s),o=l7(e);return M.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&g){const y=new Event("change",{bubbles:!0});g.call(l,e),l.dispatchEvent(y)}},[o,e]),h.jsx(_t.select,{...t,style:{...cL,...t.style},ref:i,defaultValue:e})});M7.displayName=oie;function O7(n){return n===""||n===void 0}function D7(n){const e=rl(n),t=M.useRef(""),r=M.useRef(0),s=M.useCallback(o=>{const l=t.current+o;e(l),function c(f){t.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=M.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return M.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,i]}function j7(n,e,t){const s=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=aie(n,Math.max(i,0));s.length===1&&(o=o.filter(f=>f!==t));const c=o.find(f=>f.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==t?c:void 0}function aie(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var lie=c7,L7=d7,cie=f7,uie=m7,die=p7,B7=g7,hie=w7,F7=E7,U7=A7,fie=S7,mie=T7,z7=P7,H7=I7,V7=k7;const Qs=lie,Js=cie,ks=M.forwardRef(({className:n,children:e,...t},r)=>h.jsxs(L7,{ref:r,className:et("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,h.jsx(uie,{asChild:!0,children:h.jsx(jC,{className:"h-4 w-4 opacity-50"})})]}));ks.displayName=L7.displayName;const W7=M.forwardRef(({className:n,...e},t)=>h.jsx(z7,{ref:t,className:et("flex cursor-default items-center justify-center py-1",n),...e,children:h.jsx(y5,{className:"h-4 w-4"})}));W7.displayName=z7.displayName;const G7=M.forwardRef(({className:n,...e},t)=>h.jsx(H7,{ref:t,className:et("flex cursor-default items-center justify-center py-1",n),...e,children:h.jsx(jC,{className:"h-4 w-4"})}));G7.displayName=H7.displayName;const Ms=M.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>h.jsx(die,{children:h.jsxs(B7,{ref:s,className:et("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,onWheel:i=>{i.stopPropagation()},...r,children:[h.jsx(W7,{}),h.jsx(hie,{className:et("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),h.jsx(G7,{})]})}));Ms.displayName=B7.displayName;const pie=M.forwardRef(({className:n,...e},t)=>h.jsx(F7,{ref:t,className:et("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));pie.displayName=F7.displayName;const Pt=M.forwardRef(({className:n,children:e,...t},r)=>h.jsxs(U7,{ref:r,className:et("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",n),...t,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(mie,{children:h.jsx(FI,{className:"h-4 w-4"})})}),h.jsx(fie,{children:e})]}));Pt.displayName=U7.displayName;const gie=M.forwardRef(({className:n,...e},t)=>h.jsx(V7,{ref:t,className:et("-mx-1 my-1 h-px bg-muted",n),...e}));gie.displayName=V7.displayName;function xie({displayMonth:n,...e}){const t=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],r=M.useMemo(()=>{const o=new Date().getFullYear(),l=e.fromYear||o-100,c=e.toYear||o,f=[];for(let g=l;g<=c;g++)f.push(g);return f},[e.fromYear,e.toYear]),s=o=>{var f;const l=parseInt(o),c=new Date(n.getFullYear(),l,1);(f=e.onMonthChange)==null||f.call(e,c)},i=o=>{var f;const l=parseInt(o),c=new Date(l,n.getMonth(),1);(f=e.onMonthChange)==null||f.call(e,c)};return h.jsxs("div",{className:"flex justify-center gap-2 mb-2",children:[h.jsxs(Qs,{value:n.getMonth().toString(),onValueChange:s,children:[h.jsx(ks,{className:"h-8 w-[120px] text-xs bg-transparent",children:h.jsx(Js,{})}),h.jsx(Ms,{className:"bg-card border-border",children:t.map((o,l)=>h.jsx(Pt,{value:l.toString(),children:o},l))})]}),h.jsxs(Qs,{value:n.getFullYear().toString(),onValueChange:i,children:[h.jsx(ks,{className:"h-8 w-[90px] text-xs bg-transparent",children:h.jsx(Js,{})}),h.jsx(Ms,{className:"bg-card border-border max-h-[200px]",children:r.map(o=>h.jsx(Pt,{value:o.toString(),children:o},o))})]})]})}function pR({className:n,classNames:e,showOutsideDays:t=!0,...r}){return h.jsx(Ose,{showOutsideDays:t,className:et("p-3",n),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center mb-2",caption_label:"hidden",caption_dropdowns:"hidden",nav:"space-x-1 flex items-center",nav_button:et(Bv({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:et(Bv({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground rounded-md",day_today:"bg-accent/50 text-accent-foreground font-semibold",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",dropdown:"hidden",dropdown_month:"hidden",dropdown_year:"hidden",vhidden:"hidden",...e},components:{IconLeft:({...s})=>h.jsx(OQ,{className:"h-4 w-4"}),IconRight:({...s})=>h.jsx(v5,{className:"h-4 w-4"}),Caption:xie},...r})}pR.displayName="Calendar";function vie(n){const e=yie(n),t=M.forwardRef((r,s)=>{const{children:i,...o}=r,l=M.Children.toArray(i),c=l.find(bie);if(c){const f=c.props.children,g=l.map(y=>y===c?M.Children.count(f)>1?M.Children.only(null):M.isValidElement(f)?f.props.children:null:y);return h.jsx(e,{...o,ref:s,children:M.isValidElement(f)?M.cloneElement(f,void 0,g):null})}return h.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}function yie(n){const e=M.forwardRef((t,r)=>{const{children:s,...i}=t;if(M.isValidElement(s)){const o=Eie(s),l=_ie(i,s.props);return s.type!==M.Fragment&&(l.ref=r?dc(r,o):o),M.cloneElement(s,l)}return M.Children.count(s)>1?M.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var wie=Symbol("radix.slottable");function bie(n){return M.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===wie}function _ie(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function Eie(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var YC="Popover",[$7]=ya(YC,[$h]),vb=$h(),[Cie,Zh]=$7(YC),q7=n=>{const{__scopePopover:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:o=!1}=n,l=vb(e),c=M.useRef(null),[f,g]=M.useState(!1),[y,_]=Rh({prop:r,defaultProp:s??!1,onChange:i,caller:YC});return h.jsx(bI,{...l,children:h.jsx(Cie,{scope:e,contentId:tl(),triggerRef:c,open:y,onOpenChange:_,onOpenToggle:M.useCallback(()=>_(E=>!E),[_]),hasCustomAnchor:f,onCustomAnchorAdd:M.useCallback(()=>g(!0),[]),onCustomAnchorRemove:M.useCallback(()=>g(!1),[]),modal:o,children:t})})};q7.displayName=YC;var X7="PopoverAnchor",Aie=M.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=Zh(X7,t),i=vb(t),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return M.useEffect(()=>(o(),()=>l()),[o,l]),h.jsx(lb,{...i,...r,ref:e})});Aie.displayName=X7;var Y7="PopoverTrigger",K7=M.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=Zh(Y7,t),i=vb(t),o=Jt(e,s.triggerRef),l=h.jsx(_t.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":tF(s.open),...r,ref:o,onClick:Ue(n.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:h.jsx(lb,{asChild:!0,...i,children:l})});K7.displayName=Y7;var gR="PopoverPortal",[Sie,Nie]=$7(gR,{forceMount:void 0}),Z7=n=>{const{__scopePopover:e,forceMount:t,children:r,container:s}=n,i=Zh(gR,e);return h.jsx(Sie,{scope:e,forceMount:t,children:h.jsx(Do,{present:t||i.open,children:h.jsx(sb,{asChild:!0,container:s,children:r})})})};Z7.displayName=gR;var k1="PopoverContent",Q7=M.forwardRef((n,e)=>{const t=Nie(k1,n.__scopePopover),{forceMount:r=t.forceMount,...s}=n,i=Zh(k1,n.__scopePopover);return h.jsx(Do,{present:r||i.open,children:i.modal?h.jsx(Pie,{...s,ref:e}):h.jsx(Iie,{...s,ref:e})})});Q7.displayName=k1;var Tie=vie("PopoverContent.RemoveScroll"),Pie=M.forwardRef((n,e)=>{const t=Zh(k1,n.__scopePopover),r=M.useRef(null),s=Jt(e,r),i=M.useRef(!1);return M.useEffect(()=>{const o=r.current;if(o)return wC(o)},[]),h.jsx(ib,{as:Tie,allowPinchZoom:!0,children:h.jsx(J7,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ue(n.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=t.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ue(n.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,f=l.button===2||c;i.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:Ue(n.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Iie=M.forwardRef((n,e)=>{const t=Zh(k1,n.__scopePopover),r=M.useRef(!1),s=M.useRef(!1);return h.jsx(J7,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=n.onCloseAutoFocus)==null||o.call(n,i),i.defaultPrevented||(r.current||(l=t.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,f;(c=n.onInteractOutside)==null||c.call(n,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((f=t.triggerRef.current)==null?void 0:f.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),J7=M.forwardRef((n,e)=>{const{__scopePopover:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:f,onInteractOutside:g,...y}=n,_=Zh(k1,t),E=vb(t);return xC(),h.jsx(rb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:h.jsx(W1,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:g,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:f,onDismiss:()=>_.onOpenChange(!1),children:h.jsx(SC,{"data-state":tF(_.open),role:"dialog",id:_.contentId,...E,...y,ref:e,style:{...y.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),eF="PopoverClose",Rie=M.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=Zh(eF,t);return h.jsx(_t.button,{type:"button",...r,ref:e,onClick:Ue(n.onClick,()=>s.onOpenChange(!1))})});Rie.displayName=eF;var kie="PopoverArrow",Mie=M.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=vb(t);return h.jsx(NC,{...s,...r,ref:e})});Mie.displayName=kie;function tF(n){return n?"open":"closed"}var Oie=q7,Die=K7,jie=Z7,nF=Q7;const rF=Oie,sF=Die,xR=M.forwardRef(({className:n,align:e="center",sideOffset:t=4,...r},s)=>h.jsx(jie,{children:h.jsx(nF,{ref:s,align:e,sideOffset:t,className:et("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...r})}));xR.displayName=nF.displayName;function Lie({date:n,onDateChange:e,placeholder:t="Selecione uma data",disabled:r=!1,fromYear:s=1940,toYear:i=new Date().getFullYear()}){const[o,l]=M.useState(!1);return h.jsxs(rF,{open:o,onOpenChange:l,children:[h.jsx(sF,{asChild:!0,children:h.jsxs(Je,{variant:"outline",disabled:r,className:et("w-full justify-start text-left font-normal h-12 bg-transparent border-border hover:glow-border-hover",!n&&"text-muted-foreground"),children:[h.jsx(or,{className:"mr-2 h-4 w-4 text-muted-foreground"}),n?ht(n,"dd/MM/yyyy",{locale:Xt}):t]})}),h.jsx(xR,{className:"w-auto p-0 bg-card border-border",align:"start",children:h.jsx(pR,{mode:"single",selected:n,onSelect:c=>{e(c),l(!1)},disabled:c=>c>new Date||c<new Date("1900-01-01"),initialFocus:!0,fromYear:s,toYear:i,className:"rounded-md"})})]})}const Bie=()=>{var U;const n=ul();(U=fc().state)!=null&&U.emailOrMatricula;const[t,r]=M.useState({nomeCompleto:"",dataNascimento:void 0,email:"",matricula:"",campus:"",senha:"",confirmarSenha:""}),[s,i]=M.useState(!1),[o,l]=M.useState(!1),[c,f]=M.useState(!1),[g,y]=M.useState(!1),[_,E]=M.useState(""),[P,S]=M.useState([]);M.useEffect(()=>{(async()=>{try{const{data:F,error:X}=await Ce.from("campus").select("nome").eq("ativo",!0).order("nome",{ascending:!0});X?(console.error("Erro ao carregar campus:",X),S(["Campus Alegrete","Campus Frederico Westphalen","Campus Jaguari","Campus Jlio de Castilhos","Campus Panambi","Campus Santa Rosa","Campus Santo ngelo","Campus Santo Augusto","Campus So Borja","Campus So Vicente do Sul","Campus Uruguaiana"])):S(F.map(Z=>Z.nome))}catch(F){console.error("Erro ao buscar campus:",F)}})()},[]);const I=(z,F)=>{r(X=>({...X,[z]:F})),z==="matricula"&&f(!1)},N=()=>{t.matricula&&!c&&l(!0)},k=()=>{f(!0),l(!1)},T=()=>{l(!1),setTimeout(()=>{var z;(z=document.getElementById("matricula-input"))==null||z.focus()},100)},D=async()=>{if(!t.nomeCompleto||!t.dataNascimento||!t.email||!t.matricula||!t.campus||!t.senha||!t.confirmarSenha){E("Por favor, preencha todos os campos obrigatrios para continuar."),y(!0);return}if(!c){E("Por favor, confirme sua matrcula antes de continuar."),y(!0),l(!0);return}if(!t.email.endsWith("@iffar.edu.br")&&!t.email.endsWith("@aluno.iffar.edu.br")){E("Use um e-mail institucional vlido (@iffar.edu.br ou @aluno.iffar.edu.br)"),y(!0);return}if(t.senha!==t.confirmarSenha){E("As senhas no coincidem. Por favor, verifique e tente novamente."),y(!0);return}if(t.senha.length<8){E("A senha deve ter no mnimo 8 caracteres para garantir a segurana da sua conta."),y(!0);return}i(!0);try{const z=await hT.genSalt(10),F=await hT.hash(t.senha,z),X=t.dataNascimento.toISOString().split("T")[0],{data:Z,error:ne}=await Ce.from("usuarios").insert([{email:t.email,nome_completo:t.nomeCompleto,matricula:t.matricula,campus:t.campus,data_nascimento:X,senha_hash:F,perfil:"user"}]).select();ne?(ne.code==="23505"?ne.message.includes("email")?E("Este e-mail j est cadastrado. Tente fazer login ou use outro e-mail."):ne.message.includes("matricula")?E("Esta matrcula j est cadastrada. Tente fazer login ou verifique sua matrcula."):E("E-mail ou matrcula j cadastrados no sistema."):E("Erro ao cadastrar: "+ne.message),y(!0)):(xe.success("Cadastro realizado com sucesso! Faa login para continuar."),n("/login"))}catch(z){console.error("Erro no cadastro:",z),E("Erro ao realizar cadastro. Por favor, tente novamente."),y(!0)}finally{i(!1)}};return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 py-12 relative",children:[h.jsx("div",{className:"absolute top-4 right-4",children:h.jsx(J1,{})}),h.jsx("div",{className:"w-full max-w-2xl mx-auto",children:h.jsxs("div",{className:"backdrop-blur-custom bg-card border border-border rounded-xl p-6 sm:p-8 glow-border",children:[h.jsx("div",{className:"flex justify-center mb-4",children:h.jsx("img",{src:"/logo-bgremoved.png",alt:"Logo",className:"h-12 w-auto object-contain"})}),h.jsxs("div",{className:"text-center mb-6",children:[h.jsx("h1",{className:"text-2xl font-light tracking-wider text-foreground mb-2",children:"Cadastro"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Preencha seus dados para criar sua conta"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-foreground",children:"Nome Completo"}),h.jsx(Qt,{type:"text",placeholder:"Seu nome completo",value:t.nomeCompleto,onChange:z=>I("nomeCompleto",z.target.value),className:"h-12 bg-transparent border-border focus:glow-border-hover",disabled:s})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-foreground",children:"Data de Nascimento"}),h.jsx(Lie,{date:t.dataNascimento,onDateChange:z=>I("dataNascimento",z),placeholder:"Selecione sua data",disabled:s})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Matrcula ",c&&h.jsx("span",{className:"text-green-500 text-xs",children:" Confirmada"})]}),h.jsx(Qt,{id:"matricula-input",type:"text",placeholder:"Sua matrcula",value:t.matricula,onChange:z=>I("matricula",z.target.value),onBlur:N,className:"h-12 bg-transparent border-border focus:glow-border-hover",disabled:s})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-foreground",children:"Campus"}),h.jsxs(Qs,{value:t.campus,onValueChange:z=>I("campus",z),disabled:s,children:[h.jsx(ks,{className:"h-12 bg-transparent border-border focus:glow-border-hover",children:h.jsx(Js,{placeholder:"Selecione seu campus"})}),h.jsx(Ms,{className:"bg-card border-border",children:P.map(z=>h.jsx(Pt,{value:z,children:z},z))})]})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-foreground",children:"E-mail Institucional"}),h.jsx(Qt,{type:"email",placeholder:"seu.email@aluno.iffar.edu.br",value:t.email,onChange:z=>I("email",z.target.value),className:"h-12 bg-transparent border-border focus:glow-border-hover",disabled:s}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"Use @iffar.edu.br ou @aluno.iffar.edu.br"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-foreground",children:"Senha"}),h.jsx(Qt,{type:"password",placeholder:"Mnimo 8 caracteres",value:t.senha,onChange:z=>I("senha",z.target.value),className:"h-12 bg-transparent border-border focus:glow-border-hover",disabled:s})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-foreground",children:"Confirmar Senha"}),h.jsx(Qt,{type:"password",placeholder:"Digite novamente",value:t.confirmarSenha,onChange:z=>I("confirmarSenha",z.target.value),className:"h-12 bg-transparent border-border focus:glow-border-hover",disabled:s})]})]}),h.jsx("p",{className:"text-xs text-muted-foreground italic",children:"A senha ser usada como autenticao alternativa ao cdigo enviado por e-mail"}),h.jsx(Je,{variant:"elegant",size:"lg",onClick:D,className:"w-full mt-6",disabled:s,children:s?"Cadastrando...":"Cadastrar"}),h.jsx("button",{onClick:()=>n("/login"),className:"w-full text-sm text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:"J tem uma conta? Faa login"})]})]})})]}),h.jsx(dp,{open:o,onOpenChange:l,children:h.jsxs(kh,{className:"bg-card/95 border border-border/10 backdrop-blur-md shadow-2xl",children:[h.jsxs(Mh,{className:"space-y-4",children:[h.jsx(Dh,{className:"text-2xl font-light tracking-[0.02em] text-foreground",children:"Confirme sua matrcula"}),h.jsx("div",{className:"h-[0.5px] bg-gradient-to-r from-transparent via-border/40 to-transparent"})]}),h.jsxs("div",{className:"py-4 space-y-4",children:[h.jsxs("p",{className:"text-muted-foreground text-[15px] leading-relaxed",children:["Sua matrcula ",h.jsx("span",{className:"font-medium text-foreground",children:t.matricula})," est correta?"]}),h.jsx("p",{className:"text-muted-foreground/80 text-sm leading-relaxed",children:"Este dado ser usado para validao dos seus certificados no Campus."})]}),h.jsxs(Oh,{className:"gap-3 sm:gap-3",children:[h.jsx(ob,{onClick:T,className:"h-11 px-6 bg-transparent border border-border/15 hover:border-border/30 hover:bg-accent/30 text-muted-foreground hover:text-foreground transition-all duration-200 font-light",children:"No, vou ajustar"}),h.jsx(jh,{onClick:k,className:"h-11 px-6 bg-transparent border border-primary/15 hover:border-primary/30 hover:bg-primary/5 text-foreground hover:text-foreground transition-all duration-200 font-light",children:"Sim, est correto"})]})]})}),h.jsx(dp,{open:g,onOpenChange:y,children:h.jsxs(kh,{className:"bg-card/95 border border-border/10 backdrop-blur-md shadow-2xl",children:[h.jsxs(Mh,{className:"space-y-4",children:[h.jsx(Dh,{className:"text-2xl font-light tracking-[0.02em] text-foreground",children:"Ateno"}),h.jsx("div",{className:"h-[0.5px] bg-gradient-to-r from-transparent via-border/40 to-transparent"})]}),h.jsx("div",{className:"py-4",children:h.jsx("p",{className:"text-muted-foreground text-[15px] leading-relaxed",children:_})}),h.jsx(Oh,{children:h.jsx(jh,{onClick:()=>y(!1),className:"h-11 px-8 bg-transparent border border-border/15 hover:border-border/30 hover:bg-accent/30 text-foreground transition-all duration-200 font-light",children:"Entendi"})})]})})]})},Fie=()=>{const n=ul(),[e,t]=M.useState(""),[r,s]=M.useState(""),[i,o]=M.useState(!1),l=()=>{if(!e||!r){xe.error("Preencha todos os campos");return}o(!0),xe.success("Presena validada com sucesso!")};return i?h.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:h.jsx("div",{className:"w-full max-w-md mx-auto",children:h.jsxs("div",{className:"backdrop-blur-custom bg-card border border-border rounded-xl p-8 glow-border text-center space-y-6",children:[h.jsx(bi,{className:"w-16 h-16 mx-auto text-green-500"}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-light mb-2",children:"Presena Validada!"}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:["Sua presena foi registrada em ",new Date().toLocaleDateString()," s"," ",new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),h.jsx(Je,{onClick:()=>n("/"),className:"w-full bg-transparent border border-border hover:glow-border-hover",children:"Voltar  pgina inicial"})]})})}):h.jsxs("div",{className:"min-h-screen flex items-center justify-center relative",children:[h.jsx("div",{className:"absolute top-4 right-4",children:h.jsx(J1,{})}),h.jsx("div",{className:"w-full max-w-md mx-4",children:h.jsxs("div",{className:"bg-card border border-border rounded-xl p-8 backdrop-blur-sm glow-border",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("h1",{className:"text-2xl font-light tracking-wider text-foreground mb-2",children:"Validar Presena"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Evento: Semana de Tecnologia 2025"})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsx(Qt,{placeholder:"Matrcula ou E-mail Institucional",value:e,onChange:c=>t(c.target.value),className:"h-12 bg-transparent border-border focus:glow-border-hover"}),h.jsx(Qt,{placeholder:"Palavra-chave do dia",type:"password",value:r,onChange:c=>s(c.target.value),className:"h-12 bg-transparent border-border focus:glow-border-hover"}),h.jsx(Je,{variant:"elegant",size:"lg",onClick:l,className:"w-full",children:"Validar Presena"}),h.jsx("button",{onClick:()=>n("/"),className:"w-full text-sm text-muted-foreground hover:text-foreground transition-colors",children:"Voltar"})]})]})})]})},fi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),wT=[.001,0,0,.001,0,0],ES=1.35,yo={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},pd={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Jv="pdfjs_internal_editor_",St={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Kt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Uie={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},bT={TRIANGLES:1,LATTICE:2},ws={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},q_={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},jr={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Jp={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},KC={ERRORS:0,WARNINGS:1,INFOS:5},ey={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Ix={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},zie={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ZC=KC.WARNINGS;function Hie(n){Number.isInteger(n)&&(ZC=n)}function Vie(){return ZC}function QC(n){ZC>=KC.INFOS&&console.info(`Info: ${n}`)}function bt(n){ZC>=KC.WARNINGS&&console.warn(`Warning: ${n}`)}function jn(n){throw new Error(n)}function Zt(n,e){n||jn(e)}function Wie(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function iF(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=Yie(n)}catch{}}const r=e?URL.parse(n,e):URL.parse(n);return Wie(r)?r:null}function oF(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&iF(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function It(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const Cp=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class sO extends Cp{constructor(e,t){super(e,"PasswordException"),this.code=t}}class CS extends Cp{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class _T extends Cp{constructor(e){super(e,"InvalidPDFException")}}class gE extends Cp{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class Gie extends Cp{constructor(e){super(e,"FormatError")}}class Fh extends Cp{constructor(e){super(e,"AbortException")}}function aF(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&jn("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),o=n.subarray(s,i);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function yb(n){typeof n!="string"&&jn("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function $ie(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function qie(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function Xie(){try{return new Function(""),!0}catch{return!1}}class Os{static get isLittleEndian(){return It(this,"isLittleEndian",qie())}static get isEvalSupported(){return It(this,"isEvalSupported",Xie())}static get isOffscreenCanvasSupported(){return It(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return It(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return It(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return It(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return It(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return It(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const AS=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Nu,X_,ET;class Ke{static makeHexColor(e,t,r){return`#${AS[e]}${AS[t]}${AS[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,r=0){const s=e[r],i=e[r+1];e[r]=s*t[0]+i*t[2]+t[4],e[r+1]=s*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const s=t[0],i=t[1],o=t[2],l=t[3],c=t[4],f=t[5];for(let g=0;g<6;g+=2){const y=e[r+g],_=e[r+g+1];e[r+g]=y*s+_*o+c,e[r+g+1]=y*i+_*l+f}}static applyInverseTransform(e,t){const r=e[0],s=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-r*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,r){const s=t[0],i=t[1],o=t[2],l=t[3],c=t[4],f=t[5],g=e[0],y=e[1],_=e[2],E=e[3];let P=s*g+c,S=P,I=s*_+c,N=I,k=l*y+f,T=k,D=l*E+f,U=D;if(i!==0||o!==0){const z=i*g,F=i*_,X=o*y,Z=o*E;P+=X,N+=X,I+=Z,S+=Z,k+=z,U+=z,D+=F,T+=F}r[0]=Math.min(r[0],P,I,S,N),r[1]=Math.min(r[1],k,D,T,U),r[2]=Math.max(r[2],P,I,S,N),r[3]=Math.max(r[3],k,D,T,U)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],s=e[1],i=e[2],o=e[3],l=r**2+s**2,c=r*i+s*o,f=i**2+o**2,g=(l+f)/2,y=Math.sqrt(g**2-(l*f-c**2));t[0]=Math.sqrt(g+y||1),t[1]=Math.sqrt(g-y||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[r,i,s,o]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,s,i){i[0]=Math.min(i[0],e,r),i[1]=Math.min(i[1],t,s),i[2]=Math.max(i[2],e,r),i[3]=Math.max(i[3],t,s)}static bezierBoundingBox(e,t,r,s,i,o,l,c,f){f[0]=Math.min(f[0],e,l),f[1]=Math.min(f[1],t,c),f[2]=Math.max(f[2],e,l),f[3]=Math.max(f[3],t,c),G(this,Nu,ET).call(this,e,r,i,l,t,s,o,c,3*(-e+3*(r-i)+l),6*(e-2*r+i),3*(r-e),f),G(this,Nu,ET).call(this,e,r,i,l,t,s,o,c,3*(-t+3*(s-o)+c),6*(t-2*s+o),3*(s-t),f)}}Nu=new WeakSet,X_=function(e,t,r,s,i,o,l,c,f,g){if(f<=0||f>=1)return;const y=1-f,_=f*f,E=_*f,P=y*(y*(y*e+3*f*t)+3*_*r)+E*s,S=y*(y*(y*i+3*f*o)+3*_*l)+E*c;g[0]=Math.min(g[0],P),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],P),g[3]=Math.max(g[3],S)},ET=function(e,t,r,s,i,o,l,c,f,g,y,_){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&G(this,Nu,X_).call(this,e,t,r,s,i,o,l,c,-y/g,_);return}const E=g**2-4*y*f;if(E<0)return;const P=Math.sqrt(E),S=2*f;G(this,Nu,X_).call(this,e,t,r,s,i,o,l,c,(-g+P)/S,_),G(this,Nu,X_).call(this,e,t,r,s,i,o,l,c,(-g-P)/S,_)},W(Ke,Nu);function Yie(n){return decodeURIComponent(escape(n))}let SS=null,iO=null;function Kie(n){return SS||(SS=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,iO=new Map([["","t"]])),n.replaceAll(SS,(e,t,r)=>t?t.normalize("NFKC"):iO.get(r))}function lF(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),aF(n)}const yg="pdfjs_internal_id_";function Zie(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,s,...i]=t;if(!n(r)&&!Number.isInteger(r)||!e(s))return!1;const o=i.length;let l=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of i)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function mi(n,e,t){return Math.min(Math.max(n,e),t)}function cF(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(aF(n))}function Qie(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):yb(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class ty{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function s(i){var c;if(!i)return;let o=null;const l=i.name;if(l==="#text")o=i.value;else if(ty.shouldBuildText(l))(c=i==null?void 0:i.attributes)!=null&&c.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const f of i.children)s(f)}return s(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class uF{static setupStorage(e,t,r,s,i){const o=s.getValue(t,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",l=>{s.setValue(t,{value:l.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",l=>{s.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",l=>{s.setValue(t,{value:l.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const l of r.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,f=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(t,{value:f})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:s,linkService:i}){const{attributes:o}=t,l=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[c,f]of Object.entries(o))if(f!=null)switch(c){case"class":f.length&&e.setAttribute(c,f.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",f);break;case"style":Object.assign(e.style,f);break;case"textContent":e.textContent=f;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,f)}l&&i.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){var y,_;const t=e.annotationStorage,r=e.linkService,s=e.xfaHtml,i=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:i,linkService:r});const l=i!=="richText",c=e.div;if(c.append(o),e.viewport){const E=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=E}l&&c.setAttribute("class","xfaLayer xfaFont");const f=[];if(s.children.length===0){if(s.value){const E=document.createTextNode(s.value);o.append(E),l&&ty.shouldBuildText(s.name)&&f.push(E)}return{textDivs:f}}const g=[[s,-1,o]];for(;g.length>0;){const[E,P,S]=g.at(-1);if(P+1===E.children.length){g.pop();continue}const I=E.children[++g.at(-1)[1]];if(I===null)continue;const{name:N}=I;if(N==="#text"){const T=document.createTextNode(I.value);f.push(T),S.append(T);continue}const k=(y=I==null?void 0:I.attributes)!=null&&y.xmlns?document.createElementNS(I.attributes.xmlns,N):document.createElement(N);if(S.append(k),I.attributes&&this.setAttributes({html:k,element:I,storage:t,intent:i,linkService:r}),((_=I.children)==null?void 0:_.length)>0)g.push([I,-1,k]);else if(I.value){const T=document.createTextNode(I.value);l&&ty.shouldBuildText(N)&&f.push(T),k.append(T)}}for(const E of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))E.setAttribute("readOnly",!0);return{textDivs:f}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Rc="http://www.w3.org/2000/svg",Pf=class Pf{};Pe(Pf,"CSS",96),Pe(Pf,"PDF",72),Pe(Pf,"PDF_TO_CSS_UNITS",Pf.CSS/Pf.PDF);let Uh=Pf;async function wb(n,e="text"){if(Hx(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}r(new Error(s.statusText))}},s.send(null)})}class bb{constructor({viewBox:e,userUnit:t,scale:r,rotation:s,offsetX:i=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=s,this.offsetX=i,this.offsetY=o,r*=t;const c=(e[2]+e[0])/2,f=(e[3]+e[1])/2;let g,y,_,E;switch(s%=360,s<0&&(s+=360),s){case 180:g=-1,y=0,_=0,E=1;break;case 90:g=0,y=1,_=1,E=0;break;case 270:g=0,y=-1,_=-1,E=0;break;case 0:g=1,y=0,_=0,E=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(_=-_,E=-E);let P,S,I,N;g===0?(P=Math.abs(f-e[1])*r+i,S=Math.abs(c-e[0])*r+o,I=(e[3]-e[1])*r,N=(e[2]-e[0])*r):(P=Math.abs(c-e[0])*r+i,S=Math.abs(f-e[1])*r+o,I=(e[2]-e[0])*r,N=(e[3]-e[1])*r),this.transform=[g*r,y*r,_*r,E*r,P-g*r*c-_*r*f,S-y*r*c-E*r*f],this.width=I,this.height=N}get rawDims(){const e=this.viewBox;return It(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new bb({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){const r=[e,t];return Ke.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];Ke.applyTransform(t,this.transform);const r=[e[2],e[3]];return Ke.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return Ke.applyInverseTransform(r,this.transform),r}}class vR extends Cp{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function JC(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function yR(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function Jie(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function eoe(n,e="document.pdf"){if(typeof n!="string")return e;if(JC(n))return bt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const s=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},i=/\.pdf$/i,o=r.pathname.split("/").at(-1);if(i.test(o))return s(o);if(r.searchParams.size>0){const l=Array.from(r.searchParams.values()).reverse();for(const f of l)if(i.test(f))return s(f);const c=Array.from(r.searchParams.keys()).reverse();for(const f of c)if(i.test(f))return s(f)}if(r.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(c)return s(c[0])}return e}class oO{constructor(){Pe(this,"started",Object.create(null));Pe(this,"times",[])}time(e){e in this.started&&bt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||bt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:s,end:i}of this.times)e.push(`${r.padEnd(t)} ${i-s}ms
`);return e.join("")}}function Hx(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function va(n){n.preventDefault()}function Nr(n){n.preventDefault(),n.stopPropagation()}function toe(n){console.log("Deprecated API usage: "+n)}var cy;class xE{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;p(this,cy)||B(this,cy,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=p(this,cy).exec(e);if(!t)return null;const r=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const f=t[7]||"Z";let g=parseInt(t[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(t[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(o+=g,l+=y):f==="+"&&(o-=g,l-=y),new Date(Date.UTC(r,s,i,o,l,c))}}cy=new WeakMap,W(xE,cy);function noe(n,{scale:e=1,rotation:t=0}){const{width:r,height:s}=n.attributes.style,i=[0,0,parseInt(r),parseInt(s)];return new bb({viewBox:i,userUnit:1,scale:e,rotation:t})}function _b(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(bt(`Not a valid color format: "${n}"`),[0,0,0])}function roe(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,_b(r))}e.remove()}function cr(n){const{a:e,b:t,c:r,d:s,e:i,f:o}=n.getTransform();return[e,t,r,s,i,o]}function wl(n){const{a:e,b:t,c:r,d:s,e:i,f:o}=n.getTransform().invertSelf();return[e,t,r,s,i,o]}function xp(n,e,t=!1,r=!0){if(e instanceof bb){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:o}=n,l=Os.isCSSRoundSupported,c=`var(--total-scale-factor) * ${s}px`,f=`var(--total-scale-factor) * ${i}px`,g=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,y=l?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!t||e.rotation%180===0?(o.width=g,o.height=y):(o.width=y,o.height=g)}r&&n.setAttribute("data-main-rotation",e.rotation)}class cc{constructor(){const{pixelRatio:e}=cc;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,s,i=-1){let o=1/0,l=1/0,c=1/0;r=cc.capPixels(r,i),r>0&&(o=Math.sqrt(r/(e*t))),s!==-1&&(l=s/e,c=s/t);const f=Math.min(o,l,c);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const CT=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class soe{static get isDarkMode(){var e;return It(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class ioe{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:r}=window.getComputedStyle(e);return e.remove(),It(this,"commentForegroundColor",_b(r))}}function ooe(n,e,t,r){r=Math.min(Math.max(r??1,0),1);const s=255*(1-r);return n=Math.round(n*r+s),e=Math.round(e*r+s),t=Math.round(t*r+s),[n,e,t]}function aO(n,e){const t=n[0]/255,r=n[1]/255,s=n[2]/255,i=Math.max(t,r,s),o=Math.min(t,r,s),l=(i+o)/2;if(i===o)e[0]=e[1]=0;else{const c=i-o;switch(e[1]=l<.5?c/(i+o):c/(2-i-o),i){case t:e[0]=((r-s)/c+(r<s?6:0))*60;break;case r:e[0]=((s-t)/c+2)*60;break;case s:e[0]=((t-r)/c+4)*60;break}}e[2]=l}function AT(n,e){const t=n[0],r=n[1],s=n[2],i=(1-Math.abs(2*s-1))*r,o=i*(1-Math.abs(t/60%2-1)),l=s-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+l,e[1]=o+l,e[2]=l;break;case 1:e[0]=o+l,e[1]=i+l,e[2]=l;break;case 2:e[0]=l,e[1]=i+l,e[2]=o+l;break;case 3:e[0]=l,e[1]=o+l,e[2]=i+l;break;case 4:e[0]=o+l,e[1]=l,e[2]=i+l;break;case 5:case 6:e[0]=i+l,e[1]=l,e[2]=o+l;break}}function lO(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function cO(n,e,t){AT(n,t),t.map(lO);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];AT(e,t),t.map(lO);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];return r>s?(r+.05)/(s+.05):(s+.05)/(r+.05)}const uO=new Map;function aoe(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let r=uO.get(t);if(r)return r;const s=new Float32Array(9),i=s.subarray(0,3),o=s.subarray(3,6);aO(n,o);const l=s.subarray(6,9);aO(e,l);const c=l[2]<.5,f=c?12:4.5;if(o[2]=c?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),cO(o,l,i)<f){let g,y;c?(g=o[2],y=1):(g=0,y=o[2]);const _=.005;for(;y-g>_;){const E=o[2]=(g+y)/2;c===cO(o,l,i)<f?g=E:y=E}o[2]=c?y:g}return AT(o,i),r=Ke.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),uO.set(t,r),r}function dF({html:n,dir:e,className:t},r){const s=document.createDocumentFragment();if(typeof n=="string"){const i=document.createElement("p");i.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let l=0,c=o.length;l<c;++l){const f=o[l];i.append(document.createTextNode(f)),l<c-1&&i.append(document.createElement("br"))}s.append(i)}else uF.render({xfaHtml:n,div:s,intent:"richText"});s.firstChild.classList.add("richText",t),r.append(s)}function hF(n){const e=new Path2D;if(!n)return e;for(let t=0,r=n.length;t<r;)switch(n[t++]){case Ix.moveTo:e.moveTo(n[t++],n[t++]);break;case Ix.lineTo:e.lineTo(n[t++],n[t++]);break;case Ix.curveTo:e.bezierCurveTo(n[t++],n[t++],n[t++],n[t++],n[t++],n[t++]);break;case Ix.quadraticCurveTo:e.quadraticCurveTo(n[t++],n[t++],n[t++],n[t++]);break;case Ix.closePath:e.closePath();break;default:bt(`Unrecognized drawing path operator: ${n[t-1]}`);break}return e}var _d,Ed,Yo,Ko,uy,Cd,Xg,Yg,dy,OE,fF,Is,mF,pF,eg,Vx;const Bc=class Bc{constructor(e){W(this,Is);W(this,_d,null);W(this,Ed,null);W(this,Yo);W(this,Ko,null);W(this,uy,null);W(this,Cd,null);W(this,Xg,null);W(this,Yg,null);B(this,Yo,e),p(Bc,dy)||B(Bc,dy,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=B(this,_d,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=p(this,Yo)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",va,{signal:t}),e.addEventListener("pointerdown",G(Bc,OE,fF),{signal:t}));const r=B(this,Ko,document.createElement("div"));r.className="buttons",e.append(r);const s=p(this,Yo).toolbarPosition;if(s){const{style:i}=e,o=p(this,Yo)._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return p(this,_d)}hide(){var e;p(this,_d).classList.add("hidden"),(e=p(this,Ed))==null||e.hideDropdown()}show(){var e,t;p(this,_d).classList.remove("hidden"),(e=p(this,uy))==null||e.shown(),(t=p(this,Cd))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=p(this,Yo),r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",p(Bc,dy)[e]),G(this,Is,eg).call(this,r)&&r.addEventListener("click",s=>{t.delete()},{signal:t._signal}),p(this,Ko).append(r)}async addAltText(e){const t=await e.render();G(this,Is,eg).call(this,t),p(this,Ko).append(t,p(this,Is,Vx)),B(this,uy,e)}addComment(e,t=null){if(p(this,Cd))return;const r=e.renderForToolbar();if(!r)return;G(this,Is,eg).call(this,r);const s=B(this,Xg,p(this,Is,Vx));t?(p(this,Ko).insertBefore(r,t),p(this,Ko).insertBefore(s,t)):p(this,Ko).append(r,s),B(this,Cd,e),e.toolbar=this}addColorPicker(e){if(p(this,Ed))return;B(this,Ed,e);const t=e.renderButton();G(this,Is,eg).call(this,t),p(this,Ko).append(t,p(this,Is,Vx))}async addEditSignatureButton(e){const t=B(this,Yg,await e.renderEditButton(p(this,Yo)));G(this,Is,eg).call(this,t),p(this,Ko).append(t,p(this,Is,Vx))}removeButton(e){var t,r;switch(e){case"comment":(t=p(this,Cd))==null||t.removeToolbarCommentButton(),B(this,Cd,null),(r=p(this,Xg))==null||r.remove(),B(this,Xg,null);break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,r){if(!t&&e==="comment")return;const s=p(this,Ko).querySelector(r);s&&e==="comment"&&this.addComment(t,s)}updateEditSignatureButton(e){p(this,Yg)&&(p(this,Yg).title=e)}remove(){var e;p(this,_d).remove(),(e=p(this,Ed))==null||e.destroy(),B(this,Ed,null)}};_d=new WeakMap,Ed=new WeakMap,Yo=new WeakMap,Ko=new WeakMap,uy=new WeakMap,Cd=new WeakMap,Xg=new WeakMap,Yg=new WeakMap,dy=new WeakMap,OE=new WeakSet,fF=function(e){e.stopPropagation()},Is=new WeakSet,mF=function(e){p(this,Yo)._focusEventsAllowed=!1,Nr(e)},pF=function(e){p(this,Yo)._focusEventsAllowed=!0,Nr(e)},eg=function(e){const t=p(this,Yo)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",G(this,Is,mF).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",G(this,Is,pF).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",va,{signal:t}),!0)},Vx=function(){const e=document.createElement("div");return e.className="divider",e},W(Bc,OE),W(Bc,dy,null);let ST=Bc;var hy,Hf,Hc,ju,gF,xF,NT;class loe{constructor(e){W(this,ju);W(this,hy,null);W(this,Hf,null);W(this,Hc);B(this,Hc,e)}show(e,t,r){const[s,i]=G(this,ju,xF).call(this,t,r),{style:o}=p(this,Hf)||B(this,Hf,G(this,ju,gF).call(this));e.append(p(this,Hf)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){p(this,Hf).remove()}}hy=new WeakMap,Hf=new WeakMap,Hc=new WeakMap,ju=new WeakSet,gF=function(){const e=B(this,Hf,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=p(this,Hc)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",va,{signal:t});const r=B(this,hy,document.createElement("div"));return r.className="buttons",e.append(r),p(this,Hc).hasCommentManager()&&G(this,ju,NT).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{p(this,Hc).commentSelection("floating_button")}),G(this,ju,NT).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{p(this,Hc).highlightSelection("floating_button")}),e},xF=function(e,t){let r=0,s=0;for(const i of e){const o=i.y+i.height;if(o<r)continue;const l=i.x+(t?i.width:0);if(o>r){s=l,r=o;continue}t?l>s&&(s=l):l<s&&(s=l)}return[t?1-s:s,r]},NT=function(e,t,r,s){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const o=document.createElement("span");i.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",r);const l=p(this,Hc)._signal;l instanceof AbortSignal&&!l.aborted&&(i.addEventListener("contextmenu",va,{signal:l}),i.addEventListener("click",s,{signal:l})),p(this,hy).append(i)};function vF(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}var Vf,Wf,Kg,Gf;const En=class En{static initializeAndAddPointerId(e){(p(En,Wf)||B(En,Wf,new Set)).add(e)}static setPointer(e,t){p(En,Vf)||B(En,Vf,t),p(En,Gf)??B(En,Gf,e)}static setTimeStamp(e){B(En,Kg,e)}static isSamePointerId(e){return p(En,Vf)===e}static isSamePointerIdOrRemove(e){var t;return p(En,Vf)===e?!0:((t=p(En,Wf))==null||t.delete(e),!1)}static isSamePointerType(e){return p(En,Gf)===e}static isInitializedAndDifferentPointerType(e){return p(En,Gf)!==null&&!En.isSamePointerType(e)}static isSameTimeStamp(e){return p(En,Kg)===e}static isUsingMultiplePointers(){var e;return((e=p(En,Wf))==null?void 0:e.size)>=1}static clearPointerType(){B(En,Gf,null)}static clearPointerIds(){B(En,Vf,NaN),B(En,Wf,null)}static clearTimeStamp(){B(En,Kg,NaN)}};Vf=new WeakMap,Wf=new WeakMap,Kg=new WeakMap,Gf=new WeakMap,W(En,Vf,NaN),W(En,Wf,null),W(En,Kg,NaN),W(En,Gf,null);let Vs=En;var DE;class coe{constructor(){W(this,DE,0)}get id(){return`${Jv}${vr(this,DE)._++}`}}DE=new WeakMap;var Zg,fy,Ws,Qg,Y_;const LR=class LR{constructor(){W(this,Qg);W(this,Zg,lF());W(this,fy,0);W(this,Ws,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(r.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return It(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:r,size:s,type:i}=e;return G(this,Qg,Y_).call(this,`${t}_${r}_${s}_${i}`,e)}async getFromUrl(e){return G(this,Qg,Y_).call(this,e,e)}async getFromBlob(e,t){const r=await t;return G(this,Qg,Y_).call(this,e,r)}async getFromId(e){p(this,Ws)||B(this,Ws,new Map);const t=p(this,Ws).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){p(this,Ws)||B(this,Ws,new Map);let r=p(this,Ws).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),r={bitmap:s.transferToImageBitmap(),id:`image_${p(this,Zg)}_${vr(this,fy)._++}`,refCounter:1,isSvg:!1},p(this,Ws).set(e,r),p(this,Ws).set(r.id,r),r}getSvgUrl(e){const t=p(this,Ws).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;p(this,Ws)||B(this,Ws,new Map);const t=p(this,Ws).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}(s=r.close)==null||s.call(r),t.bitmap=null}isValidId(e){return e.startsWith(`image_${p(this,Zg)}_`)}};Zg=new WeakMap,fy=new WeakMap,Ws=new WeakMap,Qg=new WeakSet,Y_=async function(e,t){p(this,Ws)||B(this,Ws,new Map);let r=p(this,Ws).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${p(this,Zg)}_${vr(this,fy)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(r.url=t,s=await wb(t,"blob")):t instanceof File?s=r.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const i=LR._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((f,g)=>{l.onload=()=>{r.bitmap=l,r.isSvg=!0,f()},o.onload=async()=>{const y=r.svgUrl=o.result;l.src=await i?`${y}#svgView(preserveAspectRatio(none))`:y},l.onerror=o.onerror=g});o.readAsDataURL(s),await c}else r.bitmap=await createImageBitmap(s);r.refCounter=1}catch(s){bt(s),r=null}return p(this,Ws).set(e,r),r&&p(this,Ws).set(r.id,r),r};let TT=LR;var Pr,Ad,my,lr;class uoe{constructor(e=128){W(this,Pr,[]);W(this,Ad,!1);W(this,my);W(this,lr,-1);B(this,my,e)}add({cmd:e,undo:t,post:r,mustExec:s,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(s&&e(),p(this,Ad))return;const c={cmd:e,undo:t,post:r,type:i};if(p(this,lr)===-1){p(this,Pr).length>0&&(p(this,Pr).length=0),B(this,lr,0),p(this,Pr).push(c);return}if(o&&p(this,Pr)[p(this,lr)].type===i){l&&(c.undo=p(this,Pr)[p(this,lr)].undo),p(this,Pr)[p(this,lr)]=c;return}const f=p(this,lr)+1;f===p(this,my)?p(this,Pr).splice(0,1):(B(this,lr,f),f<p(this,Pr).length&&p(this,Pr).splice(f)),p(this,Pr).push(c)}undo(){if(p(this,lr)===-1)return;B(this,Ad,!0);const{undo:e,post:t}=p(this,Pr)[p(this,lr)];e(),t==null||t(),B(this,Ad,!1),B(this,lr,p(this,lr)-1)}redo(){if(p(this,lr)<p(this,Pr).length-1){B(this,lr,p(this,lr)+1),B(this,Ad,!0);const{cmd:e,post:t}=p(this,Pr)[p(this,lr)];e(),t==null||t(),B(this,Ad,!1)}}hasSomethingToUndo(){return p(this,lr)!==-1}hasSomethingToRedo(){return p(this,lr)<p(this,Pr).length-1}cleanType(e){if(p(this,lr)!==-1){for(let t=p(this,lr);t>=0;t--)if(p(this,Pr)[t].type!==e){p(this,Pr).splice(t+1,p(this,lr)-t),B(this,lr,t);return}p(this,Pr).length=0,B(this,lr,-1)}}destroy(){B(this,Pr,null)}}Pr=new WeakMap,Ad=new WeakMap,my=new WeakMap,lr=new WeakMap;var jE,yF;class Eb{constructor(e){W(this,jE);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Os.platform;for(const[r,s,i={}]of e)for(const o of r){const l=o.startsWith("mac+");t&&l?(this.callbacks.set(o.slice(4),{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!l&&(this.callbacks.set(o,{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(G(this,jE,yF).call(this,t));if(!r)return;const{callback:s,options:{bubbles:i=!1,args:o=[],checker:l=null}}=r;l&&!l(e,t)||(s.bind(e,...o,t)(),i||Nr(t))}}jE=new WeakSet,yF=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const LE=class LE{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return roe(e),It(this,"_colors",e)}convert(e){const t=_b(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,s]of this._colors)if(s.every((i,o)=>i===t[o]))return LE._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?Ke.makeHexColor(...t):e}};Pe(LE,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let PT=LE;var Jg,eo,e0,wr,Xr,t0,Zo,n0,Qo,Gs,Sd,Nd,r0,Td,Nl,Jo,$f,py,gy,s0,xy,Tl,Pd,i0,Id,Pl,BE,Rd,o0,vy,kd,qf,a0,Md,yy,Lr,vn,Vc,Od,Dd,wy,l0,by,jd,Il,Wc,_y,Ey,ea,Be,K_,IT,wF,bF,Wx,_F,EF,CF,RT,AF,SF,NF,TF,ai,kc,PF,IF,kT,RF,Gx,MT;const _g=class _g{constructor(e,t,r,s,i,o,l,c,f,g,y,_,E,P,S,I){W(this,Be);W(this,Jg,new AbortController);W(this,eo,null);W(this,e0,null);W(this,wr,new Map);W(this,Xr,new Map);W(this,t0,null);W(this,Zo,null);W(this,n0,null);W(this,Qo,new uoe);W(this,Gs,null);W(this,Sd,null);W(this,Nd,null);W(this,r0,0);W(this,Td,new Set);W(this,Nl,null);W(this,Jo,null);W(this,$f,new Set);Pe(this,"_editorUndoBar",null);W(this,py,!1);W(this,gy,!1);W(this,s0,!1);W(this,xy,null);W(this,Tl,null);W(this,Pd,null);W(this,i0,null);W(this,Id,!1);W(this,Pl,null);W(this,BE,new coe);W(this,Rd,!1);W(this,o0,!1);W(this,vy,!1);W(this,kd,null);W(this,qf,null);W(this,a0,null);W(this,Md,null);W(this,yy,null);W(this,Lr,St.NONE);W(this,vn,new Set);W(this,Vc,null);W(this,Od,null);W(this,Dd,null);W(this,wy,null);W(this,l0,null);W(this,by,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});W(this,jd,[0,0]);W(this,Il,null);W(this,Wc,null);W(this,_y,null);W(this,Ey,null);W(this,ea,null);const N=this._signal=p(this,Jg).signal;B(this,Wc,e),B(this,_y,t),B(this,Ey,r),B(this,t0,s),B(this,Gs,i),B(this,Od,o),B(this,l0,c),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:N}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:N}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:N}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:N}),l._on("setpreference",this.onSetPreference.bind(this),{signal:N}),l._on("switchannotationeditorparams",k=>this.updateParams(k.type,k.value),{signal:N}),window.addEventListener("pointerdown",()=>{B(this,o0,!0)},{capture:!0,signal:N}),window.addEventListener("pointerup",()=>{B(this,o0,!1)},{capture:!0,signal:N}),G(this,Be,_F).call(this),G(this,Be,TF).call(this),G(this,Be,RT).call(this),B(this,Zo,c.annotationStorage),B(this,xy,c.filterFactory),B(this,Dd,f),B(this,i0,g||null),B(this,py,y),B(this,gy,_),B(this,s0,E),B(this,yy,P||null),this.viewParameters={realScale:Uh.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=I!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=_g.prototype,t=o=>p(o,Wc).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return It(this,"_keyboardManager",new Eb([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&p(o,Wc).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&p(o,Wc).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,r,s,i,o,l,c,f;(e=p(this,ea))==null||e.resolve(),B(this,ea,null),(t=p(this,Jg))==null||t.abort(),B(this,Jg,null),this._signal=null;for(const g of p(this,Xr).values())g.destroy();p(this,Xr).clear(),p(this,wr).clear(),p(this,$f).clear(),(r=p(this,Md))==null||r.clear(),B(this,eo,null),p(this,vn).clear(),p(this,Qo).destroy(),(s=p(this,t0))==null||s.destroy(),(i=p(this,Gs))==null||i.destroy(),(o=p(this,Od))==null||o.destroy(),(l=p(this,Pl))==null||l.hide(),B(this,Pl,null),(c=p(this,a0))==null||c.destroy(),B(this,a0,null),B(this,e0,null),p(this,Tl)&&(clearTimeout(p(this,Tl)),B(this,Tl,null)),p(this,Il)&&(clearTimeout(p(this,Il)),B(this,Il,null)),(f=this._editorUndoBar)==null||f.destroy(),B(this,l0,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return p(this,yy)}get useNewAltTextFlow(){return p(this,gy)}get useNewAltTextWhenAddingImage(){return p(this,s0)}get hcmFilter(){return It(this,"hcmFilter",p(this,Dd)?p(this,xy).addHCMFilter(p(this,Dd).foreground,p(this,Dd).background):"none")}get direction(){return It(this,"direction",getComputedStyle(p(this,Wc)).direction)}get _highlightColors(){return It(this,"_highlightColors",p(this,i0)?new Map(p(this,i0).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return It(this,"highlightColors",null);const t=new Map,r=!!p(this,Dd);for(const[s,i]of e){const o=s.endsWith("_HCM");if(r&&o){t.set(s.replace("_HCM",""),i);continue}!r&&!o&&t.set(s,i)}return It(this,"highlightColors",t)}get highlightColorNames(){return It(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),B(this,Nd,e)}setMainHighlightColorPicker(e){B(this,a0,e)}editAltText(e,t=!1){var r;(r=p(this,t0))==null||r.editAltText(this,e,t)}hasCommentManager(){return!!p(this,Gs)}editComment(e,t,r,s){var i;(i=p(this,Gs))==null||i.showDialog(this,e,t,r,s)}selectComment(e,t){const r=p(this,Xr).get(e),s=r==null?void 0:r.getEditorByUID(t);s==null||s.toggleComment(!0,!0)}updateComment(e){var t;(t=p(this,Gs))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=p(this,Gs))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=p(this,Gs))==null||t.removeComments([e.uid])}toggleComment(e,t,r=void 0){var s;(s=p(this,Gs))==null||s.toggleCommentPopup(e,t,r)}makeCommentColor(e,t){var r;return e&&((r=p(this,Gs))==null?void 0:r.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=p(this,Gs))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(p(this,Xr).has(e-1))return;const{resolve:t,promise:r}=Promise.withResolvers(),s=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",s),t())};this._eventBus.on("editorsrendered",s),await r}getSignature(e){var t;(t=p(this,Od))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return p(this,Od)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":B(this,s0,t);break}}onPageChanging({pageNumber:e}){B(this,r0,e-1)}focusMainContainer(){p(this,Wc).focus()}findParent(e,t){for(const r of p(this,Xr).values()){const{x:s,y:i,width:o,height:l}=r.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=i&&t<=i+l)return r}return null}disableUserSelect(e=!1){p(this,_y).classList.toggle("noUserSelect",e)}addShouldRescale(e){p(this,$f).add(e)}removeShouldRescale(e){p(this,$f).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Uh.PDF_TO_CSS_UNITS;for(const r of p(this,$f))r.onScaleChanging();(t=p(this,Nd))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:o,focusOffset:l}=r,c=r.toString(),g=G(this,Be,K_).call(this,r).closest(".textLayer"),y=this.getSelectionBoxes(g);if(!y)return;r.empty();const _=G(this,Be,IT).call(this,g),E=p(this,Lr)===St.NONE,P=()=>{const S=_==null?void 0:_.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:y,anchorNode:s,anchorOffset:i,focusNode:o,focusOffset:l,text:c});E&&this.showAllEditors("highlight",!0,!0),t&&(S==null||S.editComment())};if(E){this.switchToMode(St.HIGHLIGHT,P);return}P()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!p(this,Zo))return null;const t=`${Jv}${e}`,r=p(this,Zo).getRawValue(t);return r&&p(this,Zo).remove(t),r}addToAnnotationStorage(e){!e.isEmpty()&&p(this,Zo)&&!p(this,Zo).has(e.id)&&p(this,Zo).setValue(e.id,e)}a11yAlert(e,t=null){const r=p(this,Ey);r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,p(this,Id)&&(B(this,Id,!1),G(this,Be,Wx).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of p(this,vn))if(t.div.contains(e)){B(this,qf,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!p(this,qf))return;const[e,t]=p(this,qf);B(this,qf,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){G(this,Be,RT).call(this),this.setEditingState(!0)}removeEditListeners(){G(this,Be,AF).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of p(this,Jo))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of p(this,Jo))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=p(this,eo))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of p(this,vn)){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of p(this,Jo))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){bt(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const c of r){const f=await s.deserialize(c);if(!f)return;i.push(f)}const o=()=>{for(const c of i)G(this,Be,kT).call(this,c);G(this,Be,MT).call(this,i)},l=()=>{for(const c of i)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(i){bt(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),p(this,Lr)!==St.NONE&&!this.isEditorHandlingKeyboard&&_g._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,p(this,Id)&&(B(this,Id,!1),G(this,Be,Wx).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(G(this,Be,EF).call(this),G(this,Be,SF).call(this),G(this,Be,ai).call(this,{isEditing:p(this,Lr)!==St.NONE,isEmpty:G(this,Be,Gx).call(this),hasSomethingToUndo:p(this,Qo).hasSomethingToUndo(),hasSomethingToRedo:p(this,Qo).hasSomethingToRedo(),hasSelectedEditor:!1})):(G(this,Be,CF).call(this),G(this,Be,NF).call(this),G(this,Be,ai).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!p(this,Jo)){B(this,Jo,e);for(const t of p(this,Jo))G(this,Be,kc).call(this,t.defaultPropertiesToUpdate)}}getId(){return p(this,BE).id}get currentLayer(){return p(this,Xr).get(p(this,r0))}getLayer(e){return p(this,Xr).get(e)}get currentPageIndex(){return p(this,r0)}addLayer(e){p(this,Xr).set(e.pageIndex,e),p(this,Rd)?e.enable():e.disable()}removeLayer(e){p(this,Xr).delete(e.pageIndex)}async updateMode(e,t=null,r=!1,s=!1,i=!1){var o,l,c,f,g,y;if(p(this,Lr)!==e&&!(p(this,ea)&&(await p(this,ea).promise,!p(this,ea)))){if(B(this,ea,Promise.withResolvers()),(o=p(this,Nd))==null||o.commitOrRemove(),p(this,Lr)===St.POPUP&&((l=p(this,Gs))==null||l.hideSidebar()),(c=p(this,Gs))==null||c.destroyPopup(),B(this,Lr,e),e===St.NONE){this.setEditingState(!1),G(this,Be,IF).call(this);for(const _ of p(this,wr).values())_.hideStandaloneCommentButton();(f=this._editorUndoBar)==null||f.hide(),this.toggleComment(null),p(this,ea).resolve();return}for(const _ of p(this,wr).values())_.addStandaloneCommentButton();e===St.SIGNATURE&&await((g=p(this,Od))==null?void 0:g.loadSignatures()),this.setEditingState(!0),await G(this,Be,PF).call(this),this.unselectAll();for(const _ of p(this,Xr).values())_.updateMode(e);if(e===St.POPUP){p(this,e0)||B(this,e0,await p(this,l0).getAnnotationsByType(new Set(p(this,Jo).map(P=>P._editorType))));const _=new Set,E=[];for(const P of p(this,wr).values()){const{annotationElementId:S,hasComment:I,deleted:N}=P;S&&_.add(S),I&&!N&&E.push(P.getData())}for(const P of p(this,e0)){const{id:S,popupRef:I,contentsObj:N}=P;I&&(N!=null&&N.str)&&!_.has(S)&&!p(this,Td).has(S)&&E.push(P)}(y=p(this,Gs))==null||y.showSidebar(E)}if(!t){r&&this.addNewEditorFromKeyboard(),p(this,ea).resolve();return}for(const _ of p(this,wr).values())_.uid===t?(this.setSelected(_),i?_.editComment():s?_.enterInEditMode():_.focus()):_.unselect();p(this,ea).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==p(this,Lr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(p(this,Jo)){switch(e){case Kt.CREATE:this.currentLayer.addNewEditor(t);return;case Kt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(p(this,wy)||B(this,wy,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const r of p(this,vn))r.updateParams(e,t);else for(const r of p(this,Jo))r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var i;for(const o of p(this,wr).values())o.editorType===e&&o.show(t);(((i=p(this,wy))==null?void 0:i.get(Kt.HIGHLIGHT_SHOW_ALL))??!0)!==t&&G(this,Be,kc).call(this,[[Kt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(p(this,vy)!==e){B(this,vy,e);for(const t of p(this,Xr).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of p(this,wr).values())t.pageIndex===e&&(yield t)}getEditor(e){return p(this,wr).get(e)}addEditor(e){p(this,wr).set(e.id,e)}removeEditor(e){var t,r;e.div.contains(document.activeElement)&&(p(this,Tl)&&clearTimeout(p(this,Tl)),B(this,Tl,setTimeout(()=>{this.focusMainContainer(),B(this,Tl,null)},0))),p(this,wr).delete(e.id),e.annotationElementId&&((t=p(this,Md))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!p(this,Td).has(e.annotationElementId))&&((r=p(this,Zo))==null||r.remove(e.id))}addDeletedAnnotationElement(e){p(this,Td).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return p(this,Td).has(e)}removeDeletedAnnotationElement(e){p(this,Td).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){p(this,eo)!==e&&(B(this,eo,e),e&&G(this,Be,kc).call(this,e.propertiesToUpdate))}updateUI(e){p(this,Be,RF)===e&&G(this,Be,kc).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){G(this,Be,kc).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(p(this,vn).has(e)){p(this,vn).delete(e),e.unselect(),G(this,Be,ai).call(this,{hasSelectedEditor:this.hasSelection});return}p(this,vn).add(e),e.select(),G(this,Be,kc).call(this,e.propertiesToUpdate),G(this,Be,ai).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),(t=p(this,Nd))==null||t.commitOrRemove();for(const r of p(this,vn))r!==e&&r.unselect();p(this,vn).clear(),p(this,vn).add(e),e.select(),G(this,Be,kc).call(this,e.propertiesToUpdate),G(this,Be,ai).call(this,{hasSelectedEditor:!0})}isSelected(e){return p(this,vn).has(e)}get firstSelectedEditor(){return p(this,vn).values().next().value}unselect(e){e.unselect(),p(this,vn).delete(e),G(this,Be,ai).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return p(this,vn).size!==0}get isEnterHandled(){return p(this,vn).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;p(this,Qo).undo(),G(this,Be,ai).call(this,{hasSomethingToUndo:p(this,Qo).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:G(this,Be,Gx).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){p(this,Qo).redo(),G(this,Be,ai).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:p(this,Qo).hasSomethingToRedo(),isEmpty:G(this,Be,Gx).call(this)})}addCommands(e){p(this,Qo).add(e),G(this,Be,ai).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:G(this,Be,Gx).call(this)})}cleanUndoStack(e){p(this,Qo).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...p(this,vn)],r=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},s=()=>{for(const o of t)G(this,Be,kT).call(this,o)};this.addCommands({cmd:r,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=p(this,eo))==null||e.commitOrRemove()}hasSomethingToControl(){return p(this,eo)||this.hasSelection}selectAll(){for(const e of p(this,vn))e.commit();G(this,Be,MT).call(this,p(this,wr).values())}unselectAll(){var e;if(!(p(this,eo)&&(p(this,eo).commitOrRemove(),p(this,Lr)!==St.NONE))&&!((e=p(this,Nd))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of p(this,vn))t.unselect();p(this,vn).clear(),G(this,Be,ai).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;p(this,jd)[0]+=e,p(this,jd)[1]+=t;const[s,i]=p(this,jd),o=[...p(this,vn)],l=1e3;p(this,Il)&&clearTimeout(p(this,Il)),B(this,Il,setTimeout(()=>{B(this,Il,null),p(this,jd)[0]=p(this,jd)[1]=0,this.addCommands({cmd:()=>{for(const c of o)p(this,wr).has(c.id)&&(c.translateInPage(s,i),c.translationDone())},undo:()=>{for(const c of o)p(this,wr).has(c.id)&&(c.translateInPage(-s,-i),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),B(this,Nl,new Map);for(const e of p(this,vn))p(this,Nl).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!p(this,Nl))return!1;this.disableUserSelect(!1);const e=p(this,Nl);B(this,Nl,null);let t=!1;for(const[{x:s,y:i,pageIndex:o},l]of e)l.newX=s,l.newY=i,l.newPageIndex=o,t||(t=s!==l.savedX||i!==l.savedY||o!==l.savedPageIndex);if(!t)return!1;const r=(s,i,o,l)=>{if(p(this,wr).has(s.id)){const c=p(this,Xr).get(l);c?s._setParentAndPosition(c,i,o):(s.pageIndex=l,s.x=i,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:o,newPageIndex:l}]of e)r(s,i,o,l)},undo:()=>{for(const[s,{savedX:i,savedY:o,savedPageIndex:l}]of e)r(s,i,o,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(p(this,Nl))for(const r of p(this,Nl).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||p(this,vn).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return p(this,eo)===e}getActive(){return p(this,eo)}getMode(){return p(this,Lr)}isEditingMode(){return p(this,Lr)!==St.NONE}get imageManager(){return It(this,"imageManager",new TT)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let f=0,g=t.rangeCount;f<g;f++)if(!e.contains(t.getRangeAt(f).commonAncestorContainer))return null;const{x:r,y:s,width:i,height:o}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(f,g,y,_)=>({x:(g-s)/o,y:1-(f+y-r)/i,width:_/o,height:y/i});break;case"180":l=(f,g,y,_)=>({x:1-(f+y-r)/i,y:1-(g+_-s)/o,width:y/i,height:_/o});break;case"270":l=(f,g,y,_)=>({x:1-(g+_-s)/o,y:(f-r)/i,width:_/o,height:y/i});break;default:l=(f,g,y,_)=>({x:(f-r)/i,y:(g-s)/o,width:y/i,height:_/o});break}const c=[];for(let f=0,g=t.rangeCount;f<g;f++){const y=t.getRangeAt(f);if(!y.collapsed)for(const{x:_,y:E,width:P,height:S}of y.getClientRects())P===0||S===0||c.push(l(_,E,P,S))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(p(this,n0)||B(this,n0,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=p(this,n0))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=p(this,n0))==null?void 0:s.get(e.data.id);if(!t)return;const r=p(this,Zo).getRawValue(t);r&&(p(this,Lr)===St.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){var i;const s=(i=p(this,Md))==null?void 0:i.get(e);s&&(s.setCanvas(t,r),p(this,Md).delete(e))}addMissingCanvas(e,t){(p(this,Md)||B(this,Md,new Map)).set(e,t)}};Jg=new WeakMap,eo=new WeakMap,e0=new WeakMap,wr=new WeakMap,Xr=new WeakMap,t0=new WeakMap,Zo=new WeakMap,n0=new WeakMap,Qo=new WeakMap,Gs=new WeakMap,Sd=new WeakMap,Nd=new WeakMap,r0=new WeakMap,Td=new WeakMap,Nl=new WeakMap,Jo=new WeakMap,$f=new WeakMap,py=new WeakMap,gy=new WeakMap,s0=new WeakMap,xy=new WeakMap,Tl=new WeakMap,Pd=new WeakMap,i0=new WeakMap,Id=new WeakMap,Pl=new WeakMap,BE=new WeakMap,Rd=new WeakMap,o0=new WeakMap,vy=new WeakMap,kd=new WeakMap,qf=new WeakMap,a0=new WeakMap,Md=new WeakMap,yy=new WeakMap,Lr=new WeakMap,vn=new WeakMap,Vc=new WeakMap,Od=new WeakMap,Dd=new WeakMap,wy=new WeakMap,l0=new WeakMap,by=new WeakMap,jd=new WeakMap,Il=new WeakMap,Wc=new WeakMap,_y=new WeakMap,Ey=new WeakMap,ea=new WeakMap,Be=new WeakSet,K_=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},IT=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of p(this,Xr).values())if(r.hasTextLayer(e))return r;return null},wF=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=G(this,Be,K_).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(p(this,Pl)||B(this,Pl,new loe(this)),p(this,Pl).show(r,s,this.direction==="ltr"))},bF=function(){var i,o,l;const e=document.getSelection();if(!e||e.isCollapsed){p(this,Vc)&&((i=p(this,Pl))==null||i.hide(),B(this,Vc,null),G(this,Be,ai).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===p(this,Vc))return;const s=G(this,Be,K_).call(this,e).closest(".textLayer");if(!s){p(this,Vc)&&((o=p(this,Pl))==null||o.hide(),B(this,Vc,null),G(this,Be,ai).call(this,{hasSelectedText:!1}));return}if((l=p(this,Pl))==null||l.hide(),B(this,Vc,t),G(this,Be,ai).call(this,{hasSelectedText:!0}),!(p(this,Lr)!==St.HIGHLIGHT&&p(this,Lr)!==St.NONE)&&(p(this,Lr)===St.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),B(this,Id,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=p(this,Lr)===St.HIGHLIGHT?G(this,Be,IT).call(this,s):null;if(c==null||c.toggleDrawing(),p(this,o0)){const f=new AbortController,g=this.combinedSignal(f),y=_=>{_.type==="pointerup"&&_.button!==0||(f.abort(),c==null||c.toggleDrawing(!0),_.type==="pointerup"&&G(this,Be,Wx).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:g}),window.addEventListener("blur",y,{signal:g})}else c==null||c.toggleDrawing(!0),G(this,Be,Wx).call(this,"main_toolbar")}},Wx=function(e=""){p(this,Lr)===St.HIGHLIGHT?this.highlightSelection(e):p(this,py)&&G(this,Be,wF).call(this)},_F=function(){document.addEventListener("selectionchange",G(this,Be,bF).bind(this),{signal:this._signal})},EF=function(){if(p(this,Pd))return;B(this,Pd,new AbortController);const e=this.combinedSignal(p(this,Pd));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},CF=function(){var e;(e=p(this,Pd))==null||e.abort(),B(this,Pd,null)},RT=function(){if(p(this,kd))return;B(this,kd,new AbortController);const e=this.combinedSignal(p(this,kd));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},AF=function(){var e;(e=p(this,kd))==null||e.abort(),B(this,kd,null)},SF=function(){if(p(this,Sd))return;B(this,Sd,new AbortController);const e=this.combinedSignal(p(this,Sd));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},NF=function(){var e;(e=p(this,Sd))==null||e.abort(),B(this,Sd,null)},TF=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},ai=function(e){Object.entries(e).some(([r,s])=>p(this,by)[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(p(this,by),e)}),p(this,Lr)===St.HIGHLIGHT&&e.hasSelectedEditor===!1&&G(this,Be,kc).call(this,[[Kt.HIGHLIGHT_FREE,!0]]))},kc=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},PF=async function(){if(!p(this,Rd)){B(this,Rd,!0);const e=[];for(const t of p(this,Xr).values())e.push(t.enable());await Promise.all(e);for(const t of p(this,wr).values())t.enable()}},IF=function(){if(this.unselectAll(),p(this,Rd)){B(this,Rd,!1);for(const e of p(this,Xr).values())e.disable();for(const e of p(this,wr).values())e.disable()}},kT=function(e){const t=p(this,Xr).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},RF=function(){let e=null;for(e of p(this,vn));return e},Gx=function(){if(p(this,wr).size===0)return!0;if(p(this,wr).size===1)for(const e of p(this,wr).values())return e.isEmpty();return!1},MT=function(e){for(const t of p(this,vn))t.unselect();p(this,vn).clear();for(const t of e)t.isEmpty()||(p(this,vn).add(t),t.select());G(this,Be,ai).call(this,{hasSelectedEditor:this.hasSelection})},Pe(_g,"TRANSLATE_SMALL",1),Pe(_g,"TRANSLATE_BIG",10);let vp=_g;var ls,Rl,ja,c0,kl,to,u0,Ml,Ii,Gc,Xf,Ol,Ld,Qa,$x,Z_;const li=class li{constructor(e){W(this,Qa);W(this,ls,null);W(this,Rl,!1);W(this,ja,null);W(this,c0,null);W(this,kl,null);W(this,to,null);W(this,u0,!1);W(this,Ml,null);W(this,Ii,null);W(this,Gc,null);W(this,Xf,null);W(this,Ol,!1);B(this,Ii,e),B(this,Ol,e._uiManager.useNewAltTextFlow),p(li,Ld)||B(li,Ld,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){li._l10n??(li._l10n=e)}async render(){const e=B(this,ja,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=B(this,c0,document.createElement("span"));e.append(t),p(this,Ol)?(e.classList.add("new"),e.setAttribute("data-l10n-id",p(li,Ld).missing),t.setAttribute("data-l10n-id",p(li,Ld)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=p(this,Ii)._uiManager._signal;e.addEventListener("contextmenu",va,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),p(this,Ii)._uiManager.editAltText(p(this,Ii)),p(this,Ol)&&p(this,Ii)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:p(this,Qa,$x)}})};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(B(this,u0,!0),s(i))},{signal:r}),await G(this,Qa,Z_).call(this),e}finish(){p(this,ja)&&(p(this,ja).focus({focusVisible:p(this,u0)}),B(this,u0,!1))}isEmpty(){return p(this,Ol)?p(this,ls)===null:!p(this,ls)&&!p(this,Rl)}hasData(){return p(this,Ol)?p(this,ls)!==null||!!p(this,Gc):this.isEmpty()}get guessedText(){return p(this,Gc)}async setGuessedText(e){p(this,ls)===null&&(B(this,Gc,e),B(this,Xf,await li._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),G(this,Qa,Z_).call(this))}toggleAltTextBadge(e=!1){var t;if(!p(this,Ol)||p(this,ls)){(t=p(this,Ml))==null||t.remove(),B(this,Ml,null);return}if(!p(this,Ml)){const r=B(this,Ml,document.createElement("div"));r.className="noAltTextBadge",p(this,Ii).div.append(r)}p(this,Ml).classList.toggle("hidden",!e)}serialize(e){let t=p(this,ls);return!e&&p(this,Gc)===t&&(t=p(this,Xf)),{altText:t,decorative:p(this,Rl),guessedText:p(this,Gc),textWithDisclaimer:p(this,Xf)}}get data(){return{altText:p(this,ls),decorative:p(this,Rl)}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:s,cancel:i=!1}){r&&(B(this,Gc,r),B(this,Xf,s)),!(p(this,ls)===e&&p(this,Rl)===t)&&(i||(B(this,ls,e),B(this,Rl,t)),G(this,Qa,Z_).call(this))}toggle(e=!1){p(this,ja)&&(!e&&p(this,to)&&(clearTimeout(p(this,to)),B(this,to,null)),p(this,ja).disabled=!e)}shown(){p(this,Ii)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:p(this,Qa,$x)}})}destroy(){var e,t;(e=p(this,ja))==null||e.remove(),B(this,ja,null),B(this,c0,null),B(this,kl,null),(t=p(this,Ml))==null||t.remove(),B(this,Ml,null)}};ls=new WeakMap,Rl=new WeakMap,ja=new WeakMap,c0=new WeakMap,kl=new WeakMap,to=new WeakMap,u0=new WeakMap,Ml=new WeakMap,Ii=new WeakMap,Gc=new WeakMap,Xf=new WeakMap,Ol=new WeakMap,Ld=new WeakMap,Qa=new WeakSet,$x=function(){return p(this,ls)&&"added"||p(this,ls)===null&&this.guessedText&&"review"||"missing"},Z_=async function(){var s,i,o;const e=p(this,ja);if(!e)return;if(p(this,Ol)){if(e.classList.toggle("done",!!p(this,ls)),e.setAttribute("data-l10n-id",p(li,Ld)[p(this,Qa,$x)]),(s=p(this,c0))==null||s.setAttribute("data-l10n-id",p(li,Ld)[`${p(this,Qa,$x)}-label`]),!p(this,ls)){(i=p(this,kl))==null||i.remove();return}}else{if(!p(this,ls)&&!p(this,Rl)){e.classList.remove("done"),(o=p(this,kl))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=p(this,kl);if(!t){B(this,kl,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${p(this,Ii).id}`;const l=100,c=p(this,Ii)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(p(this,to)),B(this,to,null)},{once:!0}),e.addEventListener("mouseenter",()=>{B(this,to,setTimeout(()=>{B(this,to,null),p(this,kl).classList.add("show"),p(this,Ii)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),e.addEventListener("mouseleave",()=>{var f;p(this,to)&&(clearTimeout(p(this,to)),B(this,to,null)),(f=p(this,kl))==null||f.classList.remove("show")},{signal:c})}p(this,Rl)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=p(this,ls)),t.parentNode||e.append(t);const r=p(this,Ii).getElementForAltText();r==null||r.setAttribute("aria-describedby",t.id)},W(li,Ld,null),Pe(li,"_l10n",null);let vE=li;var _s,ta,Yf,Hn,Cy,Kf,La,Zf,Qf,Jf,Ay,OT;class y_{constructor(e){W(this,Ay);W(this,_s,null);W(this,ta,null);W(this,Yf,!1);W(this,Hn,null);W(this,Cy,null);W(this,Kf,null);W(this,La,null);W(this,Zf,null);W(this,Qf,!1);W(this,Jf,null);B(this,Hn,e)}renderForToolbar(){const e=B(this,ta,document.createElement("button"));return e.className="comment",G(this,Ay,OT).call(this,e,!1)}renderForStandalone(){const e=B(this,_s,document.createElement("button"));e.className="annotationCommentButton";const t=p(this,Hn).commentButtonPosition;if(t){const{style:r}=e;r.insetInlineEnd=`calc(${100*(p(this,Hn)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const s=p(this,Hn).commentButtonColor;s&&(r.backgroundColor=s)}return G(this,Ay,OT).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=p(this,_s)??p(this,ta))==null||e.focus()},0)}onUpdatedColor(){if(!p(this,_s))return;const e=p(this,Hn).commentButtonColor;e&&(p(this,_s).style.backgroundColor=e),p(this,Hn)._uiManager.updatePopupColor(p(this,Hn))}get commentButtonWidth(){var e;return(((e=p(this,_s))==null?void 0:e.getBoundingClientRect().width)??0)/p(this,Hn).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(p(this,Jf))return p(this,Jf);if(!p(this,_s))return null;const{x:e,y:t,height:r}=p(this,_s).getBoundingClientRect(),{x:s,y:i,width:o,height:l}=p(this,Hn).parent.boundingClientRect;return[(e-s)/o,(t+r-i)/l]}set commentPopupPositionInLayer(e){B(this,Jf,e)}hasDefaultPopupPosition(){return p(this,Jf)===null}removeStandaloneCommentButton(){var e;(e=p(this,_s))==null||e.remove(),B(this,_s,null)}removeToolbarCommentButton(){var e;(e=p(this,ta))==null||e.remove(),B(this,ta,null)}setCommentButtonStates({selected:e,hasPopup:t}){p(this,_s)&&(p(this,_s).classList.toggle("selected",e),p(this,_s).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let r,s;if(t)[r,s]=t;else{[r,s]=p(this,Hn).commentButtonPosition;const{width:g,height:y,x:_,y:E}=p(this,Hn);r=_+r*g,s=E+s*y}const i=p(this,Hn).parent.boundingClientRect,{x:o,y:l,width:c,height:f}=i;p(this,Hn)._uiManager.editComment(p(this,Hn),o+r*c,l+s*f,{...e,parentDimensions:i})}finish(){p(this,ta)&&(p(this,ta).focus({focusVisible:p(this,Yf)}),B(this,Yf,!1))}isDeleted(){return p(this,Qf)||p(this,La)===""}isEmpty(){return p(this,La)===null}hasBeenEdited(){return this.isDeleted()||p(this,La)!==p(this,Cy)}serialize(){return this.data}get data(){return{text:p(this,La),richText:p(this,Kf),date:p(this,Zf),deleted:this.isDeleted()}}set data(e){if(e!==p(this,La)&&B(this,Kf,null),e===null){B(this,La,""),B(this,Qf,!0);return}B(this,La,e),B(this,Zf,new Date),B(this,Qf,!1)}setInitialText(e,t=null){B(this,Cy,e),this.data=e,B(this,Zf,null),B(this,Kf,t)}shown(){}destroy(){var e,t;(e=p(this,ta))==null||e.remove(),B(this,ta,null),(t=p(this,_s))==null||t.remove(),B(this,_s,null),B(this,La,""),B(this,Kf,null),B(this,Zf,null),B(this,Hn,null),B(this,Yf,!1),B(this,Qf,!1)}}_s=new WeakMap,ta=new WeakMap,Yf=new WeakMap,Hn=new WeakMap,Cy=new WeakMap,Kf=new WeakMap,La=new WeakMap,Zf=new WeakMap,Qf=new WeakMap,Jf=new WeakMap,Ay=new WeakSet,OT=function(e,t){if(!p(this,Hn)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[p(this,Hn)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const r=p(this,Hn)._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return e;e.addEventListener("contextmenu",va,{signal:r}),t&&(e.addEventListener("focusin",i=>{p(this,Hn)._focusEventsAllowed=!1,Nr(i)},{capture:!0,signal:r}),e.addEventListener("focusout",i=>{p(this,Hn)._focusEventsAllowed=!0,Nr(i)},{capture:!0,signal:r})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),e===p(this,ta)?this.edit():p(this,Hn).toggleComment(!0)};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(B(this,Yf,!0),s(i))},{signal:r}),e.addEventListener("pointerenter",()=>{p(this,Hn).toggleComment(!1,!0)},{signal:r}),e.addEventListener("pointerleave",()=>{p(this,Hn).toggleComment(!1,!1)},{signal:r}),e};var d0,em,Sy,Ny,Ty,Py,Iy,$c,tm,qc,nm,Xc,zh,kF,MF,OF;const BR=class BR{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:s=null,onPinching:i=null,onPinchEnd:o=null,signal:l}){W(this,zh);W(this,d0);W(this,em,!1);W(this,Sy,null);W(this,Ny);W(this,Ty);W(this,Py);W(this,Iy);W(this,$c,null);W(this,tm);W(this,qc,null);W(this,nm);W(this,Xc,null);B(this,d0,e),B(this,Sy,r),B(this,Ny,t),B(this,Ty,s),B(this,Py,i),B(this,Iy,o),B(this,nm,new AbortController),B(this,tm,AbortSignal.any([l,p(this,nm).signal])),e.addEventListener("touchstart",G(this,zh,kF).bind(this),{passive:!1,signal:p(this,tm)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/cc.pixelRatio}destroy(){var e,t;(e=p(this,nm))==null||e.abort(),B(this,nm,null),(t=p(this,$c))==null||t.abort(),B(this,$c,null)}};d0=new WeakMap,em=new WeakMap,Sy=new WeakMap,Ny=new WeakMap,Ty=new WeakMap,Py=new WeakMap,Iy=new WeakMap,$c=new WeakMap,tm=new WeakMap,qc=new WeakMap,nm=new WeakMap,Xc=new WeakMap,zh=new WeakSet,kF=function(e){var s,i,o;if((s=p(this,Ny))!=null&&s.call(this))return;if(e.touches.length===1){if(p(this,$c))return;const l=B(this,$c,new AbortController),c=AbortSignal.any([p(this,tm),l.signal]),f=p(this,d0),g={capture:!0,signal:c,passive:!1},y=_=>{var E;_.pointerType==="touch"&&((E=p(this,$c))==null||E.abort(),B(this,$c,null))};f.addEventListener("pointerdown",_=>{_.pointerType==="touch"&&(Nr(_),y(_))},g),f.addEventListener("pointerup",y,g),f.addEventListener("pointercancel",y,g);return}if(!p(this,Xc)){B(this,Xc,new AbortController);const l=AbortSignal.any([p(this,tm),p(this,Xc).signal]),c=p(this,d0),f={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",G(this,zh,MF).bind(this),f);const g=G(this,zh,OF).bind(this);c.addEventListener("touchend",g,f),c.addEventListener("touchcancel",g,f),f.capture=!0,c.addEventListener("pointerdown",Nr,f),c.addEventListener("pointermove",Nr,f),c.addEventListener("pointercancel",Nr,f),c.addEventListener("pointerup",Nr,f),(i=p(this,Ty))==null||i.call(this)}if(Nr(e),e.touches.length!==2||(o=p(this,Sy))!=null&&o.call(this)){B(this,qc,null);return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),B(this,qc,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY})},MF=function(e){var D;if(!p(this,qc)||e.touches.length!==2)return;Nr(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:s,screenY:i}=t,{screenX:o,screenY:l}=r,c=p(this,qc),{touch0X:f,touch0Y:g,touch1X:y,touch1Y:_}=c,E=y-f,P=_-g,S=o-s,I=l-i,N=Math.hypot(S,I)||1,k=Math.hypot(E,P)||1;if(!p(this,em)&&Math.abs(k-N)<=BR.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=s,c.touch0Y=i,c.touch1X=o,c.touch1Y=l,!p(this,em)){B(this,em,!0);return}const T=[(s+o)/2,(i+l)/2];(D=p(this,Py))==null||D.call(this,T,k,N)},OF=function(e){var t;e.touches.length>=2||(p(this,Xc)&&(p(this,Xc).abort(),B(this,Xc,null),(t=p(this,Iy))==null||t.call(this)),p(this,qc)&&(Nr(e),B(this,qc,null),B(this,em,!1)))};let yE=BR;var rm,Ba,rr,Mn,Yc,h0,Bd,Ry,Es,sm,Kc,na,Fd,ky,im,no,My,om,Zc,Dl,f0,m0,ra,am,Oy,FE,ct,DT,Dy,jT,Q_,DF,jF,LT,J_,BT,LF,BF,FF,FT,UF,UT,zF,HF,VF,zT,qx;const At=class At{constructor(e){W(this,ct);W(this,rm,null);W(this,Ba,null);W(this,rr,null);W(this,Mn,null);W(this,Yc,null);W(this,h0,!1);W(this,Bd,null);W(this,Ry,"");W(this,Es,null);W(this,sm,null);W(this,Kc,null);W(this,na,null);W(this,Fd,null);W(this,ky,"");W(this,im,!1);W(this,no,null);W(this,My,!1);W(this,om,!1);W(this,Zc,!1);W(this,Dl,null);W(this,f0,0);W(this,m0,0);W(this,ra,null);W(this,am,null);Pe(this,"isSelected",!1);Pe(this,"_isCopy",!1);Pe(this,"_editToolbar",null);Pe(this,"_initialOptions",Object.create(null));Pe(this,"_initialData",null);Pe(this,"_isVisible",!0);Pe(this,"_uiManager",null);Pe(this,"_focusEventsAllowed",!0);W(this,Oy,!1);W(this,FE,At._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[i,o];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=At.prototype._resizeWithKeyboard,t=vp.TRANSLATE_SMALL,r=vp.TRANSLATE_BIG;return It(this,"_resizerKeyboardManager",new Eb([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],At.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return It(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new doe({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(At._l10n??(At._l10n=e),At._l10nResizer||(At._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),At._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);At._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){jn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return p(this,Oy)}set _isDraggable(e){var t;B(this,Oy,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=p(this,FE)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(G(this,ct,qx).call(this),(t=p(this,na))==null||t.remove(),B(this,na,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(p(this,im)?B(this,im,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,s){const[i,o]=this.parentDimensions;[r,s]=this.screenToPageTranslation(r,s),this.x=(e+r)/i,this.y=(t+s)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,s]=this.parentDimensions;this.setAt(e*r,t*s,this.width*r,this.height*s),this._onTranslated()}translate(e,t){G(this,ct,DT).call(this,this.parentDimensions,e,t)}translateInPage(e,t){p(this,no)||B(this,no,[this.x,this.y,this.width,this.height]),G(this,ct,DT).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){p(this,no)||B(this,no,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[s,i]}=this;if(this.x+=e/s,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:_}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,_)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,f]=this.getBaseTranslation();o+=c,l+=f;const{style:g}=r;g.left=`${(100*o).toFixed(2)}%`,g.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!p(this,no)&&(p(this,no)[0]!==this.x||p(this,no)[1]!==this.y)}get _hasBeenResized(){return!!p(this,no)&&(p(this,no)[2]!==this.width||p(this,no)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=At,s=r/e,i=r/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,s]}=this;let{x:i,y:o,width:l,height:c}=this;if(l*=r,c*=s,i*=r,o*=s,this._mustFixPosition)switch(e){case 0:i=mi(i,0,r-l),o=mi(o,0,s-c);break;case 90:i=mi(i,0,r-c),o=mi(o,l,s);break;case 180:i=mi(i,l,r),o=mi(o,c,s);break;case 270:i=mi(i,c,r),o=mi(o,0,s-l);break}this.x=i/=r,this.y=o/=s;const[f,g]=this.getBaseTranslation();i+=f,o+=g,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return G(r=At,Dy,jT).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return G(r=At,Dy,jT).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(){const{div:{style:e},width:t,height:r}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=p(this,rr))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||p(this,om))return this._editToolbar;this._editToolbar=new ST(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=p(this,rr))==null||t.destroy()}addContainer(e){var r;const t=(r=this._editToolbar)==null?void 0:r.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return p(this,rr)||(vE.initialize(At._l10n),B(this,rr,new vE(this)),p(this,rm)&&(p(this,rr).data=p(this,rm),B(this,rm,null))),p(this,rr)}get altTextData(){var e;return(e=p(this,rr))==null?void 0:e.data}set altTextData(e){p(this,rr)&&(p(this,rr).data=e)}get guessedAltText(){var e;return(e=p(this,rr))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=p(this,rr))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=p(this,rr))==null?void 0:t.serialize(e)}hasAltText(){return!!p(this,rr)&&!p(this,rr).isEmpty()}hasAltTextData(){var e;return((e=p(this,rr))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=p(this,Mn))==null||e.focusButton()}addCommentButton(){return this.canAddComment?p(this,Mn)||B(this,Mn,new y_(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(p(this,Yc)){this._uiManager.isEditingMode()&&p(this,Yc).classList.remove("hidden");return}this.hasComment&&(B(this,Yc,p(this,Mn).renderForStandalone()),this.div.append(p(this,Yc)))}}removeStandaloneCommentButton(){p(this,Mn).removeStandaloneCommentButton(),B(this,Yc,null)}hideStandaloneCommentButton(){var e;(e=p(this,Yc))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:r,deleted:s}}=p(this,Mn);return{text:t,richText:e,date:r,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){p(this,Mn)||B(this,Mn,new y_(this)),p(this,Mn).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:r}){if(!t||(p(this,Mn)||B(this,Mn,new y_(this)),p(this,Mn).setInitialText(e,r),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var e;return(e=p(this,Mn))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=p(this,Mn))==null?void 0:e.isDeleted()}get hasComment(){return!!p(this,Mn)&&!p(this,Mn).isEmpty()&&!p(this,Mn).isDeleted()}async editComment(e){p(this,Mn)||B(this,Mn,new y_(this)),p(this,Mn).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){p(this,Mn).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,s]=e.rect,[i]=this.pageDimensions,[o]=this.pageTranslation,l=o+i+1,c=s-100,f=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,c,f,s]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){p(this,Mn).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=p(this,h0)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),G(this,ct,UT).call(this);const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),vF(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(p(this,am)||B(this,am,new yE({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:G(this,ct,LF).bind(this),onPinching:G(this,ct,BF).bind(this),onPinchEnd:G(this,ct,FF).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=Os.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(B(this,im,!0),this._isDraggable){G(this,ct,UF).call(this,e);return}G(this,ct,FT).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){p(this,Dl)&&clearTimeout(p(this,Dl)),B(this,Dl,setTimeout(()=>{var e;B(this,Dl,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const s=this.parentScale,[i,o]=this.pageDimensions,[l,c]=this.pageTranslation,f=e/s,g=t/s,y=this.x*i,_=this.y*o,E=this.width*i,P=this.height*o;switch(r){case 0:return[y+f+l,o-_-g-P+c,y+f+E+l,o-_-g+c];case 90:return[y+g+l,o-_+f+c,y+g+P+l,o-_+f+E+c];case 180:return[y-f-E+l,o-_+g+c,y-f+l,o-_+g+P+c];case 270:return[y-g-P+l,o-_-f-E+c,y-g+l,o-_-f+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,s,i,o]=e,l=i-r,c=o-s;switch(this.rotation){case 0:return[r,t-o,l,c];case 90:return[r,t-s,c,l];case 180:return[i,t-s,l,c];case 270:return[i,t-o,c,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&At._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=p(this,Mn))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:r,opacity:s,deleted:i,richText:o},uid:l,pageIndex:c,creationDate:f,modificationDate:g}=this;return{id:l,pageIndex:c,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:f,modificationDate:r||g,popupRef:!i,color:t,opacity:s}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),B(this,om,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),B(this,om,!1),!0):!1}isInEditMode(){return p(this,om)}shouldGetKeyboardEvents(){return p(this,Zc)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:s}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&s>0&&e<i&&r>0}rebuild(){G(this,ct,UT).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var r;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((r=this._initialData)==null?void 0:r.popupRef)||""}}static async deserialize(e,t,r){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});s.rotation=e.rotation,B(s,rm,e.accessibilityData),s._isCopy=e.isCopy||!1;const[i,o]=s.pageDimensions,[l,c,f,g]=s.getRectInCurrentCoords(e.rect,o);return s.x=l/i,s.y=c/o,s.width=f/i,s.height=g/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t,r;if((e=p(this,Fd))==null||e.abort(),B(this,Fd,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),p(this,Dl)&&(clearTimeout(p(this,Dl)),B(this,Dl,null)),G(this,ct,qx).call(this),this.removeEditToolbar(),p(this,ra)){for(const s of p(this,ra).values())clearTimeout(s);B(this,ra,null)}this.parent=null,(t=p(this,am))==null||t.destroy(),B(this,am,null),(r=p(this,na))==null||r.remove(),B(this,na,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(G(this,ct,DF).call(this),p(this,Es).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[r,s,i,o]=this.getPDFRect();return[At._round(r+(i-r)*e),At._round(s+(o-s)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return p(this,Mn).commentPopupPositionInLayer}set commentPopupPosition(e){p(this,Mn).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return p(this,Mn).hasDefaultPopupPosition()}get commentButtonWidth(){return p(this,Mn).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;(t=p(this,Mn))==null||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),B(this,Kc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=p(this,Es).children;if(!p(this,Ba)){B(this,Ba,Array.from(t));const o=G(this,ct,zF).bind(this),l=G(this,ct,HF).bind(this),c=this._uiManager._signal;for(const f of p(this,Ba)){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",o,{signal:c}),f.addEventListener("blur",l,{signal:c}),f.addEventListener("focus",G(this,ct,VF).bind(this,g),{signal:c}),f.setAttribute("data-l10n-id",At._l10nResizer[g])}}const r=p(this,Ba)[0];let s=0;for(const o of t){if(o===r)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(p(this,Ba).length/4);if(i!==s){if(i<s)for(let l=0;l<s-i;l++)p(this,Es).append(p(this,Es).firstChild);else if(i>s)for(let l=0;l<i-s;l++)p(this,Es).firstChild.before(p(this,Es).lastChild);let o=0;for(const l of t){const f=p(this,Ba)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",At._l10nResizer[f])}}G(this,ct,zT).call(this,0),B(this,Zc,!0),p(this,Es).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){p(this,Zc)&&G(this,ct,BT).call(this,p(this,ky),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){G(this,ct,qx).call(this),this.div.focus()}select(){var e,t,r;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,i;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(r=p(this,rr))==null||r.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,r,s,i;this.isSelected&&(this.isSelected=!1,(e=p(this,Es))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(i=p(this,rr))==null||i.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return p(this,My)}set isEditing(e){B(this,My,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){p(this,ra)||B(this,ra,new Map);const{action:r}=e;let s=p(this,ra).get(r);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),p(this,ra).delete(r),p(this,ra).size===0&&B(this,ra,null)},At._telemetryTimeout),p(this,ra).set(r,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),B(this,h0,!1)}disable(){this.div&&(this.div.tabIndex=-1),B(this,h0,!0)}updateFakeAnnotationElement(e){if(!p(this,na)&&!this.deleted){B(this,na,e.addFakeAnnotation(this));return}if(this.deleted){p(this,na).remove(),B(this,na,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&p(this,na).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};rm=new WeakMap,Ba=new WeakMap,rr=new WeakMap,Mn=new WeakMap,Yc=new WeakMap,h0=new WeakMap,Bd=new WeakMap,Ry=new WeakMap,Es=new WeakMap,sm=new WeakMap,Kc=new WeakMap,na=new WeakMap,Fd=new WeakMap,ky=new WeakMap,im=new WeakMap,no=new WeakMap,My=new WeakMap,om=new WeakMap,Zc=new WeakMap,Dl=new WeakMap,f0=new WeakMap,m0=new WeakMap,ra=new WeakMap,am=new WeakMap,Oy=new WeakMap,FE=new WeakMap,ct=new WeakSet,DT=function([e,t],r,s){[r,s]=this.screenToPageTranslation(r,s),this.x+=r/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Dy=new WeakSet,jT=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Q_=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},DF=function(){if(p(this,Es))return;B(this,Es,document.createElement("div")),p(this,Es).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const s=document.createElement("div");p(this,Es).append(s),s.classList.add("resizer",r),s.setAttribute("data-resizer-name",r),s.addEventListener("pointerdown",G(this,ct,jF).bind(this,r),{signal:t}),s.addEventListener("contextmenu",va,{signal:t}),s.tabIndex=-1}this.div.prepend(p(this,Es))},jF=function(e,t){var g;t.preventDefault();const{isMac:r}=Os.platform;if(t.button!==0||t.ctrlKey&&r)return;(g=p(this,rr))==null||g.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,B(this,sm,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",G(this,ct,BT).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Nr,{passive:!1,signal:o}),window.addEventListener("contextmenu",va,{signal:o}),B(this,Kc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const f=()=>{var y;i.abort(),this.parent.togglePointerEvents(!0),(y=p(this,rr))==null||y.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=l,this.div.style.cursor=c,G(this,ct,J_).call(this)};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})},LT=function(e,t,r,s){this.width=r,this.height=s,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},J_=function(){if(!p(this,Kc))return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:s}=p(this,Kc);B(this,Kc,null);const i=this.x,o=this.y,l=this.width,c=this.height;i===e&&o===t&&l===r&&c===s||this.addCommands({cmd:G(this,ct,LT).bind(this,i,o,l,c),undo:G(this,ct,LT).bind(this,e,t,r,s),mustExec:!0})},BT=function(e,t){const[r,s]=this.parentDimensions,i=this.x,o=this.y,l=this.width,c=this.height,f=At.MIN_SIZE/r,g=At.MIN_SIZE/s,y=G(this,ct,Q_).call(this,this.rotation),_=(fe,oe)=>[y[0]*fe+y[2]*oe,y[1]*fe+y[3]*oe],E=G(this,ct,Q_).call(this,360-this.rotation),P=(fe,oe)=>[E[0]*fe+E[2]*oe,E[1]*fe+E[3]*oe];let S,I,N=!1,k=!1;switch(e){case"topLeft":N=!0,S=(fe,oe)=>[0,0],I=(fe,oe)=>[fe,oe];break;case"topMiddle":S=(fe,oe)=>[fe/2,0],I=(fe,oe)=>[fe/2,oe];break;case"topRight":N=!0,S=(fe,oe)=>[fe,0],I=(fe,oe)=>[0,oe];break;case"middleRight":k=!0,S=(fe,oe)=>[fe,oe/2],I=(fe,oe)=>[0,oe/2];break;case"bottomRight":N=!0,S=(fe,oe)=>[fe,oe],I=(fe,oe)=>[0,0];break;case"bottomMiddle":S=(fe,oe)=>[fe/2,oe],I=(fe,oe)=>[fe/2,0];break;case"bottomLeft":N=!0,S=(fe,oe)=>[0,oe],I=(fe,oe)=>[fe,0];break;case"middleLeft":k=!0,S=(fe,oe)=>[0,oe/2],I=(fe,oe)=>[fe,oe/2];break}const T=S(l,c),D=I(l,c);let U=_(...D);const z=At._round(i+U[0]),F=At._round(o+U[1]);let X=1,Z=1,ne,se;if(t.fromKeyboard)({deltaX:ne,deltaY:se}=t);else{const{screenX:fe,screenY:oe}=t,[Q,ue]=p(this,sm);[ne,se]=this.screenToPageTranslation(fe-Q,oe-ue),p(this,sm)[0]=fe,p(this,sm)[1]=oe}if([ne,se]=P(ne/r,se/s),N){const fe=Math.hypot(l,c);X=Z=Math.max(Math.min(Math.hypot(D[0]-T[0]-ne,D[1]-T[1]-se)/fe,1/l,1/c),f/l,g/c)}else k?X=mi(Math.abs(D[0]-T[0]-ne),f,1)/l:Z=mi(Math.abs(D[1]-T[1]-se),g,1)/c;const ee=At._round(l*X),ce=At._round(c*Z);U=_(...I(ee,ce));const de=z-U[0],re=F-U[1];p(this,no)||B(this,no,[this.x,this.y,this.width,this.height]),this.width=ee,this.height=ce,this.x=de,this.y=re,this.setDims(),this.fixAndSetPosition(),this._onResizing()},LF=function(){var e;B(this,Kc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=p(this,rr))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},BF=function(e,t,r){let i=.7*(r/t)+1-.7;if(i===1)return;const o=G(this,ct,Q_).call(this,this.rotation),l=(z,F)=>[o[0]*z+o[2]*F,o[1]*z+o[3]*F],[c,f]=this.parentDimensions,g=this.x,y=this.y,_=this.width,E=this.height,P=At.MIN_SIZE/c,S=At.MIN_SIZE/f;i=Math.max(Math.min(i,1/_,1/E),P/_,S/E);const I=At._round(_*i),N=At._round(E*i);if(I===_&&N===E)return;p(this,no)||B(this,no,[g,y,_,E]);const k=l(_/2,E/2),T=At._round(g+k[0]),D=At._round(y+k[1]),U=l(I/2,N/2);this.x=T-U[0],this.y=D-U[1],this.width=I,this.height=N,this.setDims(),this.fixAndSetPosition(),this._onResizing()},FF=function(){var e;(e=p(this,rr))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),G(this,ct,J_).call(this)},FT=function(e){const{isMac:t}=Os.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},UF=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const s=new AbortController,i=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:i},l=f=>{s.abort(),B(this,Bd,null),B(this,im,!1),this._uiManager.endDragSession()||G(this,ct,FT).call(this,f),r&&this._onStopDragging()};t&&(B(this,f0,e.clientX),B(this,m0,e.clientY),B(this,Bd,e.pointerId),B(this,Ry,e.pointerType),window.addEventListener("pointermove",f=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:y,pointerId:_}=f;if(_!==p(this,Bd)){Nr(f);return}const[E,P]=this.screenToPageTranslation(g-p(this,f0),y-p(this,m0));B(this,f0,g),B(this,m0,y),this._uiManager.dragSelectedEditors(E,P)},o),window.addEventListener("touchmove",Nr,o),window.addEventListener("pointerdown",f=>{f.pointerType===p(this,Ry)&&(p(this,am)||f.isPrimary)&&l(f),Nr(f)},o));const c=f=>{if(!p(this,Bd)||p(this,Bd)===f.pointerId){l(f);return}Nr(f)};window.addEventListener("pointerup",c,{signal:i}),window.addEventListener("blur",c,{signal:i})},UT=function(){if(p(this,Fd)||!this.div)return;B(this,Fd,new AbortController);const e=this._uiManager.combinedSignal(p(this,Fd));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},zF=function(e){At._resizerKeyboardManager.exec(this,e)},HF=function(e){var t;p(this,Zc)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==p(this,Es)&&G(this,ct,qx).call(this)},VF=function(e){B(this,ky,p(this,Zc)?e:"")},zT=function(e){if(p(this,Ba))for(const t of p(this,Ba))t.tabIndex=e},qx=function(){B(this,Zc,!1),G(this,ct,zT).call(this,-1),G(this,ct,J_).call(this)},W(At,Dy),Pe(At,"_l10n",null),Pe(At,"_l10nResizer",null),Pe(At,"_borderLineWidth",-1),Pe(At,"_colorManager",new PT),Pe(At,"_zIndex",1),Pe(At,"_telemetryTimeout",1e3);let Wn=At;class doe extends Wn{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const dO=3285377520,$o=4294901760,bl=65535;class WF{constructor(e){this.h1=e?e&4294967295:dO,this.h2=e?e&4294967295:dO}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let S=0,I=e.length;S<I;S++){const N=e.charCodeAt(S);N<=255?t[r++]=N:(t[r++]=N>>>8,t[r++]=N&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=r>>2,i=r-s*4,o=new Uint32Array(t.buffer,0,s);let l=0,c=0,f=this.h1,g=this.h2;const y=3432918353,_=461845907,E=y&bl,P=_&bl;for(let S=0;S<s;S++)S&1?(l=o[S],l=l*y&$o|l*E&bl,l=l<<15|l>>>17,l=l*_&$o|l*P&bl,f^=l,f=f<<13|f>>>19,f=f*5+3864292196):(c=o[S],c=c*y&$o|c*E&bl,c=c<<15|c>>>17,c=c*_&$o|c*P&bl,g^=c,g=g<<13|g>>>19,g=g*5+3864292196);switch(l=0,i){case 3:l^=t[s*4+2]<<16;case 2:l^=t[s*4+1]<<8;case 1:l^=t[s*4],l=l*y&$o|l*E&bl,l=l<<15|l>>>17,l=l*_&$o|l*P&bl,s&1?f^=l:g^=l}this.h1=f,this.h2=g}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&$o|e*36045&bl,t=t*4283543511&$o|((t<<16|e>>>16)*2950163797&$o)>>>16,e^=t>>>1,e=e*444984403&$o|e*60499&bl,t=t*3301882366&$o|((t<<16|e>>>16)*3120437893&$o)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const HT=Object.freeze({map:null,hash:"",transfer:void 0});var lm,cm,Qc,Cs,UE,GF;class wR{constructor(){W(this,UE);W(this,lm,!1);W(this,cm,null);W(this,Qc,null);W(this,Cs,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=p(this,Cs).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return p(this,Cs).get(e)}remove(e){const t=p(this,Cs).get(e);if(t!==void 0&&(t instanceof Wn&&p(this,Qc).delete(t.annotationElementId),p(this,Cs).delete(e),p(this,Cs).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const r of p(this,Cs).values())if(r instanceof Wn)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=p(this,Cs).get(e);let s=!1;if(r!==void 0)for(const[i,o]of Object.entries(t))r[i]!==o&&(s=!0,r[i]=o);else s=!0,p(this,Cs).set(e,t);s&&G(this,UE,GF).call(this),t instanceof Wn&&((p(this,Qc)||B(this,Qc,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return p(this,Cs).has(e)}get size(){return p(this,Cs).size}resetModified(){p(this,lm)&&(B(this,lm,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new $F(this)}get serializable(){if(p(this,Cs).size===0)return HT;const e=new Map,t=new WF,r=[],s=Object.create(null);let i=!1;for(const[o,l]of p(this,Cs)){const c=l instanceof Wn?l.serialize(!1,s):l;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:HT}get editorStats(){let e=null;const t=new Map;let r=0,s=0;for(const i of p(this,Cs).values()){if(!(i instanceof Wn)){i.popup&&(i.popup.deleted?s+=1:r+=1);continue}i.isCommentDeleted?s+=1:i.hasEditedComment&&(r+=1);const o=i.telemetryFinalData;if(!o)continue;const{type:l}=o;t.has(l)||t.set(l,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const c=e[l]||(e[l]=new Map);for(const[f,g]of Object.entries(o)){if(f==="type")continue;let y=c.get(f);y||(y=new Map,c.set(f,y));const _=y.get(g)??0;y.set(g,_+1)}}if((s>0||r>0)&&(e||(e=Object.create(null)),e.comments={deleted:s,edited:r}),!e)return null;for(const[i,o]of t)e[i]=o.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){B(this,cm,null)}updateEditor(e,t){var s;const r=(s=p(this,Qc))==null?void 0:s.get(e);return r?(r.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=p(this,Qc))==null?void 0:t.get(e))||null}get modifiedIds(){if(p(this,cm))return p(this,cm);const e=[];if(p(this,Qc))for(const t of p(this,Qc).values())t.serialize()&&e.push(t.annotationElementId);return B(this,cm,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return p(this,Cs).entries()}}lm=new WeakMap,cm=new WeakMap,Qc=new WeakMap,Cs=new WeakMap,UE=new WeakSet,GF=function(){p(this,lm)||(B(this,lm,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var jy;class $F extends wR{constructor(t){super();W(this,jy);const{map:r,hash:s,transfer:i}=t.serializable,o=structuredClone(r,i?{transfer:i}:null);B(this,jy,{map:o,hash:s,transfer:i})}get print(){jn("Should not call PrintAnnotationStorage.print")}get serializable(){return p(this,jy)}get modifiedIds(){return It(this,"modifiedIds",{ids:new Set,hash:""})}}jy=new WeakMap;var p0;class hoe{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){W(this,p0,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),p(this,p0).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||p(this,p0).has(e.loadedName))){if(Zt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:o}=e,l=new FontFace(s,i,o);this.addNativeFontFace(l);try{await l.load(),p(this,p0).add(s),r==null||r(e)}catch{bt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}jn("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(s){throw bt(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const s=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return It(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return It(this,"isSyncFontLoadingSupported",fi||Os.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Zt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,s={done:!1,complete:t,callback:e};return r.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return It(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(D,U){return D.charCodeAt(U)<<24|D.charCodeAt(U+1)<<16|D.charCodeAt(U+2)<<8|D.charCodeAt(U+3)&255}function s(D,U,z,F){const X=D.substring(0,U),Z=D.substring(U+z);return X+F+Z}let i,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let f=0;function g(D,U){if(++f>30){bt("Load test font never loaded."),U();return}if(c.font="30px "+D,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){U();return}setTimeout(g.bind(null,D,U))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let _=this._loadTestFont;_=s(_,976,y.length,y);const P=16,S=1482184792;let I=r(_,P);for(i=0,o=y.length-3;i<o;i+=4)I=I-S+r(y,i)|0;i<y.length&&(I=I-S+r(y+"XXX",i)|0),_=s(_,P,4,$ie(I));const N=`url(data:font/opentype;base64,${btoa(_)});`,k=`@font-face {font-family:"${y}";src:${N}}`;this.insertRule(k);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const D of[e.loadedName,y]){const U=this._document.createElement("span");U.textContent="Hi",U.style.fontFamily=D,T.append(U)}this._document.body.append(T),g(y,()=>{T.remove(),t.complete()})}}p0=new WeakMap;var Cn;class foe{constructor(e,t=null,r,s){W(this,Cn);this.compiledGlyphs=Object.create(null),B(this,Cn,e),this._inspectFont=t,r&&Object.assign(this,r),s&&(this.charProcOperatorList=s)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${cF(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let s;try{s=e.get(r)}catch(o){bt(`getPathGenerator - ignoring character: "${o}".`)}const i=hF(s);return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=i}get black(){return p(this,Cn).black}get bold(){return p(this,Cn).bold}get disableFontFace(){return p(this,Cn).disableFontFace??!1}get fontExtraProperties(){return p(this,Cn).fontExtraProperties??!1}get isInvalidPDFjsFont(){return p(this,Cn).isInvalidPDFjsFont}get isType3Font(){return p(this,Cn).isType3Font}get italic(){return p(this,Cn).italic}get missingFile(){return p(this,Cn).missingFile}get remeasure(){return p(this,Cn).remeasure}get vertical(){return p(this,Cn).vertical}get ascent(){return p(this,Cn).ascent}get defaultWidth(){return p(this,Cn).defaultWidth}get descent(){return p(this,Cn).descent}get bbox(){return p(this,Cn).bbox}get fontMatrix(){return p(this,Cn).fontMatrix}get fallbackName(){return p(this,Cn).fallbackName}get loadedName(){return p(this,Cn).loadedName}get mimetype(){return p(this,Cn).mimetype}get name(){return p(this,Cn).name}get data(){return p(this,Cn).data}clearData(){p(this,Cn).clearData()}get cssFontInfo(){return p(this,Cn).cssFontInfo}get systemFontInfo(){return p(this,Cn).systemFontInfo}get defaultVMetrics(){return p(this,Cn).defaultVMetrics}}Cn=new WeakMap;var g0,x0,Ly,v0,e2;const Eg=class Eg{constructor(e){W(this,v0);W(this,g0);W(this,x0);W(this,Ly);B(this,g0,e),B(this,x0,new DataView(p(this,g0))),B(this,Ly,new TextDecoder)}static write(e){const t=new TextEncoder,r={};let s=0;for(const f of Eg.strings){const g=t.encode(e[f]);r[f]=g,s+=4+g.length}const i=new ArrayBuffer(s),o=new Uint8Array(i),l=new DataView(i);let c=0;for(const f of Eg.strings){const g=r[f],y=g.length;l.setUint32(c,y),o.set(g,c+4),c+=4+y}return Zt(c===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return G(this,v0,e2).call(this,0)}get fontWeight(){return G(this,v0,e2).call(this,1)}get italicAngle(){return G(this,v0,e2).call(this,2)}};g0=new WeakMap,x0=new WeakMap,Ly=new WeakMap,v0=new WeakSet,e2=function(e){Zt(e<Eg.strings.length,"Invalid string index");let t=0;for(let s=0;s<e;s++)t+=p(this,x0).getUint32(t)+4;const r=p(this,x0).getUint32(t);return p(this,Ly).decode(new Uint8Array(p(this,g0),t+4,r))},Pe(Eg,"strings",["fontFamily","fontWeight","italicAngle"]);let wE=Eg;var Ud,jl,um,dm,Xx;const Cg=class Cg{constructor(e){W(this,dm);W(this,Ud);W(this,jl);W(this,um);B(this,Ud,e),B(this,jl,new DataView(p(this,Ud))),B(this,um,new TextDecoder)}static write(e){const t=new TextEncoder,r={};let s=0;for(const _ of Cg.strings){const E=t.encode(e[_]);r[_]=E,s+=4+E.length}s+=4;let i,o,l=1+s;e.style&&(i=t.encode(e.style.style),o=t.encode(e.style.weight),l+=4+i.length+4+o.length);const c=new ArrayBuffer(l),f=new Uint8Array(c),g=new DataView(c);let y=0;g.setUint8(y++,e.guessFallback?1:0),g.setUint32(y,0),y+=4,s=0;for(const _ of Cg.strings){const E=r[_],P=E.length;s+=4+P,g.setUint32(y,P),f.set(E,y+4),y+=4+P}return g.setUint32(y-s-4,s),e.style&&(g.setUint32(y,i.length),f.set(i,y+4),y+=4+i.length,g.setUint32(y,o.length),f.set(o,y+4),y+=4+o.length),Zt(y<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(y)}get guessFallback(){return p(this,jl).getUint8(0)!==0}get css(){return G(this,dm,Xx).call(this,0)}get loadedName(){return G(this,dm,Xx).call(this,1)}get baseFontName(){return G(this,dm,Xx).call(this,2)}get src(){return G(this,dm,Xx).call(this,3)}get style(){let e=1;e+=4+p(this,jl).getUint32(e);const t=p(this,jl).getUint32(e),r=p(this,um).decode(new Uint8Array(p(this,Ud),e+4,t));e+=4+t;const s=p(this,jl).getUint32(e),i=p(this,um).decode(new Uint8Array(p(this,Ud),e+4,s));return{style:r,weight:i}}};Ud=new WeakMap,jl=new WeakMap,um=new WeakMap,dm=new WeakSet,Xx=function(e){Zt(e<Cg.strings.length,"Invalid string index");let t=5;for(let s=0;s<e;s++)t+=p(this,jl).getUint32(t)+4;const r=p(this,jl).getUint32(t);return p(this,um).decode(new Uint8Array(p(this,Ud),t+4,r))},Pe(Cg,"strings",["css","loadedName","baseFontName","src"]);let bE=Cg;var y0,w0,b0,_0,ro,Ll,By,An,Ar,Ta,t2,Yx;const Tt=class Tt{constructor({data:e,extra:t}){W(this,Ar);W(this,Ll);W(this,By);W(this,An);B(this,Ll,e),B(this,By,new TextDecoder),B(this,An,new DataView(p(this,Ll))),t&&Object.assign(this,t)}get black(){return G(this,Ar,Ta).call(this,0)}get bold(){return G(this,Ar,Ta).call(this,1)}get disableFontFace(){return G(this,Ar,Ta).call(this,2)}get fontExtraProperties(){return G(this,Ar,Ta).call(this,3)}get isInvalidPDFjsFont(){return G(this,Ar,Ta).call(this,4)}get isType3Font(){return G(this,Ar,Ta).call(this,5)}get italic(){return G(this,Ar,Ta).call(this,6)}get missingFile(){return G(this,Ar,Ta).call(this,7)}get remeasure(){return G(this,Ar,Ta).call(this,8)}get vertical(){return G(this,Ar,Ta).call(this,9)}get ascent(){return G(this,Ar,t2).call(this,0)}get defaultWidth(){return G(this,Ar,t2).call(this,1)}get descent(){return G(this,Ar,t2).call(this,2)}get bbox(){let e=p(Tt,w0);if(p(this,An).getUint8(e)===0)return;e+=1;const r=[];for(let s=0;s<4;s++)r.push(p(this,An).getInt16(e,!0)),e+=2;return r}get fontMatrix(){let e=p(Tt,b0);if(p(this,An).getUint8(e)===0)return;e+=1;const r=[];for(let s=0;s<6;s++)r.push(p(this,An).getFloat64(e,!0)),e+=8;return r}get defaultVMetrics(){let e=p(Tt,_0);if(p(this,An).getUint8(e)===0)return;e+=1;const r=[];for(let s=0;s<3;s++)r.push(p(this,An).getInt16(e,!0)),e+=2;return r}get fallbackName(){return G(this,Ar,Yx).call(this,0)}get loadedName(){return G(this,Ar,Yx).call(this,1)}get mimetype(){return G(this,Ar,Yx).call(this,2)}get name(){return G(this,Ar,Yx).call(this,3)}get data(){let e=p(Tt,ro);const t=p(this,An).getUint32(e);e+=4+t;const r=p(this,An).getUint32(e);e+=4+r;const s=p(this,An).getUint32(e);e+=4+s;const i=p(this,An).getUint32(e);if(i!==0)return new Uint8Array(p(this,Ll),e+4,i)}clearData(){let e=p(Tt,ro);const t=p(this,An).getUint32(e);e+=4+t;const r=p(this,An).getUint32(e);e+=4+r;const s=p(this,An).getUint32(e);e+=4+s;const i=p(this,An).getUint32(e);new Uint8Array(p(this,Ll),e+4,i).fill(0),p(this,An).setUint32(e,0)}get cssFontInfo(){let e=p(Tt,ro);const t=p(this,An).getUint32(e);e+=4+t;const r=p(this,An).getUint32(e);e+=4+r;const s=p(this,An).getUint32(e);if(s===0)return null;const i=new Uint8Array(s);return i.set(new Uint8Array(p(this,Ll),e+4,s)),new wE(i.buffer)}get systemFontInfo(){let e=p(Tt,ro);const t=p(this,An).getUint32(e);e+=4+t;const r=p(this,An).getUint32(e);if(r===0)return null;const s=new Uint8Array(r);return s.set(new Uint8Array(p(this,Ll),e+4,r)),new bE(s.buffer)}static write(e){const t=e.systemFontInfo?bE.write(e.systemFontInfo):null,r=e.cssFontInfo?wE.write(e.cssFontInfo):null,s=new TextEncoder,i={};let o=0;for(const S of Tt.strings)i[S]=s.encode(e[S]),o+=4+i[S].length;const l=p(Tt,ro)+4+o+4+(t?t.byteLength:0)+4+(r?r.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(l),f=new Uint8Array(c),g=new DataView(c);let y=0;const _=Tt.bools.length;let E=0,P=0;for(let S=0;S<_;S++){const I=e[Tt.bools[S]];E|=(I===void 0?0:I?2:1)<<P,P+=2,(P===8||S===_-1)&&(g.setUint8(y++,E),E=0,P=0)}Zt(y===p(Tt,y0),"FontInfo.write: Boolean properties offset mismatch");for(const S of Tt.numbers)g.setFloat64(y,e[S]),y+=8;if(Zt(y===p(Tt,w0),"FontInfo.write: Number properties offset mismatch"),e.bbox){g.setUint8(y++,4);for(const S of e.bbox)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=2*4;if(Zt(y===p(Tt,b0),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){g.setUint8(y++,6);for(const S of e.fontMatrix)g.setFloat64(y,S,!0),y+=8}else g.setUint8(y++,0),y+=8*6;if(Zt(y===p(Tt,_0),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){g.setUint8(y++,1);for(const S of e.defaultVMetrics)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=3*2;Zt(y===p(Tt,ro),"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(p(Tt,ro),0),y+=4;for(const S of Tt.strings){const I=i[S],N=I.length;g.setUint32(y,N),f.set(I,y+4),y+=4+N}if(g.setUint32(p(Tt,ro),y-p(Tt,ro)-4),!t)g.setUint32(y,0),y+=4;else{const S=t.byteLength;g.setUint32(y,S),Zt(y+4+S<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(t),y+4),y+=4+S}if(!r)g.setUint32(y,0),y+=4;else{const S=r.byteLength;g.setUint32(y,S),Zt(y+4+S<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(r),y+4),y+=4+S}return e.data===void 0?(g.setUint32(y,0),y+=4):(g.setUint32(y,e.data.length),f.set(e.data,y+4),y+=4+e.data.length),Zt(y<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(y)}};y0=new WeakMap,w0=new WeakMap,b0=new WeakMap,_0=new WeakMap,ro=new WeakMap,Ll=new WeakMap,By=new WeakMap,An=new WeakMap,Ar=new WeakSet,Ta=function(e){Zt(e<Tt.bools.length,"Invalid boolean index");const t=Math.floor(e/4),r=e*2%8,s=p(this,An).getUint8(t)>>r&3;return s===0?void 0:s===2},t2=function(e){return Zt(e<Tt.numbers.length,"Invalid number index"),p(this,An).getFloat64(p(Tt,y0)+e*8)},Yx=function(e){Zt(e<Tt.strings.length,"Invalid string index");let t=p(Tt,ro)+4;for(let i=0;i<e;i++)t+=p(this,An).getUint32(t)+4;const r=p(this,An).getUint32(t),s=new Uint8Array(r);return s.set(new Uint8Array(p(this,Ll),t+4,r)),p(this,By).decode(s)},Pe(Tt,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Pe(Tt,"numbers",["ascent","defaultWidth","descent"]),Pe(Tt,"strings",["fallbackName","loadedName","mimetype","name"]),W(Tt,y0,Math.ceil(Tt.bools.length*2/8)),W(Tt,w0,p(Tt,y0)+Tt.numbers.length*8),W(Tt,b0,p(Tt,w0)+1+2*4),W(Tt,_0,p(Tt,b0)+1+8*6),W(Tt,ro,p(Tt,_0)+1+2*3);let VT=Tt;var Fy,Uy,zy,Hy,Vy,Wy,Gy,$y;const zn=class zn{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,r=null,s=[],i=[],o=[],l=[],c=null,f=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,r=e[2],o=e[3],t===1?s.push(...e[4],...e[5]):s.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,c=e[1],s=e[2],i=e[3],l=e[4]||[],r=e[6],f=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const g=Math.floor(s.length/2),y=Math.floor(i.length/3),_=o.length,E=l.length;let P=0;for(const U of l)P+=1,P=Math.ceil(P/4)*4,P+=4+U.coords.length*4,P+=4+U.colors.length*4,U.verticesPerRow!==void 0&&(P+=4);const S=20+g*8+y*3+_*8+(r?16:0)+(f?3:0)+P,I=new ArrayBuffer(S),N=new DataView(I),k=new Uint8Array(I);N.setUint8(p(zn,Fy),t),N.setUint8(p(zn,Uy),r?1:0),N.setUint8(p(zn,zy),f?1:0),N.setUint8(p(zn,Hy),c),N.setUint32(p(zn,Vy),g,!0),N.setUint32(p(zn,Wy),y,!0),N.setUint32(p(zn,Gy),_,!0),N.setUint32(p(zn,$y),E,!0);let T=20;new Float32Array(I,T,g*2).set(s),T+=g*8,k.set(i,T),T+=y*3;for(const[U,z]of o)N.setFloat32(T,U,!0),T+=4,N.setUint32(T,parseInt(z.slice(1),16),!0),T+=4;if(r)for(const U of r)N.setFloat32(T,U,!0),T+=4;f&&(k.set(f,T),T+=3);for(let U=0;U<l.length;U++){const z=l[U];N.setUint8(T,z.type),T+=1,T=Math.ceil(T/4)*4,N.setUint32(T,z.coords.length,!0),T+=4,new Int32Array(I,T,z.coords.length).set(z.coords),T+=z.coords.length*4,N.setUint32(T,z.colors.length,!0),T+=4,new Int32Array(I,T,z.colors.length).set(z.colors),T+=z.colors.length*4,z.verticesPerRow!==void 0&&(N.setUint32(T,z.verticesPerRow,!0),T+=4)}return I}getIR(){const e=this.view,t=this.data[p(zn,Fy)],r=!!this.data[p(zn,Uy)],s=!!this.data[p(zn,zy)],i=e.getUint32(p(zn,Vy),!0),o=e.getUint32(p(zn,Wy),!0),l=e.getUint32(p(zn,Gy),!0),c=e.getUint32(p(zn,$y),!0);let f=20;const g=new Float32Array(this.buffer,f,i*2);f+=i*8;const y=new Uint8Array(this.buffer,f,o*3);f+=o*3;const _=[];for(let I=0;I<l;++I){const N=e.getFloat32(f,!0);f+=4;const k=e.getUint32(f,!0);f+=4,_.push([N,`#${k.toString(16).padStart(6,"0")}`])}let E=null;if(r){E=[];for(let I=0;I<4;++I)E.push(e.getFloat32(f,!0)),f+=4}let P=null;s&&(P=new Uint8Array(this.buffer,f,3),f+=3);const S=[];for(let I=0;I<c;++I){const N=e.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const k=e.getUint32(f,!0);f+=4;const T=new Int32Array(this.buffer,f,k);f+=k*4;const D=e.getUint32(f,!0);f+=4;const U=new Int32Array(this.buffer,f,D);f+=D*4;const z={type:N,coords:T,colors:U};N===bT.LATTICE&&(z.verticesPerRow=e.getUint32(f,!0),f+=4),S.push(z)}if(t===1)return["RadialAxial","axial",E,_,Array.from(g.slice(0,2)),Array.from(g.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",E,_,[g[0],g[1]],[g[3],g[4]],g[2],g[5]];if(t===3){const I=this.data[p(zn,Hy)];let N=null;if(g.length>0){let k=g[0],T=g[0],D=g[1],U=g[1];for(let z=0;z<g.length;z+=2){const F=g[z],X=g[z+1];k=k>F?F:k,D=D>X?X:D,T=T<F?F:T,U=U<X?X:U}N=[k,D,T,U]}return["Mesh",I,g,y,S,N,E,P]}throw new Error(`Unsupported pattern kind: ${t}`)}};Fy=new WeakMap,Uy=new WeakMap,zy=new WeakMap,Hy=new WeakMap,Vy=new WeakMap,Wy=new WeakMap,Gy=new WeakMap,$y=new WeakMap,W(zn,Fy,0),W(zn,Uy,1),W(zn,zy,2),W(zn,Hy,3),W(zn,Vy,4),W(zn,Wy,8),W(zn,Gy,12),W(zn,$y,16);let WT=zn;function moe(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(fi)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function poe(n){if(fi&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return yb(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function w_(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const GT=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,goe=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",xoe=Zie.bind(null,GT,goe);var Jc,zE;class voe{constructor(){W(this,Jc,new Map);W(this,zE,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};p(this,zE).then(()=>{for(const[s]of p(this,Jc))s.call(this,r)})}addEventListener(e,t,r=null){let s=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:i}=r;if(i.aborted){bt("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);s=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}p(this,Jc).set(t,s)}removeEventListener(e,t){const r=p(this,Jc).get(t);r==null||r(),p(this,Jc).delete(t)}terminate(){for(const[,e]of p(this,Jc))e==null||e();p(this,Jc).clear()}}Jc=new WeakMap,zE=new WeakMap;const b_={DATA:1,ERROR:2},Dr={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function hO(){}function Ti(n){if(n instanceof Fh||n instanceof _T||n instanceof sO||n instanceof gE||n instanceof CS)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||jn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Fh(n.message);case"InvalidPDFException":return new _T(n.message);case"PasswordException":return new sO(n.message,n.code);case"ResponseException":return new gE(n.message,n.status,n.missing);case"UnknownErrorException":return new CS(n.message,n.details)}return new CS(n.message,n.toString())}var E0,pa,qF,XF,YF,n2;class Kx{constructor(e,t,r){W(this,pa);W(this,E0,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",G(this,pa,qF).bind(this),{signal:p(this,E0).signal})}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},r)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,r,s){const i=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[i]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:e,streamId:i,data:t,desiredSize:f.desiredSize},s),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[i].pullCall=g,c.postMessage({sourceName:o,targetName:l,stream:Dr.PULL,streamId:i,desiredSize:f.desiredSize}),g.promise},cancel:f=>{Zt(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[i].cancelCall=g,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:Dr.CANCEL,streamId:i,reason:Ti(f)}),g.promise}},r)}destroy(){var e;(e=p(this,E0))==null||e.abort(),B(this,E0,null)}}E0=new WeakMap,pa=new WeakSet,qF=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){G(this,pa,YF).call(this,e);return}if(e.callback){const r=e.callbackId,s=this.callbackCapabilities[r];if(!s)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===b_.DATA)s.resolve(e.data);else if(e.callback===b_.ERROR)s.reject(Ti(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,s=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:r,targetName:s,callback:b_.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:r,targetName:s,callback:b_.ERROR,callbackId:e.callbackId,reason:Ti(o)})});return}if(e.streamId){G(this,pa,XF).call(this,e);return}t(e.data)},XF=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,o=this,l=this.actionHandler[e.action],c={enqueue(f,g=1,y){if(this.isCancelled)return;const _=this.desiredSize;this.desiredSize-=g,_>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:s,stream:Dr.ENQUEUE,streamId:t,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:Dr.CLOSE,streamId:t}),delete o.streamSinks[t])},error(f){Zt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:Dr.ERROR,streamId:t,reason:Ti(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(l,e.data,c).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Dr.START_COMPLETE,streamId:t,success:!0})},function(f){i.postMessage({sourceName:r,targetName:s,stream:Dr.START_COMPLETE,streamId:t,reason:Ti(f)})})},YF=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,o=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case Dr.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Ti(e.reason));break;case Dr.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Ti(e.reason));break;case Dr.PULL:if(!l){i.postMessage({sourceName:r,targetName:s,stream:Dr.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||hO).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Dr.PULL_COMPLETE,streamId:t,success:!0})},function(f){i.postMessage({sourceName:r,targetName:s,stream:Dr.PULL_COMPLETE,streamId:t,reason:Ti(f)})});break;case Dr.ENQUEUE:if(Zt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Dr.CLOSE:if(Zt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),G(this,pa,n2).call(this,o,t);break;case Dr.ERROR:Zt(o,"error should have stream controller"),o.controller.error(Ti(e.reason)),G(this,pa,n2).call(this,o,t);break;case Dr.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Ti(e.reason)),G(this,pa,n2).call(this,o,t);break;case Dr.CANCEL:if(!l)break;const c=Ti(e.reason);Promise.try(l.onCancel||hO,c).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Dr.CANCEL_COMPLETE,streamId:t,success:!0})},function(f){i.postMessage({sourceName:r,targetName:s,stream:Dr.CANCEL_COMPLETE,streamId:t,reason:Ti(f)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},n2=async function(e,t){var r,s,i;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(s=e.pullCall)==null?void 0:s.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var qy;class KF{constructor({enableHWA:e=!1}){W(this,qy,!1);B(this,qy,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!p(this,qy)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){jn("Abstract method `_createCanvas` called.")}}qy=new WeakMap;class yoe extends KF{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class ZF{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){jn("Abstract method `_fetch` called.")}}class fO extends ZF{async _fetch(e){const t=await wb(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):yb(t)}}class QF{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,s,i){return"none"}destroy(e=!1){}}var hm,C0,eu,tu,$s,fm,mm,Ge,Hs,Zx,tg,r2,ng,JF,$T,rg,Qx,Jx,qT,ev;class woe extends QF{constructor({docId:t,ownerDocument:r=globalThis.document}){super();W(this,Ge);W(this,hm);W(this,C0);W(this,eu);W(this,tu);W(this,$s);W(this,fm);W(this,mm,0);B(this,tu,t),B(this,$s,r)}addFilter(t){if(!t)return"none";let r=p(this,Ge,Hs).get(t);if(r)return r;const[s,i,o]=G(this,Ge,r2).call(this,t),l=t.length===1?s:`${s}${i}${o}`;if(r=p(this,Ge,Hs).get(l),r)return p(this,Ge,Hs).set(t,r),r;const c=`g_${p(this,tu)}_transfer_map_${vr(this,mm)._++}`,f=G(this,Ge,ng).call(this,c);p(this,Ge,Hs).set(t,f),p(this,Ge,Hs).set(l,f);const g=G(this,Ge,rg).call(this,c);return G(this,Ge,Jx).call(this,s,i,o,g),f}addHCMFilter(t,r){var P;const s=`${t}-${r}`,i="base";let o=p(this,Ge,Zx).get(i);if((o==null?void 0:o.key)===s||(o?((P=o.filter)==null||P.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},p(this,Ge,Zx).set(i,o)),!t||!r))return o.url;const l=G(this,Ge,ev).call(this,t);t=Ke.makeHexColor(...l);const c=G(this,Ge,ev).call(this,r);if(r=Ke.makeHexColor(...c),p(this,Ge,tg).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return o.url;const f=new Array(256);for(let S=0;S<=255;S++){const I=S/255;f[S]=I<=.03928?I/12.92:((I+.055)/1.055)**2.4}const g=f.join(","),y=`g_${p(this,tu)}_hcm_filter`,_=o.filter=G(this,Ge,rg).call(this,y);G(this,Ge,Jx).call(this,g,g,g,_),G(this,Ge,$T).call(this,_);const E=(S,I)=>{const N=l[S]/255,k=c[S]/255,T=new Array(I+1);for(let D=0;D<=I;D++)T[D]=N+D/I*(k-N);return T.join(",")};return G(this,Ge,Jx).call(this,E(0,5),E(1,5),E(2,5),_),o.url=G(this,Ge,ng).call(this,y),o.url}addAlphaFilter(t){let r=p(this,Ge,Hs).get(t);if(r)return r;const[s]=G(this,Ge,r2).call(this,[t]),i=`alpha_${s}`;if(r=p(this,Ge,Hs).get(i),r)return p(this,Ge,Hs).set(t,r),r;const o=`g_${p(this,tu)}_alpha_map_${vr(this,mm)._++}`,l=G(this,Ge,ng).call(this,o);p(this,Ge,Hs).set(t,l),p(this,Ge,Hs).set(i,l);const c=G(this,Ge,rg).call(this,o);return G(this,Ge,qT).call(this,s,c),l}addLuminosityFilter(t){let r=p(this,Ge,Hs).get(t||"luminosity");if(r)return r;let s,i;if(t?([s]=G(this,Ge,r2).call(this,[t]),i=`luminosity_${s}`):i="luminosity",r=p(this,Ge,Hs).get(i),r)return p(this,Ge,Hs).set(t,r),r;const o=`g_${p(this,tu)}_luminosity_map_${vr(this,mm)._++}`,l=G(this,Ge,ng).call(this,o);p(this,Ge,Hs).set(t,l),p(this,Ge,Hs).set(i,l);const c=G(this,Ge,rg).call(this,o);return G(this,Ge,JF).call(this,c),t&&G(this,Ge,qT).call(this,s,c),l}addHighlightHCMFilter(t,r,s,i,o){var k;const l=`${r}-${s}-${i}-${o}`;let c=p(this,Ge,Zx).get(t);if((c==null?void 0:c.key)===l||(c?((k=c.filter)==null||k.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},p(this,Ge,Zx).set(t,c)),!r||!s))return c.url;const[f,g]=[r,s].map(G(this,Ge,ev).bind(this));let y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),_=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[E,P]=[i,o].map(G(this,Ge,ev).bind(this));_<y&&([y,_,E,P]=[_,y,P,E]),p(this,Ge,tg).style.color="";const S=(T,D,U)=>{const z=new Array(256),F=(_-y)/U,X=T/255,Z=(D-T)/(255*U);let ne=0;for(let se=0;se<=U;se++){const ee=Math.round(y+se*F),ce=X+se*Z;for(let de=ne;de<=ee;de++)z[de]=ce;ne=ee+1}for(let se=ne;se<256;se++)z[se]=z[ne-1];return z.join(",")},I=`g_${p(this,tu)}_hcm_${t}_filter`,N=c.filter=G(this,Ge,rg).call(this,I);return G(this,Ge,$T).call(this,N),G(this,Ge,Jx).call(this,S(E[0],P[0],5),S(E[1],P[1],5),S(E[2],P[2],5),N),c.url=G(this,Ge,ng).call(this,I),c.url}destroy(t=!1){var r,s,i,o;t&&((r=p(this,fm))!=null&&r.size)||((s=p(this,eu))==null||s.parentNode.parentNode.remove(),B(this,eu,null),(i=p(this,C0))==null||i.clear(),B(this,C0,null),(o=p(this,fm))==null||o.clear(),B(this,fm,null),B(this,mm,0))}}hm=new WeakMap,C0=new WeakMap,eu=new WeakMap,tu=new WeakMap,$s=new WeakMap,fm=new WeakMap,mm=new WeakMap,Ge=new WeakSet,Hs=function(){return p(this,C0)||B(this,C0,new Map)},Zx=function(){return p(this,fm)||B(this,fm,new Map)},tg=function(){if(!p(this,eu)){const t=p(this,$s).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const s=p(this,$s).createElementNS(Rc,"svg");s.setAttribute("width",0),s.setAttribute("height",0),B(this,eu,p(this,$s).createElementNS(Rc,"defs")),t.append(s),s.append(p(this,eu)),p(this,$s).body.append(t)}return p(this,eu)},r2=function(t){if(t.length===1){const f=t[0],g=new Array(256);for(let _=0;_<256;_++)g[_]=f[_]/255;const y=g.join(",");return[y,y,y]}const[r,s,i]=t,o=new Array(256),l=new Array(256),c=new Array(256);for(let f=0;f<256;f++)o[f]=r[f]/255,l[f]=s[f]/255,c[f]=i[f]/255;return[o.join(","),l.join(","),c.join(",")]},ng=function(t){if(p(this,hm)===void 0){B(this,hm,"");const r=p(this,$s).URL;r!==p(this,$s).baseURI&&(JC(r)?bt('#createUrl: ignore "data:"-URL for performance reasons.'):B(this,hm,oF(r,"")))}return`url(${p(this,hm)}#${t})`},JF=function(t){const r=p(this,$s).createElementNS(Rc,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},$T=function(t){const r=p(this,$s).createElementNS(Rc,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},rg=function(t){const r=p(this,$s).createElementNS(Rc,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),p(this,Ge,tg).append(r),r},Qx=function(t,r,s){const i=p(this,$s).createElementNS(Rc,r);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)},Jx=function(t,r,s,i){const o=p(this,$s).createElementNS(Rc,"feComponentTransfer");i.append(o),G(this,Ge,Qx).call(this,o,"feFuncR",t),G(this,Ge,Qx).call(this,o,"feFuncG",r),G(this,Ge,Qx).call(this,o,"feFuncB",s)},qT=function(t,r){const s=p(this,$s).createElementNS(Rc,"feComponentTransfer");r.append(s),G(this,Ge,Qx).call(this,s,"feFuncA",t)},ev=function(t){return p(this,Ge,tg).style.color=t,_b(getComputedStyle(p(this,Ge,tg)).getPropertyValue("color"))};class e9{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){jn("Abstract method `_fetch` called.")}}class mO extends e9{async _fetch(e){const t=await wb(e,"arraybuffer");return new Uint8Array(t)}}class t9{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){jn("Abstract method `_fetch` called.")}}class pO extends t9{async _fetch(e){const t=await wb(e,"arraybuffer");return new Uint8Array(t)}}fi&&bt("Please use the `legacy` build in Node.js environments.");async function bR(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class boe extends QF{}class _oe extends KF{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class Eoe extends ZF{async _fetch(e){return bR(e)}}class Coe extends e9{async _fetch(e){return bR(e)}}class Aoe extends t9{async _fetch(e){return bR(e)}}const Xp="__forcedDependency",{floor:gO,ceil:xO}=Math;function __(n,e,t,r,s,i){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],r),n[e*4+2]=Math.max(n[e*4+2],s),n[e*4+3]=Math.max(n[e*4+3],i)}const XT=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var A0,zd;class Soe{constructor(e,t){W(this,A0);W(this,zd);B(this,A0,e),B(this,zd,t)}get length(){return p(this,A0).length}isEmpty(e){return p(this,A0)[e]===XT}minX(e){return p(this,zd)[e*4+0]/256}minY(e){return p(this,zd)[e*4+1]/256}maxX(e){return(p(this,zd)[e*4+2]+1)/256}maxY(e){return(p(this,zd)[e*4+3]+1)/256}}A0=new WeakMap,zd=new WeakMap;const E_=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var Ri,ki,pm,Fa,gm,nu,yn,Sn,ru,Mi,Xy,S0,xm,vm,su,qs,Bl,Yy,YT;class Noe{constructor(e,t,r=!1){W(this,Yy);W(this,Ri,{__proto__:null});W(this,ki,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Xp]:[]});W(this,pm,new Map);W(this,Fa,[]);W(this,gm,[]);W(this,nu,[[1,0,0,1,0,0]]);W(this,yn,[-1/0,-1/0,1/0,1/0]);W(this,Sn,new Float64Array([1/0,1/0,-1/0,-1/0]));W(this,ru,-1);W(this,Mi,new Set);W(this,Xy,new Map);W(this,S0,new Map);W(this,xm);W(this,vm);W(this,su);W(this,qs);W(this,Bl);B(this,xm,e.width),B(this,vm,e.height),G(this,Yy,YT).call(this,t),r&&B(this,Bl,new Map)}growOperationsCount(e){e>=p(this,qs).length&&G(this,Yy,YT).call(this,e,p(this,qs))}save(e){return B(this,Ri,{__proto__:p(this,Ri)}),B(this,ki,{__proto__:p(this,ki),transform:{__proto__:p(this,ki).transform},moveText:{__proto__:p(this,ki).moveText},sameLineText:{__proto__:p(this,ki).sameLineText},[Xp]:{__proto__:p(this,ki)[Xp]}}),B(this,yn,{__proto__:p(this,yn)}),p(this,Fa).push(e),this}restore(e){var s;const t=Object.getPrototypeOf(p(this,Ri));if(t===null)return this;B(this,Ri,t),B(this,ki,Object.getPrototypeOf(p(this,ki))),B(this,yn,Object.getPrototypeOf(p(this,yn)));const r=p(this,Fa).pop();return r!==void 0&&((s=E_(p(this,Bl),e))==null||s.dependencies.add(r),p(this,qs)[e]=p(this,qs)[r]),this}recordOpenMarker(e){return p(this,Fa).push(e),this}getOpenMarker(){return p(this,Fa).length===0?null:p(this,Fa).at(-1)}recordCloseMarker(e){var r;const t=p(this,Fa).pop();return t!==void 0&&((r=E_(p(this,Bl),e))==null||r.dependencies.add(t),p(this,qs)[e]=p(this,qs)[t]),this}beginMarkedContent(e){return p(this,gm).push(e),this}endMarkedContent(e){var r;const t=p(this,gm).pop();return t!==void 0&&((r=E_(p(this,Bl),e))==null||r.dependencies.add(t),p(this,qs)[e]=p(this,qs)[t]),this}pushBaseTransform(e){return p(this,nu).push(Ke.multiplyByDOMMatrix(p(this,nu).at(-1),e.getTransform())),this}popBaseTransform(){return p(this,nu).length>1&&p(this,nu).pop(),this}recordSimpleData(e,t){return p(this,Ri)[e]=t,this}recordIncrementalData(e,t){return p(this,ki)[e].push(t),this}resetIncrementalData(e,t){return p(this,ki)[e].length=0,this}recordNamedData(e,t){return p(this,pm).set(e,t),this}recordSimpleDataFromNamed(e,t,r){p(this,Ri)[e]=p(this,pm).get(t)??r}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Xp,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in p(this,Ri)&&this.recordFutureForcedDependency(t,p(this,Ri)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of p(this,Mi))this.recordFutureForcedDependency(Xp,e);return this}resetBBox(e){return p(this,ru)!==e&&(B(this,ru,e),p(this,Sn)[0]=1/0,p(this,Sn)[1]=1/0,p(this,Sn)[2]=-1/0,p(this,Sn)[3]=-1/0),this}recordClipBox(e,t,r,s,i,o){const l=Ke.multiplyByDOMMatrix(p(this,nu).at(-1),t.getTransform()),c=[1/0,1/0,-1/0,-1/0];Ke.axialAlignedBoundingBox([r,i,s,o],l,c);const f=Ke.intersect(p(this,yn),c);return f?(p(this,yn)[0]=f[0],p(this,yn)[1]=f[1],p(this,yn)[2]=f[2],p(this,yn)[3]=f[3]):(p(this,yn)[0]=p(this,yn)[1]=1/0,p(this,yn)[2]=p(this,yn)[3]=-1/0),this}recordBBox(e,t,r,s,i,o){const l=p(this,yn);if(l[0]===1/0)return this;const c=Ke.multiplyByDOMMatrix(p(this,nu).at(-1),t.getTransform());if(l[0]===-1/0)return Ke.axialAlignedBoundingBox([r,i,s,o],c,p(this,Sn)),this;const f=[1/0,1/0,-1/0,-1/0];return Ke.axialAlignedBoundingBox([r,i,s,o],c,f),p(this,Sn)[0]=Math.min(p(this,Sn)[0],Math.max(f[0],l[0])),p(this,Sn)[1]=Math.min(p(this,Sn)[1],Math.max(f[1],l[1])),p(this,Sn)[2]=Math.max(p(this,Sn)[2],Math.min(f[2],l[2])),p(this,Sn)[3]=Math.max(p(this,Sn)[3],Math.min(f[3],l[3])),this}recordCharacterBBox(e,t,r,s=1,i=0,o=0,l){const c=r.bbox;let f,g;if(c&&(f=c[2]!==c[0]&&c[3]!==c[1]&&p(this,S0).get(r),f!==!1&&(g=[0,0,0,0],Ke.axialAlignedBoundingBox(c,r.fontMatrix,g),(s!==1||i!==0||o!==0)&&Ke.scaleMinMax([s,0,0,-s,i,o],g),f)))return this.recordBBox(e,t,g[0],g[2],g[1],g[3]);if(!l)return this.recordFullPageBBox(e);const y=l();return c&&g&&f===void 0&&(f=g[0]<=i-y.actualBoundingBoxLeft&&g[2]>=i+y.actualBoundingBoxRight&&g[1]<=o-y.actualBoundingBoxAscent&&g[3]>=o+y.actualBoundingBoxDescent,p(this,S0).set(r,f),f)?this.recordBBox(e,t,g[0],g[2],g[1],g[3]):this.recordBBox(e,t,i-y.actualBoundingBoxLeft,i+y.actualBoundingBoxRight,o-y.actualBoundingBoxAscent,o+y.actualBoundingBoxDescent)}recordFullPageBBox(e){return p(this,Sn)[0]=Math.max(0,p(this,yn)[0]),p(this,Sn)[1]=Math.max(0,p(this,yn)[1]),p(this,Sn)[2]=Math.min(p(this,xm),p(this,yn)[2]),p(this,Sn)[3]=Math.min(p(this,vm),p(this,yn)[3]),this}getSimpleIndex(e){return p(this,Ri)[e]}recordDependencies(e,t){const r=p(this,Mi),s=p(this,Ri),i=p(this,ki);for(const o of t)o in p(this,Ri)?r.add(s[o]):o in i&&i[o].forEach(r.add,r);return this}recordNamedDependency(e,t){return p(this,pm).has(t)&&p(this,Mi).add(p(this,pm).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Xp]),p(this,Bl)){const r=E_(p(this,Bl),e),{dependencies:s}=r;p(this,Mi).forEach(s.add,s),p(this,Fa).forEach(s.add,s),p(this,gm).forEach(s.add,s),s.delete(e),r.isRenderingOperation=!0}if(p(this,ru)===e){const r=gO(p(this,Sn)[0]*256/p(this,xm)),s=gO(p(this,Sn)[1]*256/p(this,vm)),i=xO(p(this,Sn)[2]*256/p(this,xm)),o=xO(p(this,Sn)[3]*256/p(this,vm));__(p(this,su),e,r,s,i,o);for(const l of p(this,Mi))l!==e&&__(p(this,su),l,r,s,i,o);for(const l of p(this,Fa))l!==e&&__(p(this,su),l,r,s,i,o);for(const l of p(this,gm))l!==e&&__(p(this,su),l,r,s,i,o);t||(p(this,Mi).clear(),B(this,ru,-1))}return this}recordShowTextOperation(e,t=!1){const r=Array.from(p(this,Mi));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const s of r)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(e,t=!1){return p(this,ru)===e&&(B(this,ru,-1),p(this,yn)[0]=Math.max(p(this,yn)[0],p(this,Sn)[0]),p(this,yn)[1]=Math.max(p(this,yn)[1],p(this,Sn)[1]),p(this,yn)[2]=Math.min(p(this,yn)[2],p(this,Sn)[2]),p(this,yn)[3]=Math.min(p(this,yn)[3],p(this,Sn)[3]),t||p(this,Mi).clear()),this}_takePendingDependencies(){const e=p(this,Mi);return B(this,Mi,new Set),e}_extractOperation(e){const t=p(this,Xy).get(e);return p(this,Xy).delete(e),t}_pushPendingDependencies(e){for(const t of e)p(this,Mi).add(t)}take(){return p(this,S0).clear(),new Soe(p(this,qs),p(this,su))}takeDebugMetadata(){return p(this,Bl)}}Ri=new WeakMap,ki=new WeakMap,pm=new WeakMap,Fa=new WeakMap,gm=new WeakMap,nu=new WeakMap,yn=new WeakMap,Sn=new WeakMap,ru=new WeakMap,Mi=new WeakMap,Xy=new WeakMap,S0=new WeakMap,xm=new WeakMap,vm=new WeakMap,su=new WeakMap,qs=new WeakMap,Bl=new WeakMap,Yy=new WeakSet,YT=function(e,t){const r=new ArrayBuffer(e*4);B(this,su,new Uint8ClampedArray(r)),B(this,qs,new Uint32Array(r)),t&&t.length>0?(p(this,qs).set(t),p(this,qs).fill(XT,t.length)):p(this,qs).fill(XT)};var On,br,Ua,N0,T0;const FR=class FR{constructor(e,t,r){W(this,On);W(this,br);W(this,Ua);W(this,N0,0);W(this,T0,0);if(e instanceof FR&&p(e,Ua)===!!r)return e;B(this,On,e),B(this,br,t),B(this,Ua,!!r)}growOperationsCount(){throw new Error("Unreachable")}save(e){return vr(this,T0)._++,p(this,On).save(p(this,br)),this}restore(e){return p(this,T0)>0&&(p(this,On).restore(p(this,br)),vr(this,T0)._--),this}recordOpenMarker(e){return vr(this,N0)._++,this}getOpenMarker(){return p(this,N0)>0?p(this,br):p(this,On).getOpenMarker()}recordCloseMarker(e){return vr(this,N0)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return p(this,On).pushBaseTransform(e),this}popBaseTransform(){return p(this,On).popBaseTransform(),this}recordSimpleData(e,t){return p(this,On).recordSimpleData(e,p(this,br)),this}recordIncrementalData(e,t){return p(this,On).recordIncrementalData(e,p(this,br)),this}resetIncrementalData(e,t){return p(this,On).resetIncrementalData(e,p(this,br)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,r){return p(this,On).recordSimpleDataFromNamed(e,t,p(this,br)),this}recordFutureForcedDependency(e,t){return p(this,On).recordFutureForcedDependency(e,p(this,br)),this}inheritSimpleDataAsFutureForcedDependencies(e){return p(this,On).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return p(this,On).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return p(this,Ua)||p(this,On).resetBBox(p(this,br)),this}recordClipBox(e,t,r,s,i,o){return p(this,Ua)||p(this,On).recordClipBox(p(this,br),t,r,s,i,o),this}recordBBox(e,t,r,s,i,o){return p(this,Ua)||p(this,On).recordBBox(p(this,br),t,r,s,i,o),this}recordCharacterBBox(e,t,r,s,i,o,l){return p(this,Ua)||p(this,On).recordCharacterBBox(p(this,br),t,r,s,i,o,l),this}recordFullPageBBox(e){return p(this,Ua)||p(this,On).recordFullPageBBox(p(this,br)),this}getSimpleIndex(e){return p(this,On).getSimpleIndex(e)}recordDependencies(e,t){return p(this,On).recordDependencies(p(this,br),t),this}recordNamedDependency(e,t){return p(this,On).recordNamedDependency(p(this,br),t),this}recordOperation(e){return p(this,On).recordOperation(p(this,br),!0),this}recordShowTextOperation(e){return p(this,On).recordShowTextOperation(p(this,br),!0),this}bboxToClipBoxDropOperation(e){return p(this,Ua)||p(this,On).bboxToClipBoxDropOperation(p(this,br),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};On=new WeakMap,br=new WeakMap,Ua=new WeakMap,N0=new WeakMap,T0=new WeakMap;let _E=FR;const qo={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ts={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function KT(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,r),n.clip(s)}class _R{isModifyingCurrentTransform(){return!1}getPattern(){jn("Abstract method `getPattern` called.")}}class Toe extends _R{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,s){let i;if(s===Ts.STROKE||s===Ts.FILL){const o=t.current.getClippedPathBoundingBox(s,cr(e))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,f=t.cachedCanvases.getCanvas("pattern",l,c),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-o[0],-o[1]),r=Ke.transform(r,[1,0,0,1,o[0],o[1]]),g.transform(...t.baseTransform),this.matrix&&g.transform(...this.matrix),KT(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),i=e.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(r);i.setTransform(y)}else KT(e,this._bbox),i=this._createGradient(e);return i}}function NS(n,e,t,r,s,i,o,l){const c=e.coords,f=e.colors,g=n.data,y=n.width*4;let _;c[t+1]>c[r+1]&&(_=t,t=r,r=_,_=i,i=o,o=_),c[r+1]>c[s+1]&&(_=r,r=s,s=_,_=o,o=l,l=_),c[t+1]>c[r+1]&&(_=t,t=r,r=_,_=i,i=o,o=_);const E=(c[t]+e.offsetX)*e.scaleX,P=(c[t+1]+e.offsetY)*e.scaleY,S=(c[r]+e.offsetX)*e.scaleX,I=(c[r+1]+e.offsetY)*e.scaleY,N=(c[s]+e.offsetX)*e.scaleX,k=(c[s+1]+e.offsetY)*e.scaleY;if(P>=k)return;const T=f[i],D=f[i+1],U=f[i+2],z=f[o],F=f[o+1],X=f[o+2],Z=f[l],ne=f[l+1],se=f[l+2],ee=Math.round(P),ce=Math.round(k);let de,re,fe,oe,Q,ue,he,Ee;for(let _e=ee;_e<=ce;_e++){if(_e<I){const Te=_e<P?0:(P-_e)/(P-I);de=E-(E-S)*Te,re=T-(T-z)*Te,fe=D-(D-F)*Te,oe=U-(U-X)*Te}else{let Te;_e>k?Te=1:I===k?Te=0:Te=(I-_e)/(I-k),de=S-(S-N)*Te,re=z-(z-Z)*Te,fe=F-(F-ne)*Te,oe=X-(X-se)*Te}let Oe;_e<P?Oe=0:_e>k?Oe=1:Oe=(P-_e)/(P-k),Q=E-(E-N)*Oe,ue=T-(T-Z)*Oe,he=D-(D-ne)*Oe,Ee=U-(U-se)*Oe;const De=Math.round(Math.min(de,Q)),ze=Math.round(Math.max(de,Q));let be=y*_e+De*4;for(let Te=De;Te<=ze;Te++)Oe=(de-Te)/(de-Q),Oe<0?Oe=0:Oe>1&&(Oe=1),g[be++]=re-(re-ue)*Oe|0,g[be++]=fe-(fe-he)*Oe|0,g[be++]=oe-(oe-Ee)*Oe|0,g[be++]=255}}function Poe(n,e,t){const r=e.coords,s=e.colors;let i,o;switch(e.type){case bT.LATTICE:const l=e.verticesPerRow,c=Math.floor(r.length/l)-1,f=l-1;for(i=0;i<c;i++){let g=i*l;for(let y=0;y<f;y++,g++)NS(n,t,r[g],r[g+1],r[g+l],s[g],s[g+1],s[g+l]),NS(n,t,r[g+l+1],r[g+1],r[g+l],s[g+l+1],s[g+1],s[g+l])}break;case bT.TRIANGLES:for(i=0,o=r.length;i<o;i+=3)NS(n,t,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class Ioe extends _R{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-l,g=Math.ceil(this._bounds[3])-c,y=Math.min(Math.ceil(Math.abs(f*e[0]*1.1)),3e3),_=Math.min(Math.ceil(Math.abs(g*e[1]*1.1)),3e3),E=f/y,P=g/_,S={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/E,scaleY:1/P},I=y+2*2,N=_+2*2,k=r.getCanvas("mesh",I,N),T=k.context,D=T.createImageData(y,_);if(t){const z=D.data;for(let F=0,X=z.length;F<X;F+=4)z[F]=t[0],z[F+1]=t[1],z[F+2]=t[2],z[F+3]=255}for(const z of this._figures)Poe(D,z,S);return T.putImageData(D,2,2),{canvas:k.canvas,offsetX:l-2*E,offsetY:c-2*P,scaleX:E,scaleY:P}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,s){KT(e,this._bbox);const i=new Float32Array(2);if(s===Ts.SHADING)Ke.singularValueDecompose2dScale(cr(e),i);else if(this.matrix){Ke.singularValueDecompose2dScale(this.matrix,i);const[l,c]=i;Ke.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=l,i[1]*=c}else Ke.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,s===Ts.SHADING?null:this._background,t.cachedCanvases);return s!==Ts.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class Roe extends _R{getPattern(){return"hotpink"}}function koe(n){switch(n[0]){case"RadialAxial":return new Toe(n);case"Mesh":return new Ioe(n);case"Dummy":return new Roe}throw new Error(`Unknown IR type: ${n[0]}`)}const vO={COLORED:1,UNCOLORED:2},HE=class HE{constructor(e,t,r,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e,t){var ue,he;const{bbox:r,operatorList:s,paintType:i,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),QC("TilingType: "+o);const y=r[0],_=r[1],E=r[2],P=r[3],S=E-y,I=P-_,N=new Float32Array(2);Ke.singularValueDecompose2dScale(this.matrix,N);const[k,T]=N;Ke.singularValueDecompose2dScale(this.baseTransform,N);const D=k*N[0],U=T*N[1];let z=S,F=I,X=!1,Z=!1;const ne=Math.ceil(f*D),se=Math.ceil(g*U),ee=Math.ceil(S*D),ce=Math.ceil(I*U);ne>=ee?z=f:X=!0,se>=ce?F=g:Z=!0;const de=this.getSizeAndScale(z,this.ctx.canvas.width,D),re=this.getSizeAndScale(F,this.ctx.canvas.height,U),fe=e.cachedCanvases.getCanvas("pattern",de.size,re.size),oe=fe.context,Q=c.createCanvasGraphics(oe,t);if(Q.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(Q,i,l),oe.translate(-de.scale*y,-re.scale*_),Q.transform(0,de.scale,0,0,re.scale,0,0),oe.save(),(ue=Q.dependencyTracker)==null||ue.save(),this.clipBbox(Q,y,_,E,P),Q.baseTransform=cr(Q.ctx),Q.executeOperatorList(s),Q.endDrawing(),(he=Q.dependencyTracker)==null||he.restore(),oe.restore(),X||Z){const Ee=fe.canvas;X&&(z=f),Z&&(F=g);const _e=this.getSizeAndScale(z,this.ctx.canvas.width,D),Oe=this.getSizeAndScale(F,this.ctx.canvas.height,U),De=_e.size,ze=Oe.size,be=e.cachedCanvases.getCanvas("pattern-workaround",De,ze),Te=be.context,Ze=X?Math.floor(S/f):0,Nt=Z?Math.floor(I/g):0;for(let ut=0;ut<=Ze;ut++)for(let st=0;st<=Nt;st++)Te.drawImage(Ee,De*ut,ze*st,De,ze,0,0,De,ze);return{canvas:be.canvas,scaleX:_e.scale,scaleY:Oe.scale,offsetX:y,offsetY:_}}return{canvas:fe.canvas,scaleX:de.scale,scaleY:re.scale,offsetX:y,offsetY:_}}getSizeAndScale(e,t,r){const s=Math.max(HE.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=s?i=s:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,s,i){const o=s-t,l=i-r;e.ctx.rect(t,r,o,l),Ke.axialAlignedBoundingBox([t,r,s,i],cr(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const s=e.ctx,i=e.current;switch(t){case vO.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;s.fillStyle=i.fillColor=o,s.strokeStyle=i.strokeColor=l;break;case vO.UNCOLORED:s.fillStyle=s.strokeStyle=r,i.fillColor=i.strokeColor=r;break;default:throw new Gie(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,s,i){let o=r;s!==Ts.SHADING&&(o=Ke.transform(o,t.baseTransform),this.matrix&&(o=Ke.transform(o,this.matrix)));const l=this.createPatternCanvas(t,i);let c=new DOMMatrix(o);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const f=e.createPattern(l.canvas,"repeat");return f.setTransform(c),f}};Pe(HE,"MAX_PATTERN_SIZE",3e3);let ZT=HE;function Moe({src:n,srcPos:e=0,dest:t,width:r,height:s,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const l=Os.isLittleEndian?4278190080:255,[c,f]=o?[i,l]:[l,i],g=r>>3,y=r&7,_=n.length;t=new Uint32Array(t.buffer);let E=0;for(let P=0;P<s;P++){for(const I=e+g;e<I;e++){const N=e<_?n[e]:255;t[E++]=N&128?f:c,t[E++]=N&64?f:c,t[E++]=N&32?f:c,t[E++]=N&16?f:c,t[E++]=N&8?f:c,t[E++]=N&4?f:c,t[E++]=N&2?f:c,t[E++]=N&1?f:c}if(y===0)continue;const S=e<_?n[e++]:255;for(let I=0;I<y;I++)t[E++]=S&1<<7-I?f:c}return{srcPos:e,destPos:E}}const yO=16,wO=100,Ooe=15,bO=10,Li=16,TS=new DOMMatrix,bo=new Float32Array(2),wg=new Float32Array([1/0,1/0,-1/0,-1/0]);function Doe(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,s,i,o,l){e.transform(t,r,s,i,o,l),this.__originalTransform(t,r,s,i,o,l)},n.setTransform=function(t,r,s,i,o,l){e.setTransform(t,r,s,i,o,l),this.__originalSetTransform(t,r,s,i,o,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,s,i,o,l){e.bezierCurveTo(t,r,s,i,o,l),this.__originalBezierCurveTo(t,r,s,i,o,l)},n.rect=function(t,r,s,i){e.rect(t,r,s,i),this.__originalRect(t,r,s,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class joe{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,r)):(s=this.canvasFactory.create(t,r),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function C_(n,e,t,r,s,i,o,l,c,f){const[g,y,_,E,P,S]=cr(n);if(y===0&&_===0){const k=o*g+P,T=Math.round(k),D=l*E+S,U=Math.round(D),z=(o+c)*g+P,F=Math.abs(Math.round(z)-T)||1,X=(l+f)*E+S,Z=Math.abs(Math.round(X)-U)||1;return n.setTransform(Math.sign(g),0,0,Math.sign(E),T,U),n.drawImage(e,t,r,s,i,0,0,F,Z),n.setTransform(g,y,_,E,P,S),[F,Z]}if(g===0&&E===0){const k=l*_+P,T=Math.round(k),D=o*y+S,U=Math.round(D),z=(l+f)*_+P,F=Math.abs(Math.round(z)-T)||1,X=(o+c)*y+S,Z=Math.abs(Math.round(X)-U)||1;return n.setTransform(0,Math.sign(y),Math.sign(_),0,T,U),n.drawImage(e,t,r,s,i,0,0,Z,F),n.setTransform(g,y,_,E,P,S),[Z,F]}n.drawImage(e,t,r,s,i,o,l,c,f);const I=Math.hypot(g,y),N=Math.hypot(_,E);return[I*c,N*f]}class _O{constructor(e,t,r){Pe(this,"alphaIsShape",!1);Pe(this,"fontSize",0);Pe(this,"fontSizeScale",1);Pe(this,"textMatrix",null);Pe(this,"textMatrixScale",1);Pe(this,"fontMatrix",wT);Pe(this,"leading",0);Pe(this,"x",0);Pe(this,"y",0);Pe(this,"lineX",0);Pe(this,"lineY",0);Pe(this,"charSpacing",0);Pe(this,"wordSpacing",0);Pe(this,"textHScale",1);Pe(this,"textRenderingMode",ws.FILL);Pe(this,"textRise",0);Pe(this,"fillColor","#000000");Pe(this,"strokeColor","#000000");Pe(this,"patternFill",!1);Pe(this,"patternStroke",!1);Pe(this,"fillAlpha",1);Pe(this,"strokeAlpha",1);Pe(this,"lineWidth",1);Pe(this,"activeSMask",null);Pe(this,"transferMaps","none");r==null||r(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=wg.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Ts.FILL,t=null){const r=this.minMax.slice();if(e===Ts.STROKE){t||jn("Stroke bounding box must include transform."),Ke.singularValueDecompose2dScale(t,bo);const s=bo[0]*this.lineWidth/2,i=bo[1]*this.lineWidth/2;r[0]-=s,r[1]-=i,r[2]+=s,r[3]+=i}return r}updateClipFromPath(){const e=Ke.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(wg,0)}getClippedPathBoundingBox(e=Ts.FILL,t=null){return Ke.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function EO(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,s=t%Li,i=(t-s)/Li,o=s===0?i:i+1,l=n.createImageData(r,Li);let c=0,f;const g=e.data,y=l.data;let _,E,P,S;if(e.kind===q_.GRAYSCALE_1BPP){const I=g.byteLength,N=new Uint32Array(y.buffer,0,y.byteLength>>2),k=N.length,T=r+7>>3,D=4294967295,U=Os.isLittleEndian?4278190080:255;for(_=0;_<o;_++){for(P=_<i?Li:s,f=0,E=0;E<P;E++){const z=I-c;let F=0;const X=z>T?r:z*8-7,Z=X&-8;let ne=0,se=0;for(;F<Z;F+=8)se=g[c++],N[f++]=se&128?D:U,N[f++]=se&64?D:U,N[f++]=se&32?D:U,N[f++]=se&16?D:U,N[f++]=se&8?D:U,N[f++]=se&4?D:U,N[f++]=se&2?D:U,N[f++]=se&1?D:U;for(;F<X;F++)ne===0&&(se=g[c++],ne=128),N[f++]=se&ne?D:U,ne>>=1}for(;f<k;)N[f++]=0;n.putImageData(l,0,_*Li)}}else if(e.kind===q_.RGBA_32BPP){for(E=0,S=r*Li*4,_=0;_<i;_++)y.set(g.subarray(c,c+S)),c+=S,n.putImageData(l,0,E),E+=Li;_<o&&(S=r*s*4,y.set(g.subarray(c,c+S)),n.putImageData(l,0,E))}else if(e.kind===q_.RGB_24BPP)for(P=Li,S=r*P,_=0;_<o;_++){for(_>=i&&(P=s,S=r*P),f=0,E=S;E--;)y[f++]=g[c++],y[f++]=g[c++],y[f++]=g[c++],y[f++]=255;n.putImageData(l,0,_*Li)}else throw new Error(`bad image kind: ${e.kind}`)}function CO(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,s=t%Li,i=(t-s)/Li,o=s===0?i:i+1,l=n.createImageData(r,Li);let c=0;const f=e.data,g=l.data;for(let y=0;y<o;y++){const _=y<i?Li:s;({srcPos:c}=Moe({src:f,srcPos:c,dest:g,width:r,height:_,nonBlackColor:0})),n.putImageData(l,0,y*Li)}}function Rx(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function A_(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function AO(n,e){if(e)return!0;Ke.singularValueDecompose2dScale(n,bo);const t=Math.fround(cc.pixelRatio*Uh.PDF_TO_CSS_UNITS);return bo[0]<=t&&bo[1]<=t}const Loe=["butt","round","square"],Boe=["miter","round","bevel"],Foe={},SO={};var ll,QT,JT,e3;const UR=class UR{constructor(e,t,r,s,i,{optionalContentConfig:o,markedContentStack:l=null},c,f,g){W(this,ll);this.ctx=e,this.current=new _O(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new joe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(e,t,r=null){var s;return typeof t=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):r}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:s=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=l,r){const c=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...cr(this.compositeCtx))}this.ctx.save(),A_(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=cr(this.ctx)}executeOperatorList(e,t,r,s,i){var N;const o=e.argsArray,l=e.fnArray;let c=t||0;const f=o.length;if(f===c)return c;const g=f-c>bO&&typeof r=="function",y=g?Date.now()+Ooe:0;let _=0;const E=this.commonObjs,P=this.objs;let S,I;for(;;){if(s!==void 0&&c===s.nextBreakPoint)return s.breakIt(c,r),c;if(!i||i(c))if(S=l[c],I=o[c]??null,S!==ey.dependency)I===null?this[S](c):this[S](c,...I);else for(const k of I){(N=this.dependencyTracker)==null||N.recordNamedData(k,c);const T=k.startsWith("g_")?E:P;if(!T.has(k))return T.get(k,r),c}if(c++,c===f)return c;if(g&&++_>bO){if(Date.now()>y)return r(),c;_=0}}}endDrawing(){G(this,ll,QT).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),G(this,ll,JT).call(this)}_scaleImage(e,t){const r=e.width??e.displayWidth,s=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=r,c=s,f="prescale1",g,y;for(;i>2&&l>1||o>2&&c>1;){let _=l,E=c;i>2&&l>1&&(_=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),i/=l/_),o>2&&c>1&&(E=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/E),g=this.cachedCanvases.getCanvas(f,_,E),y=g.context,y.clearRect(0,0,_,E),y.drawImage(e,0,0,l,c,0,0,_,E),e=g.canvas,l=_,c=E,f=f==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e,t){var ne,se;const r=this.ctx,{width:s,height:i}=t,o=this.current.fillColor,l=this.current.patternFill,c=cr(r);let f,g,y,_;if((t.bitmap||t.data)&&t.count>1){const ee=t.bitmap||t.data.buffer;g=JSON.stringify(l?c:[c.slice(0,4),o]),f=this._cachedBitmapsMap.get(ee),f||(f=new Map,this._cachedBitmapsMap.set(ee,f));const ce=f.get(g);if(ce&&!l){const de=Math.round(Math.min(c[0],c[2])+c[4]),re=Math.round(Math.min(c[1],c[3])+c[5]);return(ne=this.dependencyTracker)==null||ne.recordDependencies(e,qo.transformAndFill),{canvas:ce,offsetX:de,offsetY:re}}y=ce}y||(_=this.cachedCanvases.getCanvas("maskCanvas",s,i),CO(_.context,t));let E=Ke.transform(c,[1/s,0,0,-1/i,0,0]);E=Ke.transform(E,[1,0,0,1,0,-i]);const P=wg.slice();Ke.axialAlignedBoundingBox([0,0,s,i],E,P);const[S,I,N,k]=P,T=Math.round(N-S)||1,D=Math.round(k-I)||1,U=this.cachedCanvases.getCanvas("fillCanvas",T,D),z=U.context,F=S,X=I;z.translate(-F,-X),z.transform(...E),y||(y=this._scaleImage(_.canvas,wl(z)),y=y.img,f&&l&&f.set(g,y)),z.imageSmoothingEnabled=AO(cr(z),t.interpolate),C_(z,y,0,0,y.width,y.height,0,0,s,i),z.globalCompositeOperation="source-in";const Z=Ke.transform(wl(z),[1,0,0,1,-F,-X]);return z.fillStyle=l?o.getPattern(r,this,Z,Ts.FILL,e):o,z.fillRect(0,0,s,i),f&&!l&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,U.canvas)),(se=this.dependencyTracker)==null||se.recordDependencies(e,qo.transformAndFill),{canvas:U.canvas,offsetX:Math.round(F),offsetY:Math.round(X)}}setLineWidth(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineCap",e),this.ctx.lineCap=Loe[t]}setLineJoin(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineJoin",e),this.ctx.lineJoin=Boe[t]}setMiterLimit(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,r){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=r)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var r,s,i,o,l;for(const[c,f]of t)switch(c){case"LW":this.setLineWidth(e,f);break;case"LC":this.setLineCap(e,f);break;case"LJ":this.setLineJoin(e,f);break;case"ML":this.setMiterLimit(e,f);break;case"D":this.setDash(e,f[0],f[1]);break;case"RI":this.setRenderingIntent(e,f);break;case"FL":this.setFlatness(e,f);break;case"Font":this.setFont(e,f[0],f[1]);break;case"CA":(r=this.dependencyTracker)==null||r.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=f;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=f;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=f;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=f?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(l=this.dependencyTracker)==null||l.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(f);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,r=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,t,r);this.suspendedCtx=this.ctx;const o=this.ctx=i.context;o.setTransform(this.suspendedCtx.getTransform()),Rx(this.suspendedCtx,o),Doe(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Rx(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,s){const i=s[0],o=s[1],l=s[2]-i,c=s[3]-o;l===0||c===0||(this.genericComposeSMask(t.context,r,l,c,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,s,i,o,l,c,f,g,y){let _=e.canvas,E=c-g,P=f-y;if(o)if(E<0||P<0||E+r>_.width||P+s>_.height){const I=this.cachedCanvases.getCanvas("maskExtension",r,s),N=I.context;N.drawImage(_,-E,-P),N.globalCompositeOperation="destination-atop",N.fillStyle=o,N.fillRect(0,0,r,s),N.globalCompositeOperation="source-over",_=I.canvas,E=P=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const I=new Path2D;I.rect(E,P,r,s),e.clip(I),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(E,P,r,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const S=new Path2D;S.rect(c,f,r,s),t.clip(S),t.globalCompositeOperation="destination-in",t.drawImage(_,E,P,r,s,c,f,r,s),t.restore()}save(e){var r;this.inSMaskMode&&Rx(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(r=this.dependencyTracker)==null||r.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Rx(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,s,i,o,l){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",e),this.ctx.transform(t,r,s,i,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r,s){let[i]=r;if(!s){i||(i=r[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const o=t===ey.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,s[0]-o,s[2]+o,s[1]-o,s[3]+o).recordDependencies(e,["transform"])}i instanceof Path2D||(i=r[0]=hF(i)),Ke.axialAlignedBoundingBox(s,cr(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,r=!0){var o;const s=this.ctx,i=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const l=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=i.getPattern(s,this,wl(s),Ts.STROKE,e),l){const c=new Path2D;c.addPath(t,s.getTransform().invertSelf().multiplySelf(l)),t=c}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,qo.stroke),r&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Ts.STROKE,cr(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,r=!0){var f,g,y;const s=this.ctx,i=this.current.fillColor,o=this.current.patternFill;let l=!1;if(o){const _=i.isModifyingCurrentTransform()?s.getTransform():null;if((f=this.dependencyTracker)==null||f.save(e),s.save(),s.fillStyle=i.getPattern(s,this,wl(s),Ts.FILL,e),_){const E=new Path2D;E.addPath(t,s.getTransform().invertSelf().multiplySelf(_)),t=E}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),(g=this.dependencyTracker)==null||g.recordDependencies(e,qo.fill),l&&(s.restore(),(y=this.dependencyTracker)==null||y.restore(e)),r&&this.consumePath(e,t,c)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var r;this.ctx.fill(t),(r=this.dependencyTracker)==null||r.recordDependencies(e,qo.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=Foe}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=SO}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;t!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",e),s.recordCloseMarker(e)}if(t!==void 0){const s=new Path2D,i=r.getTransform().invertSelf();for(const{transform:o,x:l,y:c,fontSize:f,path:g}of t)g&&s.addPath(g,new DOMMatrix(o).preMultiplySelf(i).translate(l,c).scale(f,-f));r.clip(s)}delete this.pendingTextPaths}setCharSpacing(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,r){var y,_;(y=this.dependencyTracker)==null||y.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const s=this.commonObjs.get(t),i=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=s.fontMatrix||wT,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&bt("Invalid font matrix for font "+t),r<0?(r=-r,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=r,s.isType3Font)return;const o=s.loadedName||"sans-serif",l=((_=s.systemFontInfo)==null?void 0:_.css)||`"${o}", ${s.fallbackName}`;let c="normal";s.black?c="900":s.bold&&(c="bold");const f=s.italic?"italic":"normal";let g=r;r<yO?g=yO:r>wO&&(g=wO),this.current.fontSizeScale=r/g,this.ctx.font=`${f} ${c} ${g}px ${l}`}setTextRenderingMode(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,r){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,t,r){this.setLeading(e,-r),this.moveText(e,t,r)}setTextMatrix(e,t){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=t,r.textMatrixScale=Math.hypot(t[0],t[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,r,s,i,o){var N,k,T,D;const l=this.ctx,c=this.current,f=c.font,g=c.textRenderingMode,y=c.fontSize/c.fontSizeScale,_=g&ws.FILL_STROKE_MASK,E=!!(g&ws.ADD_TO_PATH_FLAG),P=c.patternFill&&!f.missingFile,S=c.patternStroke&&!f.missingFile;let I;if((f.disableFontFace||E||P||S)&&!f.missingFile&&(I=f.getPathGenerator(this.commonObjs,t)),I&&(f.disableFontFace||P||S)){l.save(),l.translate(r,s),l.scale(y,-y),(N=this.dependencyTracker)==null||N.recordCharacterBBox(e,l,f);let U;if(_===ws.FILL||_===ws.FILL_STROKE)if(i){U=l.getTransform(),l.setTransform(...i);const z=G(this,ll,e3).call(this,I,U,i);l.fill(z)}else l.fill(I);if(_===ws.STROKE||_===ws.FILL_STROKE)if(o){U||(U=l.getTransform()),l.setTransform(...o);const{a:z,b:F,c:X,d:Z}=U,ne=Ke.inverseTransform(o),se=Ke.transform([z,F,X,Z,0,0],ne);Ke.singularValueDecompose2dScale(se,bo),l.lineWidth*=Math.max(bo[0],bo[1])/y,l.stroke(G(this,ll,e3).call(this,I,U,o))}else l.lineWidth/=y,l.stroke(I);l.restore()}else(_===ws.FILL||_===ws.FILL_STROKE)&&(l.fillText(t,r,s),(k=this.dependencyTracker)==null||k.recordCharacterBBox(e,l,f,y,r,s,()=>l.measureText(t))),(_===ws.STROKE||_===ws.FILL_STROKE)&&(this.dependencyTracker&&((T=this.dependencyTracker)==null||T.recordCharacterBBox(e,l,f,y,r,s,()=>l.measureText(t)).recordDependencies(e,qo.stroke)),l.strokeText(t,r,s));E&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:cr(l),x:r,y:s,fontSize:y,path:I}),(D=this.dependencyTracker)==null||D.recordCharacterBBox(e,l,f,y,r,s))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){r=!0;break}return It(this,"isFontSubpixelAAEnabled",r)}showText(e,t){var X,Z,ne,se;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,qo.showText).resetBBox(e),this.current.textRenderingMode&ws.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,s=r.font;if(s.isType3Font){this.showType3Text(e,t),(X=this.dependencyTracker)==null||X.recordShowTextOperation(e);return}const i=r.fontSize;if(i===0){(Z=this.dependencyTracker)==null||Z.recordOperation(e);return}const o=this.ctx,l=r.fontSizeScale,c=r.charSpacing,f=r.wordSpacing,g=r.fontDirection,y=r.textHScale*g,_=t.length,E=s.vertical,P=E?1:-1,S=s.defaultVMetrics,I=i*r.fontMatrix[0],N=r.textRenderingMode===ws.FILL&&!s.disableFontFace&&!r.patternFill;o.save(),r.textMatrix&&o.transform(...r.textMatrix),o.translate(r.x,r.y+r.textRise),g>0?o.scale(y,-1):o.scale(y,1);let k,T;if(r.patternFill){o.save();const ee=r.fillColor.getPattern(o,this,wl(o),Ts.FILL,e);k=cr(o),o.restore(),o.fillStyle=ee}if(r.patternStroke){o.save();const ee=r.strokeColor.getPattern(o,this,wl(o),Ts.STROKE,e);T=cr(o),o.restore(),o.strokeStyle=ee}let D=r.lineWidth;const U=r.textMatrixScale;if(U===0||D===0){const ee=r.textRenderingMode&ws.FILL_STROKE_MASK;(ee===ws.STROKE||ee===ws.FILL_STROKE)&&(D=this.getSinglePixelWidth())}else D/=U;if(l!==1&&(o.scale(l,l),D/=l),o.lineWidth=D,s.isInvalidPDFjsFont){const ee=[];let ce=0;for(const re of t)ee.push(re.unicode),ce+=re.width;const de=ee.join("");if(o.fillText(de,0,0),this.dependencyTracker!==null){const re=o.measureText(de);this.dependencyTracker.recordBBox(e,this.ctx,-re.actualBoundingBoxLeft,re.actualBoundingBoxRight,-re.actualBoundingBoxAscent,re.actualBoundingBoxDescent).recordShowTextOperation(e)}r.x+=ce*I*y,o.restore(),this.compose();return}let z=0,F;for(F=0;F<_;++F){const ee=t[F];if(typeof ee=="number"){z+=P*ee*i/1e3;continue}let ce=!1;const de=(ee.isSpace?f:0)+c,re=ee.fontChar,fe=ee.accent;let oe,Q,ue=ee.width;if(E){const _e=ee.vmetric||S,Oe=-(ee.vmetric?_e[1]:ue*.5)*I,De=_e[2]*I;ue=_e?-_e[0]:ue,oe=Oe/l,Q=(z+De)/l}else oe=z/l,Q=0;let he;if(s.remeasure&&ue>0){he=o.measureText(re);const _e=he.width*1e3/i*l;if(ue<_e&&this.isFontSubpixelAAEnabled){const Oe=ue/_e;ce=!0,o.save(),o.scale(Oe,1),oe/=Oe}else ue!==_e&&(oe+=(ue-_e)/2e3*i/l)}if(this.contentVisible&&(ee.isInFont||s.missingFile)){if(N&&!fe)o.fillText(re,oe,Q),(ne=this.dependencyTracker)==null||ne.recordCharacterBBox(e,o,he?{bbox:null}:s,i/l,oe,Q,()=>he??o.measureText(re));else if(this.paintChar(e,re,oe,Q,k,T),fe){const _e=oe+i*fe.offset.x/l,Oe=Q-i*fe.offset.y/l;this.paintChar(e,fe.fontChar,_e,Oe,k,T)}}const Ee=E?ue*I-de*g:ue*I+de*g;z+=Ee,ce&&o.restore()}E?r.y-=z:r.x+=z*y,o.restore(),this.compose(),(se=this.dependencyTracker)==null||se.recordShowTextOperation(e)}showType3Text(e,t){const r=this.ctx,s=this.current,i=s.font,o=s.fontSize,l=s.fontDirection,c=i.vertical?1:-1,f=s.charSpacing,g=s.wordSpacing,y=s.textHScale*l,_=s.fontMatrix||wT,E=t.length,P=s.textRenderingMode===ws.INVISIBLE;let S,I,N,k;if(P||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),s.textMatrix&&r.transform(...s.textMatrix),r.translate(s.x,s.y+s.textRise),r.scale(y,l);const T=this.dependencyTracker;for(this.dependencyTracker=T?new _E(T,e):null,S=0;S<E;++S){if(I=t[S],typeof I=="number"){k=c*I*o/1e3,this.ctx.translate(k,0),s.x+=k*y;continue}const D=(I.isSpace?g:0)+f,U=i.charProcOperatorList[I.operatorListId];U?this.contentVisible&&(this.save(),r.scale(o,o),r.transform(..._),this.executeOperatorList(U),this.restore()):bt(`Type3 character "${I.operatorListId}" is not available.`);const z=[I.width,0];Ke.applyTransform(z,_),N=z[0]*o+D,r.translate(N,0),s.x+=N*y}r.restore(),T&&(this.dependencyTracker=T)}setCharWidth(e,t,r){}setCharWidthAndBounds(e,t,r,s,i,o,l){var f;const c=new Path2D;c.rect(s,i,o-s,l-i),this.ctx.clip(c),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,s,o,i,l).recordClipBox(e,this.ctx,s,o,i,l),this.endPath(e)}getColorN_Pattern(e,t){let r;if(t[0]==="TilingPattern"){const s=this.baseTransform||cr(this.ctx),i={createCanvasGraphics:(o,l)=>new UR(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new _E(this.dependencyTracker,l,!0):null)};r=new ZT(t,this.ctx,i,s)}else r=this._getPattern(e,t[1],t[2]);return r}setStrokeColorN(e,...t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,r=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=koe(this.getObject(e,t)),this.cachedPatterns.set(t,s)),r&&(s.matrix=r),s}shadingFill(e,t){var o;if(!this.contentVisible)return;const r=this.ctx;this.save(e);const s=this._getPattern(e,t);r.fillStyle=s.getPattern(r,this,wl(r),Ts.SHADING,e);const i=wl(r);if(i){const{width:l,height:c}=r.canvas,f=wg.slice();Ke.axialAlignedBoundingBox([0,0,l,c],i,f);const[g,y,_,E]=f;this.ctx.fillRect(g,y,_-g,E-y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,qo.transform).recordDependencies(e,qo.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){jn("Should not call beginInlineImage")}beginImageData(){jn("Should not call beginImageData")}paintFormXObjectBegin(e,t,r){var s;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=cr(this.ctx),r)){Ke.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[i,o,l,c]=r,f=new Path2D;f.rect(i,o,l-i,c-o),this.ctx.clip(f),(s=this.dependencyTracker)==null||s.recordClipBox(e,this.ctx,i,l,o,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var T;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;t.isolated||QC("TODO: Support non-isolated groups."),t.knockout&&bt("Knockout groups not supported.");const s=cr(r);if(t.matrix&&r.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=wg.slice();Ke.axialAlignedBoundingBox(t.bbox,cr(r),i);const o=[0,0,r.canvas.width,r.canvas.height];i=Ke.intersect(i,o)||[0,0,0,0];const l=Math.floor(i[0]),c=Math.floor(i[1]),f=Math.max(Math.ceil(i[2])-l,1),g=Math.max(Math.ceil(i[3])-c,1);this.current.startNewPathAndClipBox([0,0,f,g]);let y="groupAt"+this.groupLevel;t.smask&&(y+="_smask_"+this.smaskCounter++%2);const _=this.cachedCanvases.getCanvas(y,f,g),E=_.context;E.translate(-l,-c),E.transform(...s);let P=new Path2D;const[S,I,N,k]=t.bbox;if(P.rect(S,I,N-S,k-I),t.matrix){const D=new Path2D;D.addPath(P,new DOMMatrix(t.matrix)),P=D}E.clip(P),t.smask&&this.smaskStack.push({canvas:_.canvas,context:E,offsetX:l,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(l,c),r.save()),Rx(r,E),this.ctx=E,(T=this.dependencyTracker)==null||T.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=cr(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const l=wg.slice();Ke.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],o,l),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,r,s,i,o){if(G(this,ll,QT).call(this),A_(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const l=r[2]-r[0],c=r[3]-r[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=r[0],s[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=l,r[3]=c,Ke.singularValueDecompose2dScale(cr(this.ctx),bo);const{viewportScale:f}=this,g=Math.ceil(l*this.outputScaleX*f),y=Math.ceil(c*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,y);const{canvas:_,context:E}=this.annotationCanvas;this.annotationCanvasMap.set(t,_),this.annotationCanvas.savedCtx=this.ctx,this.ctx=E,this.ctx.save(),this.ctx.setTransform(bo[0],0,0,-bo[1],0,c*bo[1]),A_(this.ctx)}else{A_(this.ctx),this.endPath(e);const f=new Path2D;f.rect(r[0],r[1],l,c),this.ctx.clip(f)}}this.current=new _O(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...s),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),G(this,ll,JT).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var l;if(!this.contentVisible)return;const r=t.count;t=this.getObject(e,t.data,t),t.count=r;const s=this.ctx,i=this._createMaskCanvas(e,t),o=i.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,i.offsetX,i.offsetY),(l=this.dependencyTracker)==null||l.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+o.width,i.offsetY,i.offsetY+o.height).recordOperation(e),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r,s=0,i=0,o,l){var y,_,E;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const f=cr(c);c.transform(r,s,i,o,0,0);const g=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]),(y=this.dependencyTracker)==null||y.resetBBox(e);for(let P=0,S=l.length;P<S;P+=2){const I=Ke.transform(f,[r,s,i,o,l[P],l[P+1]]);c.drawImage(g.canvas,I[4],I[5]),(_=this.dependencyTracker)==null||_.recordBBox(e,this.ctx,I[4],I[4]+g.canvas.width,I[5],I[5]+g.canvas.height)}c.restore(),this.compose(),(E=this.dependencyTracker)==null||E.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,l,c;if(!this.contentVisible)return;const r=this.ctx,s=this.current.fillColor,i=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,qo.transformAndFill);for(const f of t){const{data:g,width:y,height:_,transform:E}=f,P=this.cachedCanvases.getCanvas("maskCanvas",y,_),S=P.context;S.save();const I=this.getObject(e,g,f);CO(S,I),S.globalCompositeOperation="source-in",S.fillStyle=i?s.getPattern(S,this,wl(r),Ts.FILL,e):s,S.fillRect(0,0,y,_),S.restore(),r.save(),r.transform(...E),r.scale(1,-1),C_(r,P.canvas,0,0,y,_,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,r,0,y,0,_),r.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const r=this.getObject(e,t);if(!r){bt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,t,r,s,i){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){bt("Dependent image isn't ready yet");return}const l=o.width,c=o.height,f=[];for(let g=0,y=i.length;g<y;g+=2)f.push({transform:[r,0,0,s,i[g],i[g+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(e,o,f)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,s),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e,t){var f;if(!this.contentVisible)return;const r=t.width,s=t.height,i=this.ctx;this.save(e);const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none"),i.scale(1/r,-1/s);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const y=this.cachedCanvases.getCanvas("inlineImage",r,s).context;EO(y,t),l=this.applyTransferMapsToCanvas(y)}const c=this._scaleImage(l,wl(i));i.imageSmoothingEnabled=AO(cr(i),t.interpolate),(f=this.dependencyTracker)==null||f.resetBBox(e).recordBBox(e,i,0,r,-s,0).recordDependencies(e,qo.imageXObject).recordOperation(e),C_(i,c.img,0,0,c.paintWidth,c.paintHeight,0,-s,r,s),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,r){var o,l,c;if(!this.contentVisible)return;const s=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const f=t.width,g=t.height,_=this.cachedCanvases.getCanvas("inlineImage",f,g).context;EO(_,t),i=this.applyTransferMapsToCanvas(_)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const f of r)s.save(),s.transform(...f.transform),s.scale(1,-1),C_(s,i,f.x,f.y,f.w,f.h,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,s,0,1,-1,0),s.restore();(c=this.dependencyTracker)==null||c.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,qo.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,r){}beginMarkedContent(e,t){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,r){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,r){var o,l;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const i=this.ctx;this.pendingClip?(s||(this.pendingClip===SO?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(l=this.dependencyTracker)==null||l.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=cr(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:s,d:i}=this.ctx.getTransform();let o,l;if(r===0&&s===0){const c=Math.abs(t),f=Math.abs(i);if(c===f)if(e===0)o=l=1/c;else{const g=c*e;o=l=g<1?1/g:1}else if(e===0)o=1/c,l=1/f;else{const g=c*e,y=f*e;o=g<1?1/g:1,l=y<1?1/y:1}}else{const c=Math.abs(t*i-r*s),f=Math.hypot(t,r),g=Math.hypot(s,i);if(e===0)o=g/c,l=f/c;else{const y=e*c;o=g>y?g/y:1,l=f>y?f/y:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:s}}=this,[i,o]=this.getScaleForStroking();if(i===o){r.lineWidth=(s||1)*i,r.stroke(e);return}const l=r.getLineDash();t&&r.save(),r.scale(i,o),TS.a=1/i,TS.d=1/o;const c=new Path2D;if(c.addPath(e,TS),l.length>0){const f=Math.max(i,o);r.setLineDash(l.map(g=>g/f)),r.lineDashOffset/=f}r.lineWidth=s||1,r.stroke(c),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ll=new WeakSet,QT=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},JT=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},e3=function(e,t,r){const s=new Path2D;return s.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),s};let Bg=UR;for(const n in ey)Bg.prototype[n]!==void 0&&(Bg.prototype[ey[n]]=Bg.prototype[n]);var Ky,Zy;class Ql{static get workerPort(){return p(this,Ky)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");B(this,Ky,e)}static get workerSrc(){return p(this,Zy)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");B(this,Zy,e)}}Ky=new WeakMap,Zy=new WeakMap,W(Ql,Ky,null),W(Ql,Zy,"");var P0,Qy;class Uoe{constructor({parsedData:e,rawData:t}){W(this,P0);W(this,Qy);B(this,P0,e),B(this,Qy,t)}getRaw(){return p(this,Qy)}get(e){return p(this,P0).get(e)??null}[Symbol.iterator](){return p(this,P0).entries()}}P0=new WeakMap,Qy=new WeakMap;const sg=Symbol("INTERNAL");var Jy,ew,tw,I0;class zoe{constructor(e,{name:t,intent:r,usage:s,rbGroups:i}){W(this,Jy,!1);W(this,ew,!1);W(this,tw,!1);W(this,I0,!0);B(this,Jy,!!(e&yo.DISPLAY)),B(this,ew,!!(e&yo.PRINT)),this.name=t,this.intent=r,this.usage=s,this.rbGroups=i}get visible(){if(p(this,tw))return p(this,I0);if(!p(this,I0))return!1;const{print:e,view:t}=this.usage;return p(this,Jy)?(t==null?void 0:t.viewState)!=="OFF":p(this,ew)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==sg&&jn("Internal method `_setVisible` called."),B(this,tw,r),B(this,I0,t)}}Jy=new WeakMap,ew=new WeakMap,tw=new WeakMap,I0=new WeakMap;var Hd,Nn,R0,k0,nw,t3;class Hoe{constructor(e,t=yo.DISPLAY){W(this,nw);W(this,Hd,null);W(this,Nn,new Map);W(this,R0,null);W(this,k0,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,B(this,k0,e.order);for(const r of e.groups)p(this,Nn).set(r.id,new zoe(t,r));if(e.baseState==="OFF")for(const r of p(this,Nn).values())r._setVisible(sg,!1);for(const r of e.on)p(this,Nn).get(r)._setVisible(sg,!0);for(const r of e.off)p(this,Nn).get(r)._setVisible(sg,!1);B(this,R0,this.getHash())}}isVisible(e){if(p(this,Nn).size===0)return!0;if(!e)return QC("Optional content group not defined."),!0;if(e.type==="OCG")return p(this,Nn).has(e.id)?p(this,Nn).get(e.id).visible:(bt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return G(this,nw,t3).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!p(this,Nn).has(t))return bt(`Optional content group not found: ${t}`),!0;if(p(this,Nn).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!p(this,Nn).has(t))return bt(`Optional content group not found: ${t}`),!0;if(!p(this,Nn).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!p(this,Nn).has(t))return bt(`Optional content group not found: ${t}`),!0;if(!p(this,Nn).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!p(this,Nn).has(t))return bt(`Optional content group not found: ${t}`),!0;if(p(this,Nn).get(t).visible)return!1}return!0}return bt(`Unknown optional content policy ${e.policy}.`),!0}return bt(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){var i;const s=p(this,Nn).get(e);if(!s){bt(`Optional content group not found: ${e}`);return}if(r&&t&&s.rbGroups.length)for(const o of s.rbGroups)for(const l of o)l!==e&&((i=p(this,Nn).get(l))==null||i._setVisible(sg,!1,!0));s._setVisible(sg,!!t,!0),B(this,Hd,null)}setOCGState({state:e,preserveRB:t}){let r;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":r=s;continue}const i=p(this,Nn).get(s);if(i)switch(r){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!i.visible,t);break}}B(this,Hd,null)}get hasInitialVisibility(){return p(this,R0)===null||this.getHash()===p(this,R0)}getOrder(){return p(this,Nn).size?p(this,k0)?p(this,k0).slice():[...p(this,Nn).keys()]:null}getGroup(e){return p(this,Nn).get(e)||null}getHash(){if(p(this,Hd)!==null)return p(this,Hd);const e=new WF;for(const[t,r]of p(this,Nn))e.update(`${t}:${r.visible}`);return B(this,Hd,e.hexdigest())}[Symbol.iterator](){return p(this,Nn).entries()}}Hd=new WeakMap,Nn=new WeakMap,R0=new WeakMap,k0=new WeakMap,nw=new WeakSet,t3=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let s=1;s<t;s++){const i=e[s];let o;if(Array.isArray(i))o=G(this,nw,t3).call(this,i);else if(p(this,Nn).has(i))o=p(this,Nn).get(i).visible;else return bt(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"};class Voe{constructor(e,{disableRange:t=!1,disableStream:r=!1}){Zt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:o,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,f)=>{this._onReceiveData({begin:c,chunk:f})}),e.addProgressListener((c,f)=>{this._onProgress({loaded:c,total:f})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(r),!0)});Zt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,s,i;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Zt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Woe(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new Goe(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class Woe{constructor(e,t,r=!1,s=null){this._stream=e,this._done=r||!1,this._filename=yR(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Goe{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function $oe(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let g=l(t);return g=unescape(g),g=c(g),g=f(g),i(g)}if(t=o(n),t){const g=f(t);return i(g)}if(t=r("filename","i").exec(n),t){t=t[1];let g=l(t);return g=f(g),i(g)}function r(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function s(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const _=new TextDecoder(g,{fatal:!0}),E=yb(y);y=_.decode(E),e=!1}catch{}}return y}function i(g){return e&&/[\x80-\xff]/.test(g)&&(g=s("utf-8",g),e&&(g=s("iso-8859-1",g))),g}function o(g){const y=[];let _;const E=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(_=E.exec(g))!==null;){let[,S,I,N]=_;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[I,N]}const P=[];for(let S=0;S<y.length&&S in y;++S){let[I,N]=y[S];N=l(N),I&&(N=unescape(N),S===0&&(N=c(N))),P.push(N)}return P.join("")}function l(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let _=0;_<y.length;++_){const E=y[_].indexOf('"');E!==-1&&(y[_]=y[_].slice(0,E),y.length=_+1),y[_]=y[_].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function c(g){const y=g.indexOf("'");if(y===-1)return g;const _=g.slice(0,y),P=g.slice(y+1).replace(/^[^']*'/,"");return s(_,P)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,_,E,P){if(E==="q"||E==="Q")return P=P.replaceAll("_"," "),P=P.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,I){return String.fromCharCode(parseInt(I,16))}),s(_,P);try{P=atob(P)}catch{}return s(_,P)})}return""}function n9(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const s=e[r];s!==void 0&&t.append(r,s)}return t}function eA(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function r9({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function s9(n){const e=n.get("Content-Disposition");if(e){let t=$oe(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(yR(t))return t}return null}function Cb(n,e){return new gE(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function i9(n){return n===200||n===206}function o9(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function a9(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(bt(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class qoe{constructor(e){Pe(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=n9(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Zt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Xoe(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new Yoe(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class Xoe{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),s=t.url;fetch(s,o9(r,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=eA(i.url),!i9(i.status))throw Cb(i.status,s);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:l,suggestedLength:c}=r9({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=s9(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Fh("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:a9(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class Yoe{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${r-1}`);const o=s.url;fetch(o,o9(i,this._withCredentials,this._abortController)).then(l=>{const c=eA(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!i9(l.status))throw Cb(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:a9(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const PS=200,IS=206;function Koe(n){const e=n.response;return typeof e!="string"?e:yb(e).buffer}class Zoe{constructor({url:e,httpHeaders:t,withCredentials:r}){Pe(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=n9(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,s=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,o]of this.headers)t.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=IS):s.expectedStatus=PS,t.responseType="arraybuffer",Zt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var s;const r=this.pendingRequests[e];r&&((s=r.onProgress)==null||s.call(r,t))}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const s=r.xhr;if(s.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){r.onError(s.status);return}const i=s.status||PS;if(!(i===PS&&r.expectedStatus===IS)&&i!==r.expectedStatus){r.onError(s.status);return}const l=Koe(s);if(i===IS){const c=s.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);f?r.onDone({begin:parseInt(f[1],10),chunk:l}):(bt('Missing or invalid "Content-Range" header.'),r.onError(0))}else l?r.onDone({begin:0,chunk:l}):r.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Qoe{constructor(e){this._source=e,this._manager=new Zoe(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Zt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Joe(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new eae(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class Joe{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=eA(t.responseURL);const r=t.getAllResponseHeaders(),s=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...f]=l.split(": ");return[c,f.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=r9({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=s9(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Cb(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class eae{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=eA((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Cb(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const tae=/^[a-z][a-z0-9\-+.]+:/i;function nae(n){if(tae.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class rae{constructor(e){this.source=e,this.url=nae(e.url),Zt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Zt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new sae(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new iae(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class sae{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=Cb(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Fh("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class iae{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const kx=Symbol("INITIAL_DATA");var so,rw,n3;class l9{constructor(){W(this,rw);W(this,so,Object.create(null))}get(e,t=null){if(t){const s=G(this,rw,n3).call(this,e);return s.promise.then(()=>t(s.data)),null}const r=p(this,so)[e];if(!r||r.data===kx)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=p(this,so)[e];return!!t&&t.data!==kx}delete(e){const t=p(this,so)[e];return!t||t.data===kx?!1:(delete p(this,so)[e],!0)}resolve(e,t=null){const r=G(this,rw,n3).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in p(this,so)){const{data:r}=p(this,so)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}B(this,so,Object.create(null))}*[Symbol.iterator](){for(const e in p(this,so)){const{data:t}=p(this,so)[e];t!==kx&&(yield[e,t])}}}so=new WeakMap,rw=new WeakSet,n3=function(e){var t;return(t=p(this,so))[e]||(t[e]={...Promise.withResolvers(),data:kx})};const oae=1e5,NO=30;var JO,Vd,Oi,sw,iw,ym,iu,ow,aw,wm,M0,O0,Wd,D0,lw,j0,bm,cw,uw,L0,_m,dw,Gd,B0,Lu,c9,u9,r3,Io,s2,s3,d9,h9;const $r=class $r{constructor({textContentSource:e,container:t,viewport:r}){W(this,Lu);W(this,Vd,Promise.withResolvers());W(this,Oi,null);W(this,sw,!1);W(this,iw,!!((JO=globalThis.FontInspector)!=null&&JO.enabled));W(this,ym,null);W(this,iu,null);W(this,ow,0);W(this,aw,0);W(this,wm,null);W(this,M0,null);W(this,O0,0);W(this,Wd,0);W(this,D0,Object.create(null));W(this,lw,[]);W(this,j0,null);W(this,bm,[]);W(this,cw,new WeakMap);W(this,uw,null);var c;if(e instanceof ReadableStream)B(this,j0,e);else if(typeof e=="object")B(this,j0,new ReadableStream({start(f){f.enqueue(e),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');B(this,Oi,B(this,M0,t)),B(this,Wd,r.scale*cc.pixelRatio),B(this,O0,r.rotation),B(this,iu,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:o,pageY:l}=r.rawDims;B(this,uw,[1,0,0,-1,-o,l+i]),B(this,aw,s),B(this,ow,i),G(c=$r,Io,d9).call(c),xp(t,r),p(this,Vd).promise.finally(()=>{p($r,B0).delete(this),B(this,iu,null),B(this,D0,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Os.platform;return It(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{p(this,wm).read().then(({value:t,done:r})=>{if(r){p(this,Vd).resolve();return}p(this,ym)??B(this,ym,t.lang),Object.assign(p(this,D0),t.styles),G(this,Lu,c9).call(this,t.items),e()},p(this,Vd).reject)};return B(this,wm,p(this,j0).getReader()),p($r,B0).add(this),e(),p(this,Vd).promise}update({viewport:e,onBefore:t=null}){var i;const r=e.scale*cc.pixelRatio,s=e.rotation;if(s!==p(this,O0)&&(t==null||t(),B(this,O0,s),xp(p(this,M0),{rotation:s})),r!==p(this,Wd)){t==null||t(),B(this,Wd,r);const o={div:null,properties:null,ctx:G(i=$r,Io,s2).call(i,p(this,ym))};for(const l of p(this,bm))o.properties=p(this,cw).get(l),o.div=l,G(this,Lu,r3).call(this,o)}}cancel(){var t;const e=new Fh("TextLayer task cancelled.");(t=p(this,wm))==null||t.cancel(e).catch(()=>{}),B(this,wm,null),p(this,Vd).reject(e)}get textDivs(){return p(this,bm)}get textContentItemsStr(){return p(this,lw)}static cleanup(){if(!(p(this,B0).size>0)){p(this,L0).clear();for(const{canvas:e}of p(this,_m).values())e.remove();p(this,_m).clear()}}};Vd=new WeakMap,Oi=new WeakMap,sw=new WeakMap,iw=new WeakMap,ym=new WeakMap,iu=new WeakMap,ow=new WeakMap,aw=new WeakMap,wm=new WeakMap,M0=new WeakMap,O0=new WeakMap,Wd=new WeakMap,D0=new WeakMap,lw=new WeakMap,j0=new WeakMap,bm=new WeakMap,cw=new WeakMap,uw=new WeakMap,L0=new WeakMap,_m=new WeakMap,dw=new WeakMap,Gd=new WeakMap,B0=new WeakMap,Lu=new WeakSet,c9=function(e){var s,i;if(p(this,sw))return;(i=p(this,iu)).ctx??(i.ctx=G(s=$r,Io,s2).call(s,p(this,ym)));const t=p(this,bm),r=p(this,lw);for(const o of e){if(t.length>oae){bt("Ignoring additional textDivs for performance reasons."),B(this,sw,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=p(this,Oi);B(this,Oi,document.createElement("span")),p(this,Oi).classList.add("markedContent"),o.id&&p(this,Oi).setAttribute("id",`${o.id}`),l.append(p(this,Oi))}else o.type==="endMarkedContent"&&B(this,Oi,p(this,Oi).parentNode);continue}r.push(o.str),G(this,Lu,u9).call(this,o)}},u9=function(e){var S;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};p(this,bm).push(t);const s=Ke.transform(p(this,uw),e.transform);let i=Math.atan2(s[1],s[0]);const o=p(this,D0)[e.fontName];o.vertical&&(i+=Math.PI/2);let l=p(this,iw)&&o.fontSubstitution||o.fontFamily;l=$r.fontFamilyMap.get(l)||l;const c=Math.hypot(s[2],s[3]),f=c*G(S=$r,Io,h9).call(S,l,o,p(this,ym));let g,y;i===0?(g=s[4],y=s[5]-f):(g=s[4]+f*Math.sin(i),y=s[5]-f*Math.cos(i));const _="calc(var(--total-scale-factor) *",E=t.style;p(this,Oi)===p(this,M0)?(E.left=`${(100*g/p(this,aw)).toFixed(2)}%`,E.top=`${(100*y/p(this,ow)).toFixed(2)}%`):(E.left=`${_}${g.toFixed(2)}px)`,E.top=`${_}${y.toFixed(2)}px)`),E.fontSize=`${_}${(p($r,Gd)*c).toFixed(2)}px)`,E.fontFamily=l,r.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,p(this,iw)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let P=!1;if(e.str.length>1)P=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const I=Math.abs(e.transform[0]),N=Math.abs(e.transform[3]);I!==N&&Math.max(I,N)/Math.min(I,N)>1.5&&(P=!0)}if(P&&(r.canvasWidth=o.vertical?e.height:e.width),p(this,cw).set(t,r),p(this,iu).div=t,p(this,iu).properties=r,G(this,Lu,r3).call(this,p(this,iu)),r.hasText&&p(this,Oi).append(t),r.hasEOL){const I=document.createElement("br");I.setAttribute("role","presentation"),p(this,Oi).append(I)}},r3=function(e){var l;const{div:t,properties:r,ctx:s}=e,{style:i}=t;let o="";if(p($r,Gd)>1&&(o=`scale(${1/p($r,Gd)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:c}=i,{canvasWidth:f,fontSize:g}=r;G(l=$r,Io,s3).call(l,s,g*p(this,Wd),c);const{width:y}=s.measureText(t.textContent);y>0&&(o=`scaleX(${f*p(this,Wd)/y}) ${o}`)}r.angle!==0&&(o=`rotate(${r.angle}deg) ${o}`),o.length>0&&(i.transform=o)},Io=new WeakSet,s2=function(e=null){let t=p(this,_m).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),p(this,_m).set(e,t),p(this,dw).set(t,{size:0,family:""})}return t},s3=function(e,t,r){const s=p(this,dw).get(e);t===s.size&&r===s.family||(e.font=`${t}px ${r}`,s.size=t,s.family=r)},d9=function(){if(p(this,Gd)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),B(this,Gd,e.getBoundingClientRect().height),e.remove()},h9=function(e,t,r){const s=p(this,L0).get(e);if(s)return s;const i=G(this,Io,s2).call(this,r);i.canvas.width=i.canvas.height=NO,G(this,Io,s3).call(this,i,NO,e);const o=i.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let f=.8;return l?f=l/(l+c):(Os.platform.isFirefox&&bt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?f=t.ascent:t.descent&&(f=1+t.descent)),p(this,L0).set(e,f),f},W($r,Io),W($r,L0,new Map),W($r,_m,new Map),W($r,dw,new WeakMap),W($r,Gd,null),W($r,B0,new Set);let ny=$r;const aae=100;function f9(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new i3,{docId:t}=e,r=n.url?moe(n.url):null,s=n.data?poe(n.data):null,i=n.httpHeaders||null,o=n.withCredentials===!0,l=n.password??null,c=n.range instanceof m9?n.range:null,f=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let g=n.worker instanceof ry?n.worker:null;const y=n.verbosity,_=typeof n.docBaseUrl=="string"&&!JC(n.docBaseUrl)?n.docBaseUrl:null,E=w_(n.cMapUrl),P=n.cMapPacked!==!1,S=n.CMapReaderFactory||(fi?Eoe:fO),I=w_(n.iccUrl),N=w_(n.standardFontDataUrl),k=n.StandardFontDataFactory||(fi?Coe:mO),T=w_(n.wasmUrl),D=n.WasmFactory||(fi?Aoe:pO),U=n.stopAtErrors!==!0,z=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,F=n.isEvalSupported!==!1,X=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!fi,Z=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!fi&&(Os.platform.isFirefox||!globalThis.chrome),ne=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,se=typeof n.disableFontFace=="boolean"?n.disableFontFace:fi,ee=n.fontExtraProperties===!0,ce=n.enableXfa===!0,de=n.ownerDocument||globalThis.document,re=n.disableRange===!0,fe=n.disableStream===!0,oe=n.disableAutoFetch===!0,Q=n.pdfBug===!0,ue=n.CanvasFactory||(fi?_oe:yoe),he=n.FilterFactory||(fi?boe:woe),Ee=n.enableHWA===!0,_e=n.useWasm!==!1,Oe=c?c.length:n.length??NaN,De=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!fi&&!se,ze=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(S===fO&&k===mO&&D===pO&&E&&N&&T&&Hx(E,document.baseURI)&&Hx(N,document.baseURI)&&Hx(T,document.baseURI)),be=null;Hie(y);const Te={canvasFactory:new ue({ownerDocument:de,enableHWA:Ee}),filterFactory:new he({docId:t,ownerDocument:de}),cMapReaderFactory:ze?null:new S({baseUrl:E,isCompressed:P}),standardFontDataFactory:ze?null:new k({baseUrl:N}),wasmFactory:ze?null:new D({baseUrl:T})};g||(g=ry.create({verbosity:y,port:Ql.workerPort}),e._worker=g);const Ze={docId:t,apiVersion:"5.4.394",data:s,password:l,disableAutoFetch:oe,rangeChunkSize:f,length:Oe,docBaseUrl:_,enableXfa:ce,evaluatorOptions:{maxImageSize:z,disableFontFace:se,ignoreErrors:U,isEvalSupported:F,isOffscreenCanvasSupported:X,isImageDecoderSupported:Z,canvasMaxAreaInBytes:ne,fontExtraProperties:ee,useSystemFonts:De,useWasm:_e,useWorkerFetch:ze,cMapUrl:E,iccUrl:I,standardFontDataUrl:N,wasmUrl:T}},Nt={ownerDocument:de,pdfBug:Q,styleElement:be,loadingParams:{disableAutoFetch:oe,enableXfa:ce}};return g.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const ut=g.messageHandler.sendWithPromise("GetDocRequest",Ze,s?[s.buffer]:null);let st;if(c)st=new Voe(c,{disableRange:re,disableStream:fe});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");const gt=Hx(r)?qoe:fi?rae:Qoe;st=new gt({url:r,length:Oe,httpHeaders:i,withCredentials:o,rangeChunkSize:f,disableRange:re,disableStream:fe})}return ut.then(gt=>{if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const at=new Kx(t,gt,g.port),$n=new uae(at,e,st,Nt,Te,Ee);e._transport=$n,at.send("Ready",null)})}).catch(e._capability.reject),e}var VE;const WE=class WE{constructor(){Pe(this,"_capability",Promise.withResolvers());Pe(this,"_transport",null);Pe(this,"_worker",null);Pe(this,"docId",`d${vr(WE,VE)._++}`);Pe(this,"destroyed",!1);Pe(this,"onPassword",null);Pe(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,r,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,i}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};VE=new WeakMap,W(WE,VE,0);let i3=WE;var Em,hw,fw,mw,pw;class m9{constructor(e,t,r=!1,s=null){W(this,Em,Promise.withResolvers());W(this,hw,[]);W(this,fw,[]);W(this,mw,[]);W(this,pw,[]);this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=s}addRangeListener(e){p(this,pw).push(e)}addProgressListener(e){p(this,mw).push(e)}addProgressiveReadListener(e){p(this,fw).push(e)}addProgressiveDoneListener(e){p(this,hw).push(e)}onDataRange(e,t){for(const r of p(this,pw))r(e,t)}onDataProgress(e,t){p(this,Em).promise.then(()=>{for(const r of p(this,mw))r(e,t)})}onDataProgressiveRead(e){p(this,Em).promise.then(()=>{for(const t of p(this,fw))t(e)})}onDataProgressiveDone(){p(this,Em).promise.then(()=>{for(const e of p(this,hw))e()})}transportReady(){p(this,Em).resolve()}requestDataRange(e,t){jn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Em=new WeakMap,hw=new WeakMap,fw=new WeakMap,mw=new WeakMap,pw=new WeakMap;class lae{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return It(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ou,Cm,tv;class cae{constructor(e,t,r,s=!1){W(this,Cm);W(this,ou,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=s?new oO:null,this._pdfBug=s,this.commonObjs=r.commonObjs,this.objs=new l9,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:i=!1}={}){return new bb({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return It(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:r,intent:s="display",annotationMode:i=pd.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:y=null,isEditing:_=!1,recordOperations:E=!1,operationsFilter:P=null}){var Z,ne,se;(Z=this._stats)==null||Z.time("Overall");const S=this._transport.getRenderingIntent(s,i,y,_),{renderingIntent:I,cacheKey:N}=S;B(this,ou,!1),c||(c=this._transport.getOptionalContentConfig(I));let k=this._intentStates.get(N);k||(k=Object.create(null),this._intentStates.set(N,k)),k.streamReaderCancelTimeout&&(clearTimeout(k.streamReaderCancelTimeout),k.streamReaderCancelTimeout=null);const T=!!(I&yo.PRINT);k.displayReadyCapability||(k.displayReadyCapability=Promise.withResolvers(),k.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ne=this._stats)==null||ne.time("Page Request"),this._pumpOperatorList(S));const D=!!(this._pdfBug&&((se=globalThis.StepperManager)!=null&&se.enabled)),U=!this.recordedBBoxes&&(E||D),z=ee=>{var ce,de;if(k.renderTasks.delete(F),U){const re=(ce=F.gfx)==null?void 0:ce.dependencyTracker.take();re&&(F.stepper&&F.stepper.setOperatorBBoxes(re,F.gfx.dependencyTracker.takeDebugMetadata()),E&&(this.recordedBBoxes=re))}T&&B(this,ou,!0),G(this,Cm,tv).call(this),ee?(F.capability.reject(ee),this._abortOperatorList({intentState:k,reason:ee instanceof Error?ee:new Error(ee)})):F.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(de=globalThis.Stats)!=null&&de.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},F=new o3({callback:z,params:{canvas:t,canvasContext:e,dependencyTracker:U?new Noe(t,k.operatorList.length,D):null,viewport:r,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:k.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:P});(k.renderTasks||(k.renderTasks=new Set)).add(F);const X=F.task;return Promise.all([k.displayReadyCapability.promise,c]).then(([ee,ce])=>{var de;if(this.destroyed){z();return}if((de=this._stats)==null||de.time("Rendering"),!(ce.renderingIntent&I))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");F.initializeGraphics({transparency:ee,optionalContentConfig:ce}),F.operatorListChanged()}).catch(z),X}getOperatorList({intent:e="display",annotationMode:t=pd.ENABLE,printAnnotationStorage:r=null,isEditing:s=!1}={}){var f;function i(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,r,s,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>ty.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,s){function i(){o.read().then(function({value:c,done:f}){if(f){r(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),i()},s)}const o=t.getReader(),l={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),B(this,ou,!1),Promise.all(e)}cleanup(e=!1){B(this,ou,!0);const t=G(this,Cm,tv).call(this);return e&&t&&this._stats&&(this._stats=new oO),t}_startRenderPage(e,t){var s,i;const r=this._intentStates.get(t);r&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=r.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let r=0,s=e.length;r<s;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&G(this,Cm,tv).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:s}){const{map:i,transfer:o}=r,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:s},o).getReader(),f=this._intentStates.get(t);f.streamReader=c;const g=()=>{c.read().then(({value:y,done:_})=>{if(_){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),g())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const _ of f.renderTasks)_.operatorListChanged();G(this,Cm,tv).call(this)}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof vR){let s=aae;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Fh(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}ou=new WeakMap,Cm=new WeakSet,tv=function(){if(!p(this,ou)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),B(this,ou,!1),!0};var $d,za,au,Am,GE,Sm,Nm,vi,i2,p9,g9,nv,F0,o2;const nr=class nr{constructor({name:e=null,port:t=null,verbosity:r=Vie()}={}){W(this,vi);W(this,$d,Promise.withResolvers());W(this,za,null);W(this,au,null);W(this,Am,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(p(nr,Nm).has(t))throw new Error("Cannot use more than one PDFWorker per port.");p(nr,Nm).set(t,this),G(this,vi,p9).call(this,t)}else G(this,vi,g9).call(this)}get promise(){return p(this,$d).promise}get port(){return p(this,au)}get messageHandler(){return p(this,za)}destroy(){var e,t;this.destroyed=!0,(e=p(this,Am))==null||e.terminate(),B(this,Am,null),p(nr,Nm).delete(p(this,au)),B(this,au,null),(t=p(this,za))==null||t.destroy(),B(this,za,null)}static create(e){const t=p(this,Nm).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new nr(e)}static get workerSrc(){if(Ql.workerSrc)return Ql.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return It(this,"_setupFakeWorkerGlobal",(async()=>p(this,F0,o2)?p(this,F0,o2):(await import(this.workerSrc)).WorkerMessageHandler)())}};$d=new WeakMap,za=new WeakMap,au=new WeakMap,Am=new WeakMap,GE=new WeakMap,Sm=new WeakMap,Nm=new WeakMap,vi=new WeakSet,i2=function(){p(this,$d).resolve(),p(this,za).send("configure",{verbosity:this.verbosity})},p9=function(e){B(this,au,e),B(this,za,new Kx("main","worker",e)),p(this,za).on("ready",()=>{}),G(this,vi,i2).call(this)},g9=function(){if(p(nr,Sm)||p(nr,F0,o2)){G(this,vi,nv).call(this);return}let{workerSrc:e}=nr;try{nr._isSameOrigin(window.location,e)||(e=nr._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new Kx("main","worker",t),s=()=>{i.abort(),r.destroy(),t.terminate(),this.destroyed?p(this,$d).reject(new Error("Worker was destroyed")):G(this,vi,nv).call(this)},i=new AbortController;t.addEventListener("error",()=>{p(this,Am)||s()},{signal:i.signal}),r.on("test",l=>{if(i.abort(),this.destroyed||!l){s();return}B(this,za,r),B(this,au,t),B(this,Am,t),G(this,vi,i2).call(this)}),r.on("ready",l=>{if(i.abort(),this.destroyed){s();return}try{o()}catch{G(this,vi,nv).call(this)}});const o=()=>{const l=new Uint8Array;r.send("test",l,[l.buffer])};o();return}catch{QC("The worker has been disabled.")}G(this,vi,nv).call(this)},nv=function(){p(nr,Sm)||(bt("Setting up fake worker."),B(nr,Sm,!0)),nr._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){p(this,$d).reject(new Error("Worker was destroyed"));return}const t=new voe;B(this,au,t);const r=`fake${vr(nr,GE)._++}`,s=new Kx(r+"_worker",r,t);e.setup(s,t),B(this,za,new Kx(r,r+"_worker",t)),G(this,vi,i2).call(this)}).catch(e=>{p(this,$d).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},F0=new WeakSet,o2=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},W(nr,F0),W(nr,GE,0),W(nr,Sm,!1),W(nr,Nm,new WeakMap),fi&&(B(nr,Sm,!0),Ql.workerSrc||(Ql.workerSrc="./pdf.worker.mjs")),nr._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const s=new URL(t,r);return r.origin===s.origin},nr._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},nr.fromPort=e=>{if(toe("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return nr.create(e)};let ry=nr;var lu,Fl,U0,z0,cu,Tm,rv;class uae{constructor(e,t,r,s,i,o){W(this,Tm);W(this,lu,new Map);W(this,Fl,new Map);W(this,U0,new Map);W(this,z0,new Map);W(this,cu,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new l9,this.fontLoader=new hoe({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return It(this,"annotationStorage",new wR)}getRenderingIntent(e,t=pd.ENABLE,r=null,s=!1,i=!1){let o=yo.DISPLAY,l=HT;switch(e){case"any":o=yo.ANY;break;case"display":break;case"print":o=yo.PRINT;break;default:bt(`getRenderingIntent - invalid intent: ${e}`)}const c=o&yo.PRINT&&r instanceof $F?r:this.annotationStorage;switch(t){case pd.DISABLE:o+=yo.ANNOTATIONS_DISABLE;break;case pd.ENABLE:break;case pd.ENABLE_FORMS:o+=yo.ANNOTATIONS_FORMS;break;case pd.ENABLE_STORAGE:o+=yo.ANNOTATIONS_STORAGE,l=c.serializable;break;default:bt(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(o+=yo.IS_EDITING),i&&(o+=yo.OPLIST);const{ids:f,hash:g}=c.modifiedIds,y=[o,l.hash,g];return{renderingIntent:o,cacheKey:y.join("_"),annotationStorageSerializable:l,modifiedIds:f}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=p(this,cu))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of p(this,Fl).values())e.push(s._destroy());p(this,Fl).clear(),p(this,U0).clear(),p(this,z0).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,i;this.commonObjs.clear(),this.fontLoader.clear(),p(this,lu).clear(),this.filterFactory.destroy(),ny.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Fh("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,s)=>{Zt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){s.close();return}Zt(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async r=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:i,contentLength:o}=this._fullReader;return(!s||!i)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var f;(f=t.onProgress)==null||f.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(r,s)=>{Zt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(r.begin,r.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:o,done:l}){if(l){s.close();return}Zt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{i.cancel(o),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new lae(r,this))}),e.on("DocException",r=>{t._capability.reject(Ti(r))}),e.on("PasswordRequest",r=>{B(this,cu,Promise.withResolvers());try{if(!t.onPassword)throw Ti(r);const s=i=>{i instanceof Error?p(this,cu).reject(i):p(this,cu).resolve({password:i})};t.onPassword(s,r.code)}catch(s){p(this,cu).reject(s)}return p(this,cu).promise}),e.on("DataLoaded",r=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;p(this,Fl).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,i])=>{var o;if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":if("error"in i){const _=i.error;bt(`Error during font loading: ${_}`),this.commonObjs.resolve(r,_);break}const l=new VT(i),c=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(_,E)=>globalThis.FontInspector.fontAdded(_,E):null,f=new foe(l,c,i.extra,i.charProcOperatorList);this.fontLoader.bind(f).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!f.fontExtraProperties&&f.data&&f.clearData(),this.commonObjs.resolve(r,f)});break;case"CopyLocalImage":const{imageRef:g}=i;Zt(g,"The imageRef must be defined.");for(const _ of p(this,Fl).values())for(const[,E]of _.objs)if((E==null?void 0:E.ref)===g)return E.dataLen?(this.commonObjs.resolve(r,structuredClone(E)),E.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(r,i);break;case"Pattern":const y=new WT(i);this.commonObjs.resolve(r,y.getIR());break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([r,s,i,o])=>{var c;if(this.destroyed)return;const l=p(this,Fl).get(s);if(!l.objs.has(r)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(i){case"Image":case"Pattern":l.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[r.type];if(!s)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&bt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=p(this,U0).get(t);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&p(this,z0).set(i.refStr,e);const o=new cae(t,i,this,this._params.pdfBug);return p(this,Fl).set(t,o),o});return p(this,U0).set(t,s),s}getPageIndex(e){return GT(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return G(this,Tm,rv).call(this,"GetFieldObjects")}hasJSActions(){return G(this,Tm,rv).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return G(this,Tm,rv).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return G(this,Tm,rv).call(this,"GetOptionalContentConfig").then(t=>new Hoe(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=p(this,lu).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(s=>{var i,o;return{info:s[0],metadata:s[1]?new Uoe(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return p(this,lu).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of p(this,Fl).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),p(this,lu).clear(),this.filterFactory.destroy(!0),ny.cleanup()}}cachedPageNumber(e){if(!GT(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return p(this,z0).get(t)??null}}lu=new WeakMap,Fl=new WeakMap,U0=new WeakMap,z0=new WeakMap,cu=new WeakMap,Tm=new WeakSet,rv=function(e,t=null){const r=p(this,lu).get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,t);return p(this,lu).set(e,s),s};var qd;class dae{constructor(e){W(this,qd,null);Pe(this,"onContinue",null);Pe(this,"onError",null);B(this,qd,e)}get promise(){return p(this,qd).capability.promise}cancel(e=0){p(this,qd).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=p(this,qd).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=p(this,qd);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}qd=new WeakMap;var Xd,Pm;const If=class If{constructor({callback:e,params:t,objs:r,commonObjs:s,annotationCanvasMap:i,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:_=null,enableHWA:E=!1,operationsFilter:P=null}){W(this,Xd,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=f,this._pdfBug=y,this.pageColors=_,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new dae(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=E,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=P}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,f;if(this.cancelled)return;if(this._canvas){if(p(If,Pm).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");p(If,Pm).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:s,background:i,dependencyTracker:o}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Bg(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(e=null,t=0){var r,s,i;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),p(this,Xd)&&(window.cancelAnimationFrame(p(this,Xd)),B(this,Xd,null)),p(If,Pm).delete(this._canvas),e||(e=new vR(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(s=this.task).onError)==null||i.call(s,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?B(this,Xd,window.requestAnimationFrame(()=>{B(this,Xd,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),p(If,Pm).delete(this._canvas),this.callback())))}};Xd=new WeakMap,Pm=new WeakMap,W(If,Pm,new WeakSet);let o3=If;const x9="5.4.394",hae="2cc809ade";var io,Im,H0,Yr,gw,V0,uu,xw,Yd,Ha,vw,Pn,a3,l3,c3,yf,v9,ad;const Pi=class Pi{constructor({editor:e=null,uiManager:t=null}){W(this,Pn);W(this,io,null);W(this,Im,null);W(this,H0);W(this,Yr,null);W(this,gw,!1);W(this,V0,!1);W(this,uu,null);W(this,xw);W(this,Yd,null);W(this,Ha,null);var r,s;e?(B(this,V0,!1),B(this,uu,e)):B(this,V0,!0),B(this,Ha,(e==null?void 0:e._uiManager)||t),B(this,xw,p(this,Ha)._eventBus),B(this,H0,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((s=p(this,Ha))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),p(Pi,vw)||B(Pi,vw,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return It(this,"_keyboardManager",new Eb([[["Escape","mac+Escape"],Pi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Pi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Pi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Pi.prototype._moveToPrevious],[["Home","mac+Home"],Pi.prototype._moveToBeginning],[["End","mac+End"],Pi.prototype._moveToEnd]]))}renderButton(){const e=B(this,io,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",p(this,uu)&&(e.ariaControls=`${p(this,uu).id}_colorpicker_dropdown`);const t=p(this,Ha)._signal;e.addEventListener("click",G(this,Pn,yf).bind(this),{signal:t}),e.addEventListener("keydown",G(this,Pn,c3).bind(this),{signal:t});const r=B(this,Im,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=p(this,H0),e.append(r),e}renderMainDropdown(){const e=B(this,Yr,G(this,Pn,a3).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===p(this,io)){G(this,Pn,yf).call(this,e);return}const t=e.target.getAttribute("data-color");t&&G(this,Pn,l3).call(this,t,e)}_moveToNext(e){var t,r;if(!p(this,Pn,ad)){G(this,Pn,yf).call(this,e);return}if(e.target===p(this,io)){(t=p(this,Yr).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=p(this,Yr))==null?void 0:t.firstChild)||e.target===p(this,io)){p(this,Pn,ad)&&this._hideDropdownFromKeyboard();return}p(this,Pn,ad)||G(this,Pn,yf).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!p(this,Pn,ad)){G(this,Pn,yf).call(this,e);return}(t=p(this,Yr).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!p(this,Pn,ad)){G(this,Pn,yf).call(this,e);return}(t=p(this,Yr).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=p(this,Yr))==null||e.classList.add("hidden"),p(this,io).ariaExpanded="false",(t=p(this,Yd))==null||t.abort(),B(this,Yd,null)}_hideDropdownFromKeyboard(){var e;if(!p(this,V0)){if(!p(this,Pn,ad)){(e=p(this,uu))==null||e.unselect();return}this.hideDropdown(),p(this,io).focus({preventScroll:!0,focusVisible:p(this,gw)})}}updateColor(e){if(p(this,Im)&&(p(this,Im).style.backgroundColor=e),!p(this,Yr))return;const t=p(this,Ha).highlightColors.values();for(const r of p(this,Yr).children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=p(this,io))==null||e.remove(),B(this,io,null),B(this,Im,null),(t=p(this,Yr))==null||t.remove(),B(this,Yr,null)}};io=new WeakMap,Im=new WeakMap,H0=new WeakMap,Yr=new WeakMap,gw=new WeakMap,V0=new WeakMap,uu=new WeakMap,xw=new WeakMap,Yd=new WeakMap,Ha=new WeakMap,vw=new WeakMap,Pn=new WeakSet,a3=function(){const e=document.createElement("div"),t=p(this,Ha)._signal;e.addEventListener("contextmenu",va,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),p(this,uu)&&(e.id=`${p(this,uu).id}_colorpicker_dropdown`);for(const[r,s]of p(this,Ha).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=r,i.setAttribute("data-l10n-id",p(Pi,vw)[r]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=s,i.ariaSelected=s===p(this,H0),i.addEventListener("click",G(this,Pn,l3).bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",G(this,Pn,c3).bind(this),{signal:t}),e},l3=function(e,t){t.stopPropagation(),p(this,xw).dispatch("switchannotationeditorparams",{source:this,type:Kt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},c3=function(e){Pi._keyboardManager.exec(this,e)},yf=function(e){if(p(this,Pn,ad)){this.hideDropdown();return}if(B(this,gw,e.detail===0),p(this,Yd)||(B(this,Yd,new AbortController),window.addEventListener("pointerdown",G(this,Pn,v9).bind(this),{signal:p(this,Ha).combinedSignal(p(this,Yd))})),p(this,io).ariaExpanded="true",p(this,Yr)){p(this,Yr).classList.remove("hidden");return}const t=B(this,Yr,G(this,Pn,a3).call(this));p(this,io).append(t)},v9=function(e){var t;(t=p(this,Yr))!=null&&t.contains(e.target)||this.hideDropdown()},ad=function(){return p(this,Yr)&&!p(this,Yr).classList.contains("hidden")},W(Pi,vw,null);let EE=Pi;var Ul,yw,W0,ww;const Rf=class Rf{constructor(e){W(this,Ul,null);W(this,yw,null);W(this,W0,null);B(this,yw,e),B(this,W0,e._uiManager),p(Rf,ww)||B(Rf,ww,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(p(this,Ul))return p(this,Ul);const{editorType:e,colorType:t,color:r}=p(this,yw),s=B(this,Ul,document.createElement("input"));return s.type="color",s.value=r||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",p(Rf,ww)[e]),s.addEventListener("input",()=>{p(this,W0).updateParams(t,s.value)},{signal:p(this,W0)._signal}),s}update(e){p(this,Ul)&&(p(this,Ul).value=e)}destroy(){var e;(e=p(this,Ul))==null||e.remove(),B(this,Ul,null)}hideDropdown(){}};Ul=new WeakMap,yw=new WeakMap,W0=new WeakMap,ww=new WeakMap,W(Rf,ww,null);let CE=Rf;function TO(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Mx(n){return Math.max(0,Math.min(255,255*n))}class PO{static CMYK_G([e,t,r,s]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Mx(e),[e,e,e]}static G_HTML([e]){const t=TO(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(Mx)}static RGB_HTML(e){return`#${e.map(TO).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,r+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,r,s]){return[Mx(1-Math.min(1,e+s)),Mx(1-Math.min(1,r+s)),Mx(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const s=1-e,i=1-t,o=1-r,l=Math.min(s,i,o);return["CMYK",s,i,o,l]}}class fae{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),r||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){jn("Abstract method `_createSVG` called.")}}class AE extends fae{_createSVG(e){return document.createElementNS(Rc,e)}}const mae=9,yp=new WeakSet,pae=new Date().getTimezoneOffset()*60*1e3;class RS{static create(e){switch(e.data.annotationType){case jr.LINK:return new ER(e);case jr.TEXT:return new xae(e);case jr.WIDGET:switch(e.data.fieldType){case"Tx":return new vae(e);case"Btn":return e.data.radioButton?new b9(e):e.data.checkBox?new wae(e):new bae(e);case"Ch":return new _ae(e);case"Sig":return new yae(e)}return new Ap(e);case jr.POPUP:return new d3(e);case jr.FREETEXT:return new S9(e);case jr.LINE:return new Cae(e);case jr.SQUARE:return new Aae(e);case jr.CIRCLE:return new Sae(e);case jr.POLYLINE:return new N9(e);case jr.CARET:return new Tae(e);case jr.INK:return new CR(e);case jr.POLYGON:return new Nae(e);case jr.HIGHLIGHT:return new T9(e);case jr.UNDERLINE:return new Pae(e);case jr.SQUIGGLY:return new Iae(e);case jr.STRIKEOUT:return new Rae(e);case jr.STAMP:return new P9(e);case jr.FILEATTACHMENT:return new kae(e);default:return new mr(e)}}}var Rm,G0,sa,bw,u3;const zR=class zR{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:s=!1}={}){W(this,bw);W(this,Rm,null);W(this,G0,!1);W(this,sa,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(r)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return zR._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var r;const{data:e}=this,t=(r=this.annotationStorage)==null?void 0:r.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var l;const e=(l=this.annotationStorage)==null?void 0:l.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:r,rect:s}=this.data;let i=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let c=0;c<t.length;c+=8)t[c+1]>o?(o=t[c+1],i=t[c+2]):t[c+1]===o&&(i=Math.max(i,t[c+2]));return[i,o]}if((r==null?void 0:r.length)>=1){for(const c of r)for(let f=0,g=c.length;f<g;f+=2)c[f+1]>o?(o=c[f+1],i=c[f]):c[f+1]===o&&(i=Math.max(i,c[f]));if(i!==1/0)return[i,o]}return s?[s[2],s[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/r,e[1]=100*(e[1]-o)/s,e}get commentText(){var t,r,s;const{data:e}=this;return((r=(t=this.annotationStorage.getRawValue(`${Jv}${e.id}`))==null?void 0:t.popup)==null?void 0:r.contents)||((s=e.contentsObj)==null?void 0:s.str)||""}set commentText(e){const{data:t}=this,r={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:r})||this.annotationStorage.setValue(`${Jv}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:r,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=p(this,sa))==null?void 0:e.popup)||this.popup)==null||t.remove(),B(this,sa,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(p(this,Rm)||B(this,Rm,{rect:this.data.rect.slice(0)}));const{rect:t,popup:r}=e;t&&G(this,bw,u3).call(this,t);let s=((i=p(this,sa))==null?void 0:i.popup)||this.popup;!s&&(r!=null&&r.text)&&(this._createPopup(r),s=p(this,sa).popup),s&&(s.updateEdited(e),r!=null&&r.deleted&&(s.remove(),B(this,sa,null),this.popup=null))}resetEdited(){var e;p(this,Rm)&&(G(this,bw,u3).call(this,p(this,Rm).rect),(e=p(this,sa))==null||e.popup.resetEdited(),B(this,Rm,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof Ap)&&!(this instanceof ER)&&(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof d3){const{rotation:S}=t;return!t.hasOwnCanvas&&S!==0&&this.setRotation(S,i),i}const{width:l,height:c}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const S=t.borderStyle.horizontalCornerRadius,I=t.borderStyle.verticalCornerRadius;if(S>0||I>0){const k=`calc(${S}px * var(--total-scale-factor)) / calc(${I}px * var(--total-scale-factor))`;o.borderRadius=k}else if(this instanceof b9){const k=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=k}switch(t.borderStyle.style){case Jp.SOLID:o.borderStyle="solid";break;case Jp.DASHED:o.borderStyle="dashed";break;case Jp.BEVELED:bt("Unimplemented border style: beveled");break;case Jp.INSET:bt("Unimplemented border style: inset");break;case Jp.UNDERLINE:o.borderBottomStyle="solid";break}const N=t.borderColor||null;N?(B(this,G0,!0),o.borderColor=Ke.makeHexColor(N[0]|0,N[1]|0,N[2]|0)):o.borderWidth=0}const f=Ke.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:g,pageHeight:y,pageX:_,pageY:E}=s.rawDims;o.left=`${100*(f[0]-_)/g}%`,o.top=`${100*(f[1]-E)/y}%`;const{rotation:P}=t;return t.hasOwnCanvas||P===0?(o.width=`${100*l/g}%`,o.height=`${100*c/y}%`):this.setRotation(P,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:s}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/r}%`,t.style.height=`${100*o/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,s)=>{const i=s.detail[t],o=i[0],l=i.slice(1);s.target.style[r]=PO[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[r]:PO[`${o}_rgb`](l)})};return It(this,"_commonActions",{display:t=>{const{display:r}=t.detail,s=r%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||r[s];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[s,i]of Object.entries(t)){const o=r[s];if(o){const l={detail:{[s]:i},target:e};o(l),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,s,i]=this.data.rect.map(S=>Math.fround(S));if(e.length===8){const[S,I,N,k]=e.subarray(2,6);if(s===S&&i===I&&t===N&&r===k)return}const{style:o}=this.container;let l;if(p(this,G0)){const{borderColor:S,borderWidth:I}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${I}">`],this.container.classList.add("hasBorder")}const c=s-t,f=i-r,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const _=g.createElement("defs");y.append(_);const E=g.createElement("clipPath"),P=`clippath_${this.data.id}`;E.setAttribute("id",P),E.setAttribute("clipPathUnits","objectBoundingBox"),_.append(E);for(let S=2,I=e.length;S<I;S+=8){const N=e[S],k=e[S+1],T=e[S+2],D=e[S+3],U=g.createElement("rect"),z=(T-t)/c,F=(i-k)/f,X=(N-T)/c,Z=(k-D)/f;U.setAttribute("x",z),U.setAttribute("y",F),U.setAttribute("width",X),U.setAttribute("height",Z),E.append(U),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${z}" y="${F}" width="${X}" height="${Z}"/>`)}p(this,G0)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(y),this.container.style.clipPath=`url(#${P})`}_createPopup(e=null){const{data:t}=this;let r,s;e?(r={str:e.text},s=e.date):(r=t.contentsObj,s=t.modificationDate),B(this,sa,new d3({data:{color:t.color,titleObj:t.titleObj,modificationDate:s,contentsObj:r,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(p(this,sa)||this.popup||this.data.popupRef)}get extraPopupElement(){return p(this,sa)}render(){jn("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:o,exportValues:l}of s){if(i===-1||o===t)continue;const c=typeof l=="string"?l:null,f=document.querySelector(`[data-element-id="${o}"]`);if(f&&!yp.has(f)){bt(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:c,domElement:f})}return r}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,o=s.getAttribute("data-element-id");o!==t&&yp.has(s)&&r.push({id:o,exportValue:i,domElement:s})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Rm=new WeakMap,G0=new WeakMap,sa=new WeakMap,bw=new WeakSet,u3=function(e){const{container:{style:t},data:{rect:r,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:l,pageY:c}}}}=this;r==null||r.splice(0,4,...e),t.left=`${100*(e[0]-l)/i}%`,t.top=`${100*(o-e[3]+c)/o}%`,s===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(s)};let mr=zR;class gae extends mr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var Eo,wf,y9,w9;class ER extends mr{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});W(this,Eo);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(r.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),i=!0):t.attachment?(G(this,Eo,y9).call(this,s,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(G(this,Eo,w9).call(this,s,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&(this.contentElement=s,this.container.append(s)),this.container}_bindLink(t,r,s=""){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&G(this,Eo,wf).call(this),s&&(t.title=s)}_bindNamedAction(t,r,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),s&&(t.title=s),G(this,Eo,wf).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(r.actions)){const o=s.get(i);o&&(t[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:i}}),!1})}r.overlaidText&&(t.title=r.overlaidText),t.onclick||(t.onclick=()=>!1),G(this,Eo,wf).call(this)}_bindResetFormAction(t,r){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),G(this,Eo,wf).call(this),!this._fieldObjects){bt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var y;s==null||s();const{fields:i,refs:o,include:l}=r,c=[];if(i.length!==0||o.length!==0){const _=new Set(o);for(const E of i){const P=this._fieldObjects[E]||[];for(const{id:S}of P)_.add(S)}for(const E of Object.values(this._fieldObjects))for(const P of E)_.has(P.id)===l&&c.push(P)}else for(const _ of Object.values(this._fieldObjects))c.push(..._);const f=this.annotationStorage,g=[];for(const _ of c){const{id:E}=_;switch(g.push(E),_.type){case"text":{const S=_.defaultValue||"";f.setValue(E,{value:S});break}case"checkbox":case"radiobutton":{const S=_.defaultValue===_.exportValues;f.setValue(E,{value:S});break}case"combobox":case"listbox":{const S=_.defaultValue||"";f.setValue(E,{value:S});break}default:continue}const P=document.querySelector(`[data-element-id="${E}"]`);if(P){if(!yp.has(P)){bt(`_bindResetFormAction - element not allowed: ${E}`);continue}}else continue;P.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}Eo=new WeakSet,wf=function(){this.container.setAttribute("data-internal-link","")},y9=function(t,r,s="",i=null){t.href=this.linkService.getAnchorUrl(""),r.description?t.title=r.description:s&&(t.title=s),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(r.content,r.filename,i),!1},G(this,Eo,wf).call(this)},w9=function(t,r,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),s&&(t.title=s),G(this,Eo,wf).call(this)};class xae extends mr{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class Ap extends mr{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Os.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,s,i){r.includes("mouse")?e.addEventListener(r,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{var l;if(r==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}i&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o)}}))})}_setEventListeners(e,t,r,s){var i,o,l;for(const[c,f]of r)(f==="Action"||(i=this.data.actions)!=null&&i[f])&&((f==="Focus"||f==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,f,s),f==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):f==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ke.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||mae,i=e.style;let o;const l=2,c=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-l),g=Math.round(f/(ES*s))||1,y=f/g;o=Math.min(s,c(y/ES))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(s,c(f/ES))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=Ke.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class vae extends Ap{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,s){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),i.setValue(o.id,{[s]:r})}render(){var s,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let l=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let f=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const g={userValue:l,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=f??l,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",f??l),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),yp.add(r),this.contentElement=r,r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:y,datetimeType:_,timeStep:E}=this.data,P=!!_&&this.enableScripting;y&&(r.title=y),this._setRequired(r,this.data.required),c&&(r.maxLength=c),r.addEventListener("input",I=>{e.setValue(t,{value:I.target.value}),this.setPropertyOnSiblings(r,"value",I.target.value,"value"),g.formattedValue=null}),r.addEventListener("resetform",I=>{const N=this.data.defaultFieldValue??"";r.value=g.userValue=N,g.formattedValue=null});let S=I=>{const{formattedValue:N}=g;N!=null&&(I.target.value=N),I.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",N=>{var T;if(g.focused)return;const{target:k}=N;if(P&&(k.type=_,E&&(k.step=E)),g.userValue){const D=g.userValue;if(P)if(_==="time"){const U=new Date(D),z=[U.getHours(),U.getMinutes(),U.getSeconds()];k.value=z.map(F=>F.toString().padStart(2,"0")).join(":")}else k.value=new Date(D-pae).toISOString().split(_==="date"?"T":".",1)[0];else k.value=D}g.lastCommittedValue=k.value,g.commitKey=1,(T=this.data.actions)!=null&&T.Focus||(g.focused=!0)}),r.addEventListener("updatefromsandbox",N=>{this.showElementAndHideCanvas(N.target);const k={value(T){g.userValue=T.detail.value??"",P||e.setValue(t,{value:g.userValue.toString()}),T.target.value=g.userValue},formattedValue(T){const{formattedValue:D}=T.detail;g.formattedValue=D,D!=null&&T.target!==document.activeElement&&(T.target.value=D);const U={formattedValue:D};P&&(U.value=D),e.setValue(t,U)},selRange(T){T.target.setSelectionRange(...T.detail.selRange)},charLimit:T=>{var F;const{charLimit:D}=T.detail,{target:U}=T;if(D===0){U.removeAttribute("maxLength");return}U.setAttribute("maxLength",D);let z=g.userValue;!z||z.length<=D||(z=z.slice(0,D),U.value=g.userValue=z,e.setValue(t,{value:z}),(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:z,willCommit:!0,commitKey:1,selStart:U.selectionStart,selEnd:U.selectionEnd}}))}};this._dispatchEventFromSandbox(k,N)}),r.addEventListener("keydown",N=>{var D;g.commitKey=1;let k=-1;if(N.key==="Escape"?k=0:N.key==="Enter"&&!this.data.multiLine?k=2:N.key==="Tab"&&(g.commitKey=3),k===-1)return;const{value:T}=N.target;g.lastCommittedValue!==T&&(g.lastCommittedValue=T,g.userValue=T,(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:k,selStart:N.target.selectionStart,selEnd:N.target.selectionEnd}}))});const I=S;S=null,r.addEventListener("blur",N=>{var D,U;if(!g.focused||!N.relatedTarget)return;(D=this.data.actions)!=null&&D.Blur||(g.focused=!1);const{target:k}=N;let{value:T}=k;if(P){if(T&&_==="time"){const z=T.split(":").map(F=>parseInt(F,10));T=new Date(2e3,0,1,z[0],z[1],z[2]||0).valueOf(),k.step=""}else T.includes("T")||(T=`${T}T00:00`),T=new Date(T).valueOf();k.type="text"}g.userValue=T,g.lastCommittedValue!==T&&((U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:g.commitKey,selStart:N.target.selectionStart,selEnd:N.target.selectionEnd}})),I(N)}),(i=this.data.actions)!=null&&i.Keystroke&&r.addEventListener("beforeinput",N=>{var Z;g.lastCommittedValue=null;const{data:k,target:T}=N,{value:D,selectionStart:U,selectionEnd:z}=T;let F=U,X=z;switch(N.inputType){case"deleteWordBackward":{const ne=D.substring(0,U).match(/\w*[^\w]*$/);ne&&(F-=ne[0].length);break}case"deleteWordForward":{const ne=D.substring(U).match(/^[^\w]*\w*/);ne&&(X+=ne[0].length);break}case"deleteContentBackward":U===z&&(F-=1);break;case"deleteContentForward":U===z&&(X+=1);break}N.preventDefault(),(Z=this.linkService.eventBus)==null||Z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:D,change:k||"",willCommit:!1,selStart:F,selEnd:X}})}),this._setEventListeners(r,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],N=>N.target.value)}if(S&&r.addEventListener("blur",S),this.data.comb){const N=(this.data.rect[2]-this.data.rect[0])/c;r.classList.add("comb"),r.style.letterSpacing=`calc(${N}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class yae extends Ap{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class wae extends Ap{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(r,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return yp.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const f of this._getElementsByName(l,r)){const g=c&&f.exportValue===t.exportValue;f.domElement&&(f.domElement.checked=g),e.setValue(f.id,{value:g})}e.setValue(r,{value:c})}),i.addEventListener("resetform",o=>{const l=t.defaultFieldValue||"Off";o.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(r,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class b9 extends Ap{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(r,{value:s})),s)for(const o of this._getElementsByName(t.fieldName,r))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(yp.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const f of this._getElementsByName(l,r))e.setValue(f.id,{value:!1});e.setValue(r,{value:c})}),i.addEventListener("resetform",o=>{const l=t.defaultFieldValue;o.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",l=>{const c={value:f=>{const g=o===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const _=g&&y.id===r;y.domElement&&(y.domElement.checked=_),e.setValue(y.id,{value:_})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class bae extends ER{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class _ae extends Ap{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");yp.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const _ of s.options)_.selected=_.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,r.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),i=!1),s.append(y)}let o=null;if(i){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),s.prepend(g),o=()=>{g.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const l=g=>{const y=g?"value":"textContent",{options:_,multiple:E}=s;return E?Array.prototype.filter.call(_,P=>P.selected).map(P=>P[y]):_.selectedIndex===-1?null:_[_.selectedIndex][y]};let c=l(!1);const f=g=>{const y=g.target.options;return Array.prototype.map.call(y,_=>({displayValue:_.textContent,exportValue:_.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",g=>{const y={value(_){o==null||o();const E=_.detail.value,P=new Set(Array.isArray(E)?E:[E]);for(const S of s.options)S.selected=P.has(S.value);e.setValue(t,{value:l(!0)}),c=l(!1)},multipleSelection(_){s.multiple=!0},remove(_){const E=s.options,P=_.detail.remove;E[P].selected=!1,s.remove(P),E.length>0&&Array.prototype.findIndex.call(E,I=>I.selected)===-1&&(E[0].selected=!0),e.setValue(t,{value:l(!0),items:f(_)}),c=l(!1)},clear(_){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),c=l(!1)},insert(_){const{index:E,displayValue:P,exportValue:S}=_.detail.insert,I=s.children[E],N=document.createElement("option");N.textContent=P,N.value=S,I?I.before(N):s.append(N),e.setValue(t,{value:l(!0),items:f(_)}),c=l(!1)},items(_){const{items:E}=_.detail;for(;s.length!==0;)s.remove(0);for(const P of E){const{displayValue:S,exportValue:I}=P,N=document.createElement("option");N.textContent=S,N.value=I,s.append(N)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:l(!0),items:f(_)}),c=l(!1)},indices(_){const E=new Set(_.detail.indices);for(const P of _.target.options)P.selected=E.has(P.index);e.setValue(t,{value:l(!0)}),c=l(!1)},editable(_){_.target.disabled=!_.detail.editable}};this._dispatchEventFromSandbox(y,g)}),s.addEventListener("input",g=>{var E;const y=l(!0),_=l(!1);e.setValue(t,{value:y}),g.preventDefault(),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:_,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):s.addEventListener("input",function(g){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}var _w,h3;class d3 extends mr{constructor(t){const{data:r,elements:s,parent:i}=t,o=!!i._commentManager;super(t,{isRenderable:!o&&mr._hasPopupData(r)});W(this,_w);if(this.elements=s,o&&mr._hasPopupData(r)){const l=this.popup=G(this,_w,h3).call(this);for(const c of s)c.popup=l}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const r=this.popup=G(this,_w,h3).call(this),s=[];for(const i of this.elements)i.popup=r,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${yg}${i}`).join(",")),this.container}}_w=new WeakSet,h3=function(){return new Eae({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var oo,Kd,$E,qE,$0,q0,_r,zl,Zd,km,X0,Y0,Hl,ao,du,hu,Er,fu,Qd,Ew,mu,K0,Mm,Jd,cs,eh,Dt,a2,f3,m3,p3,l2,g3,_9,E9,C9,A9,c2,u2,x3;class Eae{constructor({container:e,color:t,elements:r,titleObj:s,modificationDate:i,contentsObj:o,richText:l,parent:c,rect:f,parentRect:g,open:y,commentManager:_=null}){W(this,Dt);W(this,oo,null);W(this,Kd,G(this,Dt,C9).bind(this));W(this,$E,G(this,Dt,x3).bind(this));W(this,qE,G(this,Dt,u2).bind(this));W(this,$0,G(this,Dt,c2).bind(this));W(this,q0,null);W(this,_r,null);W(this,zl,null);W(this,Zd,null);W(this,km,null);W(this,X0,null);W(this,Y0,null);W(this,Hl,!1);W(this,ao,null);W(this,du,null);W(this,hu,null);W(this,Er,null);W(this,fu,null);W(this,Qd,null);W(this,Ew,null);W(this,mu,null);W(this,K0,null);W(this,Mm,null);W(this,Jd,!1);W(this,cs,null);W(this,eh,null);B(this,_r,e),B(this,K0,s),B(this,zl,o),B(this,mu,l),B(this,X0,c),B(this,q0,t),B(this,Ew,f),B(this,Y0,g),B(this,km,r),B(this,oo,_),B(this,cs,r[0]),B(this,Zd,xE.toDateObject(i)),this.trigger=r.flatMap(E=>E.getElementsToTriggerPopup()),_||(G(this,Dt,a2).call(this),p(this,_r).hidden=!0,y&&G(this,Dt,c2).call(this))}renderCommentButton(){if(p(this,Er)){p(this,Er).parentNode||p(this,cs).container.after(p(this,Er));return}if(p(this,fu)||G(this,Dt,f3).call(this),!p(this,fu))return;const{signal:e}=B(this,du,new AbortController),t=p(this,cs).hasOwnCommentButton,r=()=>{p(this,oo).toggleCommentPopup(this,!0,void 0,!t)},s=()=>{p(this,oo).toggleCommentPopup(this,!1,!0,!t)},i=()=>{p(this,oo).toggleCommentPopup(this,!1,!1)};if(t){B(this,Er,p(this,cs).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",p(this,Kd),{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",s,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=B(this,Er,document.createElement("button"));o.className="annotationCommentButton";const l=p(this,cs).container;o.style.zIndex=l.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),G(this,Dt,p3).call(this),G(this,Dt,m3).call(this),o.addEventListener("keydown",p(this,Kd),{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",s,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),l.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=p(this,cs).commentData;return e?p(this,X0)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=p(this,Er))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:r,creationDate:s,modificationDate:i}=p(this,cs).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:r,creationDate:s,modificationDate:i}}get elementBeforePopup(){return p(this,Er)}get comment(){return p(this,eh)||B(this,eh,p(this,cs).commentText),p(this,eh)}set comment(e){e!==this.comment&&(p(this,cs).commentText=B(this,eh,e))}focus(){var e;(e=p(this,cs).container)==null||e.focus()}get parentBoundingClientRect(){return p(this,cs).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){p(this,Er)&&(p(this,Er).classList.toggle("selected",e),p(this,Er).ariaExpanded=t)}setSelectedCommentButton(e){p(this,Er).classList.toggle("selected",e)}get commentPopupPosition(){if(p(this,Qd))return p(this,Qd);const{x:e,y:t,height:r}=p(this,Er).getBoundingClientRect(),{x:s,y:i,width:o,height:l}=p(this,cs).layer.getBoundingClientRect();return[(e-s)/o,(t+r-i)/l]}set commentPopupPosition(e){B(this,Qd,e)}hasDefaultPopupPosition(){return p(this,Qd)===null}get commentButtonPosition(){return p(this,fu)}get commentButtonWidth(){return p(this,Er).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,r]=p(this,Qd)||this.commentButtonPosition.map(f=>f/100),s=this.parentBoundingClientRect,{x:i,y:o,width:l,height:c}=s;p(this,oo).showDialog(null,this,i+t*l,o+r*c,{...e,parentDimensions:s})}render(){var r,s;if(p(this,ao))return;const e=B(this,ao,document.createElement("div"));if(e.className="popup",p(this,q0)){const i=e.style.outlineColor=Ke.makeHexColor(...p(this,q0));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(r=p(this,K0))!=null&&r.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=p(this,K0)}if(e.append(t),p(this,Zd)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:p(this,Zd).valueOf()})),i.dateTime=p(this,Zd).toISOString(),t.append(i)}dF({html:p(this,Dt,l2)||p(this,zl).str,dir:(s=p(this,zl))==null?void 0:s.dir,className:"popupContent"},e),p(this,_r).append(e)}updateEdited({rect:e,popup:t,deleted:r}){var s;if(p(this,oo)){r?(this.remove(),B(this,eh,null)):t&&(t.deleted?this.remove():(G(this,Dt,p3).call(this),B(this,eh,t.text))),e&&(B(this,fu,null),G(this,Dt,f3).call(this),G(this,Dt,m3).call(this));return}if(r||t!=null&&t.deleted){this.remove();return}G(this,Dt,a2).call(this),p(this,Mm)||B(this,Mm,{contentsObj:p(this,zl),richText:p(this,mu)}),e&&B(this,hu,null),t&&t.text&&(B(this,mu,G(this,Dt,E9).call(this,t.text)),B(this,Zd,xE.toDateObject(t.date)),B(this,zl,null)),(s=p(this,ao))==null||s.remove(),B(this,ao,null)}resetEdited(){var e;p(this,Mm)&&({contentsObj:vr(this,zl)._,richText:vr(this,mu)._}=p(this,Mm),B(this,Mm,null),(e=p(this,ao))==null||e.remove(),B(this,ao,null),B(this,hu,null))}remove(){var e,t,r;if((e=p(this,du))==null||e.abort(),B(this,du,null),(t=p(this,ao))==null||t.remove(),B(this,ao,null),B(this,Jd,!1),B(this,Hl,!1),(r=p(this,Er))==null||r.remove(),B(this,Er,null),this.trigger)for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){B(this,Jd,this.isVisible),p(this,Jd)&&(p(this,_r).hidden=!0)}maybeShow(){p(this,oo)||(G(this,Dt,a2).call(this),p(this,Jd)&&(p(this,ao)||G(this,Dt,u2).call(this),B(this,Jd,!1),p(this,_r).hidden=!1))}get isVisible(){return p(this,oo)?!1:p(this,_r).hidden===!1}}oo=new WeakMap,Kd=new WeakMap,$E=new WeakMap,qE=new WeakMap,$0=new WeakMap,q0=new WeakMap,_r=new WeakMap,zl=new WeakMap,Zd=new WeakMap,km=new WeakMap,X0=new WeakMap,Y0=new WeakMap,Hl=new WeakMap,ao=new WeakMap,du=new WeakMap,hu=new WeakMap,Er=new WeakMap,fu=new WeakMap,Qd=new WeakMap,Ew=new WeakMap,mu=new WeakMap,K0=new WeakMap,Mm=new WeakMap,Jd=new WeakMap,cs=new WeakMap,eh=new WeakMap,Dt=new WeakSet,a2=function(){var t;if(p(this,du))return;B(this,du,new AbortController);const{signal:e}=p(this,du);for(const r of this.trigger)r.addEventListener("click",p(this,$0),{signal:e}),r.addEventListener("pointerenter",p(this,qE),{signal:e}),r.addEventListener("pointerleave",p(this,$E),{signal:e}),r.classList.add("popupTriggerArea");for(const r of p(this,km))(t=r.container)==null||t.addEventListener("keydown",p(this,Kd),{signal:e})},f3=function(){const e=p(this,km).find(t=>t.hasCommentButton);e&&B(this,fu,e._normalizePoint(e.commentButtonPosition))},m3=function(){if(p(this,cs).extraPopupElement&&!p(this,cs).editor)return;p(this,Er)||this.renderCommentButton();const[e,t]=p(this,fu),{style:r}=p(this,Er);r.left=`calc(${e}%)`,r.top=`calc(${t}% - var(--comment-button-dim))`},p3=function(){p(this,cs).extraPopupElement||(p(this,Er)||this.renderCommentButton(),p(this,Er).style.backgroundColor=this.commentButtonColor||"")},l2=function(){const e=p(this,mu),t=p(this,zl);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&p(this,mu).html||null},g3=function(){var e,t,r;return((r=(t=(e=p(this,Dt,l2))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},_9=function(){var e,t,r;return((r=(t=(e=p(this,Dt,l2))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},E9=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:p(this,Dt,_9),fontSize:p(this,Dt,g3)?`calc(${p(this,Dt,g3)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return r},C9=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&p(this,Hl))&&G(this,Dt,c2).call(this)},A9=function(){if(p(this,hu)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:s,pageY:i}}}=p(this,X0);let o=!!p(this,Y0),l=o?p(this,Y0):p(this,Ew);for(const P of p(this,km))if(!l||Ke.intersect(P.data.rect,l)!==null){l=P.data.rect,o=!0;break}const c=Ke.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),g=o?l[2]-l[0]+5:0,y=c[0]+g,_=c[1];B(this,hu,[100*(y-s)/t,100*(_-i)/r]);const{style:E}=p(this,_r);E.left=`${p(this,hu)[0]}%`,E.top=`${p(this,hu)[1]}%`},c2=function(){if(p(this,oo)){p(this,oo).toggleCommentPopup(this,!1);return}B(this,Hl,!p(this,Hl)),p(this,Hl)?(G(this,Dt,u2).call(this),p(this,_r).addEventListener("click",p(this,$0)),p(this,_r).addEventListener("keydown",p(this,Kd))):(G(this,Dt,x3).call(this),p(this,_r).removeEventListener("click",p(this,$0)),p(this,_r).removeEventListener("keydown",p(this,Kd)))},u2=function(){p(this,ao)||this.render(),this.isVisible?p(this,Hl)&&p(this,_r).classList.add("focused"):(G(this,Dt,A9).call(this),p(this,_r).hidden=!1,p(this,_r).style.zIndex=parseInt(p(this,_r).style.zIndex)+1e3)},x3=function(){p(this,_r).classList.remove("focused"),!(p(this,Hl)||!this.isVisible)&&(p(this,_r).hidden=!0,p(this,_r).style.zIndex=parseInt(p(this,_r).style.zIndex)-1e3)};class S9 extends mr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=St.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Cw;class Cae extends mr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});W(this,Cw,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),o=B(this,Cw,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return p(this,Cw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cw=new WeakMap;var Aw;class Aae extends mr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});W(this,Aw,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),o=t.borderStyle.width,l=B(this,Aw,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",r-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return p(this,Aw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Aw=new WeakMap;var Sw;class Sae extends mr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});W(this,Sw,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),o=t.borderStyle.width,l=B(this,Sw,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",r/2),l.setAttribute("cy",s/2),l.setAttribute("rx",r/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return p(this,Sw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sw=new WeakMap;var Nw;class N9 extends mr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});W(this,Nw,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:s,popupRef:i},width:o,height:l}=this;if(!r)return this.container;const c=this.svgFactory.create(o,l,!0);let f=[];for(let y=0,_=r.length;y<_;y+=2){const E=r[y]-t[0],P=t[3]-r[y+1];f.push(`${E},${P}`)}f=f.join(" ");const g=B(this,Nw,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",f),g.setAttribute("stroke-width",s.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),c.append(g),this.container.append(c),!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return p(this,Nw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nw=new WeakMap;class Nae extends N9{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Tae extends mr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var Tw,Om,Pw,v3;class CR extends mr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});W(this,Pw);W(this,Tw,null);W(this,Om,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?St.HIGHLIGHT:St.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:r,inkLists:s,borderStyle:i,popupRef:o}}=this,{transform:l,width:c,height:f}=G(this,Pw,v3).call(this,r,t),g=this.svgFactory.create(c,f,!0),y=B(this,Tw,this.svgFactory.createElement("svg:g"));g.append(y),y.setAttribute("stroke-width",i.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",l);for(let _=0,E=s.length;_<E;_++){const P=this.svgFactory.createElement(this.svgElementName);p(this,Om).push(P),P.setAttribute("points",s[_].join(",")),y.append(P)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(g),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:r,points:s,rect:i}=t,o=p(this,Tw);if(r>=0&&o.setAttribute("stroke-width",r||1),s)for(let l=0,c=p(this,Om).length;l<c;l++)p(this,Om)[l].setAttribute("points",s[l].join(","));if(i){const{transform:l,width:c,height:f}=G(this,Pw,v3).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${f}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return p(this,Om)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tw=new WeakMap,Om=new WeakMap,Pw=new WeakSet,v3=function(t,r){switch(t){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class T9 extends mr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=St.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Pae extends mr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Iae extends mr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Rae extends mr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class P9 extends mr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=St.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Iw,Rw,y3;class kae extends mr{constructor(t){var s;super(t,{isRenderable:!0});W(this,Rw);W(this,Iw,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let s;r.hasAppearance||r.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),s.addEventListener("dblclick",G(this,Rw,y3).bind(this)),B(this,Iw,s);const{isMac:i}=Os.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&G(this,Rw,y3).call(this)}),!r.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return p(this,Iw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Iw=new WeakMap,Rw=new WeakSet,y3=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Dm,jm,Z0,th,kw,Lm,lo,Mw,Tu,d2,b3;const HR=class HR{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:s,page:i,viewport:o,structTreeLayer:l,commentManager:c,linkService:f,annotationStorage:g}){W(this,Tu);W(this,Dm,null);W(this,jm,null);W(this,Z0,null);W(this,th,new Map);W(this,kw,null);W(this,Lm,null);W(this,lo,[]);W(this,Mw,!1);this.div=e,B(this,Dm,t),B(this,jm,r),B(this,kw,l||null),B(this,Lm,f||null),B(this,Z0,g||new wR),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=c||null}hasEditableAnnotations(){return p(this,th).size>0}async render(e){var l;const{annotations:t}=e,r=this.div;xp(r,this.viewport);const s=new Map,i=[],o={data:null,layer:r,linkService:p(this,Lm),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new AE,annotationStorage:p(this,Z0),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const c of t){if(c.noHTML)continue;const f=c.annotationType===jr.POPUP;if(f){const _=s.get(c.id);if(!_)continue;if(!this._commentManager){i.push(c);continue}o.elements=_}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;o.data=c;const g=RS.create(o);if(!g.isRenderable)continue;if(!f&&(p(this,lo).push(g),c.popupRef)){const _=s.get(c.popupRef);_?_.push(g):s.set(c.popupRef,[g])}const y=g.render();c.hidden&&(y.style.visibility="hidden"),g._isEditable&&(p(this,th).set(g.data.id,g),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(g))}await G(this,Tu,d2).call(this);for(const c of i){const f=o.elements=s.get(c.id);o.data=c;const g=RS.create(o);if(!g.isRenderable)continue;const y=g.render();g.contentElement.id=`${yg}${c.id}`,c.hidden&&(y.style.visibility="hidden"),f.at(-1).container.after(y)}G(this,Tu,b3).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:p(this,Lm),svgFactory:new AE,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=HR._defaultBorderStyle),t.data=r;const s=RS.create(t);s.isRenderable&&(s.render(),s.contentElement.id=`${yg}${r.id}`,p(this,lo).push(s))}await G(this,Tu,d2).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,xp(t,{rotation:e.rotation}),G(this,Tu,b3).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(p(this,th).values())}getEditableAnnotation(e){return p(this,th).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:r,rotation:s}=e,i=new gae({data:{id:r,rect:e.getPDFRect(),rotation:s},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:p(this,Lm),annotationStorage:p(this,Z0)});return i.render(),i.contentElement.id=`${yg}${r}`,i.createOrUpdatePopup(),p(this,lo).push(i),i}removeAnnotation(e){var s;const t=p(this,lo).findIndex(i=>i.data.id===e);if(t<0)return;const[r]=p(this,lo).splice(t,1);(s=p(this,Dm))==null||s.removePointerInTextLayer(r.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);G(this,Tu,d2).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return It(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Jp.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Dm=new WeakMap,jm=new WeakMap,Z0=new WeakMap,th=new WeakMap,kw=new WeakMap,Lm=new WeakMap,lo=new WeakMap,Mw=new WeakMap,Tu=new WeakSet,d2=async function(){var r,s,i;if(p(this,lo).length===0)return;this.div.replaceChildren();const e=[];if(!p(this,Mw)){B(this,Mw,!0);for(const{contentElement:o,data:{id:l}}of p(this,lo)){const c=o.id=`${yg}${l}`;e.push((r=p(this,kw))==null?void 0:r.getAriaAttributes(c).then(f=>{if(f)for(const[g,y]of f)o.setAttribute(g,y)}))}}p(this,lo).sort(({data:{rect:[o,l,c,f]}},{data:{rect:[g,y,_,E]}})=>{if(o===c&&l===f)return 1;if(g===_&&y===E)return-1;const P=f,S=l,I=(l+f)/2,N=E,k=y,T=(y+E)/2;if(I>=N&&T<=S)return-1;if(T>=P&&I<=k)return 1;const D=(o+c)/2,U=(g+_)/2;return D-U});const t=document.createDocumentFragment();for(const o of p(this,lo))t.append(o.container),this._commentManager?(i=((s=o.extraPopupElement)==null?void 0:s.popup)||o.popup)==null||i.renderCommentButton():o.extraPopupElement&&t.append(o.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),p(this,Dm))for(const o of p(this,lo))p(this,Dm).addPointerInTextLayer(o.contentElement,!1)},b3=function(){var t;if(!p(this,jm))return;const e=this.div;for(const[r,s]of p(this,jm)){const i=e.querySelector(`[data-annotation-id="${r}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):i.append(s);const l=p(this,th).get(r);l&&(l._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(r,i.id,s),l._hasNoCanvas=!1):l.canvas=s)}p(this,jm).clear()};let w3=HR;const S_=/\r\n?|\n/g;var co,Ow,Bm,uo,Ur,I9,R9,k9,h2,Pu,f2,m2,M9,E3,O9;const Jn=class Jn extends Wn{constructor(t){super({...t,name:"freeTextEditor"});W(this,Ur);W(this,co,"");W(this,Ow,`${this.id}-editor`);W(this,Bm,null);W(this,uo);Pe(this,"_colorPicker",null);this.color=t.color||Jn._defaultColor||Wn._defaultLineColor,B(this,uo,t.fontSize||Jn._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const t=Jn.prototype,r=o=>o.isEmpty(),s=vp.TRANSLATE_SMALL,i=vp.TRANSLATE_BIG;return It(this,"_keyboardManager",new Eb([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}]]))}static initialize(t,r){Wn.initialize(t,r);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case Kt.FREETEXT_SIZE:Jn._defaultFontSize=r;break;case Kt.FREETEXT_COLOR:Jn._defaultColor=r;break}}updateParams(t,r){switch(t){case Kt.FREETEXT_SIZE:G(this,Ur,I9).call(this,r);break;case Kt.FREETEXT_COLOR:G(this,Ur,R9).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Kt.FREETEXT_SIZE,Jn._defaultFontSize],[Kt.FREETEXT_COLOR,Jn._defaultColor||Wn._defaultLineColor]]}get propertiesToUpdate(){return[[Kt.FREETEXT_SIZE,p(this,uo)],[Kt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new CE(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Kt.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-Jn._internalPadding*t,-(Jn._internalPadding+p(this,uo))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),B(this,Bm,new AbortController);const t=this._uiManager.combinedSignal(p(this,Bm));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",p(this,Ow)),this._isDraggable=!0,(t=p(this,Bm))==null||t.abort(),B(this,Bm,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var r;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=p(this,co),r=B(this,co,G(this,Ur,k9).call(this).trimEnd());if(t===r)return;const s=i=>{if(B(this,co,i),!i){this.remove();return}G(this,Ur,m2).call(this),this._uiManager.rebuild(this),G(this,Ur,h2).call(this)};this.addCommands({cmd:()=>{s(r)},undo:()=>{s(t)},mustExec:!1}),G(this,Ur,h2).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Jn._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,r;(this._isCopy||this.annotationElementId)&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",p(this,Ow)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${p(this,uo)}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,f]=this.getInitialTranslation();[c,f]=this.pageTranslationToScreen(c,f);const[g,y]=this.pageDimensions,[_,E]=this.pageTranslation;let P,S;switch(this.rotation){case 0:P=t+(l[0]-_)/g,S=r+this.height-(l[1]-E)/y;break;case 90:P=t+(l[0]-_)/g,S=r-(l[1]-E)/y,[c,f]=[f,-c];break;case 180:P=t-this.width+(l[0]-_)/g,S=r-(l[1]-E)/y,[c,f]=[-c,-f];break;case 270:P=t+(l[0]-_-this.height*y)/g,S=r+(l[1]-E-this.width*g)/y,[c,f]=[-f,c];break}this.setAt(P*i,S*o,c,f)}else this._moveAfterPaste(t,r);G(this,Ur,m2).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var P,S,I;const r=t.clipboardData||window.clipboardData,{types:s}=r;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=G(P=Jn,Pu,E3).call(P,r.getData("text")||"").replaceAll(S_,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!i.includes(`
`)){l.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:f}=l,g=[],y=[];if(c.nodeType===Node.TEXT_NODE){const N=c.parentElement;if(y.push(c.nodeValue.slice(f).replaceAll(S_,"")),N!==this.editorDiv){let k=g;for(const T of this.editorDiv.childNodes){if(T===N){k=y;continue}k.push(G(S=Jn,Pu,f2).call(S,T))}}g.push(c.nodeValue.slice(0,f).replaceAll(S_,""))}else if(c===this.editorDiv){let N=g,k=0;for(const T of this.editorDiv.childNodes)k++===f&&(N=y),N.push(G(I=Jn,Pu,f2).call(I,T))}B(this,co,`${g.join(`
`)}${i}${y.join(`
`)}`),G(this,Ur,m2).call(this);const _=new Range;let E=Math.sumPrecise(g.map(N=>N.length));for(const{firstChild:N}of this.editorDiv.childNodes)if(N.nodeType===Node.TEXT_NODE){const k=N.nodeValue.length;if(E<=k){_.setStart(N,E),_.setEnd(N,E);break}E-=k}o.removeAllRanges(),o.addRange(_)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Jn._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,r,s){var l;let i=null;if(t instanceof S9){const{data:{defaultAppearanceData:{fontSize:c,fontColor:f},rect:g,rotation:y,id:_,popupRef:E,richText:P,contentsObj:S,creationDate:I,modificationDate:N},textContent:k,textPosition:T,parent:{page:{pageNumber:D}}}=t;if(!k||k.length===0)return null;i=t={annotationType:St.FREETEXT,color:Array.from(f),fontSize:c,value:k.join(`
`),position:T,pageIndex:D-1,rect:g.slice(0),rotation:y,annotationElementId:_,id:_,deleted:!1,popupRef:E,comment:(S==null?void 0:S.str)||null,richText:P,creationDate:I,modificationDate:N}}const o=await super.deserialize(t,r,s);return B(o,uo,t.fontSize),o.color=Ke.makeHexColor(...t.color),B(o,co,G(l=Jn,Pu,E3).call(l,t.value)),o._initialData=i,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Wn._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:r,fontSize:p(this,uo),value:G(this,Ur,M9).call(this)});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!G(this,Ur,O9).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(!r)return null;const{style:s}=r;s.fontSize=`calc(${p(this,uo)}px * var(--total-scale-factor))`,s.color=this.color,r.replaceChildren();for(const i of p(this,co).split(`
`)){const o=document.createElement("div");o.append(i?document.createTextNode(i):document.createElement("br")),r.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:p(this,co)}}),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};co=new WeakMap,Ow=new WeakMap,Bm=new WeakMap,uo=new WeakMap,Ur=new WeakSet,I9=function(t){const r=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-p(this,uo))*this.parentScale),B(this,uo,i),G(this,Ur,h2).call(this)},s=p(this,uo);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Kt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},R9=function(t){const r=i=>{this.color=i,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Kt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},k9=function(){var s;const t=[];this.editorDiv.normalize();let r=null;for(const i of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(G(s=Jn,Pu,f2).call(s,i)),r=i);return t.join(`
`)},h2=function(){const[t,r]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/r):(this.width=s.height/t,this.height=s.width/r),this.fixAndSetPosition()},Pu=new WeakSet,f2=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(S_,"")},m2=function(){if(this.editorDiv.replaceChildren(),!!p(this,co))for(const t of p(this,co).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},M9=function(){return p(this,co).replaceAll(""," ")},E3=function(t){return t.replaceAll(" ","")},O9=function(t){const{value:r,fontSize:s,color:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==r||t.fontSize!==s||t.color.some((l,c)=>l!==i[c])||t.pageIndex!==o},W(Jn,Pu),Pe(Jn,"_freeTextDefaultContent",""),Pe(Jn,"_internalPadding",0),Pe(Jn,"_defaultColor",null),Pe(Jn,"_defaultFontSize",10),Pe(Jn,"_type","freetext"),Pe(Jn,"_editorType",St.FREETEXT);let _3=Jn;class qe{toSVGPath(){jn("Abstract method `toSVGPath` must be implemented.")}get box(){jn("Abstract getter `box` must be implemented.")}serialize(e,t){jn("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,s,i,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=t+e[l]*s,o[l+1]=r+e[l+1]*i;return o}static _rescaleAndSwap(e,t,r,s,i,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=t+e[l+1]*s,o[l+1]=r+e[l]*i;return o}static _translate(e,t,r,s){s||(s=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)s[i]=t+e[i],s[i+1]=r+e[i+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,s,i){switch(i){case 90:return[1-t/r,e/s];case 180:return[1-e/r,1-t/s];case 270:return[t/r,1-e/s];default:return[e/r,t/s]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,s,i,o){return[(e+5*r)/6,(t+5*s)/6,(5*r+i)/6,(5*s+o)/6,(r+i)/2,(s+o)/2]}}Pe(qe,"PRECISION",1e-4);var ho,Va,Q0,J0,Vl,Ut,Fm,Um,Dw,jw,e1,t1,nh,Lw,XE,YE,Qr,sv,D9,j9,L9,B9,F9,U9;const Fc=class Fc{constructor({x:e,y:t},r,s,i,o,l=0){W(this,Qr);W(this,ho);W(this,Va,[]);W(this,Q0);W(this,J0);W(this,Vl,[]);W(this,Ut,new Float32Array(18));W(this,Fm);W(this,Um);W(this,Dw);W(this,jw);W(this,e1);W(this,t1);W(this,nh,[]);B(this,ho,r),B(this,t1,i*s),B(this,J0,o),p(this,Ut).set([NaN,NaN,NaN,NaN,e,t],6),B(this,Q0,l),B(this,jw,p(Fc,Lw)*s),B(this,Dw,p(Fc,YE)*s),B(this,e1,s),p(this,nh).push(e,t)}isEmpty(){return isNaN(p(this,Ut)[8])}add({x:e,y:t}){var Z;B(this,Fm,e),B(this,Um,t);const[r,s,i,o]=p(this,ho);let[l,c,f,g]=p(this,Ut).subarray(8,12);const y=e-f,_=t-g,E=Math.hypot(y,_);if(E<p(this,Dw))return!1;const P=E-p(this,jw),S=P/E,I=S*y,N=S*_;let k=l,T=c;l=f,c=g,f+=I,g+=N,(Z=p(this,nh))==null||Z.push(e,t);const D=-N/P,U=I/P,z=D*p(this,t1),F=U*p(this,t1);return p(this,Ut).set(p(this,Ut).subarray(2,8),0),p(this,Ut).set([f+z,g+F],4),p(this,Ut).set(p(this,Ut).subarray(14,18),12),p(this,Ut).set([f-z,g-F],16),isNaN(p(this,Ut)[6])?(p(this,Vl).length===0&&(p(this,Ut).set([l+z,c+F],2),p(this,Vl).push(NaN,NaN,NaN,NaN,(l+z-r)/i,(c+F-s)/o),p(this,Ut).set([l-z,c-F],14),p(this,Va).push(NaN,NaN,NaN,NaN,(l-z-r)/i,(c-F-s)/o)),p(this,Ut).set([k,T,l,c,f,g],6),!this.isEmpty()):(p(this,Ut).set([k,T,l,c,f,g],6),Math.abs(Math.atan2(T-c,k-l)-Math.atan2(N,I))<Math.PI/2?([l,c,f,g]=p(this,Ut).subarray(2,6),p(this,Vl).push(NaN,NaN,NaN,NaN,((l+f)/2-r)/i,((c+g)/2-s)/o),[l,c,k,T]=p(this,Ut).subarray(14,18),p(this,Va).push(NaN,NaN,NaN,NaN,((k+l)/2-r)/i,((T+c)/2-s)/o),!0):([k,T,l,c,f,g]=p(this,Ut).subarray(0,6),p(this,Vl).push(((k+5*l)/6-r)/i,((T+5*c)/6-s)/o,((5*l+f)/6-r)/i,((5*c+g)/6-s)/o,((l+f)/2-r)/i,((c+g)/2-s)/o),[f,g,l,c,k,T]=p(this,Ut).subarray(12,18),p(this,Va).push(((k+5*l)/6-r)/i,((T+5*c)/6-s)/o,((5*l+f)/6-r)/i,((5*c+g)/6-s)/o,((l+f)/2-r)/i,((c+g)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=p(this,Vl),t=p(this,Va);if(isNaN(p(this,Ut)[6])&&!this.isEmpty())return G(this,Qr,D9).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?r.push(`L${e[s+4]} ${e[s+5]}`):r.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);G(this,Qr,L9).call(this,r);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?r.push(`L${t[s+4]} ${t[s+5]}`):r.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return G(this,Qr,j9).call(this,r),r.join(" ")}newFreeDrawOutline(e,t,r,s,i,o){return new z9(e,t,r,s,i,o)}getOutlines(){var y;const e=p(this,Vl),t=p(this,Va),r=p(this,Ut),[s,i,o,l]=p(this,ho),c=new Float32Array((((y=p(this,nh))==null?void 0:y.length)??0)+2);for(let _=0,E=c.length-2;_<E;_+=2)c[_]=(p(this,nh)[_]-s)/o,c[_+1]=(p(this,nh)[_+1]-i)/l;if(c[c.length-2]=(p(this,Fm)-s)/o,c[c.length-1]=(p(this,Um)-i)/l,isNaN(r[6])&&!this.isEmpty())return G(this,Qr,B9).call(this,c);const f=new Float32Array(p(this,Vl).length+24+p(this,Va).length);let g=e.length;for(let _=0;_<g;_+=2){if(isNaN(e[_])){f[_]=f[_+1]=NaN;continue}f[_]=e[_],f[_+1]=e[_+1]}g=G(this,Qr,U9).call(this,f,g);for(let _=t.length-6;_>=6;_-=6)for(let E=0;E<6;E+=2){if(isNaN(t[_+E])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=t[_+E],f[g+1]=t[_+E+1],g+=2}return G(this,Qr,F9).call(this,f,g),this.newFreeDrawOutline(f,c,p(this,ho),p(this,e1),p(this,Q0),p(this,J0))}};ho=new WeakMap,Va=new WeakMap,Q0=new WeakMap,J0=new WeakMap,Vl=new WeakMap,Ut=new WeakMap,Fm=new WeakMap,Um=new WeakMap,Dw=new WeakMap,jw=new WeakMap,e1=new WeakMap,t1=new WeakMap,nh=new WeakMap,Lw=new WeakMap,XE=new WeakMap,YE=new WeakMap,Qr=new WeakSet,sv=function(){const e=p(this,Ut).subarray(4,6),t=p(this,Ut).subarray(16,18),[r,s,i,o]=p(this,ho);return[(p(this,Fm)+(e[0]-t[0])/2-r)/i,(p(this,Um)+(e[1]-t[1])/2-s)/o,(p(this,Fm)+(t[0]-e[0])/2-r)/i,(p(this,Um)+(t[1]-e[1])/2-s)/o]},D9=function(){const[e,t,r,s]=p(this,ho),[i,o,l,c]=G(this,Qr,sv).call(this);return`M${(p(this,Ut)[2]-e)/r} ${(p(this,Ut)[3]-t)/s} L${(p(this,Ut)[4]-e)/r} ${(p(this,Ut)[5]-t)/s} L${i} ${o} L${l} ${c} L${(p(this,Ut)[16]-e)/r} ${(p(this,Ut)[17]-t)/s} L${(p(this,Ut)[14]-e)/r} ${(p(this,Ut)[15]-t)/s} Z`},j9=function(e){const t=p(this,Va);e.push(`L${t[4]} ${t[5]} Z`)},L9=function(e){const[t,r,s,i]=p(this,ho),o=p(this,Ut).subarray(4,6),l=p(this,Ut).subarray(16,18),[c,f,g,y]=G(this,Qr,sv).call(this);e.push(`L${(o[0]-t)/s} ${(o[1]-r)/i} L${c} ${f} L${g} ${y} L${(l[0]-t)/s} ${(l[1]-r)/i}`)},B9=function(e){const t=p(this,Ut),[r,s,i,o]=p(this,ho),[l,c,f,g]=G(this,Qr,sv).call(this),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(t[2]-r)/i,(t[3]-s)/o,NaN,NaN,NaN,NaN,(t[4]-r)/i,(t[5]-s)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(t[16]-r)/i,(t[17]-s)/o,NaN,NaN,NaN,NaN,(t[14]-r)/i,(t[15]-s)/o],0),this.newFreeDrawOutline(y,e,p(this,ho),p(this,e1),p(this,Q0),p(this,J0))},F9=function(e,t){const r=p(this,Va);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6},U9=function(e,t){const r=p(this,Ut).subarray(4,6),s=p(this,Ut).subarray(16,18),[i,o,l,c]=p(this,ho),[f,g,y,_]=G(this,Qr,sv).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-i)/l,(r[1]-o)/c,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,y,_,NaN,NaN,NaN,NaN,(s[0]-i)/l,(s[1]-o)/c],t),t+=24},W(Fc,Lw,8),W(Fc,XE,2),W(Fc,YE,p(Fc,Lw)+p(Fc,XE));let SE=Fc;var n1,zm,pu,Bw,fo,Fw,Ir,KE,H9;class z9 extends qe{constructor(t,r,s,i,o,l){super();W(this,KE);W(this,n1);W(this,zm,new Float32Array(4));W(this,pu);W(this,Bw);W(this,fo);W(this,Fw);W(this,Ir);B(this,Ir,t),B(this,fo,r),B(this,n1,s),B(this,Fw,i),B(this,pu,o),B(this,Bw,l),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],G(this,KE,H9).call(this,l);const[c,f,g,y]=p(this,zm);for(let _=0,E=t.length;_<E;_+=2)t[_]=(t[_]-c)/g,t[_+1]=(t[_+1]-f)/y;for(let _=0,E=r.length;_<E;_+=2)r[_]=(r[_]-c)/g,r[_+1]=(r[_+1]-f)/y}toSVGPath(){const t=[`M${p(this,Ir)[4]} ${p(this,Ir)[5]}`];for(let r=6,s=p(this,Ir).length;r<s;r+=6){if(isNaN(p(this,Ir)[r])){t.push(`L${p(this,Ir)[r+4]} ${p(this,Ir)[r+5]}`);continue}t.push(`C${p(this,Ir)[r]} ${p(this,Ir)[r+1]} ${p(this,Ir)[r+2]} ${p(this,Ir)[r+3]} ${p(this,Ir)[r+4]} ${p(this,Ir)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,s,i],o){const l=s-t,c=i-r;let f,g;switch(o){case 0:f=qe._rescale(p(this,Ir),t,i,l,-c),g=qe._rescale(p(this,fo),t,i,l,-c);break;case 90:f=qe._rescaleAndSwap(p(this,Ir),t,r,l,c),g=qe._rescaleAndSwap(p(this,fo),t,r,l,c);break;case 180:f=qe._rescale(p(this,Ir),s,r,-l,c),g=qe._rescale(p(this,fo),s,r,-l,c);break;case 270:f=qe._rescaleAndSwap(p(this,Ir),s,i,-l,-c),g=qe._rescaleAndSwap(p(this,fo),s,i,-l,-c);break}return{outline:Array.from(f),points:[Array.from(g)]}}get box(){return p(this,zm)}newOutliner(t,r,s,i,o,l=0){return new SE(t,r,s,i,o,l)}getNewOutline(t,r){const[s,i,o,l]=p(this,zm),[c,f,g,y]=p(this,n1),_=o*g,E=l*y,P=s*g+c,S=i*y+f,I=this.newOutliner({x:p(this,fo)[0]*_+P,y:p(this,fo)[1]*E+S},p(this,n1),p(this,Fw),t,p(this,Bw),r??p(this,pu));for(let N=2;N<p(this,fo).length;N+=2)I.add({x:p(this,fo)[N]*_+P,y:p(this,fo)[N+1]*E+S});return I.getOutlines()}}n1=new WeakMap,zm=new WeakMap,pu=new WeakMap,Bw=new WeakMap,fo=new WeakMap,Fw=new WeakMap,Ir=new WeakMap,KE=new WeakSet,H9=function(t){const r=p(this,Ir);let s=r[4],i=r[5];const o=[s,i,s,i];let l=s,c=i,f=s,g=i;const y=t?Math.max:Math.min,_=new Float32Array(4);for(let P=6,S=r.length;P<S;P+=6){const I=r[P+4],N=r[P+5];isNaN(r[P])?(Ke.pointBoundingBox(I,N,o),c>N?(l=I,c=N):c===N&&(l=y(l,I)),g<N?(f=I,g=N):g===N&&(f=y(f,I))):(_[0]=_[1]=1/0,_[2]=_[3]=-1/0,Ke.bezierBoundingBox(s,i,...r.slice(P,P+6),_),Ke.rectBoundingBox(_[0],_[1],_[2],_[3],o),c>_[1]?(l=_[0],c=_[1]):c===_[1]&&(l=y(l,_[0])),g<_[3]?(f=_[2],g=_[3]):g===_[3]&&(f=y(f,_[2]))),s=I,i=N}const E=p(this,zm);E[0]=o[0]-p(this,pu),E[1]=o[1]-p(this,pu),E[2]=o[2]-o[0]+2*p(this,pu),E[3]=o[3]-o[1]+2*p(this,pu),this.firstPoint=[l,c],this.lastPoint=[f,g]};var Uw,zw,Hw,rh,Wa,wi,V9,p2,W9,G9,A3;class C3{constructor(e,t=0,r=0,s=!0){W(this,wi);W(this,Uw);W(this,zw);W(this,Hw);W(this,rh,[]);W(this,Wa,[]);const i=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:S,y:I,width:N,height:k}of e){const T=Math.floor((S-t)/o)*o,D=Math.ceil((S+N+t)/o)*o,U=Math.floor((I-t)/o)*o,z=Math.ceil((I+k+t)/o)*o,F=[T,U,z,!0],X=[D,U,z,!1];p(this,rh).push(F,X),Ke.rectBoundingBox(T,U,D,z,i)}const l=i[2]-i[0]+2*r,c=i[3]-i[1]+2*r,f=i[0]-r,g=i[1]-r;let y=s?-1/0:1/0,_=1/0;const E=p(this,rh).at(s?-1:-2),P=[E[0],E[2]];for(const S of p(this,rh)){const[I,N,k,T]=S;!T&&s?N<_?(_=N,y=I):N===_&&(y=Math.max(y,I)):T&&!s&&(N<_?(_=N,y=I):N===_&&(y=Math.min(y,I))),S[0]=(I-f)/l,S[1]=(N-g)/c,S[2]=(k-g)/c}B(this,Uw,new Float32Array([f,g,l,c])),B(this,zw,[y,_]),B(this,Hw,P)}getOutlines(){p(this,rh).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of p(this,rh))t[3]?(e.push(...G(this,wi,A3).call(this,t)),G(this,wi,W9).call(this,t)):(G(this,wi,G9).call(this,t),e.push(...G(this,wi,A3).call(this,t)));return G(this,wi,V9).call(this,e)}}Uw=new WeakMap,zw=new WeakMap,Hw=new WeakMap,rh=new WeakMap,Wa=new WeakMap,wi=new WeakSet,V9=function(e){const t=[],r=new Set;for(const o of e){const[l,c,f]=o;t.push([l,c,o],[l,f,o])}t.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=t.length;o<l;o+=2){const c=t[o][2],f=t[o+1][2];c.push(f),f.push(c),r.add(c),r.add(f)}const s=[];let i;for(;r.size>0;){const o=r.values().next().value;let[l,c,f,g,y]=o;r.delete(o);let _=l,E=c;for(i=[l,f],s.push(i);;){let P;if(r.has(g))P=g;else if(r.has(y))P=y;else break;r.delete(P),[l,c,f,g,y]=P,_!==l&&(i.push(_,E,l,E===c?c:f),_=l),E=E===c?f:c}i.push(_,E)}return new Mae(s,p(this,Uw),p(this,zw),p(this,Hw))},p2=function(e){const t=p(this,Wa);let r=0,s=t.length-1;for(;r<=s;){const i=r+s>>1,o=t[i][0];if(o===e)return i;o<e?r=i+1:s=i-1}return s+1},W9=function([,e,t]){const r=G(this,wi,p2).call(this,e);p(this,Wa).splice(r,0,[e,t])},G9=function([,e,t]){const r=G(this,wi,p2).call(this,e);for(let s=r;s<p(this,Wa).length;s++){const[i,o]=p(this,Wa)[s];if(i!==e)break;if(i===e&&o===t){p(this,Wa).splice(s,1);return}}for(let s=r-1;s>=0;s--){const[i,o]=p(this,Wa)[s];if(i!==e)break;if(i===e&&o===t){p(this,Wa).splice(s,1);return}}},A3=function(e){const[t,r,s]=e,i=[[t,r,s]],o=G(this,wi,p2).call(this,s);for(let l=0;l<o;l++){const[c,f]=p(this,Wa)[l];for(let g=0,y=i.length;g<y;g++){const[,_,E]=i[g];if(!(f<=_||E<=c)){if(_>=c){if(E>f)i[g][1]=f;else{if(y===1)return[];i.splice(g,1),g--,y--}continue}i[g][2]=c,E>f&&i.push([t,f,E])}}}return i};var Vw,r1;class Mae extends qe{constructor(t,r,s,i){super();W(this,Vw);W(this,r1);B(this,r1,t),B(this,Vw,r),this.firstPoint=s,this.lastPoint=i}toSVGPath(){const t=[];for(const r of p(this,r1)){let[s,i]=r;t.push(`M${s} ${i}`);for(let o=2;o<r.length;o+=2){const l=r[o],c=r[o+1];l===s?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${l}`),s=l)}t.push("Z")}return t.join(" ")}serialize([t,r,s,i],o){const l=[],c=s-t,f=i-r;for(const g of p(this,r1)){const y=new Array(g.length);for(let _=0;_<g.length;_+=2)y[_]=t+g[_]*c,y[_+1]=i-g[_+1]*f;l.push(y)}return l}get box(){return p(this,Vw)}get classNamesForOutlining(){return["highlightOutline"]}}Vw=new WeakMap,r1=new WeakMap;class S3 extends SE{newFreeDrawOutline(e,t,r,s,i,o){return new Oae(e,t,r,s,i,o)}}class Oae extends z9{newOutliner(e,t,r,s,i,o=0){return new S3(e,t,r,s,i,o)}}var s1,Ww,gu,Hm,Gw,Di,$w,qw,Vm,mo,po,As,i1,o1,Xs,a1,ia,Xw,Ot,N3,g2,$9,q9,X9,T3,bf,da,ig,Y9,x2,v2,K9,Z9,Q9,J9,eU;const dn=class dn extends Wn{constructor(t){super({...t,name:"highlightEditor"});W(this,Ot);W(this,s1,null);W(this,Ww,0);W(this,gu);W(this,Hm,null);W(this,Gw,null);W(this,Di,null);W(this,$w,null);W(this,qw,0);W(this,Vm,null);W(this,mo,null);W(this,po,null);W(this,As,!1);W(this,i1,null);W(this,o1,null);W(this,Xs,null);W(this,a1,"");W(this,ia);W(this,Xw,"");this.color=t.color||dn._defaultColor,B(this,ia,t.thickness||dn._defaultThickness),this.opacity=t.opacity||dn._defaultOpacity,B(this,gu,t.boxes||null),B(this,Xw,t.methodOfCreation||""),B(this,a1,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(B(this,As,!0),G(this,Ot,g2).call(this,t),G(this,Ot,bf).call(this)):p(this,gu)&&(B(this,s1,t.anchorNode),B(this,Ww,t.anchorOffset),B(this,$w,t.focusNode),B(this,qw,t.focusOffset),G(this,Ot,N3).call(this),G(this,Ot,bf).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=dn.prototype;return It(this,"_keyboardManager",new Eb([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:p(this,As)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:p(this,ia),methodOfCreation:p(this,Xw)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var s;Wn.initialize(t,r),dn._defaultColor||(dn._defaultColor=((s=r.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case Kt.HIGHLIGHT_COLOR:dn._defaultColor=r;break;case Kt.HIGHLIGHT_THICKNESS:dn._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return p(this,o1)}get commentButtonPosition(){return p(this,i1)}updateParams(t,r){switch(t){case Kt.HIGHLIGHT_COLOR:G(this,Ot,$9).call(this,r);break;case Kt.HIGHLIGHT_THICKNESS:G(this,Ot,q9).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Kt.HIGHLIGHT_COLOR,dn._defaultColor],[Kt.HIGHLIGHT_THICKNESS,dn._defaultThickness]]}get propertiesToUpdate(){return[[Kt.HIGHLIGHT_COLOR,this.color||dn._defaultColor],[Kt.HIGHLIGHT_THICKNESS,p(this,ia)||dn._defaultThickness],[Kt.HIGHLIGHT_FREE,p(this,As)]]}onUpdatedColor(){var t,r;(t=this.parent)==null||t.drawLayer.updateProperties(p(this,po),{root:{fill:this.color,"fill-opacity":this.opacity}}),(r=p(this,Gw))==null||r.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",B(this,Gw,new EE({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(G(this,Ot,v2).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,G(this,Ot,v2).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){G(this,Ot,T3).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(G(this,Ot,bf).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?G(this,Ot,T3).call(this):t&&(G(this,Ot,bf).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var i,o,l;const{drawLayer:r}=this.parent;let s;p(this,As)?(t=(t-this.rotation+360)%360,s=G(i=dn,da,ig).call(i,p(this,mo).box,t)):s=G(o=dn,da,ig).call(o,[this.x,this.y,this.width,this.height],t),r.updateProperties(p(this,po),{bbox:s,root:{"data-main-rotation":t}}),r.updateProperties(p(this,Xs),{bbox:G(l=dn,da,ig).call(l,p(this,Di).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();p(this,a1)&&(t.setAttribute("aria-label",p(this,a1)),t.setAttribute("role","mark")),p(this,As)?t.classList.add("free"):this.div.addEventListener("keydown",G(this,Ot,Y9).bind(this),{signal:this._uiManager._signal});const r=B(this,Vm,document.createElement("div"));return t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=p(this,Hm),this.setDims(),vF(this,p(this,Vm),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(p(this,Xs),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(p(this,Xs),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:G(this,Ot,x2).call(this,!0);break;case 1:case 3:G(this,Ot,x2).call(this,!1);break}}select(){var t;super.select(),p(this,Xs)&&((t=this.parent)==null||t.drawLayer.updateProperties(p(this,Xs),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),p(this,Xs)&&((t=this.parent)==null||t.drawLayer.updateProperties(p(this,Xs),{rootClass:{selected:!1}}),p(this,As)||G(this,Ot,x2).call(this,!1))}get _mustFixPosition(){return!p(this,As)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(p(this,po),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(p(this,Xs),{rootClass:{hidden:!t}}))}static startHighlighting(t,r,{target:s,x:i,y:o}){const{x:l,y:c,width:f,height:g}=s.getBoundingClientRect(),y=new AbortController,_=t.combinedSignal(y),E=P=>{y.abort(),G(this,da,J9).call(this,t,P)};window.addEventListener("blur",E,{signal:_}),window.addEventListener("pointerup",E,{signal:_}),window.addEventListener("pointerdown",Nr,{capture:!0,passive:!1,signal:_}),window.addEventListener("contextmenu",va,{signal:_}),s.addEventListener("pointermove",G(this,da,Q9).bind(this,t),{signal:_}),this._freeHighlight=new S3({x:i,y:o},[l,c,f,g],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,r,s){var S,I,N,k;let i=null;if(t instanceof T9){const{data:{quadPoints:T,rect:D,rotation:U,id:z,color:F,opacity:X,popupRef:Z,richText:ne,contentsObj:se,creationDate:ee,modificationDate:ce},parent:{page:{pageNumber:de}}}=t;i=t={annotationType:St.HIGHLIGHT,color:Array.from(F),opacity:X,quadPoints:T,boxes:null,pageIndex:de-1,rect:D.slice(0),rotation:U,annotationElementId:z,id:z,deleted:!1,popupRef:Z,richText:ne,comment:(se==null?void 0:se.str)||null,creationDate:ee,modificationDate:ce}}else if(t instanceof CR){const{data:{inkLists:T,rect:D,rotation:U,id:z,color:F,borderStyle:{rawWidth:X},popupRef:Z,richText:ne,contentsObj:se,creationDate:ee,modificationDate:ce},parent:{page:{pageNumber:de}}}=t;i=t={annotationType:St.HIGHLIGHT,color:Array.from(F),thickness:X,inkLists:T,boxes:null,pageIndex:de-1,rect:D.slice(0),rotation:U,annotationElementId:z,id:z,deleted:!1,popupRef:Z,richText:ne,comment:(se==null?void 0:se.str)||null,creationDate:ee,modificationDate:ce}}const{color:o,quadPoints:l,inkLists:c,opacity:f}=t,g=await super.deserialize(t,r,s);g.color=Ke.makeHexColor(...o),g.opacity=f||1,c&&B(g,ia,t.thickness),g._initialData=i,t.comment&&g.setCommentData(t);const[y,_]=g.pageDimensions,[E,P]=g.pageTranslation;if(l){const T=B(g,gu,[]);for(let D=0;D<l.length;D+=8)T.push({x:(l[D]-E)/y,y:1-(l[D+1]-P)/_,width:(l[D+2]-l[D])/y,height:(l[D+1]-l[D+5])/_});G(S=g,Ot,N3).call(S),G(I=g,Ot,bf).call(I),g.rotate(g.rotation)}else if(c){B(g,As,!0);const T=c[0],D={x:T[0]-E,y:_-(T[1]-P)},U=new S3(D,[0,0,y,_],1,p(g,ia)/2,!0,.001);for(let X=0,Z=T.length;X<Z;X+=2)D.x=T[X]-E,D.y=_-(T[X+1]-P),U.add(D);const{id:z,clipPathId:F}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:g.color,"fill-opacity":g._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:U.toSVGPath()}},!0,!0);G(N=g,Ot,g2).call(N,{highlightOutlines:U.getOutlines(),highlightId:z,clipPathId:F}),G(k=g,Ot,bf).call(k),g.rotate(g.parentRotation)}return g}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const r=Wn._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:r,opacity:this.opacity,thickness:p(this,ia),quadPoints:G(this,Ot,K9).call(this),outlines:G(this,Ot,Z9).call(this,s.rect)}),this.addComment(s),this.annotationElementId&&!G(this,Ot,eU).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};s1=new WeakMap,Ww=new WeakMap,gu=new WeakMap,Hm=new WeakMap,Gw=new WeakMap,Di=new WeakMap,$w=new WeakMap,qw=new WeakMap,Vm=new WeakMap,mo=new WeakMap,po=new WeakMap,As=new WeakMap,i1=new WeakMap,o1=new WeakMap,Xs=new WeakMap,a1=new WeakMap,ia=new WeakMap,Xw=new WeakMap,Ot=new WeakSet,N3=function(){const t=new C3(p(this,gu),.001);B(this,mo,t.getOutlines()),[this.x,this.y,this.width,this.height]=p(this,mo).box;const r=new C3(p(this,gu),.0025,.001,this._uiManager.direction==="ltr");B(this,Di,r.getOutlines());const{firstPoint:s}=p(this,mo);B(this,i1,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]);const{lastPoint:i}=p(this,Di);B(this,o1,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},g2=function({highlightOutlines:t,highlightId:r,clipPathId:s}){var _,E;if(B(this,mo,t),B(this,Di,t.getNewOutline(p(this,ia)/2+1.5,.0025)),r>=0)B(this,po,r),B(this,Hm,s),this.parent.drawLayer.finalizeDraw(r,{bbox:t.box,path:{d:t.toSVGPath()}}),B(this,Xs,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:p(this,Di).box,path:{d:p(this,Di).toSVGPath()}},!0));else if(this.parent){const P=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(p(this,po),{bbox:G(_=dn,da,ig).call(_,p(this,mo).box,(P-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(p(this,Xs),{bbox:G(E=dn,da,ig).call(E,p(this,Di).box,P),path:{d:p(this,Di).toSVGPath()}})}const[o,l,c,f]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=f;break;case 90:{const[P,S]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*S/P,this.height=f*P/S;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=f;break;case 270:{const[P,S]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*S/P,this.height=f*P/S;break}}const{firstPoint:g}=t;B(this,i1,[(g[0]-o)/c,(g[1]-l)/f]);const{lastPoint:y}=p(this,Di);B(this,o1,[(y[0]-o)/c,(y[1]-l)/f])},$9=function(t){const r=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,i=this.opacity;this.addCommands({cmd:r.bind(this,t,dn._defaultOpacity),undo:r.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Kt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},q9=function(t){const r=p(this,ia),s=i=>{B(this,ia,i),G(this,Ot,X9).call(this,i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Kt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},X9=function(t){p(this,As)&&(G(this,Ot,g2).call(this,{highlightOutlines:p(this,mo).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},T3=function(){p(this,po)===null||!this.parent||(this.parent.drawLayer.remove(p(this,po)),B(this,po,null),this.parent.drawLayer.remove(p(this,Xs)),B(this,Xs,null))},bf=function(t=this.parent){p(this,po)===null&&({id:vr(this,po)._,clipPathId:vr(this,Hm)._}=t.drawLayer.draw({bbox:p(this,mo).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:p(this,As)},path:{d:p(this,mo).toSVGPath()}},!1,!0),B(this,Xs,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:p(this,As)},bbox:p(this,Di).box,path:{d:p(this,Di).toSVGPath()}},p(this,As))),p(this,Vm)&&(p(this,Vm).style.clipPath=p(this,Hm)))},da=new WeakSet,ig=function([t,r,s,i],o){switch(o){case 90:return[1-r-i,t,i,s];case 180:return[1-t-s,1-r-i,s,i];case 270:return[r,1-t-s,i,s]}return[t,r,s,i]},Y9=function(t){dn._keyboardManager.exec(this,t)},x2=function(t){if(!p(this,s1))return;const r=window.getSelection();t?r.setPosition(p(this,s1),p(this,Ww)):r.setPosition(p(this,$w),p(this,qw))},v2=function(){return p(this,As)?this.rotation:0},K9=function(){if(p(this,As))return null;const[t,r]=this.pageDimensions,[s,i]=this.pageTranslation,o=p(this,gu),l=new Float32Array(o.length*8);let c=0;for(const{x:f,y:g,width:y,height:_}of o){const E=f*t+s,P=(1-g)*r+i;l[c]=l[c+4]=E,l[c+1]=l[c+3]=P,l[c+2]=l[c+6]=E+y*t,l[c+5]=l[c+7]=P-_*r,c+=8}return l},Z9=function(t){return p(this,mo).serialize(t,G(this,Ot,v2).call(this))},Q9=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},J9=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},eU=function(t){const{color:r}=this._initialData;return this.hasEditedComment||t.color.some((s,i)=>s!==r[i])},W(dn,da),Pe(dn,"_defaultColor",null),Pe(dn,"_defaultOpacity",1),Pe(dn,"_defaultThickness",12),Pe(dn,"_type","highlight"),Pe(dn,"_editorType",St.HIGHLIGHT),Pe(dn,"_freeHighlightId",-1),Pe(dn,"_freeHighlight",null),Pe(dn,"_freeHighlightClipId","");let NE=dn;var Wm;class tU{constructor(){W(this,Wm,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){p(this,Wm)[e]=t}toSVGProperties(){const e=p(this,Wm);return B(this,Wm,Object.create(null)),{root:e}}reset(){B(this,Wm,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){jn("Not implemented")}}Wm=new WeakMap;var go,l1,us,Gm,$m,on,P3,I3,R3,iv,nU,y2,ov,og;const $t=class $t extends Wn{constructor(t){super(t);W(this,on);W(this,go,null);W(this,l1);Pe(this,"_colorPicker",null);Pe(this,"_drawId",null);B(this,l1,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(G(this,on,P3).call(this,t),G(this,on,iv).call(this))}static _mergeSVGProperties(t,r){const s=new Set(Object.keys(t));for(const[i,o]of Object.entries(r))s.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){jn("Not implemented")}static get typesMap(){jn("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,r),this._currentParent&&(p($t,us).updateProperty(s,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)t.push([s,r[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[s,i]of this.constructor.typesMap)t.push([s,r[i]]);return t}_updateProperty(t,r,s){const i=this._drawingOptions,o=i[r],l=c=>{var g;i.updateProperty(r,c);const f=p(this,go).updateProperty(r,c);f&&G(this,on,ov).call(this,f),(g=this.parent)==null||g.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,$t._mergeSVGProperties(p(this,go).getPathResizingSVGProperties(G(this,on,y2).call(this)),{bbox:G(this,on,og).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,$t._mergeSVGProperties(p(this,go).getPathResizedSVGProperties(G(this,on,y2).call(this)),{bbox:G(this,on,og).call(this)}))}_onTranslating(t,r){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:G(this,on,og).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,$t._mergeSVGProperties(p(this,go).getPathTranslatedSVGProperties(G(this,on,y2).call(this),this.parentDimensions),{bbox:G(this,on,og).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,p(this,l1)&&(B(this,l1,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){G(this,on,R3).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(G(this,on,iv).call(this),G(this,on,ov).call(this,p(this,go).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),G(this,on,R3).call(this)):t&&(this._uiManager.addShouldRescale(this),G(this,on,iv).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,$t._mergeSVGProperties({bbox:G(this,on,og).call(this)},p(this,go).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&G(this,on,ov).call(this,p(this,go).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,r;this._isCopy&&(t=this.x,r=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");return s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,r),s}static createDrawerInstance(t,r,s,i,o){jn("Not implemented")}static startDrawing(t,r,s,i){var I;const{target:o,offsetX:l,offsetY:c,pointerId:f,pointerType:g}=i;if(Vs.isInitializedAndDifferentPointerType(g))return;const{viewport:{rotation:y}}=t,{width:_,height:E}=o.getBoundingClientRect(),P=B($t,Gm,new AbortController),S=t.combinedSignal(P);if(Vs.setPointer(g,f),window.addEventListener("pointerup",N=>{Vs.isSamePointerIdOrRemove(N.pointerId)&&this._endDraw(N)},{signal:S}),window.addEventListener("pointercancel",N=>{Vs.isSamePointerIdOrRemove(N.pointerId)&&this._currentParent.endDrawingSession()},{signal:S}),window.addEventListener("pointerdown",N=>{Vs.isSamePointerType(N.pointerType)&&(Vs.initializeAndAddPointerId(N.pointerId),p($t,us).isCancellable()&&(p($t,us).removeLastElement(),p($t,us).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",va,{signal:S}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),o.addEventListener("touchmove",N=>{Vs.isSameTimeStamp(N.timeStamp)&&Nr(N)},{signal:S}),t.toggleDrawing(),(I=r._editorUndoBar)==null||I.hide(),p($t,us)){t.drawLayer.updateProperties(this._currentDrawId,p($t,us).startNew(l,c,_,E,y));return}r.updateUIForDefaultProperties(this),B($t,us,this.createDrawerInstance(l,c,_,E,y)),B($t,$m,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(p($t,$m).toSVGProperties(),p($t,us).defaultSVGProperties),!0,!1)}static _drawMove(t){if(Vs.isSameTimeStamp(t.timeStamp),!p($t,us))return;const{offsetX:r,offsetY:s,pointerId:i}=t;if(Vs.isSamePointerId(i)){if(Vs.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,p($t,us).add(r,s)),Vs.setTimeStamp(t.timeStamp),Nr(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,B($t,us,null),B($t,$m,null),Vs.clearPointerType(),Vs.clearTimeStamp()),p($t,Gm)&&(p($t,Gm).abort(),B($t,Gm,null),Vs.clearPointerIds())}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,p($t,us).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=p($t,us),i=this._currentDrawId,o=s.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(i,s.setLastElement(o))},undo:()=>{r.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:Kt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(Kt.DRAW_STEP),!p($t,us).isEmpty()){const{pageDimensions:[s,i],scale:o}=r,l=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:p($t,us).getOutlines(s*o,i*o,o,this._INNER_MARGIN),drawingOptions:p($t,$m),mustBeCommitted:!t});return this._cleanup(!0),l}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,s,i,o,l){jn("Not implemented")}static async deserialize(t,r,s){var y,_;const{rawDims:{pageWidth:i,pageHeight:o,pageX:l,pageY:c}}=r.viewport,f=this.deserializeDraw(l,c,i,o,this._INNER_MARGIN,t),g=await super.deserialize(t,r,s);return g.createDrawingOptions(t),G(y=g,on,P3).call(y,{drawOutlines:f}),G(_=g,on,iv).call(_),g.onScaleChanging(),g.rotate(),g}serializeDraw(t){const[r,s]=this.pageTranslation,[i,o]=this.pageDimensions;return p(this,go).serialize([r,s,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};go=new WeakMap,l1=new WeakMap,us=new WeakMap,Gm=new WeakMap,$m=new WeakMap,on=new WeakSet,P3=function({drawOutlines:t,drawId:r,drawingOptions:s}){B(this,go,t),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=G(this,on,I3).call(this,t,this.parent),G(this,on,ov).call(this,t.box)},I3=function(t,r){const{id:s}=r.drawLayer.draw($t._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},R3=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},iv=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=G(this,on,I3).call(this,p(this,go),t)}},nU=function([t,r,s,i]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[r,1-t,s*(l/o),i*(o/l)];case 180:return[1-t,1-r,s,i];case 270:return[1-r,t,s*(l/o),i*(o/l)];default:return[t,r,s,i]}},y2=function(){const{x:t,y:r,width:s,height:i,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-r,t,s*(o/l),i*(l/o)];case 180:return[1-t,1-r,s,i];case 270:return[r,1-t,s*(o/l),i*(l/o)];default:return[t,r,s,i]}},ov=function(t){[this.x,this.y,this.width,this.height]=G(this,on,nU).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},og=function(){const{x:t,y:r,width:s,height:i,rotation:o,parentRotation:l,parentDimensions:[c,f]}=this;switch((o*4+l)/90){case 1:return[1-r-i,t,i,s];case 2:return[1-t-s,1-r-i,s,i];case 3:return[r,1-t-s,i,s];case 4:return[t,r-s*(c/f),i*(f/c),s*(c/f)];case 5:return[1-r,t,s*(c/f),i*(f/c)];case 6:return[1-t-i*(f/c),1-r,i*(f/c),s*(c/f)];case 7:return[r-s*(c/f),1-t-i*(f/c),s*(c/f),i*(f/c)];case 8:return[t-s,r-i,s,i];case 9:return[1-r,t-s,i,s];case 10:return[1-t,1-r,s,i];case 11:return[r-i,1-t,i,s];case 12:return[t-i*(f/c),r,i*(f/c),s*(c/f)];case 13:return[1-r-s*(c/f),t-i*(f/c),s*(c/f),i*(f/c)];case 14:return[1-t,1-r-s*(c/f),i*(f/c),s*(c/f)];case 15:return[r,1-t,s*(c/f),i*(f/c)];default:return[t,r,s,i]}},Pe($t,"_currentDrawId",-1),Pe($t,"_currentParent",null),W($t,us,null),W($t,Gm,null),W($t,$m,null),Pe($t,"_INNER_MARGIN",3);let TE=$t;var Wl,ds,hs,qm,c1,ui,Ss,oa,Xm,Ym,Km,u1,w2;class Dae{constructor(e,t,r,s,i,o){W(this,u1);W(this,Wl,new Float64Array(6));W(this,ds);W(this,hs);W(this,qm);W(this,c1);W(this,ui);W(this,Ss,"");W(this,oa,0);W(this,Xm,new Ab);W(this,Ym);W(this,Km);B(this,Ym,r),B(this,Km,s),B(this,qm,i),B(this,c1,o),[e,t]=G(this,u1,w2).call(this,e,t);const l=B(this,ds,[NaN,NaN,NaN,NaN,e,t]);B(this,ui,[e,t]),B(this,hs,[{line:l,points:p(this,ui)}]),p(this,Wl).set(l,0)}updateProperty(e,t){e==="stroke-width"&&B(this,c1,t)}isEmpty(){return!p(this,hs)||p(this,hs).length===0}isCancellable(){return p(this,ui).length<=10}add(e,t){[e,t]=G(this,u1,w2).call(this,e,t);const[r,s,i,o]=p(this,Wl).subarray(2,6),l=e-i,c=t-o;return Math.hypot(p(this,Ym)*l,p(this,Km)*c)<=2?null:(p(this,ui).push(e,t),isNaN(r)?(p(this,Wl).set([i,o,e,t],2),p(this,ds).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(p(this,Wl)[0])&&p(this,ds).splice(6,6),p(this,Wl).set([r,s,i,o,e,t],0),p(this,ds).push(...qe.createBezierPoints(r,s,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(p(this,ui).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,s,i){B(this,Ym,r),B(this,Km,s),B(this,qm,i),[e,t]=G(this,u1,w2).call(this,e,t);const o=B(this,ds,[NaN,NaN,NaN,NaN,e,t]);B(this,ui,[e,t]);const l=p(this,hs).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),p(this,hs).push({line:o,points:p(this,ui)}),p(this,Wl).set(o,0),B(this,oa,0),this.toSVGPath(),null}getLastElement(){return p(this,hs).at(-1)}setLastElement(e){return p(this,hs)?(p(this,hs).push(e),B(this,ds,e.line),B(this,ui,e.points),B(this,oa,0),{path:{d:this.toSVGPath()}}):p(this,Xm).setLastElement(e)}removeLastElement(){if(!p(this,hs))return p(this,Xm).removeLastElement();p(this,hs).pop(),B(this,Ss,"");for(let e=0,t=p(this,hs).length;e<t;e++){const{line:r,points:s}=p(this,hs)[e];B(this,ds,r),B(this,ui,s),B(this,oa,0),this.toSVGPath()}return{path:{d:p(this,Ss)}}}toSVGPath(){const e=qe.svgRound(p(this,ds)[4]),t=qe.svgRound(p(this,ds)[5]);if(p(this,ui).length===2)return B(this,Ss,`${p(this,Ss)} M ${e} ${t} Z`),p(this,Ss);if(p(this,ui).length<=6){const s=p(this,Ss).lastIndexOf("M");B(this,Ss,`${p(this,Ss).slice(0,s)} M ${e} ${t}`),B(this,oa,6)}if(p(this,ui).length===4){const s=qe.svgRound(p(this,ds)[10]),i=qe.svgRound(p(this,ds)[11]);return B(this,Ss,`${p(this,Ss)} L ${s} ${i}`),B(this,oa,12),p(this,Ss)}const r=[];p(this,oa)===0&&(r.push(`M ${e} ${t}`),B(this,oa,6));for(let s=p(this,oa),i=p(this,ds).length;s<i;s+=6){const[o,l,c,f,g,y]=p(this,ds).slice(s,s+6).map(qe.svgRound);r.push(`C${o} ${l} ${c} ${f} ${g} ${y}`)}return B(this,Ss,p(this,Ss)+r.join(" ")),B(this,oa,p(this,ds).length),p(this,Ss)}getOutlines(e,t,r,s){const i=p(this,hs).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),p(this,Xm).build(p(this,hs),e,t,r,p(this,qm),p(this,c1),s),B(this,Wl,null),B(this,ds,null),B(this,hs,null),B(this,Ss,null),p(this,Xm)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Wl=new WeakMap,ds=new WeakMap,hs=new WeakMap,qm=new WeakMap,c1=new WeakMap,ui=new WeakMap,Ss=new WeakMap,oa=new WeakMap,Xm=new WeakMap,Ym=new WeakMap,Km=new WeakMap,u1=new WeakSet,w2=function(e,t){return qe._normalizePoint(e,t,p(this,Ym),p(this,Km),p(this,qm))};var di,Yw,Kw,xo,Gl,$l,d1,h1,Zm,Ps,Mc,rU,sU,iU;class Ab extends qe{constructor(){super(...arguments);W(this,Ps);W(this,di);W(this,Yw,0);W(this,Kw);W(this,xo);W(this,Gl);W(this,$l);W(this,d1);W(this,h1);W(this,Zm)}build(t,r,s,i,o,l,c){B(this,Gl,r),B(this,$l,s),B(this,d1,i),B(this,h1,o),B(this,Zm,l),B(this,Kw,c??0),B(this,xo,t),G(this,Ps,sU).call(this)}get thickness(){return p(this,Zm)}setLastElement(t){return p(this,xo).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return p(this,xo).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:r}of p(this,xo)){if(t.push(`M${qe.svgRound(r[4])} ${qe.svgRound(r[5])}`),r.length===6){t.push("Z");continue}if(r.length===12&&isNaN(r[6])){t.push(`L${qe.svgRound(r[10])} ${qe.svgRound(r[11])}`);continue}for(let s=6,i=r.length;s<i;s+=6){const[o,l,c,f,g,y]=r.subarray(s,s+6).map(qe.svgRound);t.push(`C${o} ${l} ${c} ${f} ${g} ${y}`)}}return t.join("")}serialize([t,r,s,i],o){const l=[],c=[],[f,g,y,_]=G(this,Ps,rU).call(this);let E,P,S,I,N,k,T,D,U;switch(p(this,h1)){case 0:U=qe._rescale,E=t,P=r+i,S=s,I=-i,N=t+f*s,k=r+(1-g-_)*i,T=t+(f+y)*s,D=r+(1-g)*i;break;case 90:U=qe._rescaleAndSwap,E=t,P=r,S=s,I=i,N=t+g*s,k=r+f*i,T=t+(g+_)*s,D=r+(f+y)*i;break;case 180:U=qe._rescale,E=t+s,P=r,S=-s,I=i,N=t+(1-f-y)*s,k=r+g*i,T=t+(1-f)*s,D=r+(g+_)*i;break;case 270:U=qe._rescaleAndSwap,E=t+s,P=r+i,S=-s,I=-i,N=t+(1-g-_)*s,k=r+(1-f-y)*i,T=t+(1-g)*s,D=r+(1-f)*i;break}for(const{line:z,points:F}of p(this,xo))l.push(U(z,E,P,S,I,o?new Array(z.length):null)),c.push(U(F,E,P,S,I,o?new Array(F.length):null));return{lines:l,points:c,rect:[N,k,T,D]}}static deserialize(t,r,s,i,o,{paths:{lines:l,points:c},rotation:f,thickness:g}){const y=[];let _,E,P,S,I;switch(f){case 0:I=qe._rescale,_=-t/s,E=r/i+1,P=1/s,S=-1/i;break;case 90:I=qe._rescaleAndSwap,_=-r/i,E=-t/s,P=1/i,S=1/s;break;case 180:I=qe._rescale,_=t/s+1,E=-r/i,P=-1/s,S=1/i;break;case 270:I=qe._rescaleAndSwap,_=r/i+1,E=t/s+1,P=-1/i,S=-1/s;break}if(!l){l=[];for(const k of c){const T=k.length;if(T===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,k[0],k[1]]));continue}if(T===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,k[0],k[1],NaN,NaN,NaN,NaN,k[2],k[3]]));continue}const D=new Float32Array(3*(T-2));l.push(D);let[U,z,F,X]=k.subarray(0,4);D.set([NaN,NaN,NaN,NaN,U,z],0);for(let Z=4;Z<T;Z+=2){const ne=k[Z],se=k[Z+1];D.set(qe.createBezierPoints(U,z,F,X,ne,se),(Z-2)*3),[U,z,F,X]=[F,X,ne,se]}}}for(let k=0,T=l.length;k<T;k++)y.push({line:I(l[k].map(D=>D??NaN),_,E,P,S),points:I(c[k].map(D=>D??NaN),_,E,P,S)});const N=new this.prototype.constructor;return N.build(y,s,i,1,f,g,o),N}get box(){return p(this,di)}updateProperty(t,r){return t==="stroke-width"?G(this,Ps,iU).call(this,r):null}updateParentDimensions([t,r],s){const[i,o]=G(this,Ps,Mc).call(this);B(this,Gl,t),B(this,$l,r),B(this,d1,s);const[l,c]=G(this,Ps,Mc).call(this),f=l-i,g=c-o,y=p(this,di);return y[0]-=f,y[1]-=g,y[2]+=2*f,y[3]+=2*g,y}updateRotation(t){return B(this,Yw,t),{path:{transform:this.rotationTransform}}}get viewBox(){return p(this,di).map(qe.svgRound).join(" ")}get defaultProperties(){const[t,r]=p(this,di);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${qe.svgRound(t)} ${qe.svgRound(r)}`}}}get rotationTransform(){const[,,t,r]=p(this,di);let s=0,i=0,o=0,l=0,c=0,f=0;switch(p(this,Yw)){case 90:i=r/t,o=-t/r,c=t;break;case 180:s=-1,l=-1,c=t,f=r;break;case 270:i=-r/t,o=t/r,f=r;break;default:return""}return`matrix(${s} ${i} ${o} ${l} ${qe.svgRound(c)} ${qe.svgRound(f)})`}getPathResizingSVGProperties([t,r,s,i]){const[o,l]=G(this,Ps,Mc).call(this),[c,f,g,y]=p(this,di);if(Math.abs(g-o)<=qe.PRECISION||Math.abs(y-l)<=qe.PRECISION){const I=t+s/2-(c+g/2),N=r+i/2-(f+y/2);return{path:{"transform-origin":`${qe.svgRound(t)} ${qe.svgRound(r)}`,transform:`${this.rotationTransform} translate(${I} ${N})`}}}const _=(s-2*o)/(g-2*o),E=(i-2*l)/(y-2*l),P=g/s,S=y/i;return{path:{"transform-origin":`${qe.svgRound(c)} ${qe.svgRound(f)}`,transform:`${this.rotationTransform} scale(${P} ${S}) translate(${qe.svgRound(o)} ${qe.svgRound(l)}) scale(${_} ${E}) translate(${qe.svgRound(-o)} ${qe.svgRound(-l)})`}}}getPathResizedSVGProperties([t,r,s,i]){const[o,l]=G(this,Ps,Mc).call(this),c=p(this,di),[f,g,y,_]=c;if(c[0]=t,c[1]=r,c[2]=s,c[3]=i,Math.abs(y-o)<=qe.PRECISION||Math.abs(_-l)<=qe.PRECISION){const N=t+s/2-(f+y/2),k=r+i/2-(g+_/2);for(const{line:T,points:D}of p(this,xo))qe._translate(T,N,k,T),qe._translate(D,N,k,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${qe.svgRound(t)} ${qe.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const E=(s-2*o)/(y-2*o),P=(i-2*l)/(_-2*l),S=-E*(f+o)+t+o,I=-P*(g+l)+r+l;if(E!==1||P!==1||S!==0||I!==0)for(const{line:N,points:k}of p(this,xo))qe._rescale(N,S,I,E,P,N),qe._rescale(k,S,I,E,P,k);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${qe.svgRound(t)} ${qe.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,r],s){const[i,o]=s,l=p(this,di),c=t-l[0],f=r-l[1];if(p(this,Gl)===i&&p(this,$l)===o)for(const{line:g,points:y}of p(this,xo))qe._translate(g,c,f,g),qe._translate(y,c,f,y);else{const g=p(this,Gl)/i,y=p(this,$l)/o;B(this,Gl,i),B(this,$l,o);for(const{line:_,points:E}of p(this,xo))qe._rescale(_,c,f,g,y,_),qe._rescale(E,c,f,g,y,E);l[2]*=g,l[3]*=y}return l[0]=t,l[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${qe.svgRound(t)} ${qe.svgRound(r)}`}}}get defaultSVGProperties(){const t=p(this,di);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${qe.svgRound(t[0])} ${qe.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}di=new WeakMap,Yw=new WeakMap,Kw=new WeakMap,xo=new WeakMap,Gl=new WeakMap,$l=new WeakMap,d1=new WeakMap,h1=new WeakMap,Zm=new WeakMap,Ps=new WeakSet,Mc=function(t=p(this,Zm)){const r=p(this,Kw)+t/2*p(this,d1);return p(this,h1)%180===0?[r/p(this,Gl),r/p(this,$l)]:[r/p(this,$l),r/p(this,Gl)]},rU=function(){const[t,r,s,i]=p(this,di),[o,l]=G(this,Ps,Mc).call(this,0);return[t+o,r+l,s-2*o,i-2*l]},sU=function(){const t=B(this,di,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of p(this,xo)){if(i.length<=12){for(let c=4,f=i.length;c<f;c+=6)Ke.pointBoundingBox(i[c],i[c+1],t);continue}let o=i[4],l=i[5];for(let c=6,f=i.length;c<f;c+=6){const[g,y,_,E,P,S]=i.subarray(c,c+6);Ke.bezierBoundingBox(o,l,g,y,_,E,P,S,t),o=P,l=S}}const[r,s]=G(this,Ps,Mc).call(this);t[0]=mi(t[0]-r,0,1),t[1]=mi(t[1]-s,0,1),t[2]=mi(t[2]+r,0,1),t[3]=mi(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]},iU=function(t){const[r,s]=G(this,Ps,Mc).call(this);B(this,Zm,t);const[i,o]=G(this,Ps,Mc).call(this),[l,c]=[i-r,o-s],f=p(this,di);return f[0]-=l,f[1]-=c,f[2]+=2*l,f[3]+=2*c,f};class tA extends tU{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Wn._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new tA(this._viewParameters);return e.updateAll(this),e}}var ZE,oU;const Ag=class Ag extends TE{constructor(t){super({...t,name:"inkEditor"});W(this,ZE);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,r){Wn.initialize(t,r),this._defaultDrawingOptions=new tA(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return It(this,"typesMap",new Map([[Kt.INK_THICKNESS,"stroke-width"],[Kt.INK_COLOR,"stroke"],[Kt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,r,s,i,o){return new Dae(t,r,s,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,r,s,i,o,l){return Ab.deserialize(t,r,s,i,o,l)}static async deserialize(t,r,s){let i=null;if(t instanceof CR){const{data:{inkLists:l,rect:c,rotation:f,id:g,color:y,opacity:_,borderStyle:{rawWidth:E},popupRef:P,richText:S,contentsObj:I,creationDate:N,modificationDate:k},parent:{page:{pageNumber:T}}}=t;i=t={annotationType:St.INK,color:Array.from(y),thickness:E,opacity:_,paths:{points:l},boxes:null,pageIndex:T-1,rect:c.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:P,richText:S,comment:(I==null?void 0:I.str)||null,creationDate:N,modificationDate:k}}const o=await super.deserialize(t,r,s);return o._initialData=i,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new CE(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Kt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:r,parent:s}=this;r.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:r,opacity:s}){this._drawingOptions=Ag.getDefaultDrawingOptions({stroke:Ke.makeHexColor(...t),"stroke-width":r,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":o,"stroke-width":l}}=this,c=Object.assign(super.serialize(t),{color:Wn._colorManager.convert(i),opacity:o,thickness:l,paths:{lines:r,points:s}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!G(this,ZE,oU).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:r,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:r,popup:this.comment}),null}};ZE=new WeakSet,oU=function(t){const{color:r,thickness:s,opacity:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==r[c])||t.thickness!==s||t.opacity!==i||t.pageIndex!==o},Pe(Ag,"_type","ink"),Pe(Ag,"_editorType",St.INK),Pe(Ag,"_defaultDrawingOptions",null);let k3=Ag;class M3 extends Ab{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const N_=8,Ox=3;var Qm,gn,O3,Ga,aU,lU,D3,b2,cU,uU,dU,j3,L3,hU;class _u{static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:s},i,o,l,c){let f=new OffscreenCanvas(1,1),g=f.getContext("2d",{alpha:!1});const y=200,_=g.font=`${r} ${s} ${y}px ${t}`,{actualBoundingBoxLeft:E,actualBoundingBoxRight:P,actualBoundingBoxAscent:S,actualBoundingBoxDescent:I,fontBoundingBoxAscent:N,fontBoundingBoxDescent:k,width:T}=g.measureText(e),D=1.5,U=Math.ceil(Math.max(Math.abs(E)+Math.abs(P)||0,T)*D),z=Math.ceil(Math.max(Math.abs(S)+Math.abs(I)||y,Math.abs(N)+Math.abs(k)||y)*D);f=new OffscreenCanvas(U,z),g=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=_,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,U,z),g.fillStyle="black",g.fillText(e,U*(D-1)/2,z*(3-D)/2);const F=G(this,gn,j3).call(this,g.getImageData(0,0,U,z).data),X=G(this,gn,dU).call(this,F),Z=G(this,gn,L3).call(this,X),ne=G(this,gn,D3).call(this,F,U,z,Z);return this.processDrawnLines({lines:{curves:ne,width:U,height:z},pageWidth:i,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,r,s,i){const[o,l,c]=G(this,gn,hU).call(this,e),[f,g]=G(this,gn,uU).call(this,o,l,c,Math.hypot(l,c)*p(this,Qm).sigmaSFactor,p(this,Qm).sigmaR,p(this,Qm).kernelSize),y=G(this,gn,L3).call(this,g),_=G(this,gn,D3).call(this,f,l,c,y);return this.processDrawnLines({lines:{curves:_,width:l,height:c},pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:o,areContours:l}){s%180!==0&&([t,r]=[r,t]);const{curves:c,width:f,height:g}=e,y=e.thickness??0,_=[],E=Math.min(t/f,r/g),P=E/t,S=E/r,I=[];for(const{points:k}of c){const T=o?G(this,gn,cU).call(this,k):k;if(!T)continue;I.push(T);const D=T.length,U=new Float32Array(D),z=new Float32Array(3*(D===2?2:D-2));if(_.push({line:z,points:U}),D===2){U[0]=T[0]*P,U[1]=T[1]*S,z.set([NaN,NaN,NaN,NaN,U[0],U[1]],0);continue}let[F,X,Z,ne]=T;F*=P,X*=S,Z*=P,ne*=S,U.set([F,X,Z,ne],0),z.set([NaN,NaN,NaN,NaN,F,X],0);for(let se=4;se<D;se+=2){const ee=U[se]=T[se]*P,ce=U[se+1]=T[se+1]*S;z.set(qe.createBezierPoints(F,X,Z,ne,ee,ce),(se-2)*3),[F,X,Z,ne]=[Z,ne,ee,ce]}}if(_.length===0)return null;const N=l?new M3:new Ab;return N.build(_,t,r,1,s,l?0:y,i),{outline:N,newCurves:I,areContours:l,thickness:y,width:f,height:g}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:s,height:i}){let o=1/0,l=-1/0,c=0;for(const T of e){c+=T.length;for(let D=2,U=T.length;D<U;D++){const z=T[D]-T[D-2];o=Math.min(o,z),l=Math.max(l,z)}}let f;o>=-128&&l<=127?f=Int8Array:o>=-32768&&l<=32767?f=Int16Array:f=Int32Array;const g=e.length,y=N_+Ox*g,_=new Uint32Array(y);let E=0;_[E++]=y*Uint32Array.BYTES_PER_ELEMENT+(c-2*g)*f.BYTES_PER_ELEMENT,_[E++]=0,_[E++]=s,_[E++]=i,_[E++]=t?0:1,_[E++]=Math.max(0,Math.floor(r??0)),_[E++]=g,_[E++]=f.BYTES_PER_ELEMENT;for(const T of e)_[E++]=T.length-2,_[E++]=T[0],_[E++]=T[1];const P=new CompressionStream("deflate-raw"),S=P.writable.getWriter();await S.ready,S.write(_);const I=f.prototype.constructor;for(const T of e){const D=new I(T.length-2);for(let U=2,z=T.length;U<z;U++)D[U-2]=T[U]-T[U-2];S.write(D)}S.close();const N=await new Response(P.readable).arrayBuffer(),k=new Uint8Array(N);return cF(k)}static async decompressSignature(e){try{const t=Qie(e),{readable:r,writable:s}=new DecompressionStream("deflate-raw"),i=s.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,l=0;for await(const T of r)o||(o=new Uint8Array(new Uint32Array(T.buffer,0,4)[0])),o.set(T,l),l+=T.length;const c=new Uint32Array(o.buffer,0,o.length>>2),f=c[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const g=c[2],y=c[3],_=c[4]===0,E=c[5],P=c[6],S=c[7],I=[],N=(N_+Ox*P)*Uint32Array.BYTES_PER_ELEMENT;let k;switch(S){case Int8Array.BYTES_PER_ELEMENT:k=new Int8Array(o.buffer,N);break;case Int16Array.BYTES_PER_ELEMENT:k=new Int16Array(o.buffer,N);break;case Int32Array.BYTES_PER_ELEMENT:k=new Int32Array(o.buffer,N);break}l=0;for(let T=0;T<P;T++){const D=c[Ox*T+N_],U=new Float32Array(D+2);I.push(U);for(let z=0;z<Ox-1;z++)U[z]=c[Ox*T+N_+z+1];for(let z=0;z<D;z++)U[z+2]=U[z]+k[l++]}return{areContours:_,thickness:E,outlines:I,width:g,height:y}}catch(t){return bt(`decompressSignature: ${t}`),null}}}Qm=new WeakMap,gn=new WeakSet,O3=function(e,t,r,s){return r-=e,s-=t,r===0?s>0?0:4:r===1?s+6:2-s},Ga=new WeakMap,aU=function(e,t,r,s,i,o,l){const c=G(this,gn,O3).call(this,r,s,i,o);for(let f=0;f<8;f++){const g=(-f+c-l+16)%8,y=p(this,Ga)[2*g],_=p(this,Ga)[2*g+1];if(e[(r+y)*t+(s+_)]!==0)return g}return-1},lU=function(e,t,r,s,i,o,l){const c=G(this,gn,O3).call(this,r,s,i,o);for(let f=0;f<8;f++){const g=(f+c+l+16)%8,y=p(this,Ga)[2*g],_=p(this,Ga)[2*g+1];if(e[(r+y)*t+(s+_)]!==0)return g}return-1},D3=function(e,t,r,s){const i=e.length,o=new Int32Array(i);for(let g=0;g<i;g++)o[g]=e[g]<=s?1:0;for(let g=1;g<r-1;g++)o[g*t]=o[g*t+t-1]=0;for(let g=0;g<t;g++)o[g]=o[t*r-1-g]=0;let l=1,c;const f=[];for(let g=1;g<r-1;g++){c=1;for(let y=1;y<t-1;y++){const _=g*t+y,E=o[_];if(E===0)continue;let P=g,S=y;if(E===1&&o[_-1]===0)l+=1,S-=1;else if(E>=1&&o[_+1]===0)l+=1,S+=1,E>1&&(c=E);else{E!==1&&(c=Math.abs(E));continue}const I=[y,g],N=S===y+1,k={isHole:N,points:I,id:l,parent:0};f.push(k);let T;for(const se of f)if(se.id===c){T=se;break}T?T.isHole?k.parent=N?T.parent:c:k.parent=N?c:T.parent:k.parent=N?c:0;const D=G(this,gn,aU).call(this,o,t,g,y,P,S,0);if(D===-1){o[_]=-l,o[_]!==1&&(c=Math.abs(o[_]));continue}let U=p(this,Ga)[2*D],z=p(this,Ga)[2*D+1];const F=g+U,X=y+z;P=F,S=X;let Z=g,ne=y;for(;;){const se=G(this,gn,lU).call(this,o,t,Z,ne,P,S,1);U=p(this,Ga)[2*se],z=p(this,Ga)[2*se+1];const ee=Z+U,ce=ne+z;I.push(ce,ee);const de=Z*t+ne;if(o[de+1]===0?o[de]=-l:o[de]===1&&(o[de]=l),ee===g&&ce===y&&Z===F&&ne===X){o[_]!==1&&(c=Math.abs(o[_]));break}else P=Z,S=ne,Z=ee,ne=ce}}}return f},b2=function(e,t,r,s){if(r-t<=4){for(let F=t;F<r-2;F+=2)s.push(e[F],e[F+1]);return}const i=e[t],o=e[t+1],l=e[r-4]-i,c=e[r-3]-o,f=Math.hypot(l,c),g=l/f,y=c/f,_=g*o-y*i,E=c/l,P=1/f,S=Math.atan(E),I=Math.cos(S),N=Math.sin(S),k=P*(Math.abs(I)+Math.abs(N)),T=P*(1-k+k**2),D=Math.max(Math.atan(Math.abs(N+I)*T),Math.atan(Math.abs(N-I)*T));let U=0,z=t;for(let F=t+2;F<r-2;F+=2){const X=Math.abs(_-g*e[F+1]+y*e[F]);X>U&&(z=F,U=X)}U>(f*D)**2?(G(this,gn,b2).call(this,e,t,z+2,s),G(this,gn,b2).call(this,e,z,r,s)):s.push(i,o)},cU=function(e){const t=[],r=e.length;return G(this,gn,b2).call(this,e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t},uU=function(e,t,r,s,i,o){const l=new Float32Array(o**2),c=-2*s**2,f=o>>1;for(let S=0;S<o;S++){const I=(S-f)**2;for(let N=0;N<o;N++)l[S*o+N]=Math.exp((I+(N-f)**2)/c)}const g=new Float32Array(256),y=-2*i**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/y);const _=e.length,E=new Uint8Array(_),P=new Uint32Array(256);for(let S=0;S<r;S++)for(let I=0;I<t;I++){const N=S*t+I,k=e[N];let T=0,D=0;for(let z=0;z<o;z++){const F=S+z-f;if(!(F<0||F>=r))for(let X=0;X<o;X++){const Z=I+X-f;if(Z<0||Z>=t)continue;const ne=e[F*t+Z],se=l[z*o+X]*g[Math.abs(ne-k)];T+=ne*se,D+=se}}const U=E[N]=Math.round(T/D);P[U]++}return[E,P]},dU=function(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t},j3=function(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let s=-1/0,i=1/0;for(let l=0,c=r.length;l<c;l++){const f=r[l]=e[l<<2];s=Math.max(s,f),i=Math.min(i,f)}const o=255/(s-i);for(let l=0,c=r.length;l<c;l++)r[l]=(r[l]-i)*o;return r},L3=function(e){let t,r=-1/0,s=-1/0;const i=e.findIndex(c=>c!==0);let o=i,l=i;for(t=i;t<256;t++){const c=e[t];c>r&&(t-o>s&&(s=t-o,l=t-1),r=c,o=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t},hU=function(e){const t=e,{width:r,height:s}=e,{maxDim:i}=p(this,Qm);let o=r,l=s;if(r>i||s>i){let _=r,E=s,P=Math.log2(Math.max(r,s)/i);const S=Math.floor(P);P=P===S?S-1:S;for(let N=0;N<P;N++){o=Math.ceil(_/2),l=Math.ceil(E/2);const k=new OffscreenCanvas(o,l);k.getContext("2d").drawImage(e,0,0,_,E,0,0,o,l),_=o,E=l,e!==t&&e.close(),e=k.transferToImageBitmap()}const I=Math.min(i/o,i/l);o=Math.round(o*I),l=Math.round(l*I)}const f=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,o,l),f.filter="grayscale(1)",f.drawImage(e,0,0,e.width,e.height,0,0,o,l);const g=f.getImageData(0,0,o,l).data;return[G(this,gn,j3).call(this,g),o,l]},W(_u,gn),W(_u,Qm,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),W(_u,Ga,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class AR extends tU{constructor(){super(),super.updateProperties({fill:Wn._defaultLineColor,"stroke-width":0})}clone(){const e=new AR;return e.updateAll(this),e}}class SR extends tA{constructor(e){super(e),super.updateProperties({stroke:Wn._defaultLineColor,"stroke-width":1})}clone(){const e=new SR(this._viewParameters);return e.updateAll(this),e}}var sh,ql,ih,Jm;const Ji=class Ji extends TE{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});W(this,sh,!1);W(this,ql,null);W(this,ih,null);W(this,Jm,null);this._willKeepAspectRatio=!0,B(this,ih,t.signatureData||null),B(this,ql,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,r){Wn.initialize(t,r),this._defaultDrawingOptions=new AR,this._defaultDrawnSignatureOptions=new SR(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return It(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!p(this,ql)}}static computeTelemetryFinalData(t){const r=t.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,r;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,r=this.y),super.render(),this._drawId===null)if(p(this,ih)){const{lines:i,mustSmooth:o,areContours:l,description:c,uuid:f,heightInPage:g}=p(this,ih),{rawDims:{pageWidth:y,pageHeight:_},rotation:E}=this.parent.viewport,P=_u.processDrawnLines({lines:i,pageWidth:y,pageHeight:_,rotation:E,innerMargin:Ji._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(P,g,c,f)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:p(this,ql)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,r)),this.div}setUuid(t){B(this,Jm,t),this.addEditToolbar()}getUuid(){return p(this,Jm)}get description(){return p(this,ql)}set description(t){B(this,ql,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:r,thickness:s,width:i,height:o}=p(this,ih),l=Math.max(i,o),c=_u.processDrawnLines({lines:{curves:t.map(f=>({points:f})),thickness:s,width:i,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,r,s,i){const{x:o,y:l}=this,{outline:c}=B(this,ih,t);B(this,sh,c instanceof M3),this.description=s;let f;p(this,sh)?f=Ji.getDefaultDrawingOptions():(f=Ji._defaultDrawnSignatureOptions.clone(),f.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:f});const[,g]=this.pageDimensions;let y=r/g;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return _u.process(t,r,s,i,Ji._INNER_MARGIN)}getFromText(t,r){const{rawDims:{pageWidth:s,pageHeight:i},rotation:o}=this.parent.viewport;return _u.extractContoursFromText(t,r,s,i,o,Ji._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return _u.processDrawnLines({lines:t,pageWidth:r,pageHeight:s,rotation:i,innerMargin:Ji._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:r}){t?this._drawingOptions=Ji.getDefaultDrawingOptions():(this._drawingOptions=Ji._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:r,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:p(this,sh),color:[0,0,0],thickness:p(this,sh)?0:i});return this.addComment(o),t?(o.paths={lines:r,points:s},o.uuid=p(this,Jm),o.isCopy=!0):o.lines=r,p(this,ql)&&(o.accessibilityData={type:"Figure",alt:p(this,ql)}),o}static deserializeDraw(t,r,s,i,o,l){return l.areContours?M3.deserialize(t,r,s,i,o,l):Ab.deserialize(t,r,s,i,o,l)}static async deserialize(t,r,s){var o;const i=await super.deserialize(t,r,s);return B(i,sh,t.areContours),i.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",B(i,Jm,t.uuid),i}};sh=new WeakMap,ql=new WeakMap,ih=new WeakMap,Jm=new WeakMap,Pe(Ji,"_type","signature"),Pe(Ji,"_editorType",St.SIGNATURE),Pe(Ji,"_defaultDrawingOptions",null);let B3=Ji;var sr,fs,oh,xu,ah,f1,vu,ep,Xl,vo,m1,an,av,lv,_2,E2,C2,U3,A2,fU;class F3 extends Wn{constructor(t){super({...t,name:"stampEditor"});W(this,an);W(this,sr,null);W(this,fs,null);W(this,oh,null);W(this,xu,null);W(this,ah,null);W(this,f1,"");W(this,vu,null);W(this,ep,!1);W(this,Xl,null);W(this,vo,!1);W(this,m1,!1);B(this,xu,t.bitmapUrl),B(this,ah,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,r){Wn.initialize(t,r)}static isHandlingMimeForPasting(t){return CT.includes(t)}static paste(t,r){r.pasteEditor({mode:St.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const r=t.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(t=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:i,width:o,height:l,channels:i.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const f=c.output;return await this.setGuessedAltText(f),r&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var t;p(this,fs)&&(B(this,sr,null),this._uiManager.imageManager.deleteId(p(this,fs)),(t=p(this,vu))==null||t.remove(),B(this,vu,null),p(this,Xl)&&(clearTimeout(p(this,Xl)),B(this,Xl,null))),super.remove()}rebuild(){if(!this.parent){p(this,fs)&&G(this,an,_2).call(this);return}super.rebuild(),this.div!==null&&(p(this,fs)&&p(this,vu)===null&&G(this,an,_2).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(p(this,oh)||p(this,sr)||p(this,xu)||p(this,ah)||p(this,fs)||p(this,ep))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;return this._isCopy&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),p(this,ep)||(p(this,sr)?G(this,an,E2).call(this):G(this,an,_2).call(this)),this._isCopy&&this._moveAfterPaste(t,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,r){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,r);r.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(B(this,fs,s),i&&B(this,sr,i),B(this,ep,!1),G(this,an,E2).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;p(this,Xl)!==null&&clearTimeout(p(this,Xl)),B(this,Xl,setTimeout(()=>{B(this,Xl,null),G(this,an,U3).call(this)},200))}copyCanvas(t,r,s=!1){t||(t=224);const{width:i,height:o}=p(this,sr),l=new cc;let c=p(this,sr),f=i,g=o,y=null;if(r){if(i>r||o>r){const F=Math.min(r/i,r/o);f=Math.floor(i*F),g=Math.floor(o*F)}y=document.createElement("canvas");const E=y.width=Math.ceil(f*l.sx),P=y.height=Math.ceil(g*l.sy);p(this,vo)||(c=G(this,an,C2).call(this,E,P));const S=y.getContext("2d");S.filter=this._uiManager.hcmFilter;let I="white",N="#cfcfd8";this._uiManager.hcmFilter!=="none"?N="black":soe.isDarkMode&&(I="#8f8f9d",N="#42414d");const k=15,T=k*l.sx,D=k*l.sy,U=new OffscreenCanvas(T*2,D*2),z=U.getContext("2d");z.fillStyle=I,z.fillRect(0,0,T*2,D*2),z.fillStyle=N,z.fillRect(0,0,T,D),z.fillRect(T,D,T,D),S.fillStyle=S.createPattern(U,"repeat"),S.fillRect(0,0,E,P),S.drawImage(c,0,0,c.width,c.height,0,0,E,P)}let _=null;if(s){let E,P;if(l.symmetric&&c.width<t&&c.height<t)E=c.width,P=c.height;else if(c=p(this,sr),i>t||o>t){const N=Math.min(t/i,t/o);E=Math.floor(i*N),P=Math.floor(o*N),p(this,vo)||(c=G(this,an,C2).call(this,E,P))}const I=new OffscreenCanvas(E,P).getContext("2d",{willReadFrequently:!0});I.drawImage(c,0,0,c.width,c.height,0,0,E,P),_={width:E,height:P,data:I.getImageData(0,0,E,P).data}}return{canvas:y,width:f,height:g,imageData:_}}static async deserialize(t,r,s){var I;let i=null,o=!1;if(t instanceof P9){const{data:{rect:N,rotation:k,id:T,structParent:D,popupRef:U,richText:z,contentsObj:F,creationDate:X,modificationDate:Z},container:ne,parent:{page:{pageNumber:se}},canvas:ee}=t;let ce,de;ee?(delete t.canvas,{id:ce,bitmap:de}=s.imageManager.getFromCanvas(ne.id,ee),ee.remove()):(o=!0,t._hasNoCanvas=!0);const re=((I=await r._structTree.getAriaAttributes(`${yg}${T}`))==null?void 0:I.get("aria-label"))||"";i=t={annotationType:St.STAMP,bitmapId:ce,bitmap:de,pageIndex:se-1,rect:N.slice(0),rotation:k,annotationElementId:T,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:re},isSvg:!1,structParent:D,popupRef:U,richText:z,comment:(F==null?void 0:F.str)||null,creationDate:X,modificationDate:Z}}const l=await super.deserialize(t,r,s),{rect:c,bitmap:f,bitmapUrl:g,bitmapId:y,isSvg:_,accessibilityData:E}=t;o?(s.addMissingCanvas(t.id,l),B(l,ep,!0)):y&&s.imageManager.isValidId(y)?(B(l,fs,y),f&&B(l,sr,f)):B(l,xu,g),B(l,vo,_);const[P,S]=l.pageDimensions;return l.width=(c[2]-c[0])/P,l.height=(c[3]-c[1])/S,E&&(l.altTextData=E),l._initialData=i,t.comment&&l.setCommentData(t),B(l,m1,!!i),l}serialize(t=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:p(this,fs),isSvg:p(this,vo)});if(this.addComment(s),t)return s.bitmapUrl=G(this,an,A2).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=G(this,an,fU).call(this,s);return c.isSame?null:(c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(r===null)return s;r.stamps||(r.stamps=new Map);const l=p(this,vo)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!r.stamps.has(p(this,fs)))r.stamps.set(p(this,fs),{area:l,serialized:s}),s.bitmap=G(this,an,A2).call(this,!1);else if(p(this,vo)){const c=r.stamps.get(p(this,fs));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=G(this,an,A2).call(this,!1))}return s}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}sr=new WeakMap,fs=new WeakMap,oh=new WeakMap,xu=new WeakMap,ah=new WeakMap,f1=new WeakMap,vu=new WeakMap,ep=new WeakMap,Xl=new WeakMap,vo=new WeakMap,m1=new WeakMap,an=new WeakSet,av=function(t,r=!1){if(!t){this.remove();return}B(this,sr,t.bitmap),r||(B(this,fs,t.id),B(this,vo,t.isSvg)),t.file&&B(this,f1,t.file.name),G(this,an,E2).call(this)},lv=function(){if(B(this,oh,null),this._uiManager.enableWaiting(!1),!!p(this,vu)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&p(this,sr)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&p(this,sr)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},_2=function(){if(p(this,fs)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(p(this,fs)).then(s=>G(this,an,av).call(this,s,!0)).finally(()=>G(this,an,lv).call(this));return}if(p(this,xu)){const s=p(this,xu);B(this,xu,null),this._uiManager.enableWaiting(!0),B(this,oh,this._uiManager.imageManager.getFromUrl(s).then(i=>G(this,an,av).call(this,i)).finally(()=>G(this,an,lv).call(this)));return}if(p(this,ah)){const s=p(this,ah);B(this,ah,null),this._uiManager.enableWaiting(!0),B(this,oh,this._uiManager.imageManager.getFromFile(s).then(i=>G(this,an,av).call(this,i)).finally(()=>G(this,an,lv).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=CT.join(",");const r=this._uiManager._signal;B(this,oh,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),G(this,an,av).call(this,i)}s()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:r})}).finally(()=>G(this,an,lv).call(this))),t.click()},E2=function(){var f;const{div:t}=this;let{width:r,height:s}=p(this,sr);const[i,o]=this.pageDimensions,l=.75;if(this.width)r=this.width*i,s=this.height*o;else if(r>l*i||s>l*o){const g=Math.min(l*i/r,l*o/s);r*=g,s*=g}this._uiManager.enableWaiting(!1);const c=B(this,vu,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=r/i,this.height=s/o,this.setDims(),(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),G(this,an,U3).call(this),p(this,m1)||(this.parent.addUndoableEditor(this),B(this,m1,!0)),this._reportTelemetry({action:"inserted_image"}),p(this,f1)&&this.div.setAttribute("aria-description",p(this,f1)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},C2=function(t,r){const{width:s,height:i}=p(this,sr);let o=s,l=i,c=p(this,sr);for(;o>2*t||l>2*r;){const f=o,g=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*r&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const y=new OffscreenCanvas(o,l);y.getContext("2d").drawImage(c,0,0,f,g,0,0,o,l),c=y.transferToImageBitmap()}return c},U3=function(){const[t,r]=this.parentDimensions,{width:s,height:i}=this,o=new cc,l=Math.ceil(s*t*o.sx),c=Math.ceil(i*r*o.sy),f=p(this,vu);if(!f||f.width===l&&f.height===c)return;f.width=l,f.height=c;const g=p(this,vo)?p(this,sr):G(this,an,C2).call(this,l,c),y=f.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(g,0,0,g.width,g.height,0,0,l,c)},A2=function(t){if(t){if(p(this,vo)){const i=this._uiManager.imageManager.getSvgUrl(p(this,fs));if(i)return i}const r=document.createElement("canvas");return{width:r.width,height:r.height}=p(this,sr),r.getContext("2d").drawImage(p(this,sr),0,0),r.toDataURL()}if(p(this,vo)){const[r,s]=this.pageDimensions,i=Math.round(this.width*r*Uh.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*Uh.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(i,o);return l.getContext("2d").drawImage(p(this,sr),0,0,p(this,sr).width,p(this,sr).height,0,0,i,o),l.transferToImageBitmap()}return structuredClone(p(this,sr))},fU=function(t){var l;const{pageIndex:r,accessibilityData:{altText:s}}=this._initialData,i=t.pageIndex===r,o=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},Pe(F3,"_type","stamp"),Pe(F3,"_editorType",St.STAMP);var tp,p1,lh,ch,yu,ji,uh,g1,x1,$a,wu,ms,bu,dh,v1,nt,hh,Dn,H3,mU,_l,V3,W3,S2;const Ia=class Ia{constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:s,accessibilityManager:i,annotationLayer:o,drawLayer:l,textLayer:c,viewport:f,l10n:g}){W(this,Dn);W(this,tp);W(this,p1,!1);W(this,lh,null);W(this,ch,null);W(this,yu,null);W(this,ji,new Map);W(this,uh,!1);W(this,g1,!1);W(this,x1,!1);W(this,$a,null);W(this,wu,null);W(this,ms,null);W(this,bu,null);W(this,dh,null);W(this,v1,-1);W(this,nt);const y=[...p(Ia,hh).values()];if(!Ia._initialized){Ia._initialized=!0;for(const _ of y)_.initialize(g,e)}e.registerEditorTypes(y),B(this,nt,e),this.pageIndex=t,this.div=r,B(this,tp,i),B(this,lh,o),this.viewport=f,B(this,ms,c),this.drawLayer=l,this._structTree=s,p(this,nt).addLayer(this)}get isEmpty(){return p(this,ji).size===0}get isInvisible(){return this.isEmpty&&p(this,nt).getMode()===St.NONE}updateToolbar(e){p(this,nt).updateToolbar(e)}updateMode(e=p(this,nt).getMode()){switch(G(this,Dn,S2).call(this),e){case St.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case St.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case St.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===St.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const r of p(Ia,hh).values())t.toggle(`${r._type}Editing`,e===r._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=p(this,ms))==null?void 0:t.div)}setEditingState(e){p(this,nt).setEditingState(e)}addCommands(e){p(this,nt).addCommands(e)}cleanUndoStack(e){p(this,nt).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=p(this,lh))==null||t.togglePointerEvents(e)}async enable(){var r;B(this,x1,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(r=p(this,dh))==null||r.abort(),B(this,dh,null);const e=new Set;for(const s of p(this,Dn,H3))s.enableEditing(),s.show(!0),s.annotationElementId&&(p(this,nt).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));const t=p(this,lh);if(t)for(const s of t.getEditableAnnotations()){if(s.hide(),p(this,nt).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}B(this,x1,!1),p(this,nt)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var s;if(B(this,g1,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),p(this,ms)&&!p(this,dh)){B(this,dh,new AbortController);const i=p(this,nt).combinedSignal(p(this,dh));p(this,ms).div.addEventListener("pointerdown",o=>{const{clientX:c,clientY:f,timeStamp:g}=o,y=p(this,v1);if(g-y>500){B(this,v1,g);return}B(this,v1,-1);const{classList:_}=this.div;_.toggle("getElements",!0);const E=document.elementsFromPoint(c,f);if(_.toggle("getElements",!1),!this.div.contains(E[0]))return;let P;const S=new RegExp(`^${Jv}[0-9]+$`);for(const N of E)if(S.test(N.id)){P=N.id;break}if(!P)return;const I=p(this,ji).get(P);(I==null?void 0:I.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),I.dblclick(o))},{signal:i,capture:!0})}const e=p(this,lh),t=[];if(e){const i=new Map,o=new Map;for(const c of p(this,Dn,H3)){if(c.disableEditing(),!c.annotationElementId){t.push(c);continue}if(c.serialize()!==null){i.set(c.annotationElementId,c);continue}else o.set(c.annotationElementId,c);(s=this.getEditableAnnotation(c.annotationElementId))==null||s.show(),c.remove()}const l=e.getEditableAnnotations();for(const c of l){const{id:f}=c.data;if(p(this,nt).isDeletedAnnotationElement(f)){c.updateEdited({deleted:!0});continue}let g=o.get(f);if(g){g.resetAnnotationElement(c),g.show(!1),c.show();continue}g=i.get(f),g&&(p(this,nt).addChangedExistingAnnotation(g),g.renderAnnotationElement(c)&&g.show(!1)),c.show()}}G(this,Dn,S2).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of p(Ia,hh).values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(t),B(this,g1,!1)}getEditableAnnotation(e){var t;return((t=p(this,lh))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){p(this,nt).getActive()!==e&&p(this,nt).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=p(this,ms))!=null&&e.div&&!p(this,bu)){B(this,bu,new AbortController);const t=p(this,nt).combinedSignal(p(this,bu));p(this,ms).div.addEventListener("pointerdown",G(this,Dn,mU).bind(this),{signal:t}),p(this,ms).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=p(this,ms))!=null&&e.div&&p(this,bu)&&(p(this,bu).abort(),B(this,bu,null),p(this,ms).div.classList.remove("highlighting"))}enableClick(){if(p(this,ch))return;B(this,ch,new AbortController);const e=p(this,nt).combinedSignal(p(this,ch));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=p(this,ch))==null||e.abort(),B(this,ch,null)}attach(e){p(this,ji).set(e.id,e);const{annotationElementId:t}=e;t&&p(this,nt).isDeletedAnnotationElement(t)&&p(this,nt).removeDeletedAnnotationElement(e)}detach(e){var t;p(this,ji).delete(e.id),(t=p(this,tp))==null||t.removePointerInTextLayer(e.contentDiv),!p(this,g1)&&e.annotationElementId&&p(this,nt).addDeletedAnnotationElement(e)}remove(e){this.detach(e),p(this,nt).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(p(this,nt).addDeletedAnnotationElement(e.annotationElementId),Wn.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),p(this,nt).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!p(this,x1)),p(this,nt).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!p(this,yu)&&(e._focusEventsAllowed=!1,B(this,yu,setTimeout(()=>{B(this,yu,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:p(this,nt)._signal}),t.focus())},0))),e._structTreeParentId=(r=p(this,tp))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getEditorByUID(e){for(const t of p(this,ji).values())if(t.uid===e)return t;return null}getNextId(){return p(this,nt).getId()}combinedSignal(e){return p(this,nt).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=p(this,Dn,_l))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await p(this,nt).updateMode(e.mode);const{offsetX:r,offsetY:s}=G(this,Dn,W3).call(this),i=this.getNextId(),o=G(this,Dn,V3).call(this,{parent:this,id:i,x:r,y:s,uiManager:p(this,nt),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=p(Ia,hh).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,p(this,nt)))||null}createAndAddNewEditor(e,t,r={}){const s=this.getNextId(),i=G(this,Dn,V3).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:p(this,nt),isCentered:t,...r});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(G(this,Dn,W3).call(this),!0,e)}setSelected(e){p(this,nt).setSelected(e)}toggleSelected(e){p(this,nt).toggleSelected(e)}unselect(e){p(this,nt).unselect(e)}pointerup(e){var s;const{isMac:t}=Os.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!p(this,uh)||(B(this,uh,!1),(s=p(this,Dn,_l))!=null&&s.isDrawer&&p(this,Dn,_l).supportMultipleDrawings))return;if(!p(this,p1)){B(this,p1,!0);return}const r=p(this,nt).getMode();if(r===St.STAMP||r===St.SIGNATURE){p(this,nt).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var s;if(p(this,nt).getMode()===St.HIGHLIGHT&&this.enableTextSelection(),p(this,uh)){B(this,uh,!1);return}const{isMac:t}=Os.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(B(this,uh,!0),(s=p(this,Dn,_l))!=null&&s.isDrawer){this.startDrawingSession(e);return}const r=p(this,nt).getActive();B(this,p1,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),p(this,$a)){p(this,Dn,_l).startDrawing(this,p(this,nt),!1,e);return}p(this,nt).setCurrentDrawingSession(this),B(this,$a,new AbortController);const t=p(this,nt).combinedSignal(p(this,$a));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(B(this,wu,null),this.commitOrRemove())},{signal:t}),p(this,Dn,_l).startDrawing(this,p(this,nt),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&B(this,wu,t);return}p(this,wu)&&setTimeout(()=>{var t;(t=p(this,wu))==null||t.focus(),B(this,wu,null)},0)}endDrawingSession(e=!1){return p(this,$a)?(p(this,nt).setCurrentDrawingSession(null),p(this,$a).abort(),B(this,$a,null),B(this,wu,null),p(this,Dn,_l).endDrawing(e)):null}findNewParent(e,t,r){const s=p(this,nt).findParent(t,r);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return p(this,$a)?(this.endDrawingSession(),!0):!1}onScaleChanging(){p(this,$a)&&p(this,Dn,_l).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=p(this,nt).getActive())==null?void 0:e.parent)===this&&(p(this,nt).commitOrRemove(),p(this,nt).setActiveEditor(null)),p(this,yu)&&(clearTimeout(p(this,yu)),B(this,yu,null));for(const r of p(this,ji).values())(t=p(this,tp))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,p(this,ji).clear(),p(this,nt).removeLayer(this)}render({viewport:e}){this.viewport=e,xp(this.div,e);for(const t of p(this,nt).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){p(this,nt).commitOrRemove(),G(this,Dn,S2).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,xp(this.div,{rotation:r}),t!==r)for(const s of p(this,ji).values())s.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return p(this,nt).viewParameters.realScale}};tp=new WeakMap,p1=new WeakMap,lh=new WeakMap,ch=new WeakMap,yu=new WeakMap,ji=new WeakMap,uh=new WeakMap,g1=new WeakMap,x1=new WeakMap,$a=new WeakMap,wu=new WeakMap,ms=new WeakMap,bu=new WeakMap,dh=new WeakMap,v1=new WeakMap,nt=new WeakMap,hh=new WeakMap,Dn=new WeakSet,H3=function(){return p(this,ji).size!==0?p(this,ji).values():p(this,nt).getEditors(this.pageIndex)},mU=function(e){p(this,nt).unselectAll();const{target:t}=e;if(t===p(this,ms).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&p(this,ms).div.contains(t)){const{isMac:r}=Os.platform;if(e.button!==0||e.ctrlKey&&r)return;p(this,nt).showAllEditors("highlight",!0,!0),p(this,ms).div.classList.add("free"),this.toggleDrawing(),NE.startHighlighting(this,p(this,nt).direction==="ltr",{target:p(this,ms).div,x:e.x,y:e.y}),p(this,ms).div.addEventListener("pointerup",()=>{p(this,ms).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:p(this,nt)._signal}),e.preventDefault()}},_l=function(){return p(Ia,hh).get(p(this,nt).getMode())},V3=function(e){const t=p(this,Dn,_l);return t?new t.prototype.constructor(e):null},W3=function(){const{x:e,y:t,width:r,height:s}=this.boundingClientRect,i=Math.max(0,e),o=Math.max(0,t),l=Math.min(window.innerWidth,e+r),c=Math.min(window.innerHeight,t+s),f=(i+l)/2-e,g=(o+c)/2-t,[y,_]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:y,offsetY:_}},S2=function(){for(const e of p(this,ji).values())e.isEmpty()&&e.remove()},Pe(Ia,"_initialized",!1),W(Ia,hh,new Map([_3,k3,F3,NE,B3].map(e=>[e._editorType,e])));let z3=Ia;var qa,hi,np,Zw,QE,pU,uc,$3,gU,q3;const qr=class qr{constructor({pageIndex:e}){W(this,uc);W(this,qa,null);W(this,hi,new Map);W(this,np,new Map);this.pageIndex=e}setParent(e){if(!p(this,qa)){B(this,qa,e);return}if(p(this,qa)!==e){if(p(this,hi).size>0)for(const t of p(this,hi).values())t.remove(),e.append(t);B(this,qa,e)}}static get _svgFactory(){return It(this,"_svgFactory",new AE)}draw(e,t=!1,r=!1){const s=vr(qr,Zw)._++,i=G(this,uc,$3).call(this),o=qr._svgFactory.createElement("defs");i.append(o);const l=qr._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),t&&p(this,np).set(s,l);const f=r?G(this,uc,gU).call(this,o,c):null,g=qr._svgFactory.createElement("use");return i.append(g),g.setAttribute("href",`#${c}`),this.updateProperties(i,e),p(this,hi).set(s,i),{id:s,clipPathId:`url(#${f})`}}drawOutline(e,t){const r=vr(qr,Zw)._++,s=G(this,uc,$3).call(this),i=qr._svgFactory.createElement("defs");s.append(i);const o=qr._svgFactory.createElement("path");i.append(o);const l=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const y=qr._svgFactory.createElement("mask");i.append(y),c=`mask_p${this.pageIndex}_${r}`,y.setAttribute("id",c),y.setAttribute("maskUnits","objectBoundingBox");const _=qr._svgFactory.createElement("rect");y.append(_),_.setAttribute("width","1"),_.setAttribute("height","1"),_.setAttribute("fill","white");const E=qr._svgFactory.createElement("use");y.append(E),E.setAttribute("href",`#${l}`),E.setAttribute("stroke","none"),E.setAttribute("fill","black"),E.setAttribute("fill-rule","nonzero"),E.classList.add("mask")}const f=qr._svgFactory.createElement("use");s.append(f),f.setAttribute("href",`#${l}`),c&&f.setAttribute("mask",`url(#${c})`);const g=f.cloneNode();return s.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(s,e),p(this,hi).set(r,s),r}finalizeDraw(e,t){p(this,np).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:r,bbox:s,rootClass:i,path:o}=t,l=typeof e=="number"?p(this,hi).get(e):e;if(l){if(r&&G(this,uc,q3).call(this,l,r),s&&G(c=qr,QE,pU).call(c,l,s),i){const{classList:f}=l;for(const[g,y]of Object.entries(i))f.toggle(g,y)}if(o){const g=l.firstChild.firstChild;G(this,uc,q3).call(this,g,o)}}}updateParent(e,t){if(t===this)return;const r=p(this,hi).get(e);r&&(p(t,qa).append(r),p(this,hi).delete(e),p(t,hi).set(e,r))}remove(e){p(this,np).delete(e),p(this,qa)!==null&&(p(this,hi).get(e).remove(),p(this,hi).delete(e))}destroy(){B(this,qa,null);for(const e of p(this,hi).values())e.remove();p(this,hi).clear(),p(this,np).clear()}};qa=new WeakMap,hi=new WeakMap,np=new WeakMap,Zw=new WeakMap,QE=new WeakSet,pU=function(e,[t,r,s,i]){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*i}%`},uc=new WeakSet,$3=function(){const e=qr._svgFactory.create(1,1,!0);return p(this,qa).append(e),e.setAttribute("aria-hidden",!0),e},gU=function(e,t){const r=qr._svgFactory.createElement("clipPath");e.append(r);const s=`clip_${t}`;r.setAttribute("id",s),r.setAttribute("clipPathUnits","objectBoundingBox");const i=qr._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s},q3=function(e,t){for(const[r,s]of Object.entries(t))s===null?e.removeAttribute(r):e.setAttribute(r,s)},W(qr,QE),W(qr,Zw,0);let G3=qr;globalThis._pdfjsTestingUtils={HighlightOutliner:C3};globalThis.pdfjsLib={AbortException:Fh,AnnotationEditorLayer:z3,AnnotationEditorParamsType:Kt,AnnotationEditorType:St,AnnotationEditorUIManager:vp,AnnotationLayer:w3,AnnotationMode:pd,AnnotationType:jr,applyOpacity:ooe,build:hae,ColorPicker:EE,createValidAbsoluteUrl:iF,CSSConstants:ioe,DOMSVGFactory:AE,DrawLayer:G3,FeatureTest:Os,fetchData:wb,findContrastColor:aoe,getDocument:f9,getFilenameFromUrl:Jie,getPdfFilenameFromUrl:eoe,getRGB:_b,getUuid:lF,getXfaPageViewport:noe,GlobalWorkerOptions:Ql,ImageKind:q_,InvalidPDFException:_T,isDataScheme:JC,isPdfFile:yR,isValidExplicitDest:xoe,MathClamp:mi,noContextMenu:va,normalizeUnicode:Kie,OPS:ey,OutputScale:cc,PasswordResponses:zie,PDFDataRangeTransport:m9,PDFDateString:xE,PDFWorker:ry,PermissionFlag:Uie,PixelsPerInch:Uh,RenderingCancelledException:vR,renderRichText:dF,ResponseException:gE,setLayerDimensions:xp,shadow:It,SignatureExtractor:_u,stopEvent:Nr,SupportedImageMimeTypes:CT,TextLayer:ny,TouchManager:yE,updateUrlHash:oF,Util:Ke,VerbosityLevel:KC,version:x9,XfaLayer:uF};Ql.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${x9}/pdf.worker.min.js`;const jae=()=>{const n=ul(),[e,t]=M.useState(""),[r,s]=M.useState(null),[i,o]=M.useState(null),[l,c]=M.useState(!1),[f,g]=M.useState(!1),[y,_]=M.useState(!1),E=async()=>{if(!e){xe.error("Insira o cdigo hash do certificado");return}await I(e)},P=async F=>{try{const X=await F.arrayBuffer(),Z=await f9({data:X}).promise;let ne="";for(let re=1;re<=Z.numPages;re++){const Q=(await(await Z.getPage(re)).getTextContent()).items.map(ue=>ue.str).join(" ");ne+=Q+" "}const se=/CERT-[A-Z0-9]{15,20}/i,ee=ne.match(se);if(ee)return ee[0];const ce=/\b[A-Z0-9]{20,30}\b/,de=ne.match(ce);return de?de[0]:null}catch(X){return console.error("Erro ao extrair hash do PDF:",X),null}},S=async F=>{if(F){if(F.type!=="application/pdf"){xe.error("Por favor, envie um arquivo PDF");return}_(!0),c(!0);try{const X=`validacao-${Date.now()}-${F.name}`,{data:Z,error:ne}=await Ce.storage.from("certificados-validacao").upload(X,F,{contentType:"application/pdf",upsert:!1});if(ne){console.error("Erro no upload:",ne),xe.error("Erro ao fazer upload do arquivo. Verifique se o bucket existe.");return}xe.info("PDF enviado! Extraindo cdigo de validao...");const se=await P(F);if(!se){xe.error("No foi possvel encontrar o cdigo de validao no PDF. Use o campo de cdigo manual.");return}t(se),xe.success(`Cdigo encontrado: ${se}`),await I(se)}catch(X){console.error("Erro no processamento do PDF:",X),xe.error("Erro ao processar o PDF. Tente usar o cdigo manual.")}finally{_(!1),c(!1)}}},I=async F=>{c(!0);try{const{data:X,error:Z}=await Ce.from("certificados").select(`
          usuario_nome,
          usuario_email,
          data_emissao,
          evento_id
        `).eq("codigo_validacao",F.trim()).single();if(Z||!X){console.error("Certificado no encontrado:",Z),s("invalid"),o(null),xe.error("Certificado no encontrado");return}const{data:ne}=await Ce.from("eventos").select("titulo, carga_horaria, data_inicio, data_fim, campus").eq("id",X.evento_id).single(),{data:se}=await Ce.from("usuarios").select("matricula, campus").eq("email",X.usuario_email).single();o({usuario_nome:X.usuario_nome,usuario_email:X.usuario_email,usuario_matricula:(se==null?void 0:se.matricula)||"No informada",usuario_campus:(se==null?void 0:se.campus)||"No informado",data_emissao:X.data_emissao,evento:{titulo:(ne==null?void 0:ne.titulo)||"Evento no especificado",carga_horaria:(ne==null?void 0:ne.carga_horaria)||0,data_inicio:(ne==null?void 0:ne.data_inicio)||"",data_fim:(ne==null?void 0:ne.data_fim)||"",campus:(ne==null?void 0:ne.campus)||"No especificado"}}),s("valid"),xe.success("Certificado vlido!")}catch(X){console.error("Erro ao validar certificado:",X),xe.error("Erro ao validar certificado"),s("invalid"),o(null)}finally{c(!1)}},N=F=>{var Z;const X=(Z=F.target.files)==null?void 0:Z[0];X&&S(X)},k=F=>{F.preventDefault(),F.stopPropagation(),g(!0)},T=F=>{F.preventDefault(),F.stopPropagation(),g(!1)},D=F=>{var Z;F.preventDefault(),F.stopPropagation(),g(!1);const X=(Z=F.dataTransfer.files)==null?void 0:Z[0];X&&S(X)},U=F=>new Date(F).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}),z=(F,X)=>{const Z=new Date(F),ne=new Date(X);return Z.toDateString()===ne.toDateString()?U(F):`${U(F)} a ${U(X)}`};return h.jsx("div",{className:"min-h-screen flex items-center justify-center relative",children:h.jsx("div",{className:"w-full max-w-md mx-4",children:h.jsxs("div",{className:"bg-card border border-border rounded-xl p-8 backdrop-blur-sm glow-border",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("h1",{className:"text-2xl font-light tracking-wider text-foreground mb-2",children:"Validar Certificado"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Verifique a autenticidade de um certificado"})]}),r?h.jsxs("div",{className:"space-y-6",children:[r==="valid"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"text-center",children:[h.jsx(bi,{className:"w-16 h-16 mx-auto text-green-500 mb-4"}),h.jsx("h2",{className:"text-xl font-semibold mb-2 text-green-500",children:" Certificado Vlido"})]}),i&&h.jsxs("div",{className:"bg-accent/30 border border-border rounded-lg p-6 text-left space-y-3",children:[h.jsxs("p",{className:"text-sm text-foreground leading-relaxed",children:["O certificado inserido  ",h.jsx("span",{className:"font-semibold text-green-500",children:"vlido"})," para o evento"," ",h.jsx("span",{className:"font-semibold",children:i.evento.titulo})," ocorrido"," ",i.evento.data_inicio&&i.evento.data_fim?h.jsxs(h.Fragment,{children:["entre os dias ",h.jsx("span",{className:"font-semibold",children:z(i.evento.data_inicio,i.evento.data_fim)})]}):h.jsxs(h.Fragment,{children:["em ",h.jsx("span",{className:"font-semibold",children:U(i.data_emissao)})]})," ","para o usurio"," ",h.jsx("span",{className:"font-semibold",children:i.usuario_nome}),", Matrcula"," ",h.jsx("span",{className:"font-semibold",children:i.usuario_matricula}),", vinculado ao Campus"," ",h.jsx("span",{className:"font-semibold",children:i.usuario_campus}),"."]}),h.jsxs("div",{className:"border-t border-border pt-3 mt-3 space-y-1",children:[h.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.jsx("span",{className:"font-medium text-foreground",children:"Local do evento:"})," ",i.evento.campus]}),i.evento.carga_horaria>0&&h.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.jsx("span",{className:"font-medium text-foreground",children:"Carga horria:"})," ",i.evento.carga_horaria,"h"]}),h.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.jsx("span",{className:"font-medium text-foreground",children:"Data de emisso:"})," ",U(i.data_emissao)]})]})]})]}):h.jsxs(h.Fragment,{children:[h.jsx(Po,{className:"w-16 h-16 mx-auto text-red-500"}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-normal mb-2 text-red-500",children:" Certificado Invlido"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Certificado no encontrado ou cdigo invlido."}),h.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Verifique se o cdigo foi digitado corretamente."})]})]}),h.jsx(Je,{onClick:()=>{s(null),t(""),o(null)},className:"w-full bg-transparent border border-border hover:glow-border-hover",children:"Validar outro certificado"}),h.jsx("button",{onClick:()=>n("/usuario"),className:"w-full text-sm text-muted-foreground hover:text-foreground transition-colors",children:"Voltar ao Menu"})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-all cursor-pointer ${f?"border-primary bg-accent/50 glow-border":"border-border hover:glow-border-hover"}`,onDragOver:k,onDragLeave:T,onDrop:D,children:[h.jsx("input",{type:"file",accept:".pdf",onChange:N,className:"hidden",id:"certificate-upload"}),h.jsxs("label",{htmlFor:"certificate-upload",className:"cursor-pointer block",children:[h.jsx(UI,{className:`w-12 h-12 mx-auto mb-4 transition-colors ${f?"text-primary":"text-muted-foreground"}`}),h.jsx("p",{className:`text-sm transition-colors ${f?"text-primary font-medium":"text-muted-foreground"}`,children:f?"Solte o arquivo aqui":"Arraste o certificado (PDF) ou clique para fazer upload"})]})]}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center",children:h.jsx("div",{className:"w-full border-t border-border"})}),h.jsx("div",{className:"relative flex justify-center text-xs",children:h.jsx("span",{className:"px-2 bg-card text-muted-foreground",children:"ou"})})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx(Qt,{placeholder:"Cdigo Hash do certificado",value:e,onChange:F=>t(F.target.value),className:"h-12 bg-transparent border-border focus:glow-border-hover font-mono text-sm"}),h.jsx(Je,{variant:"elegant",size:"lg",onClick:E,className:"w-full",disabled:l||y,children:l||y?h.jsxs(h.Fragment,{children:[h.jsx(vs,{className:"w-4 h-4 mr-2 animate-spin"}),y?"Processando PDF...":"Validando..."]}):"Validar Certificado"})]}),h.jsx("button",{onClick:()=>n("/usuario"),className:"w-full text-sm text-muted-foreground hover:text-foreground transition-colors",children:"Voltar ao Menu"})]})]})})})},Lae=()=>{const n=fc();return M.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),h.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),h.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),h.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},Fe=M.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:et("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));Fe.displayName="Card";const _f=M.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:et("flex flex-col space-y-1.5 p-6",n),...e}));_f.displayName="CardHeader";const Ef=M.forwardRef(({className:n,...e},t)=>h.jsx("h3",{ref:t,className:et("text-2xl font-semibold leading-none tracking-tight",n),...e}));Ef.displayName="CardTitle";const X3=M.forwardRef(({className:n,...e},t)=>h.jsx("p",{ref:t,className:et("text-sm text-muted-foreground",n),...e}));X3.displayName="CardDescription";const ld=M.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:et("p-6 pt-0",n),...e}));ld.displayName="CardContent";const Bae=M.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:et("flex items-center p-6 pt-0",n),...e}));Bae.displayName="CardFooter";const Fae=dI("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function qt({className:n,variant:e,...t}){return h.jsx("div",{className:et(Fae({variant:e}),n),...t})}const sy=dj,Uae=hj,xU=M.forwardRef(({className:n,...e},t)=>h.jsx(sI,{ref:t,className:et("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));xU.displayName=sI.displayName;const M1=M.forwardRef(({className:n,children:e,...t},r)=>h.jsxs(Uae,{children:[h.jsx(xU,{}),h.jsxs(iI,{ref:r,className:et("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,h.jsxs(lI,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[h.jsx(E5,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));M1.displayName=iI.displayName;const O1=({className:n,...e})=>h.jsx("div",{className:et("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});O1.displayName="DialogHeader";const D1=M.forwardRef(({className:n,...e},t)=>h.jsx(oI,{ref:t,className:et("text-lg font-semibold leading-none tracking-tight",n),...e}));D1.displayName=oI.displayName;const vU=M.forwardRef(({className:n,...e},t)=>h.jsx(aI,{ref:t,className:et("text-sm text-muted-foreground",n),...e}));vU.displayName=aI.displayName;function zae(){var I;const[n,e]=M.useState([]),[t,r]=M.useState(!0),[s,i]=M.useState(null),[o,l]=M.useState(!1),[c,f]=M.useState(!1),[g,y]=M.useState(null),_=M.useCallback(async()=>{if(console.log(" Carregando eventos... Email:",g),!g){console.log(" Email no disponvel ainda"),r(!1);return}try{r(!0),console.log(" Buscando eventos do Supabase...");const{data:N,error:k}=await Ce.from("eventos").select("id, titulo, banner_url, data_inicio, data_fim, carga_horaria, local, descricao, vagas_disponiveis, valor").eq("status","aprovado").order("data_inicio",{ascending:!0});if(k)throw console.error(" Erro ao buscar eventos:",k),k;if(console.log(" Eventos encontrados:",(N==null?void 0:N.length)||0),N&&N.length>0){const T=N.map(F=>F.id);console.log(" Verificando inscries para eventos:",T);const{data:D}=await Ce.from("inscricoes").select("evento_id").eq("usuario_email",g).neq("status","cancelada").in("evento_id",T);console.log(" Inscries encontradas:",(D==null?void 0:D.length)||0);const U=new Set((D==null?void 0:D.map(F=>F.evento_id))||[]),z=N.map(F=>({...F,inscrito:U.has(F.id)}));e(z)}else e(N||[])}catch(N){console.error(" Erro ao carregar eventos:",N),xe.error("Erro ao carregar eventos")}finally{console.log(" Carregamento finalizado"),r(!1)}},[g]);M.useEffect(()=>{(async()=>{var T;const{data:{session:k}}=await Ce.auth.getSession();(T=k==null?void 0:k.user)!=null&&T.email?(console.log(" Email do usurio obtido:",k.user.email),y(k.user.email)):(console.log(" Nenhuma sesso ativa"),r(!1))})()},[]),M.useEffect(()=>{g&&_()},[g,_]);const E=N=>{i(N),l(!0)},P=async()=>{if(!(!s||!g))try{f(!0);const{error:N}=await Ce.from("inscricoes").insert({evento_id:s.id,usuario_email:g,status:"confirmada"});if(N)throw N;xe.success("Inscrio realizada com sucesso!"),l(!1),i(null),_()}catch(N){console.error("Erro ao realizar inscrio:",N),N.code==="23505"?xe.error("Voc j est inscrito neste evento"):xe.error("Erro ao realizar inscrio")}finally{f(!1)}},S=(N,k)=>{const T=new Date(N),D=new Date(k);return ht(T,"yyyy-MM-dd")===ht(D,"yyyy-MM-dd")?ht(T,"dd/MM/yyyy",{locale:Xt}):`${ht(T,"dd/MM",{locale:Xt})} - ${ht(D,"dd/MM/yyyy",{locale:Xt})}`};return t?h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"flex justify-between items-center",children:h.jsx("h1",{className:"text-3xl font-light",children:"Eventos"})}),h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(vs,{className:"w-8 h-8 animate-spin text-muted-foreground"})})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"flex justify-between items-center",children:h.jsx("h1",{className:"text-3xl font-light",children:"Eventos"})}),n.length===0?h.jsx(Fe,{className:"p-12",children:h.jsxs("div",{className:"text-center text-muted-foreground",children:[h.jsx(or,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),h.jsx("p",{children:"Nenhum evento disponvel no momento"})]})}):h.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.map(N=>h.jsxs(Fe,{className:"overflow-hidden hover:glow-border-hover transition-all",children:[N.banner_url?h.jsx("img",{src:N.banner_url,alt:N.titulo,className:"w-full h-48 object-cover"}):h.jsx("div",{className:"w-full h-48 bg-muted flex items-center justify-center",children:h.jsx("p",{className:"text-muted-foreground text-sm",children:"Imagem indisponvel"})}),h.jsxs("div",{className:"p-6 space-y-4",children:[h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsx("h3",{className:"text-xl font-normal",children:N.titulo}),N.inscrito?h.jsxs(qt,{className:"bg-green-500/10 text-green-600 border-green-500/20",children:[h.jsx(bi,{className:"w-3 h-3 mr-1"}),"Inscrito"]}):h.jsx(qt,{variant:"outline",children:"Disponvel"})]}),h.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(or,{className:"w-4 h-4"}),S(N.data_inicio,N.data_fim)]}),N.carga_horaria&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(xs,{className:"w-4 h-4"}),N.carga_horaria,"h de carga horria"]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(fp,{className:"w-4 h-4"}),N.local]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Zs,{className:"w-4 h-4"}),N.vagas_disponiveis," vagas disponveis"]}),N.valor&&N.valor>0&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ic,{className:"w-4 h-4"}),"R$ ",N.valor.toFixed(2).replace(".",",")]})]}),h.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:N.descricao}),h.jsx("div",{className:"flex gap-2",children:h.jsx(Je,{variant:"elegant",onClick:()=>E(N),className:"flex-1",disabled:N.inscrito||N.vagas_disponiveis===0,children:N.inscrito?h.jsxs(h.Fragment,{children:[h.jsx(bi,{className:"w-4 h-4 mr-2"}),"J Inscrito"]}):h.jsxs(h.Fragment,{children:[h.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Inscrever-se"]})})})]})]},N.id))}),h.jsx(sy,{open:o,onOpenChange:l,children:h.jsxs(M1,{className:"max-w-2xl",children:[h.jsxs(O1,{children:[h.jsx(D1,{className:"text-2xl",children:"Confirmar Inscrio"}),h.jsx(vU,{children:"Revise as informaes do evento antes de confirmar sua inscrio"})]}),s&&h.jsxs("div",{className:"space-y-6",children:[s.banner_url&&h.jsx("img",{src:s.banner_url,alt:s.titulo,className:"w-full h-48 object-cover rounded-lg"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-normal mb-2",children:s.titulo}),h.jsx("p",{className:"text-sm text-muted-foreground",children:s.descricao})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(or,{className:"w-4 h-4 text-muted-foreground"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-muted-foreground",children:"Data"}),h.jsx("p",{className:"font-normal",children:S(s.data_inicio,s.data_fim)})]})]}),s.carga_horaria&&h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(xs,{className:"w-4 h-4 text-muted-foreground"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-muted-foreground",children:"Carga Horria"}),h.jsxs("p",{className:"font-normal",children:[s.carga_horaria,"h"]})]})]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(fp,{className:"w-4 h-4 text-muted-foreground"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-muted-foreground",children:"Local"}),h.jsx("p",{className:"font-normal",children:s.local})]})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(Zs,{className:"w-4 h-4 text-muted-foreground"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-muted-foreground",children:"Vagas Disponveis"}),h.jsx("p",{className:"font-normal",children:s.vagas_disponiveis})]})]})]})]}),h.jsx("div",{className:"p-4 bg-primary/5 border border-primary/20 rounded-lg",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ic,{className:"w-5 h-5 text-primary"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-muted-foreground",children:"Valor da Inscrio"}),h.jsxs("p",{className:"text-2xl font-light",children:["R$ ",((I=s.valor)==null?void 0:I.toFixed(2).replace(".",","))||"0,00"]})]})]}),!s.valor||s.valor===0?h.jsxs(qt,{variant:"secondary",className:"gap-1",children:[h.jsx(ac,{className:"w-3 h-3"}),"Gratuito"]}):h.jsxs(qt,{variant:"default",className:"gap-1",children:[h.jsx(ic,{className:"w-3 h-3"}),"Pago"]})]})})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx(Je,{variant:"outline",onClick:()=>l(!1),className:"flex-1",disabled:c,children:"Cancelar"}),h.jsx(Je,{variant:"elegant",onClick:P,className:"flex-1",disabled:c,children:c?h.jsxs(h.Fragment,{children:[h.jsx(vs,{className:"w-4 h-4 mr-2 animate-spin"}),"Confirmando..."]}):"Confirmar Inscrio"})]})]})]})})]})}function Hae(){const[n,e]=M.useState([]),[t,r]=M.useState(!0),[s,i]=M.useState(null),o=M.useCallback(async()=>{if(s)try{r(!0);const{data:_,error:E}=await Ce.from("inscricoes").select(`
          id,
          evento_id,
          usuario_email,
          status,
          created_at,
          eventos:evento_id (
            id,
            titulo,
            data_inicio,
            data_fim,
            carga_horaria,
            valor,
            banner_url
          )
        `).eq("usuario_email",s).neq("status","cancelada").order("created_at",{ascending:!1});if(E){console.error("Erro ao buscar inscries:",E),xe.error("Erro ao carregar inscries"),e([]);return}const P=(_==null?void 0:_.map(S=>({id:S.id,evento_id:S.evento_id,usuario_email:S.usuario_email,status:S.status,created_at:S.created_at,evento:S.eventos})))||[];e(P)}catch(_){console.error("Erro ao buscar inscries:",_),xe.error("Erro ao carregar inscries"),e([])}finally{r(!1)}},[s]);M.useEffect(()=>{(async()=>{var P;const{data:{session:E}}=await Ce.auth.getSession();(P=E==null?void 0:E.user)!=null&&P.email?i(E.user.email):r(!1)})()},[]),M.useEffect(()=>{s&&o()},[s,o]);const l=(_,E)=>{const P=new Date(_),S=new Date(E);return P.toDateString()===S.toDateString()?P.toLocaleDateString("pt-BR"):`${P.toLocaleDateString("pt-BR")} - ${S.toLocaleDateString("pt-BR")}`},c=_=>new Date(_)<new Date,f=n.filter(_=>!c(_.evento.data_fim)),g=n.filter(_=>c(_.evento.data_fim));if(t)return h.jsxs("div",{className:"space-y-6",children:[h.jsx("h1",{className:"text-3xl font-light",children:"Minhas Inscries"}),h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(vs,{className:"w-8 h-8 animate-spin"})})]});const y=(_,E)=>h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-normal mb-2",children:_.evento.titulo}),h.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(or,{className:"w-4 h-4"}),l(_.evento.data_inicio,_.evento.data_fim)]}),_.evento.carga_horaria&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(xs,{className:"w-4 h-4"}),_.evento.carga_horaria,"h"]}),_.evento.valor&&_.evento.valor>0&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ic,{className:"w-4 h-4"}),"R$ ",_.evento.valor.toFixed(2)]})]})]}),h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsx(qt,{variant:_.status==="confirmada"?"default":"outline",children:_.status==="confirmada"?"Confirmada":"Pendente"}),E&&h.jsx(qt,{variant:"secondary",children:"Finalizado"})]})]})},_.id);return h.jsxs("div",{className:"space-y-6",children:[h.jsx("h1",{className:"text-3xl font-light",children:"Minhas Inscries"}),n.length===0?h.jsxs(Fe,{className:"p-12 text-center text-muted-foreground",children:[h.jsx(or,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),h.jsx("p",{children:"Voc ainda no se inscreveu em nenhum evento"})]}):h.jsxs(h.Fragment,{children:[f.length>0&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("h2",{className:"text-xl font-normal",children:"Prximos Eventos"}),f.map(_=>y(_,!1))]}),g.length>0&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("h2",{className:"text-xl font-normal",children:"Eventos Anteriores"}),g.map(_=>y(_,!0))]})]})]})}var Vae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Wae=Vae.reduce((n,e)=>{const t=uI(`Primitive.${e}`),r=M.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),Gae="Label",yU=M.forwardRef((n,e)=>h.jsx(Wae.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));yU.displayName=Gae;var wU=yU;const $ae=dI("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Tn=M.forwardRef(({className:n,...e},t)=>h.jsx(wU,{ref:t,className:et($ae(),n),...e}));Tn.displayName=wU.displayName;var nA="Tabs",[qae]=ya(nA,[UC]),bU=UC(),[Xae,NR]=qae(nA),_U=M.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...f}=n,g=FC(l),[y,_]=Rh({prop:r,onChange:s,defaultProp:i??"",caller:nA});return h.jsx(Xae,{scope:t,baseId:tl(),value:y,onValueChange:_,orientation:o,dir:g,activationMode:c,children:h.jsx(_t.div,{dir:g,"data-orientation":o,...f,ref:e})})});_U.displayName=nA;var EU="TabsList",CU=M.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...s}=n,i=NR(EU,t),o=bU(t);return h.jsx(U5,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:h.jsx(_t.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});CU.displayName=EU;var AU="TabsTrigger",SU=M.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:s=!1,...i}=n,o=NR(AU,t),l=bU(t),c=PU(o.baseId,r),f=IU(o.baseId,r),g=r===o.value;return h.jsx(z5,{asChild:!0,...l,focusable:!s,active:g,children:h.jsx(_t.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":f,"data-state":g?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:Ue(n.onMouseDown,y=>{!s&&y.button===0&&y.ctrlKey===!1?o.onValueChange(r):y.preventDefault()}),onKeyDown:Ue(n.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&o.onValueChange(r)}),onFocus:Ue(n.onFocus,()=>{const y=o.activationMode!=="manual";!g&&!s&&y&&o.onValueChange(r)})})})});SU.displayName=AU;var NU="TabsContent",TU=M.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:s,children:i,...o}=n,l=NR(NU,t),c=PU(l.baseId,r),f=IU(l.baseId,r),g=r===l.value,y=M.useRef(g);return M.useEffect(()=>{const _=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(_)},[]),h.jsx(Do,{present:s||g,children:({present:_})=>h.jsx(_t.div,{"data-state":g?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!_,id:f,tabIndex:0,...o,ref:e,style:{...n.style,animationDuration:y.current?"0s":void 0},children:_&&i})})});TU.displayName=NU;function PU(n,e){return`${n}-trigger-${e}`}function IU(n,e){return`${n}-content-${e}`}var Yae=_U,RU=CU,kU=SU,MU=TU;const TR=Yae,rA=M.forwardRef(({className:n,...e},t)=>h.jsx(RU,{ref:t,className:et("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));rA.displayName=RU.displayName;const ec=M.forwardRef(({className:n,...e},t)=>h.jsx(kU,{ref:t,className:et("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",n),...e}));ec.displayName=kU.displayName;const gh=M.forwardRef(({className:n,...e},t)=>h.jsx(MU,{ref:t,className:et("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));gh.displayName=MU.displayName;var Xe;(function(n){n[n.QR_CODE=0]="QR_CODE",n[n.AZTEC=1]="AZTEC",n[n.CODABAR=2]="CODABAR",n[n.CODE_39=3]="CODE_39",n[n.CODE_93=4]="CODE_93",n[n.CODE_128=5]="CODE_128",n[n.DATA_MATRIX=6]="DATA_MATRIX",n[n.MAXICODE=7]="MAXICODE",n[n.ITF=8]="ITF",n[n.EAN_13=9]="EAN_13",n[n.EAN_8=10]="EAN_8",n[n.PDF_417=11]="PDF_417",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Xe||(Xe={}));var IO=new Map([[Xe.QR_CODE,"QR_CODE"],[Xe.AZTEC,"AZTEC"],[Xe.CODABAR,"CODABAR"],[Xe.CODE_39,"CODE_39"],[Xe.CODE_93,"CODE_93"],[Xe.CODE_128,"CODE_128"],[Xe.DATA_MATRIX,"DATA_MATRIX"],[Xe.MAXICODE,"MAXICODE"],[Xe.ITF,"ITF"],[Xe.EAN_13,"EAN_13"],[Xe.EAN_8,"EAN_8"],[Xe.PDF_417,"PDF_417"],[Xe.RSS_14,"RSS_14"],[Xe.RSS_EXPANDED,"RSS_EXPANDED"],[Xe.UPC_A,"UPC_A"],[Xe.UPC_E,"UPC_E"],[Xe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),RO;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.URL=1]="URL"})(RO||(RO={}));function Kae(n){return Object.values(Xe).includes(n)}var PE;(function(n){n[n.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",n[n.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(PE||(PE={}));var Zae=function(){function n(){}return n.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",n.SCAN_DEFAULT_FPS=2,n.DEFAULT_DISABLE_FLIP=!1,n.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,n.DEFAULT_SUPPORTED_SCAN_TYPE=[PE.SCAN_TYPE_CAMERA,PE.SCAN_TYPE_FILE],n}(),OU=function(){function n(e,t){this.format=e,this.formatName=t}return n.prototype.toString=function(){return this.formatName},n.create=function(e){if(!IO.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new n(e,IO.get(e))},n}(),kO=function(){function n(){}return n.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},n.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},n}(),Y3;(function(n){n[n.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",n[n.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",n[n.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Y3||(Y3={}));var Qae=function(){function n(){}return n.createFrom=function(e){return{errorMessage:e,type:Y3.UNKWOWN_ERROR}},n}(),Jae=function(){function n(e){this.verbose=e}return n.prototype.log=function(e){this.verbose&&console.log(e)},n.prototype.warn=function(e){this.verbose&&console.warn(e)},n.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},n.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},n}();function Oc(n){return typeof n>"u"||n===null}var bg=function(){function n(){}return n.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},n.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},n.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},n.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},n.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},n.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},n.scannerPaused=function(){return"Scanner paused"},n}(),DU=function(){function n(){}return n.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var r=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var s=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],i=new Set(s),o=Object.keys(e),l=0,c=o;l<c.length;l++){var f=c[l];if(i.has(f))return t.logError("".concat(f," is not supported videoConstaints."),!0),!1}return!0},n}(),K3={exports:{}};(function(n,e){(function(t,r){r(e)})(Yp,function(t){function r($){return $==null}var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,a){$.__proto__=a}||function($,a){for(var u in a)a.hasOwnProperty(u)&&($[u]=a[u])};function i($,a){s($,a);function u(){this.constructor=$}$.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}function o($,a){var u=Object.setPrototypeOf;u?u($,a):$.__proto__=a}function l($,a){a===void 0&&(a=$.constructor);var u=Error.captureStackTrace;u&&u($,a)}var c=function($){i(a,$);function a(u){var m=this.constructor,x=$.call(this,u)||this;return Object.defineProperty(x,"name",{value:m.name,enumerable:!1}),o(x,m.prototype),l(x),x}return a}(Error);class f extends c{constructor(a=void 0){super(a),this.message=a}getKind(){return this.constructor.kind}}f.kind="Exception";class g extends f{}g.kind="ArgumentException";class y extends f{}y.kind="IllegalArgumentException";class _{constructor(a){if(this.binarizer=a,a===null)throw new y("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(a,u){return this.binarizer.getBlackRow(a,u)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(a,u,m,x){const v=this.binarizer.getLuminanceSource().crop(a,u,m,x);return new _(this.binarizer.createBinarizer(v))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(a))}rotateCounterClockwise45(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(a))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class E extends f{static getChecksumInstance(){return new E}}E.kind="ChecksumException";class P{constructor(a){this.source=a}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class S{static arraycopy(a,u,m,x,v){for(;v--;)m[x++]=a[u++]}static currentTimeMillis(){return Date.now()}}class I extends f{}I.kind="IndexOutOfBoundsException";class N extends I{constructor(a=void 0,u=void 0){super(u),this.index=a,this.message=u}}N.kind="ArrayIndexOutOfBoundsException";class k{static fill(a,u){for(let m=0,x=a.length;m<x;m++)a[m]=u}static fillWithin(a,u,m,x){k.rangeCheck(a.length,u,m);for(let v=u;v<m;v++)a[v]=x}static rangeCheck(a,u,m){if(u>m)throw new y("fromIndex("+u+") > toIndex("+m+")");if(u<0)throw new N(u);if(m>a)throw new N(m)}static asList(...a){return a}static create(a,u,m){return Array.from({length:a}).map(v=>Array.from({length:u}).fill(m))}static createInt32Array(a,u,m){return Array.from({length:a}).map(v=>Int32Array.from({length:u}).fill(m))}static equals(a,u){if(!a||!u||!a.length||!u.length||a.length!==u.length)return!1;for(let m=0,x=a.length;m<x;m++)if(a[m]!==u[m])return!1;return!0}static hashCode(a){if(a===null)return 0;let u=1;for(const m of a)u=31*u+m;return u}static fillUint8Array(a,u){for(let m=0;m!==a.length;m++)a[m]=u}static copyOf(a,u){return a.slice(0,u)}static copyOfUint8Array(a,u){if(a.length<=u){const m=new Uint8Array(u);return m.set(a),m}return a.slice(0,u)}static copyOfRange(a,u,m){const x=m-u,v=new Int32Array(x);return S.arraycopy(a,u,v,0,x),v}static binarySearch(a,u,m){m===void 0&&(m=k.numberComparator);let x=0,v=a.length-1;for(;x<=v;){const b=v+x>>1,C=m(u,a[b]);if(C>0)x=b+1;else if(C<0)v=b-1;else return b}return-x-1}static numberComparator(a,u){return a-u}}class T{static numberOfTrailingZeros(a){let u;if(a===0)return 32;let m=31;return u=a<<16,u!==0&&(m-=16,a=u),u=a<<8,u!==0&&(m-=8,a=u),u=a<<4,u!==0&&(m-=4,a=u),u=a<<2,u!==0&&(m-=2,a=u),m-(a<<1>>>31)}static numberOfLeadingZeros(a){if(a===0)return 32;let u=1;return a>>>16||(u+=16,a<<=16),a>>>24||(u+=8,a<<=8),a>>>28||(u+=4,a<<=4),a>>>30||(u+=2,a<<=2),u-=a>>>31,u}static toHexString(a){return a.toString(16)}static toBinaryString(a){return String(parseInt(String(a),2))}static bitCount(a){return a=a-(a>>>1&1431655765),a=(a&858993459)+(a>>>2&858993459),a=a+(a>>>4)&252645135,a=a+(a>>>8),a=a+(a>>>16),a&63}static truncDivision(a,u){return Math.trunc(a/u)}static parseInt(a,u=void 0){return parseInt(a,u)}}T.MIN_VALUE_32_BITS=-2147483648,T.MAX_VALUE=Number.MAX_SAFE_INTEGER;class D{constructor(a,u){a===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=a,u==null?this.bits=D.makeArray(a):this.bits=u)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(a){if(a>this.bits.length*32){const u=D.makeArray(a);S.arraycopy(this.bits,0,u,0,this.bits.length),this.bits=u}}get(a){return(this.bits[Math.floor(a/32)]&1<<(a&31))!==0}set(a){this.bits[Math.floor(a/32)]|=1<<(a&31)}flip(a){this.bits[Math.floor(a/32)]^=1<<(a&31)}getNextSet(a){const u=this.size;if(a>=u)return u;const m=this.bits;let x=Math.floor(a/32),v=m[x];v&=~((1<<(a&31))-1);const b=m.length;for(;v===0;){if(++x===b)return u;v=m[x]}const C=x*32+T.numberOfTrailingZeros(v);return C>u?u:C}getNextUnset(a){const u=this.size;if(a>=u)return u;const m=this.bits;let x=Math.floor(a/32),v=~m[x];v&=~((1<<(a&31))-1);const b=m.length;for(;v===0;){if(++x===b)return u;v=~m[x]}const C=x*32+T.numberOfTrailingZeros(v);return C>u?u:C}setBulk(a,u){this.bits[Math.floor(a/32)]=u}setRange(a,u){if(u<a||a<0||u>this.size)throw new y;if(u===a)return;u--;const m=Math.floor(a/32),x=Math.floor(u/32),v=this.bits;for(let b=m;b<=x;b++){const C=b>m?0:a&31,O=(2<<(b<x?31:u&31))-(1<<C);v[b]|=O}}clear(){const a=this.bits.length,u=this.bits;for(let m=0;m<a;m++)u[m]=0}isRange(a,u,m){if(u<a||a<0||u>this.size)throw new y;if(u===a)return!0;u--;const x=Math.floor(a/32),v=Math.floor(u/32),b=this.bits;for(let C=x;C<=v;C++){const R=C>x?0:a&31,H=(2<<(C<v?31:u&31))-(1<<R)&4294967295;if((b[C]&H)!==(m?H:0))return!1}return!0}appendBit(a){this.ensureCapacity(this.size+1),a&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(a,u){if(u<0||u>32)throw new y("Num bits must be between 0 and 32");this.ensureCapacity(this.size+u);for(let m=u;m>0;m--)this.appendBit((a>>m-1&1)===1)}appendBitArray(a){const u=a.size;this.ensureCapacity(this.size+u);for(let m=0;m<u;m++)this.appendBit(a.get(m))}xor(a){if(this.size!==a.size)throw new y("Sizes don't match");const u=this.bits;for(let m=0,x=u.length;m<x;m++)u[m]^=a.bits[m]}toBytes(a,u,m,x){for(let v=0;v<x;v++){let b=0;for(let C=0;C<8;C++)this.get(a)&&(b|=1<<7-C),a++;u[m+v]=b}}getBitArray(){return this.bits}reverse(){const a=new Int32Array(this.bits.length),u=Math.floor((this.size-1)/32),m=u+1,x=this.bits;for(let v=0;v<m;v++){let b=x[v];b=b>>1&1431655765|(b&1431655765)<<1,b=b>>2&858993459|(b&858993459)<<2,b=b>>4&252645135|(b&252645135)<<4,b=b>>8&16711935|(b&16711935)<<8,b=b>>16&65535|(b&65535)<<16,a[u-v]=b}if(this.size!==m*32){const v=m*32-this.size;let b=a[0]>>>v;for(let C=1;C<m;C++){const R=a[C];b|=R<<32-v,a[C-1]=b,b=R>>>v}a[m-1]=b}this.bits=a}static makeArray(a){return new Int32Array(Math.floor((a+31)/32))}equals(a){if(!(a instanceof D))return!1;const u=a;return this.size===u.size&&k.equals(this.bits,u.bits)}hashCode(){return 31*this.size+k.hashCode(this.bits)}toString(){let a="";for(let u=0,m=this.size;u<m;u++)u&7||(a+=" "),a+=this.get(u)?"X":".";return a}clone(){return new D(this.size,this.bits.slice())}}var U;(function($){$[$.OTHER=0]="OTHER",$[$.PURE_BARCODE=1]="PURE_BARCODE",$[$.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",$[$.TRY_HARDER=3]="TRY_HARDER",$[$.CHARACTER_SET=4]="CHARACTER_SET",$[$.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",$[$.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",$[$.ASSUME_GS1=7]="ASSUME_GS1",$[$.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",$[$.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",$[$.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(U||(U={}));var z=U;class F extends f{static getFormatInstance(){return new F}}F.kind="FormatException";var X;(function($){$[$.Cp437=0]="Cp437",$[$.ISO8859_1=1]="ISO8859_1",$[$.ISO8859_2=2]="ISO8859_2",$[$.ISO8859_3=3]="ISO8859_3",$[$.ISO8859_4=4]="ISO8859_4",$[$.ISO8859_5=5]="ISO8859_5",$[$.ISO8859_6=6]="ISO8859_6",$[$.ISO8859_7=7]="ISO8859_7",$[$.ISO8859_8=8]="ISO8859_8",$[$.ISO8859_9=9]="ISO8859_9",$[$.ISO8859_10=10]="ISO8859_10",$[$.ISO8859_11=11]="ISO8859_11",$[$.ISO8859_13=12]="ISO8859_13",$[$.ISO8859_14=13]="ISO8859_14",$[$.ISO8859_15=14]="ISO8859_15",$[$.ISO8859_16=15]="ISO8859_16",$[$.SJIS=16]="SJIS",$[$.Cp1250=17]="Cp1250",$[$.Cp1251=18]="Cp1251",$[$.Cp1252=19]="Cp1252",$[$.Cp1256=20]="Cp1256",$[$.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",$[$.UTF8=22]="UTF8",$[$.ASCII=23]="ASCII",$[$.Big5=24]="Big5",$[$.GB18030=25]="GB18030",$[$.EUC_KR=26]="EUC_KR"})(X||(X={}));class Z{constructor(a,u,m,...x){this.valueIdentifier=a,this.name=m,typeof u=="number"?this.values=Int32Array.from([u]):this.values=u,this.otherEncodingNames=x,Z.VALUE_IDENTIFIER_TO_ECI.set(a,this),Z.NAME_TO_ECI.set(m,this);const v=this.values;for(let b=0,C=v.length;b!==C;b++){const R=v[b];Z.VALUES_TO_ECI.set(R,this)}for(const b of x)Z.NAME_TO_ECI.set(b,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(a){if(a<0||a>=900)throw new F("incorect value");const u=Z.VALUES_TO_ECI.get(a);if(u===void 0)throw new F("incorect value");return u}static getCharacterSetECIByName(a){const u=Z.NAME_TO_ECI.get(a);if(u===void 0)throw new F("incorect value");return u}equals(a){if(!(a instanceof Z))return!1;const u=a;return this.getName()===u.getName()}}Z.VALUE_IDENTIFIER_TO_ECI=new Map,Z.VALUES_TO_ECI=new Map,Z.NAME_TO_ECI=new Map,Z.Cp437=new Z(X.Cp437,Int32Array.from([0,2]),"Cp437"),Z.ISO8859_1=new Z(X.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Z.ISO8859_2=new Z(X.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Z.ISO8859_3=new Z(X.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Z.ISO8859_4=new Z(X.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Z.ISO8859_5=new Z(X.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Z.ISO8859_6=new Z(X.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Z.ISO8859_7=new Z(X.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Z.ISO8859_8=new Z(X.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Z.ISO8859_9=new Z(X.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Z.ISO8859_10=new Z(X.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Z.ISO8859_11=new Z(X.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Z.ISO8859_13=new Z(X.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Z.ISO8859_14=new Z(X.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Z.ISO8859_15=new Z(X.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Z.ISO8859_16=new Z(X.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Z.SJIS=new Z(X.SJIS,20,"SJIS","Shift_JIS"),Z.Cp1250=new Z(X.Cp1250,21,"Cp1250","windows-1250"),Z.Cp1251=new Z(X.Cp1251,22,"Cp1251","windows-1251"),Z.Cp1252=new Z(X.Cp1252,23,"Cp1252","windows-1252"),Z.Cp1256=new Z(X.Cp1256,24,"Cp1256","windows-1256"),Z.UnicodeBigUnmarked=new Z(X.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Z.UTF8=new Z(X.UTF8,26,"UTF8","UTF-8"),Z.ASCII=new Z(X.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Z.Big5=new Z(X.Big5,28,"Big5"),Z.GB18030=new Z(X.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Z.EUC_KR=new Z(X.EUC_KR,30,"EUC_KR","EUC-KR");class ne extends f{}ne.kind="UnsupportedOperationException";class se{static decode(a,u){const m=this.encodingName(u);return this.customDecoder?this.customDecoder(a,m):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(m)?this.decodeFallback(a,m):new TextDecoder(m).decode(a)}static shouldDecodeOnFallback(a){return!se.isBrowser()&&a==="ISO-8859-1"}static encode(a,u){const m=this.encodingName(u);return this.customEncoder?this.customEncoder(a,m):typeof TextEncoder>"u"?this.encodeFallback(a):new TextEncoder().encode(a)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(a){return typeof a=="string"?a:a.getName()}static encodingCharacterSet(a){return a instanceof Z?a:Z.getCharacterSetECIByName(a)}static decodeFallback(a,u){const m=this.encodingCharacterSet(u);if(se.isDecodeFallbackSupported(m)){let x="";for(let v=0,b=a.length;v<b;v++){let C=a[v].toString(16);C.length<2&&(C="0"+C),x+="%"+C}return decodeURIComponent(x)}if(m.equals(Z.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(a.buffer));throw new ne(`Encoding ${this.encodingName(u)} not supported by fallback.`)}static isDecodeFallbackSupported(a){return a.equals(Z.UTF8)||a.equals(Z.ISO8859_1)||a.equals(Z.ASCII)}static encodeFallback(a){const m=btoa(unescape(encodeURIComponent(a))).split(""),x=[];for(let v=0;v<m.length;v++)x.push(m[v].charCodeAt(0));return new Uint8Array(x)}}class ee{static castAsNonUtf8Char(a,u=null){const m=u?u.getName():this.ISO88591;return se.decode(new Uint8Array([a]),m)}static guessEncoding(a,u){if(u!=null&&u.get(z.CHARACTER_SET)!==void 0)return u.get(z.CHARACTER_SET).toString();const m=a.length;let x=!0,v=!0,b=!0,C=0,R=0,O=0,H=0,q=0,Y=0,te=0,ae=0,le=0,me=0,ve=0;const Ie=a.length>3&&a[0]===239&&a[1]===187&&a[2]===191;for(let Re=0;Re<m&&(x||v||b);Re++){const Ne=a[Re]&255;b&&(C>0?Ne&128?C--:b=!1:Ne&128&&(Ne&64?(C++,Ne&32?(C++,Ne&16?(C++,Ne&8?b=!1:H++):O++):R++):b=!1)),x&&(Ne>127&&Ne<160?x=!1:Ne>159&&(Ne<192||Ne===215||Ne===247)&&ve++),v&&(q>0?Ne<64||Ne===127||Ne>252?v=!1:q--:Ne===128||Ne===160||Ne>239?v=!1:Ne>160&&Ne<224?(Y++,ae=0,te++,te>le&&(le=te)):Ne>127?(q++,te=0,ae++,ae>me&&(me=ae)):(te=0,ae=0))}return b&&C>0&&(b=!1),v&&q>0&&(v=!1),b&&(Ie||R+O+H>0)?ee.UTF8:v&&(ee.ASSUME_SHIFT_JIS||le>=3||me>=3)?ee.SHIFT_JIS:x&&v?le===2&&Y===2||ve*10>=m?ee.SHIFT_JIS:ee.ISO88591:x?ee.ISO88591:v?ee.SHIFT_JIS:b?ee.UTF8:ee.PLATFORM_DEFAULT_ENCODING}static format(a,...u){let m=-1;function x(b,C,R,O,H,q){if(b==="%%")return"%";if(u[++m]===void 0)return;b=O?parseInt(O.substr(1)):void 0;let Y=H?parseInt(H.substr(1)):void 0,te;switch(q){case"s":te=u[m];break;case"c":te=u[m][0];break;case"f":te=parseFloat(u[m]).toFixed(b);break;case"p":te=parseFloat(u[m]).toPrecision(b);break;case"e":te=parseFloat(u[m]).toExponential(b);break;case"x":te=parseInt(u[m]).toString(Y||16);break;case"d":te=parseFloat(parseInt(u[m],Y||10).toPrecision(b)).toFixed(0);break}te=typeof te=="object"?JSON.stringify(te):(+te).toString(Y);let ae=parseInt(R),le=R&&R[0]+""=="0"?"0":" ";for(;te.length<ae;)te=C!==void 0?te+le:le+te;return te}let v=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(v,x)}static getBytes(a,u){return se.encode(a,u)}static getCharCode(a,u=0){return a.charCodeAt(u)}static getCharAt(a){return String.fromCharCode(a)}}ee.SHIFT_JIS=Z.SJIS.getName(),ee.GB2312="GB2312",ee.ISO88591=Z.ISO8859_1.getName(),ee.EUC_JP="EUC_JP",ee.UTF8=Z.UTF8.getName(),ee.PLATFORM_DEFAULT_ENCODING=ee.UTF8,ee.ASSUME_SHIFT_JIS=!1;class ce{constructor(a=""){this.value=a}enableDecoding(a){return this.encoding=a,this}append(a){return typeof a=="string"?this.value+=a.toString():this.encoding?this.value+=ee.castAsNonUtf8Char(a,this.encoding):this.value+=String.fromCharCode(a),this}appendChars(a,u,m){for(let x=u;u<u+m;x++)this.append(a[x]);return this}length(){return this.value.length}charAt(a){return this.value.charAt(a)}deleteCharAt(a){this.value=this.value.substr(0,a)+this.value.substring(a+1)}setCharAt(a,u){this.value=this.value.substr(0,a)+u+this.value.substr(a+1)}substring(a,u){return this.value.substring(a,u)}setLengthToZero(){this.value=""}toString(){return this.value}insert(a,u){this.value=this.value.substr(0,a)+u+this.value.substr(a+u.length)}}class de{constructor(a,u,m,x){if(this.width=a,this.height=u,this.rowSize=m,this.bits=x,u==null&&(u=a),this.height=u,a<1||u<1)throw new y("Both dimensions must be greater than 0");m==null&&(m=Math.floor((a+31)/32)),this.rowSize=m,x==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(a){const u=a.length,m=a[0].length,x=new de(m,u);for(let v=0;v<u;v++){const b=a[v];for(let C=0;C<m;C++)b[C]&&x.set(C,v)}return x}static parseFromString(a,u,m){if(a===null)throw new y("stringRepresentation cannot be null");const x=new Array(a.length);let v=0,b=0,C=-1,R=0,O=0;for(;O<a.length;)if(a.charAt(O)===`
`||a.charAt(O)==="\r"){if(v>b){if(C===-1)C=v-b;else if(v-b!==C)throw new y("row lengths do not match");b=v,R++}O++}else if(a.substring(O,O+u.length)===u)O+=u.length,x[v]=!0,v++;else if(a.substring(O,O+m.length)===m)O+=m.length,x[v]=!1,v++;else throw new y("illegal character encountered: "+a.substring(O));if(v>b){if(C===-1)C=v-b;else if(v-b!==C)throw new y("row lengths do not match");R++}const H=new de(C,R);for(let q=0;q<v;q++)x[q]&&H.set(Math.floor(q%C),Math.floor(q/C));return H}get(a,u){const m=u*this.rowSize+Math.floor(a/32);return(this.bits[m]>>>(a&31)&1)!==0}set(a,u){const m=u*this.rowSize+Math.floor(a/32);this.bits[m]|=1<<(a&31)&4294967295}unset(a,u){const m=u*this.rowSize+Math.floor(a/32);this.bits[m]&=~(1<<(a&31)&4294967295)}flip(a,u){const m=u*this.rowSize+Math.floor(a/32);this.bits[m]^=1<<(a&31)&4294967295}xor(a){if(this.width!==a.getWidth()||this.height!==a.getHeight()||this.rowSize!==a.getRowSize())throw new y("input matrix dimensions do not match");const u=new D(Math.floor(this.width/32)+1),m=this.rowSize,x=this.bits;for(let v=0,b=this.height;v<b;v++){const C=v*m,R=a.getRow(v,u).getBitArray();for(let O=0;O<m;O++)x[C+O]^=R[O]}}clear(){const a=this.bits,u=a.length;for(let m=0;m<u;m++)a[m]=0}setRegion(a,u,m,x){if(u<0||a<0)throw new y("Left and top must be nonnegative");if(x<1||m<1)throw new y("Height and width must be at least 1");const v=a+m,b=u+x;if(b>this.height||v>this.width)throw new y("The region must fit inside the matrix");const C=this.rowSize,R=this.bits;for(let O=u;O<b;O++){const H=O*C;for(let q=a;q<v;q++)R[H+Math.floor(q/32)]|=1<<(q&31)&4294967295}}getRow(a,u){u==null||u.getSize()<this.width?u=new D(this.width):u.clear();const m=this.rowSize,x=this.bits,v=a*m;for(let b=0;b<m;b++)u.setBulk(b*32,x[v+b]);return u}setRow(a,u){S.arraycopy(u.getBitArray(),0,this.bits,a*this.rowSize,this.rowSize)}rotate180(){const a=this.getWidth(),u=this.getHeight();let m=new D(a),x=new D(a);for(let v=0,b=Math.floor((u+1)/2);v<b;v++)m=this.getRow(v,m),x=this.getRow(u-1-v,x),m.reverse(),x.reverse(),this.setRow(v,x),this.setRow(u-1-v,m)}getEnclosingRectangle(){const a=this.width,u=this.height,m=this.rowSize,x=this.bits;let v=a,b=u,C=-1,R=-1;for(let O=0;O<u;O++)for(let H=0;H<m;H++){const q=x[O*m+H];if(q!==0){if(O<b&&(b=O),O>R&&(R=O),H*32<v){let Y=0;for(;!(q<<31-Y&4294967295);)Y++;H*32+Y<v&&(v=H*32+Y)}if(H*32+31>C){let Y=31;for(;!(q>>>Y);)Y--;H*32+Y>C&&(C=H*32+Y)}}}return C<v||R<b?null:Int32Array.from([v,b,C-v+1,R-b+1])}getTopLeftOnBit(){const a=this.rowSize,u=this.bits;let m=0;for(;m<u.length&&u[m]===0;)m++;if(m===u.length)return null;const x=m/a;let v=m%a*32;const b=u[m];let C=0;for(;!(b<<31-C&4294967295);)C++;return v+=C,Int32Array.from([v,x])}getBottomRightOnBit(){const a=this.rowSize,u=this.bits;let m=u.length-1;for(;m>=0&&u[m]===0;)m--;if(m<0)return null;const x=Math.floor(m/a);let v=Math.floor(m%a)*32;const b=u[m];let C=31;for(;!(b>>>C);)C--;return v+=C,Int32Array.from([v,x])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(a){if(!(a instanceof de))return!1;const u=a;return this.width===u.width&&this.height===u.height&&this.rowSize===u.rowSize&&k.equals(this.bits,u.bits)}hashCode(){let a=this.width;return a=31*a+this.width,a=31*a+this.height,a=31*a+this.rowSize,a=31*a+k.hashCode(this.bits),a}toString(a="X ",u="  ",m=`
`){return this.buildToString(a,u,m)}buildToString(a,u,m){let x=new ce;for(let v=0,b=this.height;v<b;v++){for(let C=0,R=this.width;C<R;C++)x.append(this.get(C,v)?a:u);x.append(m)}return x.toString()}clone(){return new de(this.width,this.height,this.rowSize,this.bits.slice())}}class re extends f{static getNotFoundInstance(){return new re}}re.kind="NotFoundException";class fe extends P{constructor(a){super(a),this.luminances=fe.EMPTY,this.buckets=new Int32Array(fe.LUMINANCE_BUCKETS)}getBlackRow(a,u){const m=this.getLuminanceSource(),x=m.getWidth();u==null||u.getSize()<x?u=new D(x):u.clear(),this.initArrays(x);const v=m.getRow(a,this.luminances),b=this.buckets;for(let R=0;R<x;R++)b[(v[R]&255)>>fe.LUMINANCE_SHIFT]++;const C=fe.estimateBlackPoint(b);if(x<3)for(let R=0;R<x;R++)(v[R]&255)<C&&u.set(R);else{let R=v[0]&255,O=v[1]&255;for(let H=1;H<x-1;H++){const q=v[H+1]&255;(O*4-R-q)/2<C&&u.set(H),R=O,O=q}}return u}getBlackMatrix(){const a=this.getLuminanceSource(),u=a.getWidth(),m=a.getHeight(),x=new de(u,m);this.initArrays(u);const v=this.buckets;for(let R=1;R<5;R++){const O=Math.floor(m*R/5),H=a.getRow(O,this.luminances),q=Math.floor(u*4/5);for(let Y=Math.floor(u/5);Y<q;Y++){const te=H[Y]&255;v[te>>fe.LUMINANCE_SHIFT]++}}const b=fe.estimateBlackPoint(v),C=a.getMatrix();for(let R=0;R<m;R++){const O=R*u;for(let H=0;H<u;H++)(C[O+H]&255)<b&&x.set(H,R)}return x}createBinarizer(a){return new fe(a)}initArrays(a){this.luminances.length<a&&(this.luminances=new Uint8ClampedArray(a));const u=this.buckets;for(let m=0;m<fe.LUMINANCE_BUCKETS;m++)u[m]=0}static estimateBlackPoint(a){const u=a.length;let m=0,x=0,v=0;for(let H=0;H<u;H++)a[H]>v&&(x=H,v=a[H]),a[H]>m&&(m=a[H]);let b=0,C=0;for(let H=0;H<u;H++){const q=H-x,Y=a[H]*q*q;Y>C&&(b=H,C=Y)}if(x>b){const H=x;x=b,b=H}if(b-x<=u/16)throw new re;let R=b-1,O=-1;for(let H=b-1;H>x;H--){const q=H-x,Y=q*q*(b-H)*(m-a[H]);Y>O&&(R=H,O=Y)}return R<<fe.LUMINANCE_SHIFT}}fe.LUMINANCE_BITS=5,fe.LUMINANCE_SHIFT=8-fe.LUMINANCE_BITS,fe.LUMINANCE_BUCKETS=1<<fe.LUMINANCE_BITS,fe.EMPTY=Uint8ClampedArray.from([0]);class oe extends fe{constructor(a){super(a),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const a=this.getLuminanceSource(),u=a.getWidth(),m=a.getHeight();if(u>=oe.MINIMUM_DIMENSION&&m>=oe.MINIMUM_DIMENSION){const x=a.getMatrix();let v=u>>oe.BLOCK_SIZE_POWER;u&oe.BLOCK_SIZE_MASK&&v++;let b=m>>oe.BLOCK_SIZE_POWER;m&oe.BLOCK_SIZE_MASK&&b++;const C=oe.calculateBlackPoints(x,v,b,u,m),R=new de(u,m);oe.calculateThresholdForBlock(x,v,b,u,m,C,R),this.matrix=R}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(a){return new oe(a)}static calculateThresholdForBlock(a,u,m,x,v,b,C){const R=v-oe.BLOCK_SIZE,O=x-oe.BLOCK_SIZE;for(let H=0;H<m;H++){let q=H<<oe.BLOCK_SIZE_POWER;q>R&&(q=R);const Y=oe.cap(H,2,m-3);for(let te=0;te<u;te++){let ae=te<<oe.BLOCK_SIZE_POWER;ae>O&&(ae=O);const le=oe.cap(te,2,u-3);let me=0;for(let Ie=-2;Ie<=2;Ie++){const Re=b[Y+Ie];me+=Re[le-2]+Re[le-1]+Re[le]+Re[le+1]+Re[le+2]}const ve=me/25;oe.thresholdBlock(a,ae,q,ve,x,C)}}}static cap(a,u,m){return a<u?u:a>m?m:a}static thresholdBlock(a,u,m,x,v,b){for(let C=0,R=m*v+u;C<oe.BLOCK_SIZE;C++,R+=v)for(let O=0;O<oe.BLOCK_SIZE;O++)(a[R+O]&255)<=x&&b.set(u+O,m+C)}static calculateBlackPoints(a,u,m,x,v){const b=v-oe.BLOCK_SIZE,C=x-oe.BLOCK_SIZE,R=new Array(m);for(let O=0;O<m;O++){R[O]=new Int32Array(u);let H=O<<oe.BLOCK_SIZE_POWER;H>b&&(H=b);for(let q=0;q<u;q++){let Y=q<<oe.BLOCK_SIZE_POWER;Y>C&&(Y=C);let te=0,ae=255,le=0;for(let ve=0,Ie=H*x+Y;ve<oe.BLOCK_SIZE;ve++,Ie+=x){for(let Re=0;Re<oe.BLOCK_SIZE;Re++){const Ne=a[Ie+Re]&255;te+=Ne,Ne<ae&&(ae=Ne),Ne>le&&(le=Ne)}if(le-ae>oe.MIN_DYNAMIC_RANGE)for(ve++,Ie+=x;ve<oe.BLOCK_SIZE;ve++,Ie+=x)for(let Re=0;Re<oe.BLOCK_SIZE;Re++)te+=a[Ie+Re]&255}let me=te>>oe.BLOCK_SIZE_POWER*2;if(le-ae<=oe.MIN_DYNAMIC_RANGE&&(me=ae/2,O>0&&q>0)){const ve=(R[O-1][q]+2*R[O][q-1]+R[O-1][q-1])/4;ae<ve&&(me=ve)}R[O][q]=me}}return R}}oe.BLOCK_SIZE_POWER=3,oe.BLOCK_SIZE=1<<oe.BLOCK_SIZE_POWER,oe.BLOCK_SIZE_MASK=oe.BLOCK_SIZE-1,oe.MINIMUM_DIMENSION=oe.BLOCK_SIZE*5,oe.MIN_DYNAMIC_RANGE=24;class Q{constructor(a,u){this.width=a,this.height=u}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(a,u,m,x){throw new ne("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ne("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ne("This luminance source does not support rotation by 45 degrees.")}toString(){const a=new Uint8ClampedArray(this.width);let u=new ce;for(let m=0;m<this.height;m++){const x=this.getRow(m,a);for(let v=0;v<this.width;v++){const b=x[v]&255;let C;b<64?C="#":b<128?C="+":b<192?C=".":C=" ",u.append(C)}u.append(`
`)}return u.toString()}}class ue extends Q{constructor(a){super(a.getWidth(),a.getHeight()),this.delegate=a}getRow(a,u){const m=this.delegate.getRow(a,u),x=this.getWidth();for(let v=0;v<x;v++)m[v]=255-(m[v]&255);return m}getMatrix(){const a=this.delegate.getMatrix(),u=this.getWidth()*this.getHeight(),m=new Uint8ClampedArray(u);for(let x=0;x<u;x++)m[x]=255-(a[x]&255);return m}isCropSupported(){return this.delegate.isCropSupported()}crop(a,u,m,x){return new ue(this.delegate.crop(a,u,m,x))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ue(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ue(this.delegate.rotateCounterClockwise45())}}class he extends Q{constructor(a){super(a.width,a.height),this.canvas=a,this.tempCanvasElement=null,this.buffer=he.makeBufferFromCanvasImageData(a)}static makeBufferFromCanvasImageData(a){const u=a.getContext("2d").getImageData(0,0,a.width,a.height);return he.toGrayscaleBuffer(u.data,a.width,a.height)}static toGrayscaleBuffer(a,u,m){const x=new Uint8ClampedArray(u*m);for(let v=0,b=0,C=a.length;v<C;v+=4,b++){let R;if(a[v+3]===0)R=255;else{const H=a[v],q=a[v+1],Y=a[v+2];R=306*H+601*q+117*Y+512>>10}x[b]=R}return x}getRow(a,u){if(a<0||a>=this.getHeight())throw new y("Requested row is outside the image: "+a);const m=this.getWidth(),x=a*m;return u===null?u=this.buffer.slice(x,x+m):(u.length<m&&(u=new Uint8ClampedArray(m)),u.set(this.buffer.slice(x,x+m))),u}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(a,u,m,x){return super.crop(a,u,m,x),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const a=this.canvas.ownerDocument.createElement("canvas");a.width=this.canvas.width,a.height=this.canvas.height,this.tempCanvasElement=a}return this.tempCanvasElement}rotate(a){const u=this.getTempCanvasElement(),m=u.getContext("2d"),x=a*he.DEGREE_TO_RADIANS,v=this.canvas.width,b=this.canvas.height,C=Math.ceil(Math.abs(Math.cos(x))*v+Math.abs(Math.sin(x))*b),R=Math.ceil(Math.abs(Math.sin(x))*v+Math.abs(Math.cos(x))*b);return u.width=C,u.height=R,m.translate(C/2,R/2),m.rotate(x),m.drawImage(this.canvas,v/-2,b/-2),this.buffer=he.makeBufferFromCanvasImageData(u),this}invert(){return new ue(this)}}he.DEGREE_TO_RADIANS=Math.PI/180;class Ee{constructor(a,u,m){this.deviceId=a,this.label=u,this.kind="videoinput",this.groupId=m||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var _e=(globalThis||Yp||self||window||void 0)&&(globalThis||Yp||self||window||void 0).__awaiter||function($,a,u,m){function x(v){return v instanceof u?v:new u(function(b){b(v)})}return new(u||(u=Promise))(function(v,b){function C(H){try{O(m.next(H))}catch(q){b(q)}}function R(H){try{O(m.throw(H))}catch(q){b(q)}}function O(H){H.done?v(H.value):x(H.value).then(C,R)}O((m=m.apply($,a||[])).next())})};class Oe{constructor(a,u=500,m){this.reader=a,this.timeBetweenScansMillis=u,this._hints=m,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(a){this._timeBetweenDecodingAttempts=a<0?0:a}set hints(a){this._hints=a||null}get hints(){return this._hints}listVideoInputDevices(){return _e(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const a=yield navigator.mediaDevices.enumerateDevices(),u=[];for(const m of a){const x=m.kind==="video"?"videoinput":m.kind;if(x!=="videoinput")continue;const v=m.deviceId||m.id,b=m.label||`Video device ${u.length+1}`,C=m.groupId,R={deviceId:v,label:b,kind:x,groupId:C};u.push(R)}return u})}getVideoInputDevices(){return _e(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(u=>new Ee(u.deviceId,u.label))})}findDeviceById(a){return _e(this,void 0,void 0,function*(){const u=yield this.listVideoInputDevices();return u?u.find(m=>m.deviceId===a):null})}decodeFromInputVideoDevice(a,u){return _e(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(a,u)})}decodeOnceFromVideoDevice(a,u){return _e(this,void 0,void 0,function*(){this.reset();let m;a?m={deviceId:{exact:a}}:m={facingMode:"environment"};const x={video:m};return yield this.decodeOnceFromConstraints(x,u)})}decodeOnceFromConstraints(a,u){return _e(this,void 0,void 0,function*(){const m=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeOnceFromStream(m,u)})}decodeOnceFromStream(a,u){return _e(this,void 0,void 0,function*(){this.reset();const m=yield this.attachStreamToVideo(a,u);return yield this.decodeOnce(m)})}decodeFromInputVideoDeviceContinuously(a,u,m){return _e(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(a,u,m)})}decodeFromVideoDevice(a,u,m){return _e(this,void 0,void 0,function*(){let x;a?x={deviceId:{exact:a}}:x={facingMode:"environment"};const v={video:x};return yield this.decodeFromConstraints(v,u,m)})}decodeFromConstraints(a,u,m){return _e(this,void 0,void 0,function*(){const x=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeFromStream(x,u,m)})}decodeFromStream(a,u,m){return _e(this,void 0,void 0,function*(){this.reset();const x=yield this.attachStreamToVideo(a,u);return yield this.decodeContinuously(x,m)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(a,u){return _e(this,void 0,void 0,function*(){const m=this.prepareVideoElement(u);return this.addVideoSource(m,a),this.videoElement=m,this.stream=a,yield this.playVideoOnLoadAsync(m),m})}playVideoOnLoadAsync(a){return new Promise((u,m)=>this.playVideoOnLoad(a,()=>u()))}playVideoOnLoad(a,u){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(a),a.addEventListener("ended",this.videoEndedListener),a.addEventListener("canplay",this.videoCanPlayListener),a.addEventListener("playing",u),this.tryPlayVideo(a)}isVideoPlaying(a){return a.currentTime>0&&!a.paused&&!a.ended&&a.readyState>2}tryPlayVideo(a){return _e(this,void 0,void 0,function*(){if(this.isVideoPlaying(a)){console.warn("Trying to play video that is already playing.");return}try{yield a.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(a,u){const m=document.getElementById(a);if(!m)throw new g(`element with id '${a}' not found`);if(m.nodeName.toLowerCase()!==u.toLowerCase())throw new g(`element with id '${a}' must be an ${u} element`);return m}decodeFromImage(a,u){if(!a&&!u)throw new g("either imageElement with a src set or an url must be provided");return u&&!a?this.decodeFromImageUrl(u):this.decodeFromImageElement(a)}decodeFromVideo(a,u){if(!a&&!u)throw new g("Either an element with a src set or an URL must be provided");return u&&!a?this.decodeFromVideoUrl(u):this.decodeFromVideoElement(a)}decodeFromVideoContinuously(a,u,m){if(a===void 0&&u===void 0)throw new g("Either an element with a src set or an URL must be provided");return u&&!a?this.decodeFromVideoUrlContinuously(u,m):this.decodeFromVideoElementContinuously(a,m)}decodeFromImageElement(a){if(!a)throw new g("An image element must be provided.");this.reset();const u=this.prepareImageElement(a);this.imageElement=u;let m;return this.isImageLoaded(u)?m=this.decodeOnce(u,!1,!0):m=this._decodeOnLoadImage(u),m}decodeFromVideoElement(a){const u=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideo(u)}decodeFromVideoElementContinuously(a,u){const m=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideoContinuously(m,u)}_decodeFromVideoElementSetup(a){if(!a)throw new g("A video element must be provided.");this.reset();const u=this.prepareVideoElement(a);return this.videoElement=u,u}decodeFromImageUrl(a){if(!a)throw new g("An URL must be provided.");this.reset();const u=this.prepareImageElement();this.imageElement=u;const m=this._decodeOnLoadImage(u);return u.src=a,m}decodeFromVideoUrl(a){if(!a)throw new g("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),m=this.decodeFromVideoElement(u);return u.src=a,m}decodeFromVideoUrlContinuously(a,u){if(!a)throw new g("An URL must be provided.");this.reset();const m=this.prepareVideoElement(),x=this.decodeFromVideoElementContinuously(m,u);return m.src=a,x}_decodeOnLoadImage(a){return new Promise((u,m)=>{this.imageLoadedListener=()=>this.decodeOnce(a,!1,!0).then(u,m),a.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(a){return _e(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(a),yield this.decodeOnce(a)})}_decodeOnLoadVideoContinuously(a,u){return _e(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(a),this.decodeContinuously(a,u)})}isImageLoaded(a){return!(!a.complete||a.naturalWidth===0)}prepareImageElement(a){let u;return typeof a>"u"&&(u=document.createElement("img"),u.width=200,u.height=200),typeof a=="string"&&(u=this.getMediaElement(a,"img")),a instanceof HTMLImageElement&&(u=a),u}prepareVideoElement(a){let u;return!a&&typeof document<"u"&&(u=document.createElement("video"),u.width=200,u.height=200),typeof a=="string"&&(u=this.getMediaElement(a,"video")),a instanceof HTMLVideoElement&&(u=a),u.setAttribute("autoplay","true"),u.setAttribute("muted","true"),u.setAttribute("playsinline","true"),u}decodeOnce(a,u=!0,m=!0){this._stopAsyncDecode=!1;const x=(v,b)=>{if(this._stopAsyncDecode){b(new re("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const C=this.decode(a);v(C)}catch(C){const R=u&&C instanceof re,H=(C instanceof E||C instanceof F)&&m;if(R||H)return setTimeout(x,this._timeBetweenDecodingAttempts,v,b);b(C)}};return new Promise((v,b)=>x(v,b))}decodeContinuously(a,u){this._stopContinuousDecode=!1;const m=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const x=this.decode(a);u(x,null),setTimeout(m,this.timeBetweenScansMillis)}catch(x){u(null,x);const v=x instanceof E||x instanceof F,b=x instanceof re;(v||b)&&setTimeout(m,this._timeBetweenDecodingAttempts)}};m()}decode(a){const u=this.createBinaryBitmap(a);return this.decodeBitmap(u)}_isHTMLVideoElement(a){return a.videoWidth!==0}drawFrameOnCanvas(a,u,m){u||(u={sx:0,sy:0,sWidth:a.videoWidth,sHeight:a.videoHeight,dx:0,dy:0,dWidth:a.videoWidth,dHeight:a.videoHeight}),m||(m=this.captureCanvasContext),m.drawImage(a,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}drawImageOnCanvas(a,u,m=this.captureCanvasContext){u||(u={sx:0,sy:0,sWidth:a.naturalWidth,sHeight:a.naturalHeight,dx:0,dy:0,dWidth:a.naturalWidth,dHeight:a.naturalHeight}),m||(m=this.captureCanvasContext),m.drawImage(a,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}createBinaryBitmap(a){this.getCaptureCanvasContext(a),this._isHTMLVideoElement(a)?this.drawFrameOnCanvas(a):this.drawImageOnCanvas(a);const u=this.getCaptureCanvas(a),m=new he(u),x=new oe(m);return new _(x)}getCaptureCanvasContext(a){if(!this.captureCanvasContext){const m=this.getCaptureCanvas(a).getContext("2d");this.captureCanvasContext=m}return this.captureCanvasContext}getCaptureCanvas(a){if(!this.captureCanvas){const u=this.createCaptureCanvas(a);this.captureCanvas=u}return this.captureCanvas}decodeBitmap(a){return this.reader.decode(a,this._hints)}createCaptureCanvas(a){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const u=document.createElement("canvas");let m,x;return typeof a<"u"&&(a instanceof HTMLVideoElement?(m=a.videoWidth,x=a.videoHeight):a instanceof HTMLImageElement&&(m=a.naturalWidth||a.width,x=a.naturalHeight||a.height)),u.style.width=m+"px",u.style.height=x+"px",u.width=m,u.height=x,u}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(a=>a.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(a,u){try{a.srcObject=u}catch{a.src=URL.createObjectURL(u)}}cleanVideoSource(a){try{a.srcObject=null}catch{a.src=""}this.videoElement.removeAttribute("src")}}class De{constructor(a,u,m=u==null?0:8*u.length,x,v,b=S.currentTimeMillis()){this.text=a,this.rawBytes=u,this.numBits=m,this.resultPoints=x,this.format=v,this.timestamp=b,this.text=a,this.rawBytes=u,m==null?this.numBits=u==null?0:8*u.length:this.numBits=m,this.resultPoints=x,this.format=v,this.resultMetadata=null,b==null?this.timestamp=S.currentTimeMillis():this.timestamp=b}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(a,u){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(a,u)}putAllMetadata(a){a!==null&&(this.resultMetadata===null?this.resultMetadata=a:this.resultMetadata=new Map(a))}addResultPoints(a){const u=this.resultPoints;if(u===null)this.resultPoints=a;else if(a!==null&&a.length>0){const m=new Array(u.length+a.length);S.arraycopy(u,0,m,0,u.length),S.arraycopy(a,0,m,u.length,a.length),this.resultPoints=m}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ze;(function($){$[$.AZTEC=0]="AZTEC",$[$.CODABAR=1]="CODABAR",$[$.CODE_39=2]="CODE_39",$[$.CODE_93=3]="CODE_93",$[$.CODE_128=4]="CODE_128",$[$.DATA_MATRIX=5]="DATA_MATRIX",$[$.EAN_8=6]="EAN_8",$[$.EAN_13=7]="EAN_13",$[$.ITF=8]="ITF",$[$.MAXICODE=9]="MAXICODE",$[$.PDF_417=10]="PDF_417",$[$.QR_CODE=11]="QR_CODE",$[$.RSS_14=12]="RSS_14",$[$.RSS_EXPANDED=13]="RSS_EXPANDED",$[$.UPC_A=14]="UPC_A",$[$.UPC_E=15]="UPC_E",$[$.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ze||(ze={}));var be=ze,Te;(function($){$[$.OTHER=0]="OTHER",$[$.ORIENTATION=1]="ORIENTATION",$[$.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",$[$.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",$[$.ISSUE_NUMBER=4]="ISSUE_NUMBER",$[$.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",$[$.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",$[$.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",$[$.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",$[$.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",$[$.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Te||(Te={}));var Ze=Te;class Nt{constructor(a,u,m,x,v=-1,b=-1){this.rawBytes=a,this.text=u,this.byteSegments=m,this.ecLevel=x,this.structuredAppendSequenceNumber=v,this.structuredAppendParity=b,this.numBits=a==null?0:8*a.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(a){this.numBits=a}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(a){this.errorsCorrected=a}getErasures(){return this.erasures}setErasures(a){this.erasures=a}getOther(){return this.other}setOther(a){this.other=a}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ut{exp(a){return this.expTable[a]}log(a){if(a===0)throw new y;return this.logTable[a]}static addOrSubtract(a,u){return a^u}}class st{constructor(a,u){if(u.length===0)throw new y;this.field=a;const m=u.length;if(m>1&&u[0]===0){let x=1;for(;x<m&&u[x]===0;)x++;x===m?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(m-x),S.arraycopy(u,x,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);const u=this.coefficients;let m;if(a===1){m=0;for(let b=0,C=u.length;b!==C;b++){const R=u[b];m=ut.addOrSubtract(m,R)}return m}m=u[0];const x=u.length,v=this.field;for(let b=1;b<x;b++)m=ut.addOrSubtract(v.multiply(a,m),u[b]);return m}addOrSubtract(a){if(!this.field.equals(a.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero())return a;if(a.isZero())return this;let u=this.coefficients,m=a.coefficients;if(u.length>m.length){const b=u;u=m,m=b}let x=new Int32Array(m.length);const v=m.length-u.length;S.arraycopy(m,0,x,0,v);for(let b=v;b<m.length;b++)x[b]=ut.addOrSubtract(u[b-v],m[b]);return new st(this.field,x)}multiply(a){if(!this.field.equals(a.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero()||a.isZero())return this.field.getZero();const u=this.coefficients,m=u.length,x=a.coefficients,v=x.length,b=new Int32Array(m+v-1),C=this.field;for(let R=0;R<m;R++){const O=u[R];for(let H=0;H<v;H++)b[R+H]=ut.addOrSubtract(b[R+H],C.multiply(O,x[H]))}return new st(C,b)}multiplyScalar(a){if(a===0)return this.field.getZero();if(a===1)return this;const u=this.coefficients.length,m=this.field,x=new Int32Array(u),v=this.coefficients;for(let b=0;b<u;b++)x[b]=m.multiply(v[b],a);return new st(m,x)}multiplyByMonomial(a,u){if(a<0)throw new y;if(u===0)return this.field.getZero();const m=this.coefficients,x=m.length,v=new Int32Array(x+a),b=this.field;for(let C=0;C<x;C++)v[C]=b.multiply(m[C],u);return new st(b,v)}divide(a){if(!this.field.equals(a.field))throw new y("GenericGFPolys do not have same GenericGF field");if(a.isZero())throw new y("Divide by 0");const u=this.field;let m=u.getZero(),x=this;const v=a.getCoefficient(a.getDegree()),b=u.inverse(v);for(;x.getDegree()>=a.getDegree()&&!x.isZero();){const C=x.getDegree()-a.getDegree(),R=u.multiply(x.getCoefficient(x.getDegree()),b),O=a.multiplyByMonomial(C,R),H=u.buildMonomial(C,R);m=m.addOrSubtract(H),x=x.addOrSubtract(O)}return[m,x]}toString(){let a="";for(let u=this.getDegree();u>=0;u--){let m=this.getCoefficient(u);if(m!==0){if(m<0?(a+=" - ",m=-m):a.length>0&&(a+=" + "),u===0||m!==1){const x=this.field.log(m);x===0?a+="1":x===1?a+="a":(a+="a^",a+=x)}u!==0&&(u===1?a+="x":(a+="x^",a+=u))}}return a}}class gt extends f{}gt.kind="ArithmeticException";class at extends ut{constructor(a,u,m){super(),this.primitive=a,this.size=u,this.generatorBase=m;const x=new Int32Array(u);let v=1;for(let C=0;C<u;C++)x[C]=v,v*=2,v>=u&&(v^=a,v&=u-1);this.expTable=x;const b=new Int32Array(u);for(let C=0;C<u-1;C++)b[x[C]]=C;this.logTable=b,this.zero=new st(this,Int32Array.from([0])),this.one=new st(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,u){if(a<0)throw new y;if(u===0)return this.zero;const m=new Int32Array(a+1);return m[0]=u,new st(this,m)}inverse(a){if(a===0)throw new gt;return this.expTable[this.size-this.logTable[a]-1]}multiply(a,u){return a===0||u===0?0:this.expTable[(this.logTable[a]+this.logTable[u])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+T.toHexString(this.primitive)+","+this.size+")"}equals(a){return a===this}}at.AZTEC_DATA_12=new at(4201,4096,1),at.AZTEC_DATA_10=new at(1033,1024,1),at.AZTEC_DATA_6=new at(67,64,1),at.AZTEC_PARAM=new at(19,16,1),at.QR_CODE_FIELD_256=new at(285,256,0),at.DATA_MATRIX_FIELD_256=new at(301,256,1),at.AZTEC_DATA_8=at.DATA_MATRIX_FIELD_256,at.MAXICODE_FIELD_64=at.AZTEC_DATA_6;class $n extends f{}$n.kind="ReedSolomonException";class gr extends f{}gr.kind="IllegalStateException";class xr{constructor(a){this.field=a}decode(a,u){const m=this.field,x=new st(m,a),v=new Int32Array(u);let b=!0;for(let te=0;te<u;te++){const ae=x.evaluateAt(m.exp(te+m.getGeneratorBase()));v[v.length-1-te]=ae,ae!==0&&(b=!1)}if(b)return;const C=new st(m,v),R=this.runEuclideanAlgorithm(m.buildMonomial(u,1),C,u),O=R[0],H=R[1],q=this.findErrorLocations(O),Y=this.findErrorMagnitudes(H,q);for(let te=0;te<q.length;te++){const ae=a.length-1-m.log(q[te]);if(ae<0)throw new $n("Bad error location");a[ae]=at.addOrSubtract(a[ae],Y[te])}}runEuclideanAlgorithm(a,u,m){if(a.getDegree()<u.getDegree()){const te=a;a=u,u=te}const x=this.field;let v=a,b=u,C=x.getZero(),R=x.getOne();for(;b.getDegree()>=(m/2|0);){let te=v,ae=C;if(v=b,C=R,v.isZero())throw new $n("r_{i-1} was zero");b=te;let le=x.getZero();const me=v.getCoefficient(v.getDegree()),ve=x.inverse(me);for(;b.getDegree()>=v.getDegree()&&!b.isZero();){const Ie=b.getDegree()-v.getDegree(),Re=x.multiply(b.getCoefficient(b.getDegree()),ve);le=le.addOrSubtract(x.buildMonomial(Ie,Re)),b=b.addOrSubtract(v.multiplyByMonomial(Ie,Re))}if(R=le.multiply(C).addOrSubtract(ae),b.getDegree()>=v.getDegree())throw new gr("Division algorithm failed to reduce polynomial?")}const O=R.getCoefficient(0);if(O===0)throw new $n("sigmaTilde(0) was zero");const H=x.inverse(O),q=R.multiplyScalar(H),Y=b.multiplyScalar(H);return[q,Y]}findErrorLocations(a){const u=a.getDegree();if(u===1)return Int32Array.from([a.getCoefficient(1)]);const m=new Int32Array(u);let x=0;const v=this.field;for(let b=1;b<v.getSize()&&x<u;b++)a.evaluateAt(b)===0&&(m[x]=v.inverse(b),x++);if(x!==u)throw new $n("Error locator degree does not match number of roots");return m}findErrorMagnitudes(a,u){const m=u.length,x=new Int32Array(m),v=this.field;for(let b=0;b<m;b++){const C=v.inverse(u[b]);let R=1;for(let O=0;O<m;O++)if(b!==O){const H=v.multiply(u[O],C),q=H&1?H&-2:H|1;R=v.multiply(R,q)}x[b]=v.multiply(a.evaluateAt(C),v.inverse(R)),v.getGeneratorBase()!==0&&(x[b]=v.multiply(x[b],C))}return x}}var hn;(function($){$[$.UPPER=0]="UPPER",$[$.LOWER=1]="LOWER",$[$.MIXED=2]="MIXED",$[$.DIGIT=3]="DIGIT",$[$.PUNCT=4]="PUNCT",$[$.BINARY=5]="BINARY"})(hn||(hn={}));class Ht{decode(a){this.ddata=a;let u=a.getBits(),m=this.extractBits(u),x=this.correctBits(m),v=Ht.convertBoolArrayToByteArray(x),b=Ht.getEncodedData(x),C=new Nt(v,b,null,null);return C.setNumBits(x.length),C}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let u=a.length,m=hn.UPPER,x=hn.UPPER,v="",b=0;for(;b<u;)if(x===hn.BINARY){if(u-b<5)break;let C=Ht.readCode(a,b,5);if(b+=5,C===0){if(u-b<11)break;C=Ht.readCode(a,b,11)+31,b+=11}for(let R=0;R<C;R++){if(u-b<8){b=u;break}const O=Ht.readCode(a,b,8);v+=ee.castAsNonUtf8Char(O),b+=8}x=m}else{let C=x===hn.DIGIT?4:5;if(u-b<C)break;let R=Ht.readCode(a,b,C);b+=C;let O=Ht.getCharacter(x,R);O.startsWith("CTRL_")?(m=x,x=Ht.getTable(O.charAt(5)),O.charAt(6)==="L"&&(m=x)):(v+=O,x=m)}return v}static getTable(a){switch(a){case"L":return hn.LOWER;case"P":return hn.PUNCT;case"M":return hn.MIXED;case"D":return hn.DIGIT;case"B":return hn.BINARY;case"U":default:return hn.UPPER}}static getCharacter(a,u){switch(a){case hn.UPPER:return Ht.UPPER_TABLE[u];case hn.LOWER:return Ht.LOWER_TABLE[u];case hn.MIXED:return Ht.MIXED_TABLE[u];case hn.PUNCT:return Ht.PUNCT_TABLE[u];case hn.DIGIT:return Ht.DIGIT_TABLE[u];default:throw new gr("Bad table")}}correctBits(a){let u,m;this.ddata.getNbLayers()<=2?(m=6,u=at.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(m=8,u=at.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(m=10,u=at.AZTEC_DATA_10):(m=12,u=at.AZTEC_DATA_12);let x=this.ddata.getNbDatablocks(),v=a.length/m;if(v<x)throw new F;let b=a.length%m,C=new Int32Array(v);for(let Y=0;Y<v;Y++,b+=m)C[Y]=Ht.readCode(a,b,m);try{new xr(u).decode(C,v-x)}catch(Y){throw new F(Y)}let R=(1<<m)-1,O=0;for(let Y=0;Y<x;Y++){let te=C[Y];if(te===0||te===R)throw new F;(te===1||te===R-1)&&O++}let H=new Array(x*m-O),q=0;for(let Y=0;Y<x;Y++){let te=C[Y];if(te===1||te===R-1)H.fill(te>1,q,q+m-1),q+=m-1;else for(let ae=m-1;ae>=0;--ae)H[q++]=(te&1<<ae)!==0}return H}extractBits(a){let u=this.ddata.isCompact(),m=this.ddata.getNbLayers(),x=(u?11:14)+m*4,v=new Int32Array(x),b=new Array(this.totalBitsInLayer(m,u));if(u)for(let C=0;C<v.length;C++)v[C]=C;else{let C=x+1+2*T.truncDivision(T.truncDivision(x,2)-1,15),R=x/2,O=T.truncDivision(C,2);for(let H=0;H<R;H++){let q=H+T.truncDivision(H,15);v[R-H-1]=O-q-1,v[R+H]=O+q+1}}for(let C=0,R=0;C<m;C++){let O=(m-C)*4+(u?9:12),H=C*2,q=x-1-H;for(let Y=0;Y<O;Y++){let te=Y*2;for(let ae=0;ae<2;ae++)b[R+te+ae]=a.get(v[H+ae],v[H+Y]),b[R+2*O+te+ae]=a.get(v[H+Y],v[q-ae]),b[R+4*O+te+ae]=a.get(v[q-ae],v[q-Y]),b[R+6*O+te+ae]=a.get(v[q-Y],v[H+ae])}R+=O*8}return b}static readCode(a,u,m){let x=0;for(let v=u;v<u+m;v++)x<<=1,a[v]&&(x|=1);return x}static readByte(a,u){let m=a.length-u;return m>=8?Ht.readCode(a,u,8):Ht.readCode(a,u,m)<<8-m}static convertBoolArrayToByteArray(a){let u=new Uint8Array((a.length+7)/8);for(let m=0;m<u.length;m++)u[m]=Ht.readByte(a,8*m);return u}totalBitsInLayer(a,u){return((u?88:112)+16*a)*a}}Ht.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ht.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ht.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ht.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ht.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Et{constructor(){}static round(a){return a===NaN?0:a<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:a>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:a+(a<0?-.5:.5)|0}static distance(a,u,m,x){const v=a-m,b=u-x;return Math.sqrt(v*v+b*b)}static sum(a){let u=0;for(let m=0,x=a.length;m!==x;m++){const v=a[m];u+=v}return u}}class pc{static floatToIntBits(a){return a}}pc.MAX_VALUE=Number.MAX_SAFE_INTEGER;class $e{constructor(a,u){this.x=a,this.y=u}getX(){return this.x}getY(){return this.y}equals(a){if(a instanceof $e){const u=a;return this.x===u.x&&this.y===u.y}return!1}hashCode(){return 31*pc.floatToIntBits(this.x)+pc.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(a){const u=this.distance(a[0],a[1]),m=this.distance(a[1],a[2]),x=this.distance(a[0],a[2]);let v,b,C;if(m>=u&&m>=x?(b=a[0],v=a[1],C=a[2]):x>=m&&x>=u?(b=a[1],v=a[0],C=a[2]):(b=a[2],v=a[0],C=a[1]),this.crossProductZ(v,b,C)<0){const R=v;v=C,C=R}a[0]=v,a[1]=b,a[2]=C}static distance(a,u){return Et.distance(a.x,a.y,u.x,u.y)}static crossProductZ(a,u,m){const x=u.x,v=u.y;return(m.x-x)*(a.y-v)-(m.y-v)*(a.x-x)}}class dl{constructor(a,u){this.bits=a,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class Jh extends dl{constructor(a,u,m,x,v){super(a,u),this.compact=m,this.nbDatablocks=x,this.nbLayers=v}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Gi{constructor(a,u,m,x){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),u==null&&(u=Gi.INIT_SIZE),m==null&&(m=a.getWidth()/2|0),x==null&&(x=a.getHeight()/2|0);const v=u/2|0;if(this.leftInit=m-v,this.rightInit=m+v,this.upInit=x-v,this.downInit=x+v,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new re}detect(){let a=this.leftInit,u=this.rightInit,m=this.upInit,x=this.downInit,v=!1,b=!0,C=!1,R=!1,O=!1,H=!1,q=!1;const Y=this.width,te=this.height;for(;b;){b=!1;let ae=!0;for(;(ae||!R)&&u<Y;)ae=this.containsBlackPoint(m,x,u,!1),ae?(u++,b=!0,R=!0):R||u++;if(u>=Y){v=!0;break}let le=!0;for(;(le||!O)&&x<te;)le=this.containsBlackPoint(a,u,x,!0),le?(x++,b=!0,O=!0):O||x++;if(x>=te){v=!0;break}let me=!0;for(;(me||!H)&&a>=0;)me=this.containsBlackPoint(m,x,a,!1),me?(a--,b=!0,H=!0):H||a--;if(a<0){v=!0;break}let ve=!0;for(;(ve||!q)&&m>=0;)ve=this.containsBlackPoint(a,u,m,!0),ve?(m--,b=!0,q=!0):q||m--;if(m<0){v=!0;break}b&&(C=!0)}if(!v&&C){const ae=u-a;let le=null;for(let Re=1;le===null&&Re<ae;Re++)le=this.getBlackPointOnSegment(a,x-Re,a+Re,x);if(le==null)throw new re;let me=null;for(let Re=1;me===null&&Re<ae;Re++)me=this.getBlackPointOnSegment(a,m+Re,a+Re,m);if(me==null)throw new re;let ve=null;for(let Re=1;ve===null&&Re<ae;Re++)ve=this.getBlackPointOnSegment(u,m+Re,u-Re,m);if(ve==null)throw new re;let Ie=null;for(let Re=1;Ie===null&&Re<ae;Re++)Ie=this.getBlackPointOnSegment(u,x-Re,u-Re,x);if(Ie==null)throw new re;return this.centerEdges(Ie,le,ve,me)}else throw new re}getBlackPointOnSegment(a,u,m,x){const v=Et.round(Et.distance(a,u,m,x)),b=(m-a)/v,C=(x-u)/v,R=this.image;for(let O=0;O<v;O++){const H=Et.round(a+O*b),q=Et.round(u+O*C);if(R.get(H,q))return new $e(H,q)}return null}centerEdges(a,u,m,x){const v=a.getX(),b=a.getY(),C=u.getX(),R=u.getY(),O=m.getX(),H=m.getY(),q=x.getX(),Y=x.getY(),te=Gi.CORR;return v<this.width/2?[new $e(q-te,Y+te),new $e(C+te,R+te),new $e(O-te,H-te),new $e(v+te,b-te)]:[new $e(q+te,Y+te),new $e(C+te,R-te),new $e(O-te,H+te),new $e(v-te,b-te)]}containsBlackPoint(a,u,m,x){const v=this.image;if(x){for(let b=a;b<=u;b++)if(v.get(b,m))return!0}else for(let b=a;b<=u;b++)if(v.get(m,b))return!0;return!1}}Gi.INIT_SIZE=10,Gi.CORR=1;class ef{static checkAndNudgePoints(a,u){const m=a.getWidth(),x=a.getHeight();let v=!0;for(let b=0;b<u.length&&v;b+=2){const C=Math.floor(u[b]),R=Math.floor(u[b+1]);if(C<-1||C>m||R<-1||R>x)throw new re;v=!1,C===-1?(u[b]=0,v=!0):C===m&&(u[b]=m-1,v=!0),R===-1?(u[b+1]=0,v=!0):R===x&&(u[b+1]=x-1,v=!0)}v=!0;for(let b=u.length-2;b>=0&&v;b-=2){const C=Math.floor(u[b]),R=Math.floor(u[b+1]);if(C<-1||C>m||R<-1||R>x)throw new re;v=!1,C===-1?(u[b]=0,v=!0):C===m&&(u[b]=m-1,v=!0),R===-1?(u[b+1]=0,v=!0):R===x&&(u[b+1]=x-1,v=!0)}}}class ys{constructor(a,u,m,x,v,b,C,R,O){this.a11=a,this.a21=u,this.a31=m,this.a12=x,this.a22=v,this.a32=b,this.a13=C,this.a23=R,this.a33=O}static quadrilateralToQuadrilateral(a,u,m,x,v,b,C,R,O,H,q,Y,te,ae,le,me){const ve=ys.quadrilateralToSquare(a,u,m,x,v,b,C,R);return ys.squareToQuadrilateral(O,H,q,Y,te,ae,le,me).times(ve)}transformPoints(a){const u=a.length,m=this.a11,x=this.a12,v=this.a13,b=this.a21,C=this.a22,R=this.a23,O=this.a31,H=this.a32,q=this.a33;for(let Y=0;Y<u;Y+=2){const te=a[Y],ae=a[Y+1],le=v*te+R*ae+q;a[Y]=(m*te+b*ae+O)/le,a[Y+1]=(x*te+C*ae+H)/le}}transformPointsWithValues(a,u){const m=this.a11,x=this.a12,v=this.a13,b=this.a21,C=this.a22,R=this.a23,O=this.a31,H=this.a32,q=this.a33,Y=a.length;for(let te=0;te<Y;te++){const ae=a[te],le=u[te],me=v*ae+R*le+q;a[te]=(m*ae+b*le+O)/me,u[te]=(x*ae+C*le+H)/me}}static squareToQuadrilateral(a,u,m,x,v,b,C,R){const O=a-m+v-C,H=u-x+b-R;if(O===0&&H===0)return new ys(m-a,v-m,a,x-u,b-x,u,0,0,1);{const q=m-v,Y=C-v,te=x-b,ae=R-b,le=q*ae-Y*te,me=(O*ae-Y*H)/le,ve=(q*H-O*te)/le;return new ys(m-a+me*m,C-a+ve*C,a,x-u+me*x,R-u+ve*R,u,me,ve,1)}}static quadrilateralToSquare(a,u,m,x,v,b,C,R){return ys.squareToQuadrilateral(a,u,m,x,v,b,C,R).buildAdjoint()}buildAdjoint(){return new ys(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(a){return new ys(this.a11*a.a11+this.a21*a.a12+this.a31*a.a13,this.a11*a.a21+this.a21*a.a22+this.a31*a.a23,this.a11*a.a31+this.a21*a.a32+this.a31*a.a33,this.a12*a.a11+this.a22*a.a12+this.a32*a.a13,this.a12*a.a21+this.a22*a.a22+this.a32*a.a23,this.a12*a.a31+this.a22*a.a32+this.a32*a.a33,this.a13*a.a11+this.a23*a.a12+this.a33*a.a13,this.a13*a.a21+this.a23*a.a22+this.a33*a.a23,this.a13*a.a31+this.a23*a.a32+this.a33*a.a33)}}class We extends ef{sampleGrid(a,u,m,x,v,b,C,R,O,H,q,Y,te,ae,le,me,ve,Ie,Re){const Ne=ys.quadrilateralToQuadrilateral(x,v,b,C,R,O,H,q,Y,te,ae,le,me,ve,Ie,Re);return this.sampleGridWithTransform(a,u,m,Ne)}sampleGridWithTransform(a,u,m,x){if(u<=0||m<=0)throw new re;const v=new de(u,m),b=new Float32Array(2*u);for(let C=0;C<m;C++){const R=b.length,O=C+.5;for(let H=0;H<R;H+=2)b[H]=H/2+.5,b[H+1]=O;x.transformPoints(b),ef.checkAndNudgePoints(a,b);try{for(let H=0;H<R;H+=2)a.get(Math.floor(b[H]),Math.floor(b[H+1]))&&v.set(H/2,C)}catch{throw new re}}return v}}class xt{static setGridSampler(a){xt.gridSampler=a}static getInstance(){return xt.gridSampler}}xt.gridSampler=new We;class jt{constructor(a,u){this.x=a,this.y=u}toResultPoint(){return new $e(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class $i{constructor(a){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=a}detect(){return this.detectMirror(!1)}detectMirror(a){let u=this.getMatrixCenter(),m=this.getBullsEyeCorners(u);if(a){let b=m[0];m[0]=m[2],m[2]=b}this.extractParameters(m);let x=this.sampleGrid(this.image,m[this.shift%4],m[(this.shift+1)%4],m[(this.shift+2)%4],m[(this.shift+3)%4]),v=this.getMatrixCornerPoints(m);return new Jh(x,v,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(a){if(!this.isValidPoint(a[0])||!this.isValidPoint(a[1])||!this.isValidPoint(a[2])||!this.isValidPoint(a[3]))throw new re;let u=2*this.nbCenterLayers,m=new Int32Array([this.sampleLine(a[0],a[1],u),this.sampleLine(a[1],a[2],u),this.sampleLine(a[2],a[3],u),this.sampleLine(a[3],a[0],u)]);this.shift=this.getRotation(m,u);let x=0;for(let b=0;b<4;b++){let C=m[(this.shift+b)%4];this.compact?(x<<=7,x+=C>>1&127):(x<<=10,x+=(C>>2&992)+(C>>1&31))}let v=this.getCorrectedParameterData(x,this.compact);this.compact?(this.nbLayers=(v>>6)+1,this.nbDataBlocks=(v&63)+1):(this.nbLayers=(v>>11)+1,this.nbDataBlocks=(v&2047)+1)}getRotation(a,u){let m=0;a.forEach((x,v,b)=>{let C=(x>>u-2<<1)+(x&1);m=(m<<3)+C}),m=((m&1)<<11)+(m>>1);for(let x=0;x<4;x++)if(T.bitCount(m^this.EXPECTED_CORNER_BITS[x])<=2)return x;throw new re}getCorrectedParameterData(a,u){let m,x;u?(m=7,x=2):(m=10,x=4);let v=m-x,b=new Int32Array(m);for(let R=m-1;R>=0;--R)b[R]=a&15,a>>=4;try{new xr(at.AZTEC_PARAM).decode(b,v)}catch{throw new re}let C=0;for(let R=0;R<x;R++)C=(C<<4)+b[R];return C}getBullsEyeCorners(a){let u=a,m=a,x=a,v=a,b=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let q=this.getFirstDifferent(u,b,1,-1),Y=this.getFirstDifferent(m,b,1,1),te=this.getFirstDifferent(x,b,-1,1),ae=this.getFirstDifferent(v,b,-1,-1);if(this.nbCenterLayers>2){let le=this.distancePoint(ae,q)*this.nbCenterLayers/(this.distancePoint(v,u)*(this.nbCenterLayers+2));if(le<.75||le>1.25||!this.isWhiteOrBlackRectangle(q,Y,te,ae))break}u=q,m=Y,x=te,v=ae,b=!b}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new re;this.compact=this.nbCenterLayers===5;let C=new $e(u.getX()+.5,u.getY()-.5),R=new $e(m.getX()+.5,m.getY()+.5),O=new $e(x.getX()-.5,x.getY()+.5),H=new $e(v.getX()-.5,v.getY()-.5);return this.expandSquare([C,R,O,H],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let a,u,m,x;try{let C=new Gi(this.image).detect();a=C[0],u=C[1],m=C[2],x=C[3]}catch{let R=this.image.getWidth()/2,O=this.image.getHeight()/2;a=this.getFirstDifferent(new jt(R+7,O-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new jt(R+7,O+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new jt(R-7,O+7),!1,-1,1).toResultPoint(),x=this.getFirstDifferent(new jt(R-7,O-7),!1,-1,-1).toResultPoint()}let v=Et.round((a.getX()+x.getX()+u.getX()+m.getX())/4),b=Et.round((a.getY()+x.getY()+u.getY()+m.getY())/4);try{let C=new Gi(this.image,15,v,b).detect();a=C[0],u=C[1],m=C[2],x=C[3]}catch{a=this.getFirstDifferent(new jt(v+7,b-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new jt(v+7,b+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new jt(v-7,b+7),!1,-1,1).toResultPoint(),x=this.getFirstDifferent(new jt(v-7,b-7),!1,-1,-1).toResultPoint()}return v=Et.round((a.getX()+x.getX()+u.getX()+m.getX())/4),b=Et.round((a.getY()+x.getY()+u.getY()+m.getY())/4),new jt(v,b)}getMatrixCornerPoints(a){return this.expandSquare(a,2*this.nbCenterLayers,this.getDimension())}sampleGrid(a,u,m,x,v){let b=xt.getInstance(),C=this.getDimension(),R=C/2-this.nbCenterLayers,O=C/2+this.nbCenterLayers;return b.sampleGrid(a,C,C,R,R,O,R,O,O,R,O,u.getX(),u.getY(),m.getX(),m.getY(),x.getX(),x.getY(),v.getX(),v.getY())}sampleLine(a,u,m){let x=0,v=this.distanceResultPoint(a,u),b=v/m,C=a.getX(),R=a.getY(),O=b*(u.getX()-a.getX())/v,H=b*(u.getY()-a.getY())/v;for(let q=0;q<m;q++)this.image.get(Et.round(C+q*O),Et.round(R+q*H))&&(x|=1<<m-q-1);return x}isWhiteOrBlackRectangle(a,u,m,x){let v=3;a=new jt(a.getX()-v,a.getY()+v),u=new jt(u.getX()-v,u.getY()-v),m=new jt(m.getX()+v,m.getY()-v),x=new jt(x.getX()+v,x.getY()+v);let b=this.getColor(x,a);if(b===0)return!1;let C=this.getColor(a,u);return C!==b||(C=this.getColor(u,m),C!==b)?!1:(C=this.getColor(m,x),C===b)}getColor(a,u){let m=this.distancePoint(a,u),x=(u.getX()-a.getX())/m,v=(u.getY()-a.getY())/m,b=0,C=a.getX(),R=a.getY(),O=this.image.get(a.getX(),a.getY()),H=Math.ceil(m);for(let Y=0;Y<H;Y++)C+=x,R+=v,this.image.get(Et.round(C),Et.round(R))!==O&&b++;let q=b/m;return q>.1&&q<.9?0:q<=.1===O?1:-1}getFirstDifferent(a,u,m,x){let v=a.getX()+m,b=a.getY()+x;for(;this.isValid(v,b)&&this.image.get(v,b)===u;)v+=m,b+=x;for(v-=m,b-=x;this.isValid(v,b)&&this.image.get(v,b)===u;)v+=m;for(v-=m;this.isValid(v,b)&&this.image.get(v,b)===u;)b+=x;return b-=x,new jt(v,b)}expandSquare(a,u,m){let x=m/(2*u),v=a[0].getX()-a[2].getX(),b=a[0].getY()-a[2].getY(),C=(a[0].getX()+a[2].getX())/2,R=(a[0].getY()+a[2].getY())/2,O=new $e(C+x*v,R+x*b),H=new $e(C-x*v,R-x*b);v=a[1].getX()-a[3].getX(),b=a[1].getY()-a[3].getY(),C=(a[1].getX()+a[3].getX())/2,R=(a[1].getY()+a[3].getY())/2;let q=new $e(C+x*v,R+x*b),Y=new $e(C-x*v,R-x*b);return[O,q,H,Y]}isValid(a,u){return a>=0&&a<this.image.getWidth()&&u>0&&u<this.image.getHeight()}isValidPoint(a){let u=Et.round(a.getX()),m=Et.round(a.getY());return this.isValid(u,m)}distancePoint(a,u){return Et.distance(a.getX(),a.getY(),u.getX(),u.getY())}distanceResultPoint(a,u){return Et.distance(a.getX(),a.getY(),u.getX(),u.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(T.truncDivision(this.nbLayers-4,8)+1)+15}}class Ai{decode(a,u=null){let m=null,x=new $i(a.getBlackMatrix()),v=null,b=null;try{let H=x.detectMirror(!1);v=H.getPoints(),this.reportFoundResultPoints(u,v),b=new Ht().decode(H)}catch(H){m=H}if(b==null)try{let H=x.detectMirror(!0);v=H.getPoints(),this.reportFoundResultPoints(u,v),b=new Ht().decode(H)}catch(H){throw m??H}let C=new De(b.getText(),b.getRawBytes(),b.getNumBits(),v,be.AZTEC,S.currentTimeMillis()),R=b.getByteSegments();R!=null&&C.putMetadata(Ze.BYTE_SEGMENTS,R);let O=b.getECLevel();return O!=null&&C.putMetadata(Ze.ERROR_CORRECTION_LEVEL,O),C}reportFoundResultPoints(a,u){if(a!=null){let m=a.get(z.NEED_RESULT_POINT_CALLBACK);m!=null&&u.forEach((x,v,b)=>{m.foundPossibleResultPoint(x)})}}reset(){}}class gc extends Oe{constructor(a=500){super(new Ai,a)}}class fn{decode(a,u){try{return this.doDecode(a,u)}catch{if(u&&u.get(z.TRY_HARDER)===!0&&a.isRotateSupported()){const v=a.rotateCounterClockwise(),b=this.doDecode(v,u),C=b.getResultMetadata();let R=270;C!==null&&C.get(Ze.ORIENTATION)===!0&&(R=R+C.get(Ze.ORIENTATION)%360),b.putMetadata(Ze.ORIENTATION,R);const O=b.getResultPoints();if(O!==null){const H=v.getHeight();for(let q=0;q<O.length;q++)O[q]=new $e(H-O[q].getY()-1,O[q].getX())}return b}else throw new re}}reset(){}doDecode(a,u){const m=a.getWidth(),x=a.getHeight();let v=new D(m);const b=u&&u.get(z.TRY_HARDER)===!0,C=Math.max(1,x>>(b?8:5));let R;b?R=x:R=15;const O=Math.trunc(x/2);for(let H=0;H<R;H++){const q=Math.trunc((H+1)/2),Y=(H&1)===0,te=O+C*(Y?q:-q);if(te<0||te>=x)break;try{v=a.getBlackRow(te,v)}catch{continue}for(let ae=0;ae<2;ae++){if(ae===1&&(v.reverse(),u&&u.get(z.NEED_RESULT_POINT_CALLBACK)===!0)){const le=new Map;u.forEach((me,ve)=>le.set(ve,me)),le.delete(z.NEED_RESULT_POINT_CALLBACK),u=le}try{const le=this.decodeRow(te,v,u);if(ae===1){le.putMetadata(Ze.ORIENTATION,180);const me=le.getResultPoints();me!==null&&(me[0]=new $e(m-me[0].getX()-1,me[0].getY()),me[1]=new $e(m-me[1].getX()-1,me[1].getY()))}return le}catch{}}}throw new re}static recordPattern(a,u,m){const x=m.length;for(let O=0;O<x;O++)m[O]=0;const v=a.getSize();if(u>=v)throw new re;let b=!a.get(u),C=0,R=u;for(;R<v;){if(a.get(R)!==b)m[C]++;else{if(++C===x)break;m[C]=1,b=!b}R++}if(!(C===x||C===x-1&&R===v))throw new re}static recordPatternInReverse(a,u,m){let x=m.length,v=a.get(u);for(;u>0&&x>=0;)a.get(--u)!==v&&(x--,v=!v);if(x>=0)throw new re;fn.recordPattern(a,u+1,m)}static patternMatchVariance(a,u,m){const x=a.length;let v=0,b=0;for(let O=0;O<x;O++)v+=a[O],b+=u[O];if(v<b)return Number.POSITIVE_INFINITY;const C=v/b;m*=C;let R=0;for(let O=0;O<x;O++){const H=a[O],q=u[O]*C,Y=H>q?H-q:q-H;if(Y>m)return Number.POSITIVE_INFINITY;R+=Y}return R/v}}class Me extends fn{static findStartPattern(a){const u=a.getSize(),m=a.getNextSet(0);let x=0,v=Int32Array.from([0,0,0,0,0,0]),b=m,C=!1;const R=6;for(let O=m;O<u;O++)if(a.get(O)!==C)v[x]++;else{if(x===R-1){let H=Me.MAX_AVG_VARIANCE,q=-1;for(let Y=Me.CODE_START_A;Y<=Me.CODE_START_C;Y++){const te=fn.patternMatchVariance(v,Me.CODE_PATTERNS[Y],Me.MAX_INDIVIDUAL_VARIANCE);te<H&&(H=te,q=Y)}if(q>=0&&a.isRange(Math.max(0,b-(O-b)/2),b,!1))return Int32Array.from([b,O,q]);b+=v[0]+v[1],v=v.slice(2,v.length-1),v[x-1]=0,v[x]=0,x--}else x++;v[x]=1,C=!C}throw new re}static decodeCode(a,u,m){fn.recordPattern(a,m,u);let x=Me.MAX_AVG_VARIANCE,v=-1;for(let b=0;b<Me.CODE_PATTERNS.length;b++){const C=Me.CODE_PATTERNS[b],R=this.patternMatchVariance(u,C,Me.MAX_INDIVIDUAL_VARIANCE);R<x&&(x=R,v=b)}if(v>=0)return v;throw new re}decodeRow(a,u,m){const x=m&&m.get(z.ASSUME_GS1)===!0,v=Me.findStartPattern(u),b=v[2];let C=0;const R=new Uint8Array(20);R[C++]=b;let O;switch(b){case Me.CODE_START_A:O=Me.CODE_CODE_A;break;case Me.CODE_START_B:O=Me.CODE_CODE_B;break;case Me.CODE_START_C:O=Me.CODE_CODE_C;break;default:throw new F}let H=!1,q=!1,Y="",te=v[0],ae=v[1];const le=Int32Array.from([0,0,0,0,0,0]);let me=0,ve=0,Ie=b,Re=0,Ne=!0,Bt=!1,wt=!1;for(;!H;){const Wo=q;switch(q=!1,me=ve,ve=Me.decodeCode(u,le,ae),R[C++]=ve,ve!==Me.CODE_STOP&&(Ne=!0),ve!==Me.CODE_STOP&&(Re++,Ie+=Re*ve),te=ae,ae+=le.reduce((vA,Qu)=>vA+Qu,0),ve){case Me.CODE_START_A:case Me.CODE_START_B:case Me.CODE_START_C:throw new F}switch(O){case Me.CODE_CODE_A:if(ve<64)wt===Bt?Y+=String.fromCharCode(32+ve):Y+=String.fromCharCode(32+ve+128),wt=!1;else if(ve<96)wt===Bt?Y+=String.fromCharCode(ve-64):Y+=String.fromCharCode(ve+64),wt=!1;else switch(ve!==Me.CODE_STOP&&(Ne=!1),ve){case Me.CODE_FNC_1:x&&(Y.length===0?Y+="]C1":Y+="");break;case Me.CODE_FNC_2:case Me.CODE_FNC_3:break;case Me.CODE_FNC_4_A:!Bt&&wt?(Bt=!0,wt=!1):Bt&&wt?(Bt=!1,wt=!1):wt=!0;break;case Me.CODE_SHIFT:q=!0,O=Me.CODE_CODE_B;break;case Me.CODE_CODE_B:O=Me.CODE_CODE_B;break;case Me.CODE_CODE_C:O=Me.CODE_CODE_C;break;case Me.CODE_STOP:H=!0;break}break;case Me.CODE_CODE_B:if(ve<96)wt===Bt?Y+=String.fromCharCode(32+ve):Y+=String.fromCharCode(32+ve+128),wt=!1;else switch(ve!==Me.CODE_STOP&&(Ne=!1),ve){case Me.CODE_FNC_1:x&&(Y.length===0?Y+="]C1":Y+="");break;case Me.CODE_FNC_2:case Me.CODE_FNC_3:break;case Me.CODE_FNC_4_B:!Bt&&wt?(Bt=!0,wt=!1):Bt&&wt?(Bt=!1,wt=!1):wt=!0;break;case Me.CODE_SHIFT:q=!0,O=Me.CODE_CODE_A;break;case Me.CODE_CODE_A:O=Me.CODE_CODE_A;break;case Me.CODE_CODE_C:O=Me.CODE_CODE_C;break;case Me.CODE_STOP:H=!0;break}break;case Me.CODE_CODE_C:if(ve<100)ve<10&&(Y+="0"),Y+=ve;else switch(ve!==Me.CODE_STOP&&(Ne=!1),ve){case Me.CODE_FNC_1:x&&(Y.length===0?Y+="]C1":Y+="");break;case Me.CODE_CODE_A:O=Me.CODE_CODE_A;break;case Me.CODE_CODE_B:O=Me.CODE_CODE_B;break;case Me.CODE_STOP:H=!0;break}break}Wo&&(O=O===Me.CODE_CODE_A?Me.CODE_CODE_B:Me.CODE_CODE_A)}const Yn=ae-te;if(ae=u.getNextUnset(ae),!u.isRange(ae,Math.min(u.getSize(),ae+(ae-te)/2),!1))throw new re;if(Ie-=Re*me,Ie%103!==me)throw new E;const Ls=Y.length;if(Ls===0)throw new re;Ls>0&&Ne&&(O===Me.CODE_CODE_C?Y=Y.substring(0,Ls-2):Y=Y.substring(0,Ls-1));const Bs=(v[1]+v[0])/2,un=te+Yn/2,Wr=R.length,Fs=new Uint8Array(Wr);for(let Wo=0;Wo<Wr;Wo++)Fs[Wo]=R[Wo];const Zu=[new $e(Bs,a),new $e(un,a)];return new De(Y,Fs,0,Zu,be.CODE_128,new Date().getTime())}}Me.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Me.MAX_AVG_VARIANCE=.25,Me.MAX_INDIVIDUAL_VARIANCE=.7,Me.CODE_SHIFT=98,Me.CODE_CODE_C=99,Me.CODE_CODE_B=100,Me.CODE_CODE_A=101,Me.CODE_FNC_1=102,Me.CODE_FNC_2=97,Me.CODE_FNC_3=96,Me.CODE_FNC_4_A=101,Me.CODE_FNC_4_B=100,Me.CODE_START_A=103,Me.CODE_START_B=104,Me.CODE_START_C=105,Me.CODE_STOP=106;class In extends fn{constructor(a=!1,u=!1){super(),this.usingCheckDigit=a,this.extendedMode=u,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,u,m){let x=this.counters;x.fill(0),this.decodeRowResult="";let v=In.findAsteriskPattern(u,x),b=u.getNextSet(v[1]),C=u.getSize(),R,O;do{In.recordPattern(u,b,x);let le=In.toNarrowWidePattern(x);if(le<0)throw new re;R=In.patternToChar(le),this.decodeRowResult+=R,O=b;for(let me of x)b+=me;b=u.getNextSet(b)}while(R!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let H=0;for(let le of x)H+=le;let q=b-O-H;if(b!==C&&q*2<H)throw new re;if(this.usingCheckDigit){let le=this.decodeRowResult.length-1,me=0;for(let ve=0;ve<le;ve++)me+=In.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ve));if(this.decodeRowResult.charAt(le)!==In.ALPHABET_STRING.charAt(me%43))throw new E;this.decodeRowResult=this.decodeRowResult.substring(0,le)}if(this.decodeRowResult.length===0)throw new re;let Y;this.extendedMode?Y=In.decodeExtended(this.decodeRowResult):Y=this.decodeRowResult;let te=(v[1]+v[0])/2,ae=O+H/2;return new De(Y,null,0,[new $e(te,a),new $e(ae,a)],be.CODE_39,new Date().getTime())}static findAsteriskPattern(a,u){let m=a.getSize(),x=a.getNextSet(0),v=0,b=x,C=!1,R=u.length;for(let O=x;O<m;O++)if(a.get(O)!==C)u[v]++;else{if(v===R-1){if(this.toNarrowWidePattern(u)===In.ASTERISK_ENCODING&&a.isRange(Math.max(0,b-Math.floor((O-b)/2)),b,!1))return[b,O];b+=u[0]+u[1],u.copyWithin(0,2,2+v-1),u[v-1]=0,u[v]=0,v--}else v++;u[v]=1,C=!C}throw new re}static toNarrowWidePattern(a){let u=a.length,m=0,x;do{let v=2147483647;for(let R of a)R<v&&R>m&&(v=R);m=v,x=0;let b=0,C=0;for(let R=0;R<u;R++){let O=a[R];O>m&&(C|=1<<u-1-R,x++,b+=O)}if(x===3){for(let R=0;R<u&&x>0;R++){let O=a[R];if(O>m&&(x--,O*2>=b))return-1}return C}}while(x>3);return-1}static patternToChar(a){for(let u=0;u<In.CHARACTER_ENCODINGS.length;u++)if(In.CHARACTER_ENCODINGS[u]===a)return In.ALPHABET_STRING.charAt(u);if(a===In.ASTERISK_ENCODING)return"*";throw new re}static decodeExtended(a){let u=a.length,m="";for(let x=0;x<u;x++){let v=a.charAt(x);if(v==="+"||v==="$"||v==="%"||v==="/"){let b=a.charAt(x+1),C="\0";switch(v){case"+":if(b>="A"&&b<="Z")C=String.fromCharCode(b.charCodeAt(0)+32);else throw new F;break;case"$":if(b>="A"&&b<="Z")C=String.fromCharCode(b.charCodeAt(0)-64);else throw new F;break;case"%":if(b>="A"&&b<="E")C=String.fromCharCode(b.charCodeAt(0)-38);else if(b>="F"&&b<="J")C=String.fromCharCode(b.charCodeAt(0)-11);else if(b>="K"&&b<="O")C=String.fromCharCode(b.charCodeAt(0)+16);else if(b>="P"&&b<="T")C=String.fromCharCode(b.charCodeAt(0)+43);else if(b==="U")C="\0";else if(b==="V")C="@";else if(b==="W")C="`";else if(b==="X"||b==="Y"||b==="Z")C="";else throw new F;break;case"/":if(b>="A"&&b<="O")C=String.fromCharCode(b.charCodeAt(0)-32);else if(b==="Z")C=":";else throw new F;break}m+=C,x++}else m+=v}return m}}In.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",In.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],In.ASTERISK_ENCODING=148;class ln extends fn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(a,u,m){let x=this.decodeStart(u),v=this.decodeEnd(u),b=new ce;ln.decodeMiddle(u,x[1],v[0],b);let C=b.toString(),R=null;m!=null&&(R=m.get(z.ALLOWED_LENGTHS)),R==null&&(R=ln.DEFAULT_ALLOWED_LENGTHS);let O=C.length,H=!1,q=0;for(let ae of R){if(O===ae){H=!0;break}ae>q&&(q=ae)}if(!H&&O>q&&(H=!0),!H)throw new F;const Y=[new $e(x[1],a),new $e(v[0],a)];return new De(C,null,0,Y,be.ITF,new Date().getTime())}static decodeMiddle(a,u,m,x){let v=new Int32Array(10),b=new Int32Array(5),C=new Int32Array(5);for(v.fill(0),b.fill(0),C.fill(0);u<m;){fn.recordPattern(a,u,v);for(let O=0;O<5;O++){let H=2*O;b[O]=v[H],C[O]=v[H+1]}let R=ln.decodeDigit(b);x.append(R.toString()),R=this.decodeDigit(C),x.append(R.toString()),v.forEach(function(O){u+=O})}}decodeStart(a){let u=ln.skipWhiteSpace(a),m=ln.findGuardPattern(a,u,ln.START_PATTERN);return this.narrowLineWidth=(m[1]-m[0])/4,this.validateQuietZone(a,m[0]),m}validateQuietZone(a,u){let m=this.narrowLineWidth*10;m=m<u?m:u;for(let x=u-1;m>0&&x>=0&&!a.get(x);x--)m--;if(m!==0)throw new re}static skipWhiteSpace(a){const u=a.getSize(),m=a.getNextSet(0);if(m===u)throw new re;return m}decodeEnd(a){a.reverse();try{let u=ln.skipWhiteSpace(a),m;try{m=ln.findGuardPattern(a,u,ln.END_PATTERN_REVERSED[0])}catch(v){v instanceof re&&(m=ln.findGuardPattern(a,u,ln.END_PATTERN_REVERSED[1]))}this.validateQuietZone(a,m[0]);let x=m[0];return m[0]=a.getSize()-m[1],m[1]=a.getSize()-x,m}finally{a.reverse()}}static findGuardPattern(a,u,m){let x=m.length,v=new Int32Array(x),b=a.getSize(),C=!1,R=0,O=u;v.fill(0);for(let H=u;H<b;H++)if(a.get(H)!==C)v[R]++;else{if(R===x-1){if(fn.patternMatchVariance(v,m,ln.MAX_INDIVIDUAL_VARIANCE)<ln.MAX_AVG_VARIANCE)return[O,H];O+=v[0]+v[1],S.arraycopy(v,2,v,0,R-1),v[R-1]=0,v[R]=0,R--}else R++;v[R]=1,C=!C}throw new re}static decodeDigit(a){let u=ln.MAX_AVG_VARIANCE,m=-1,x=ln.PATTERNS.length;for(let v=0;v<x;v++){let b=ln.PATTERNS[v],C=fn.patternMatchVariance(a,b,ln.MAX_INDIVIDUAL_VARIANCE);C<u?(u=C,m=v):C===u&&(m=-1)}if(m>=0)return m%10;throw new re}}ln.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ln.MAX_AVG_VARIANCE=.38,ln.MAX_INDIVIDUAL_VARIANCE=.5,ln.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ln.START_PATTERN=Int32Array.from([1,1,1,1]),ln.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class cn extends fn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(a){let u=!1,m,x=0,v=Int32Array.from([0,0,0]);for(;!u;){v=Int32Array.from([0,0,0]),m=cn.findGuardPattern(a,x,!1,this.START_END_PATTERN,v);let b=m[0];x=m[1];let C=b-(x-b);C>=0&&(u=a.isRange(C,b,!1))}return m}static checkChecksum(a){return cn.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let u=a.length;if(u===0)return!1;let m=parseInt(a.charAt(u-1),10);return cn.getStandardUPCEANChecksum(a.substring(0,u-1))===m}static getStandardUPCEANChecksum(a){let u=a.length,m=0;for(let x=u-1;x>=0;x-=2){let v=a.charAt(x).charCodeAt(0)-48;if(v<0||v>9)throw new F;m+=v}m*=3;for(let x=u-2;x>=0;x-=2){let v=a.charAt(x).charCodeAt(0)-48;if(v<0||v>9)throw new F;m+=v}return(1e3-m)%10}static decodeEnd(a,u){return cn.findGuardPattern(a,u,!1,cn.START_END_PATTERN,new Int32Array(cn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(a,u,m,x){return this.findGuardPattern(a,u,m,x,new Int32Array(x.length))}static findGuardPattern(a,u,m,x,v){let b=a.getSize();u=m?a.getNextUnset(u):a.getNextSet(u);let C=0,R=u,O=x.length,H=m;for(let q=u;q<b;q++)if(a.get(q)!==H)v[C]++;else{if(C===O-1){if(fn.patternMatchVariance(v,x,cn.MAX_INDIVIDUAL_VARIANCE)<cn.MAX_AVG_VARIANCE)return Int32Array.from([R,q]);R+=v[0]+v[1];let Y=v.slice(2,v.length-1);for(let te=0;te<C-1;te++)v[te]=Y[te];v[C-1]=0,v[C]=0,C--}else C++;v[C]=1,H=!H}throw new re}static decodeDigit(a,u,m,x){this.recordPattern(a,m,u);let v=this.MAX_AVG_VARIANCE,b=-1,C=x.length;for(let R=0;R<C;R++){let O=x[R],H=fn.patternMatchVariance(u,O,cn.MAX_INDIVIDUAL_VARIANCE);H<v&&(v=H,b=R)}if(b>=0)return b;throw new re}}cn.MAX_AVG_VARIANCE=.48,cn.MAX_INDIVIDUAL_VARIANCE=.7,cn.START_END_PATTERN=Int32Array.from([1,1,1]),cn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),cn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),cn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class xc{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,u,m){let x=this.decodeRowStringBuffer,v=this.decodeMiddle(u,m,x),b=x.toString(),C=xc.parseExtensionString(b),R=[new $e((m[0]+m[1])/2,a),new $e(v,a)],O=new De(b,null,0,R,be.UPC_EAN_EXTENSION,new Date().getTime());return C!=null&&O.putAllMetadata(C),O}decodeMiddle(a,u,m){let x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;let v=a.getSize(),b=u[1],C=0;for(let O=0;O<5&&b<v;O++){let H=cn.decodeDigit(a,x,b,cn.L_AND_G_PATTERNS);m+=String.fromCharCode(48+H%10);for(let q of x)b+=q;H>=10&&(C|=1<<4-O),O!==4&&(b=a.getNextSet(b),b=a.getNextUnset(b))}if(m.length!==5)throw new re;let R=this.determineCheckDigit(C);if(xc.extensionChecksum(m.toString())!==R)throw new re;return b}static extensionChecksum(a){let u=a.length,m=0;for(let x=u-2;x>=0;x-=2)m+=a.charAt(x).charCodeAt(0)-48;m*=3;for(let x=u-1;x>=0;x-=2)m+=a.charAt(x).charCodeAt(0)-48;return m*=3,m%10}determineCheckDigit(a){for(let u=0;u<10;u++)if(a===this.CHECK_DIGIT_ENCODINGS[u])return u;throw new re}static parseExtensionString(a){if(a.length!==5)return null;let u=xc.parseExtension5String(a);return u==null?null:new Map([[Ze.SUGGESTED_PRICE,u]])}static parseExtension5String(a){let u;switch(a.charAt(0)){case"0":u="";break;case"5":u="$";break;case"9":switch(a){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}u="";break;default:u="";break}let m=parseInt(a.substring(1)),x=(m/100).toString(),v=m%100,b=v<10?"0"+v:v.toString();return u+x+"."+b}}class tx{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,u,m){let x=this.decodeRowStringBuffer,v=this.decodeMiddle(u,m,x),b=x.toString(),C=tx.parseExtensionString(b),R=[new $e((m[0]+m[1])/2,a),new $e(v,a)],O=new De(b,null,0,R,be.UPC_EAN_EXTENSION,new Date().getTime());return C!=null&&O.putAllMetadata(C),O}decodeMiddle(a,u,m){let x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;let v=a.getSize(),b=u[1],C=0;for(let R=0;R<2&&b<v;R++){let O=cn.decodeDigit(a,x,b,cn.L_AND_G_PATTERNS);m+=String.fromCharCode(48+O%10);for(let H of x)b+=H;O>=10&&(C|=1<<1-R),R!==1&&(b=a.getNextSet(b),b=a.getNextUnset(b))}if(m.length!==2)throw new re;if(parseInt(m.toString())%4!==C)throw new re;return b}static parseExtensionString(a){return a.length!==2?null:new Map([[Ze.ISSUE_NUMBER,parseInt(a)]])}}class nx{static decodeRow(a,u,m){let x=cn.findGuardPattern(u,m,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new xc().decodeRow(a,u,x)}catch{return new tx().decodeRow(a,u,x)}}}nx.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class en extends cn{constructor(){super(),this.decodeRowStringBuffer="",en.L_AND_G_PATTERNS=en.L_PATTERNS.map(a=>Int32Array.from(a));for(let a=10;a<20;a++){let u=en.L_PATTERNS[a-10],m=new Int32Array(u.length);for(let x=0;x<u.length;x++)m[x]=u[u.length-x-1];en.L_AND_G_PATTERNS[a]=m}}decodeRow(a,u,m){let x=en.findStartGuardPattern(u),v=m==null?null:m.get(z.NEED_RESULT_POINT_CALLBACK);if(v!=null){const Ne=new $e((x[0]+x[1])/2,a);v.foundPossibleResultPoint(Ne)}let b=this.decodeMiddle(u,x,this.decodeRowStringBuffer),C=b.rowOffset,R=b.resultString;if(v!=null){const Ne=new $e(C,a);v.foundPossibleResultPoint(Ne)}let O=this.decodeEnd(u,C);if(v!=null){const Ne=new $e((O[0]+O[1])/2,a);v.foundPossibleResultPoint(Ne)}let H=O[1],q=H+(H-O[0]);if(q>=u.getSize()||!u.isRange(H,q,!1))throw new re;let Y=R.toString();if(Y.length<8)throw new F;if(!en.checkChecksum(Y))throw new E;let te=(x[1]+x[0])/2,ae=(O[1]+O[0])/2,le=this.getBarcodeFormat(),me=[new $e(te,a),new $e(ae,a)],ve=new De(Y,null,0,me,le,new Date().getTime()),Ie=0;try{let Ne=nx.decodeRow(a,u,O[1]);ve.putMetadata(Ze.UPC_EAN_EXTENSION,Ne.getText()),ve.putAllMetadata(Ne.getResultMetadata()),ve.addResultPoints(Ne.getResultPoints()),Ie=Ne.getText().length}catch{}let Re=m==null?null:m.get(z.ALLOWED_EAN_EXTENSIONS);if(Re!=null){let Ne=!1;for(let Bt in Re)if(Ie.toString()===Bt){Ne=!0;break}if(!Ne)throw new re}return ve}decodeEnd(a,u){return en.findGuardPattern(a,u,!1,en.START_END_PATTERN,new Int32Array(en.START_END_PATTERN.length).fill(0))}static checkChecksum(a){return en.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let u=a.length;if(u===0)return!1;let m=parseInt(a.charAt(u-1),10);return en.getStandardUPCEANChecksum(a.substring(0,u-1))===m}static getStandardUPCEANChecksum(a){let u=a.length,m=0;for(let x=u-1;x>=0;x-=2){let v=a.charAt(x).charCodeAt(0)-48;if(v<0||v>9)throw new F;m+=v}m*=3;for(let x=u-2;x>=0;x-=2){let v=a.charAt(x).charCodeAt(0)-48;if(v<0||v>9)throw new F;m+=v}return(1e3-m)%10}}class hl extends en{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,u,m){let x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;let v=a.getSize(),b=u[1],C=0;for(let O=0;O<6&&b<v;O++){let H=en.decodeDigit(a,x,b,en.L_AND_G_PATTERNS);m+=String.fromCharCode(48+H%10);for(let q of x)b+=q;H>=10&&(C|=1<<5-O)}m=hl.determineFirstDigit(m,C),b=en.findGuardPattern(a,b,!0,en.MIDDLE_PATTERN,new Int32Array(en.MIDDLE_PATTERN.length).fill(0))[1];for(let O=0;O<6&&b<v;O++){let H=en.decodeDigit(a,x,b,en.L_PATTERNS);m+=String.fromCharCode(48+H);for(let q of x)b+=q}return{rowOffset:b,resultString:m}}getBarcodeFormat(){return be.EAN_13}static determineFirstDigit(a,u){for(let m=0;m<10;m++)if(u===this.FIRST_DIGIT_ENCODINGS[m])return a=String.fromCharCode(48+m)+a,a;throw new re}}hl.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Tb extends en{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,u,m){const x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;let v=a.getSize(),b=u[1];for(let R=0;R<4&&b<v;R++){let O=en.decodeDigit(a,x,b,en.L_PATTERNS);m+=String.fromCharCode(48+O);for(let H of x)b+=H}b=en.findGuardPattern(a,b,!0,en.MIDDLE_PATTERN,new Int32Array(en.MIDDLE_PATTERN.length).fill(0))[1];for(let R=0;R<4&&b<v;R++){let O=en.decodeDigit(a,x,b,en.L_PATTERNS);m+=String.fromCharCode(48+O);for(let H of x)b+=H}return{rowOffset:b,resultString:m}}getBarcodeFormat(){return be.EAN_8}}class Pb extends en{constructor(){super(...arguments),this.ean13Reader=new hl}getBarcodeFormat(){return be.UPC_A}decode(a,u){return this.maybeReturnResult(this.ean13Reader.decode(a))}decodeRow(a,u,m){return this.maybeReturnResult(this.ean13Reader.decodeRow(a,u,m))}decodeMiddle(a,u,m){return this.ean13Reader.decodeMiddle(a,u,m)}maybeReturnResult(a){let u=a.getText();if(u.charAt(0)==="0"){let m=new De(u.substring(1),null,null,a.getResultPoints(),be.UPC_A);return a.getResultMetadata()!=null&&m.putAllMetadata(a.getResultMetadata()),m}else throw new re}reset(){this.ean13Reader.reset()}}class qi extends en{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(a,u,m){const x=this.decodeMiddleCounters.map(O=>O);x[0]=0,x[1]=0,x[2]=0,x[3]=0;const v=a.getSize();let b=u[1],C=0;for(let O=0;O<6&&b<v;O++){const H=qi.decodeDigit(a,x,b,qi.L_AND_G_PATTERNS);m+=String.fromCharCode(48+H%10);for(let q of x)b+=q;H>=10&&(C|=1<<5-O)}let R=qi.determineNumSysAndCheckDigit(m,C);return{rowOffset:b,resultString:R}}decodeEnd(a,u){return qi.findGuardPatternWithoutCounters(a,u,!0,qi.MIDDLE_END_PATTERN)}checkChecksum(a){return en.checkChecksum(qi.convertUPCEtoUPCA(a))}static determineNumSysAndCheckDigit(a,u){for(let m=0;m<=1;m++)for(let x=0;x<10;x++)if(u===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[m][x]){let v=String.fromCharCode(48+m),b=String.fromCharCode(48+x);return v+a+b}throw re.getNotFoundInstance()}getBarcodeFormat(){return be.UPC_E}static convertUPCEtoUPCA(a){const u=a.slice(1,7).split("").map(v=>v.charCodeAt(0)),m=new ce;m.append(a.charAt(0));let x=u[5];switch(x){case 0:case 1:case 2:m.appendChars(u,0,2),m.append(x),m.append("0000"),m.appendChars(u,2,3);break;case 3:m.appendChars(u,0,3),m.append("00000"),m.appendChars(u,3,2);break;case 4:m.appendChars(u,0,4),m.append("00000"),m.append(u[4]);break;default:m.appendChars(u,0,5),m.append("0000"),m.append(x);break}return a.length>=8&&m.append(a.charAt(7)),m.toString()}}qi.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),qi.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class rx extends fn{constructor(a){super();let u=a==null?null:a.get(z.POSSIBLE_FORMATS),m=[];r(u)?(m.push(new hl),m.push(new Pb),m.push(new Tb),m.push(new qi)):(u.indexOf(be.EAN_13)>-1&&m.push(new hl),u.indexOf(be.UPC_A)>-1&&m.push(new Pb),u.indexOf(be.EAN_8)>-1&&m.push(new Tb),u.indexOf(be.UPC_E)>-1&&m.push(new qi)),this.readers=m}decodeRow(a,u,m){for(let x of this.readers)try{const v=x.decodeRow(a,u,m),b=v.getBarcodeFormat()===be.EAN_13&&v.getText().charAt(0)==="0",C=m==null?null:m.get(z.POSSIBLE_FORMATS),R=C==null||C.includes(be.UPC_A);if(b&&R){const O=v.getRawBytes(),H=new De(v.getText().substring(1),O,O?O.length:null,v.getResultPoints(),be.UPC_A);return H.putAllMetadata(v.getResultMetadata()),H}return v}catch{}throw new re}reset(){for(let a of this.readers)a.reset()}}class es extends fn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,u){for(let m=0;m<u.length;m++)if(fn.patternMatchVariance(a,u[m],es.MAX_INDIVIDUAL_VARIANCE)<es.MAX_AVG_VARIANCE)return m;throw new re}static count(a){return Et.sum(new Int32Array(a))}static increment(a,u){let m=0,x=u[0];for(let v=1;v<a.length;v++)u[v]>x&&(x=u[v],m=v);a[m]++}static decrement(a,u){let m=0,x=u[0];for(let v=1;v<a.length;v++)u[v]<x&&(x=u[v],m=v);a[m]--}static isFinderPattern(a){let u=a[0]+a[1],m=u+a[2]+a[3],x=u/m;if(x>=es.MIN_FINDER_PATTERN_RATIO&&x<=es.MAX_FINDER_PATTERN_RATIO){let v=Number.MAX_SAFE_INTEGER,b=Number.MIN_SAFE_INTEGER;for(let C of a)C>b&&(b=C),C<v&&(v=C);return b<10*v}return!1}}es.MAX_AVG_VARIANCE=.2,es.MAX_INDIVIDUAL_VARIANCE=.45,es.MIN_FINDER_PATTERN_RATIO=9.5/12,es.MAX_FINDER_PATTERN_RATIO=12.5/14;class Hu{constructor(a,u){this.value=a,this.checksumPortion=u}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(a){if(!(a instanceof Hu))return!1;const u=a;return this.value===u.value&&this.checksumPortion===u.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Vu{constructor(a,u,m,x,v){this.value=a,this.startEnd=u,this.value=a,this.startEnd=u,this.resultPoints=new Array,this.resultPoints.push(new $e(m,v)),this.resultPoints.push(new $e(x,v))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(a){if(!(a instanceof Vu))return!1;const u=a;return this.value===u.value}hashCode(){return this.value}}class Lo{constructor(){}static getRSSvalue(a,u,m){let x=0;for(let R of a)x+=R;let v=0,b=0,C=a.length;for(let R=0;R<C-1;R++){let O;for(O=1,b|=1<<R;O<a[R];O++,b&=~(1<<R)){let H=Lo.combins(x-O-1,C-R-2);if(m&&b===0&&x-O-(C-R-1)>=C-R-1&&(H-=Lo.combins(x-O-(C-R),C-R-2)),C-R-1>1){let q=0;for(let Y=x-O-(C-R-2);Y>u;Y--)q+=Lo.combins(x-O-Y-1,C-R-3);H-=q*(C-1-R)}else x-O>u&&H--;v+=H}x-=O}return v}static combins(a,u){let m,x;a-u>u?(x=u,m=a-u):(x=a-u,m=u);let v=1,b=1;for(let C=a;C>m;C--)v*=C,b<=x&&(v/=b,b++);for(;b<=x;)v/=b,b++;return v}}class cA{static buildBitArray(a){let u=a.length*2-1;a[a.length-1].getRightChar()==null&&(u-=1);let m=12*u,x=new D(m),v=0,C=a[0].getRightChar().getValue();for(let R=11;R>=0;--R)C&1<<R&&x.set(v),v++;for(let R=1;R<a.length;++R){let O=a[R],H=O.getLeftChar().getValue();for(let q=11;q>=0;--q)H&1<<q&&x.set(v),v++;if(O.getRightChar()!=null){let q=O.getRightChar().getValue();for(let Y=11;Y>=0;--Y)q&1<<Y&&x.set(v),v++}}return x}}class vc{constructor(a,u){u?this.decodedInformation=null:(this.finished=a,this.decodedInformation=u)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class sx{constructor(a){this.newPosition=a}getNewPosition(){return this.newPosition}}class qn extends sx{constructor(a,u){super(a),this.value=u}getValue(){return this.value}isFNC1(){return this.value===qn.FNC1}}qn.FNC1="$";class Qe extends sx{constructor(a,u,m){super(a),m?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=u}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ti extends sx{constructor(a,u,m){if(super(a),u<0||u>10||m<0||m>10)throw new F;this.firstDigit=u,this.secondDigit=m}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ti.FNC1}isSecondDigitFNC1(){return this.secondDigit===ti.FNC1}isAnyFNC1(){return this.firstDigit===ti.FNC1||this.secondDigit===ti.FNC1}}ti.FNC1=10;class He{constructor(){}static parseFieldsInGeneralPurpose(a){if(!a)return null;if(a.length<2)throw new re;let u=a.substring(0,2);for(let v of He.TWO_DIGIT_DATA_LENGTH)if(v[0]===u)return v[1]===He.VARIABLE_LENGTH?He.processVariableAI(2,v[2],a):He.processFixedAI(2,v[1],a);if(a.length<3)throw new re;let m=a.substring(0,3);for(let v of He.THREE_DIGIT_DATA_LENGTH)if(v[0]===m)return v[1]===He.VARIABLE_LENGTH?He.processVariableAI(3,v[2],a):He.processFixedAI(3,v[1],a);for(let v of He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(v[0]===m)return v[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,v[2],a):He.processFixedAI(4,v[1],a);if(a.length<4)throw new re;let x=a.substring(0,4);for(let v of He.FOUR_DIGIT_DATA_LENGTH)if(v[0]===x)return v[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,v[2],a):He.processFixedAI(4,v[1],a);throw new re}static processFixedAI(a,u,m){if(m.length<a)throw new re;let x=m.substring(0,a);if(m.length<a+u)throw new re;let v=m.substring(a,a+u),b=m.substring(a+u),C="("+x+")"+v,R=He.parseFieldsInGeneralPurpose(b);return R==null?C:C+R}static processVariableAI(a,u,m){let x=m.substring(0,a),v;m.length<a+u?v=m.length:v=a+u;let b=m.substring(a,v),C=m.substring(v),R="("+x+")"+b,O=He.parseFieldsInGeneralPurpose(C);return O==null?R:R+O}}He.VARIABLE_LENGTH=[],He.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",He.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",He.VARIABLE_LENGTH,20],["22",He.VARIABLE_LENGTH,29],["30",He.VARIABLE_LENGTH,8],["37",He.VARIABLE_LENGTH,8],["90",He.VARIABLE_LENGTH,30],["91",He.VARIABLE_LENGTH,30],["92",He.VARIABLE_LENGTH,30],["93",He.VARIABLE_LENGTH,30],["94",He.VARIABLE_LENGTH,30],["95",He.VARIABLE_LENGTH,30],["96",He.VARIABLE_LENGTH,30],["97",He.VARIABLE_LENGTH,3],["98",He.VARIABLE_LENGTH,30],["99",He.VARIABLE_LENGTH,30]],He.THREE_DIGIT_DATA_LENGTH=[["240",He.VARIABLE_LENGTH,30],["241",He.VARIABLE_LENGTH,30],["242",He.VARIABLE_LENGTH,6],["250",He.VARIABLE_LENGTH,30],["251",He.VARIABLE_LENGTH,30],["253",He.VARIABLE_LENGTH,17],["254",He.VARIABLE_LENGTH,20],["400",He.VARIABLE_LENGTH,30],["401",He.VARIABLE_LENGTH,30],["402",17],["403",He.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",He.VARIABLE_LENGTH,20],["421",He.VARIABLE_LENGTH,15],["422",3],["423",He.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",He.VARIABLE_LENGTH,15],["391",He.VARIABLE_LENGTH,18],["392",He.VARIABLE_LENGTH,15],["393",He.VARIABLE_LENGTH,18],["703",He.VARIABLE_LENGTH,30]],He.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",He.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",He.VARIABLE_LENGTH,20],["8003",He.VARIABLE_LENGTH,30],["8004",He.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",He.VARIABLE_LENGTH,30],["8008",He.VARIABLE_LENGTH,12],["8018",18],["8020",He.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",He.VARIABLE_LENGTH,70],["8200",He.VARIABLE_LENGTH,70]];class yc{constructor(a){this.buffer=new ce,this.information=a}decodeAllCodes(a,u){let m=u,x=null;do{let v=this.decodeGeneralPurposeField(m,x),b=He.parseFieldsInGeneralPurpose(v.getNewString());if(b!=null&&a.append(b),v.isRemaining()?x=""+v.getRemainingValue():x=null,m===v.getNewPosition())break;m=v.getNewPosition()}while(!0);return a.toString()}isStillNumeric(a){if(a+7>this.information.getSize())return a+4<=this.information.getSize();for(let u=a;u<a+3;++u)if(this.information.get(u))return!0;return this.information.get(a+3)}decodeNumeric(a){if(a+7>this.information.getSize()){let v=this.extractNumericValueFromBitArray(a,4);return v===0?new ti(this.information.getSize(),ti.FNC1,ti.FNC1):new ti(this.information.getSize(),v-1,ti.FNC1)}let u=this.extractNumericValueFromBitArray(a,7),m=(u-8)/11,x=(u-8)%11;return new ti(a+7,m,x)}extractNumericValueFromBitArray(a,u){return yc.extractNumericValueFromBitArray(this.information,a,u)}static extractNumericValueFromBitArray(a,u,m){let x=0;for(let v=0;v<m;++v)a.get(u+v)&&(x|=1<<m-v-1);return x}decodeGeneralPurposeField(a,u){this.buffer.setLengthToZero(),u!=null&&this.buffer.append(u),this.current.setPosition(a);let m=this.parseBlocks();return m!=null&&m.isRemaining()?new Qe(this.current.getPosition(),this.buffer.toString(),m.getRemainingValue()):new Qe(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let a,u;do{let m=this.current.getPosition();if(this.current.isAlpha()?(u=this.parseAlphaBlock(),a=u.isFinished()):this.current.isIsoIec646()?(u=this.parseIsoIec646Block(),a=u.isFinished()):(u=this.parseNumericBlock(),a=u.isFinished()),!(m!==this.current.getPosition())&&!a)break}while(!a);return u.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let a=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFirstDigitFNC1()){let u;return a.isSecondDigitFNC1()?u=new Qe(this.current.getPosition(),this.buffer.toString()):u=new Qe(this.current.getPosition(),this.buffer.toString(),a.getSecondDigit()),new vc(!0,u)}if(this.buffer.append(a.getFirstDigit()),a.isSecondDigitFNC1()){let u=new Qe(this.current.getPosition(),this.buffer.toString());return new vc(!0,u)}this.buffer.append(a.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new vc(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let a=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let u=new Qe(this.current.getPosition(),this.buffer.toString());return new vc(!0,u)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new vc(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let a=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let u=new Qe(this.current.getPosition(),this.buffer.toString());return new vc(!0,u)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new vc(!1)}isStillIsoIec646(a){if(a+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(a,5);if(u>=5&&u<16)return!0;if(a+7>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(a,7);if(m>=64&&m<116)return!0;if(a+8>this.information.getSize())return!1;let x=this.extractNumericValueFromBitArray(a,8);return x>=232&&x<253}decodeIsoIec646(a){let u=this.extractNumericValueFromBitArray(a,5);if(u===15)return new qn(a+5,qn.FNC1);if(u>=5&&u<15)return new qn(a+5,"0"+(u-5));let m=this.extractNumericValueFromBitArray(a,7);if(m>=64&&m<90)return new qn(a+7,""+(m+1));if(m>=90&&m<116)return new qn(a+7,""+(m+7));let x=this.extractNumericValueFromBitArray(a,8),v;switch(x){case 232:v="!";break;case 233:v='"';break;case 234:v="%";break;case 235:v="&";break;case 236:v="'";break;case 237:v="(";break;case 238:v=")";break;case 239:v="*";break;case 240:v="+";break;case 241:v=",";break;case 242:v="-";break;case 243:v=".";break;case 244:v="/";break;case 245:v=":";break;case 246:v=";";break;case 247:v="<";break;case 248:v="=";break;case 249:v=">";break;case 250:v="?";break;case 251:v="_";break;case 252:v=" ";break;default:throw new F}return new qn(a+8,v)}isStillAlpha(a){if(a+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(a,5);if(u>=5&&u<16)return!0;if(a+6>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(a,6);return m>=16&&m<63}decodeAlphanumeric(a){let u=this.extractNumericValueFromBitArray(a,5);if(u===15)return new qn(a+5,qn.FNC1);if(u>=5&&u<15)return new qn(a+5,"0"+(u-5));let m=this.extractNumericValueFromBitArray(a,6);if(m>=32&&m<58)return new qn(a+6,""+(m+33));let x;switch(m){case 58:x="*";break;case 59:x=",";break;case 60:x="-";break;case 61:x=".";break;case 62:x="/";break;default:throw new gr("Decoding invalid alphanumeric value: "+m)}return new qn(a+6,x)}isAlphaTo646ToAlphaLatch(a){if(a+1>this.information.getSize())return!1;for(let u=0;u<5&&u+a<this.information.getSize();++u)if(u===2){if(!this.information.get(a+2))return!1}else if(this.information.get(a+u))return!1;return!0}isAlphaOr646ToNumericLatch(a){if(a+3>this.information.getSize())return!1;for(let u=a;u<a+3;++u)if(this.information.get(u))return!1;return!0}isNumericToAlphaNumericLatch(a){if(a+1>this.information.getSize())return!1;for(let u=0;u<4&&u+a<this.information.getSize();++u)if(this.information.get(a+u))return!1;return!0}}class Sp{constructor(a){this.information=a,this.generalDecoder=new yc(a)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class ts extends Sp{constructor(a){super(a)}encodeCompressedGtin(a,u){a.append("(01)");let m=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,u,m)}encodeCompressedGtinWithoutAI(a,u,m){for(let x=0;x<4;++x){let v=this.getGeneralDecoder().extractNumericValueFromBitArray(u+10*x,10);v/100===0&&a.append("0"),v/10===0&&a.append("0"),a.append(v)}ts.appendCheckDigit(a,m)}static appendCheckDigit(a,u){let m=0;for(let x=0;x<13;x++){let v=a.charAt(x+u).charCodeAt(0)-48;m+=x&1?v:3*v}m=10-m%10,m===10&&(m=0),a.append(m)}}ts.GTIN_SIZE=40;class wc extends ts{constructor(a){super(a)}parseInformation(){let a=new ce;a.append("(01)");let u=a.length(),m=this.getGeneralDecoder().extractNumericValueFromBitArray(wc.HEADER_SIZE,4);return a.append(m),this.encodeCompressedGtinWithoutAI(a,wc.HEADER_SIZE+4,u),this.getGeneralDecoder().decodeAllCodes(a,wc.HEADER_SIZE+44)}}wc.HEADER_SIZE=4;class wa extends Sp{constructor(a){super(a)}parseInformation(){let a=new ce;return this.getGeneralDecoder().decodeAllCodes(a,wa.HEADER_SIZE)}}wa.HEADER_SIZE=5;class tf extends ts{constructor(a){super(a)}encodeCompressedWeight(a,u,m){let x=this.getGeneralDecoder().extractNumericValueFromBitArray(u,m);this.addWeightCode(a,x);let v=this.checkWeight(x),b=1e5;for(let C=0;C<5;++C)v/b===0&&a.append("0"),b/=10;a.append(v)}}class Bo extends tf{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=Bo.HEADER_SIZE+tf.GTIN_SIZE+Bo.WEIGHT_SIZE)throw new re;let a=new ce;return this.encodeCompressedGtin(a,Bo.HEADER_SIZE),this.encodeCompressedWeight(a,Bo.HEADER_SIZE+tf.GTIN_SIZE,Bo.WEIGHT_SIZE),a.toString()}}Bo.HEADER_SIZE=5,Bo.WEIGHT_SIZE=15;class uA extends Bo{constructor(a){super(a)}addWeightCode(a,u){a.append("(3103)")}checkWeight(a){return a}}class dA extends Bo{constructor(a){super(a)}addWeightCode(a,u){u<1e4?a.append("(3202)"):a.append("(3203)")}checkWeight(a){return a<1e4?a:a-1e4}}class Fo extends ts{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<Fo.HEADER_SIZE+ts.GTIN_SIZE)throw new re;let a=new ce;this.encodeCompressedGtin(a,Fo.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(Fo.HEADER_SIZE+ts.GTIN_SIZE,Fo.LAST_DIGIT_SIZE);a.append("(392"),a.append(u),a.append(")");let m=this.getGeneralDecoder().decodeGeneralPurposeField(Fo.HEADER_SIZE+ts.GTIN_SIZE+Fo.LAST_DIGIT_SIZE,null);return a.append(m.getNewString()),a.toString()}}Fo.HEADER_SIZE=8,Fo.LAST_DIGIT_SIZE=2;class ns extends ts{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<ns.HEADER_SIZE+ts.GTIN_SIZE)throw new re;let a=new ce;this.encodeCompressedGtin(a,ns.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(ns.HEADER_SIZE+ts.GTIN_SIZE,ns.LAST_DIGIT_SIZE);a.append("(393"),a.append(u),a.append(")");let m=this.getGeneralDecoder().extractNumericValueFromBitArray(ns.HEADER_SIZE+ts.GTIN_SIZE+ns.LAST_DIGIT_SIZE,ns.FIRST_THREE_DIGITS_SIZE);m/100==0&&a.append("0"),m/10==0&&a.append("0"),a.append(m);let x=this.getGeneralDecoder().decodeGeneralPurposeField(ns.HEADER_SIZE+ts.GTIN_SIZE+ns.LAST_DIGIT_SIZE+ns.FIRST_THREE_DIGITS_SIZE,null);return a.append(x.getNewString()),a.toString()}}ns.HEADER_SIZE=8,ns.LAST_DIGIT_SIZE=2,ns.FIRST_THREE_DIGITS_SIZE=10;class Ln extends tf{constructor(a,u,m){super(a),this.dateCode=m,this.firstAIdigits=u}parseInformation(){if(this.getInformation().getSize()!=Ln.HEADER_SIZE+Ln.GTIN_SIZE+Ln.WEIGHT_SIZE+Ln.DATE_SIZE)throw new re;let a=new ce;return this.encodeCompressedGtin(a,Ln.HEADER_SIZE),this.encodeCompressedWeight(a,Ln.HEADER_SIZE+Ln.GTIN_SIZE,Ln.WEIGHT_SIZE),this.encodeCompressedDate(a,Ln.HEADER_SIZE+Ln.GTIN_SIZE+Ln.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,u){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(u,Ln.DATE_SIZE);if(m==38400)return;a.append("("),a.append(this.dateCode),a.append(")");let x=m%32;m/=32;let v=m%12+1;m/=12;let b=m;b/10==0&&a.append("0"),a.append(b),v/10==0&&a.append("0"),a.append(v),x/10==0&&a.append("0"),a.append(x)}addWeightCode(a,u){a.append("("),a.append(this.firstAIdigits),a.append(u/1e5),a.append(")")}checkWeight(a){return a%1e5}}Ln.HEADER_SIZE=8,Ln.WEIGHT_SIZE=20,Ln.DATE_SIZE=16;function nf($){try{if($.get(1))return new wc($);if(!$.get(2))return new wa($);switch(yc.extractNumericValueFromBitArray($,1,4)){case 4:return new uA($);case 5:return new dA($)}switch(yc.extractNumericValueFromBitArray($,1,5)){case 12:return new Fo($);case 13:return new ns($)}switch(yc.extractNumericValueFromBitArray($,1,7)){case 56:return new Ln($,"310","11");case 57:return new Ln($,"320","11");case 58:return new Ln($,"310","13");case 59:return new Ln($,"320","13");case 60:return new Ln($,"310","15");case 61:return new Ln($,"320","15");case 62:return new Ln($,"310","17");case 63:return new Ln($,"320","17")}}catch(a){throw console.log(a),new gr("unknown decoder: "+$)}}class fl{constructor(a,u,m,x){this.leftchar=a,this.rightchar=u,this.finderpattern=m,this.maybeLast=x}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(a,u){return a instanceof fl?fl.equalsOrNull(a.leftchar,u.leftchar)&&fl.equalsOrNull(a.rightchar,u.rightchar)&&fl.equalsOrNull(a.finderpattern,u.finderpattern):!1}static equalsOrNull(a,u){return a===null?u===null:fl.equals(a,u)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class ix{constructor(a,u,m){this.pairs=a,this.rowNumber=u,this.wasReversed=m}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(a){return this.checkEqualitity(this,a)}toString(){return"{ "+this.pairs+" }"}equals(a,u){return a instanceof ix?this.checkEqualitity(a,u)&&a.wasReversed===u.wasReversed:!1}checkEqualitity(a,u){if(!a||!u)return;let m;return a.forEach((x,v)=>{u.forEach(b=>{x.getLeftChar().getValue()===b.getLeftChar().getValue()&&x.getRightChar().getValue()===b.getRightChar().getValue()&&x.getFinderPatter().getValue()===b.getFinderPatter().getValue()&&(m=!0)})}),m}}class Ae extends es{constructor(a){super(...arguments),this.pairs=new Array(Ae.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=a===!0}decodeRow(a,u,m){this.pairs.length=0,this.startFromEven=!1;try{return Ae.constructResult(this.decodeRow2pairs(a,u))}catch(x){this.verbose&&console.log(x)}return this.pairs.length=0,this.startFromEven=!0,Ae.constructResult(this.decodeRow2pairs(a,u))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(a,u){let m=!1;for(;!m;)try{this.pairs.push(this.retrieveNextPair(u,this.pairs,a))}catch(v){if(v instanceof re){if(!this.pairs.length)throw new re;m=!0}}if(this.checkChecksum())return this.pairs;let x;if(this.rows.length?x=!0:x=!1,this.storeRow(a,!1),x){let v=this.checkRowsBoolean(!1);if(v!=null||(v=this.checkRowsBoolean(!0),v!=null))return v}throw new re}checkRowsBoolean(a){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,a&&(this.rows=this.rows.reverse());let u=null;try{u=this.checkRows(new Array,0)}catch(m){this.verbose&&console.log(m)}return a&&(this.rows=this.rows.reverse()),u}checkRows(a,u){for(let m=u;m<this.rows.length;m++){let x=this.rows[m];this.pairs.length=0;for(let b of a)this.pairs.push(b.getPairs());if(this.pairs.push(x.getPairs()),!Ae.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let v=new Array(a);v.push(x);try{return this.checkRows(v,m+1)}catch(b){this.verbose&&console.log(b)}}throw new re}static isValidSequence(a){for(let u of Ae.FINDER_PATTERN_SEQUENCES){if(a.length>u.length)continue;let m=!0;for(let x=0;x<a.length;x++)if(a[x].getFinderPattern().getValue()!=u[x]){m=!1;break}if(m)return!0}return!1}storeRow(a,u){let m=0,x=!1,v=!1;for(;m<this.rows.length;){let b=this.rows[m];if(b.getRowNumber()>a){v=b.isEquivalent(this.pairs);break}x=b.isEquivalent(this.pairs),m++}v||x||Ae.isPartialRow(this.pairs,this.rows)||(this.rows.push(m,new ix(this.pairs,a,u)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(a,u){for(let m of u)if(m.getPairs().length!==a.length){for(let x of m.getPairs())for(let v of a)if(fl.equals(x,v))break}}static isPartialRow(a,u){for(let m of u){let x=!0;for(let v of a){let b=!1;for(let C of m.getPairs())if(v.equals(C)){b=!0;break}if(!b){x=!1;break}}if(x)return!0}return!1}getRows(){return this.rows}static constructResult(a){let u=cA.buildBitArray(a),x=nf(u).parseInformation(),v=a[0].getFinderPattern().getResultPoints(),b=a[a.length-1].getFinderPattern().getResultPoints(),C=[v[0],v[1],b[0],b[1]];return new De(x,null,null,C,be.RSS_EXPANDED,null)}checkChecksum(){let a=this.pairs.get(0),u=a.getLeftChar(),m=a.getRightChar();if(m==null)return!1;let x=m.getChecksumPortion(),v=2;for(let C=1;C<this.pairs.size();++C){let R=this.pairs.get(C);x+=R.getLeftChar().getChecksumPortion(),v++;let O=R.getRightChar();O!=null&&(x+=O.getChecksumPortion(),v++)}return x%=211,211*(v-4)+x==u.getValue()}static getNextSecondBar(a,u){let m;return a.get(u)?(m=a.getNextUnset(u),m=a.getNextSet(m)):(m=a.getNextSet(u),m=a.getNextUnset(m)),m}retrieveNextPair(a,u,m){let x=u.length%2==0;this.startFromEven&&(x=!x);let v,b=!0,C=-1;do this.findNextPair(a,u,C),v=this.parseFoundFinderPattern(a,m,x),v==null?C=Ae.getNextSecondBar(a,this.startEnd[0]):b=!1;while(b);let R=this.decodeDataCharacter(a,v,x,!0);if(!this.isEmptyPair(u)&&u[u.length-1].mustBeLast())throw new re;let O;try{O=this.decodeDataCharacter(a,v,x,!1)}catch(H){O=null,this.verbose&&console.log(H)}return new fl(R,O,v,!0)}isEmptyPair(a){return a.length===0}findNextPair(a,u,m){let x=this.getDecodeFinderCounters();x[0]=0,x[1]=0,x[2]=0,x[3]=0;let v=a.getSize(),b;m>=0?b=m:this.isEmptyPair(u)?b=0:b=u[u.length-1].getFinderPattern().getStartEnd()[1];let C=u.length%2!=0;this.startFromEven&&(C=!C);let R=!1;for(;b<v&&(R=!a.get(b),!!R);)b++;let O=0,H=b;for(let q=b;q<v;q++)if(a.get(q)!=R)x[O]++;else{if(O==3){if(C&&Ae.reverseCounters(x),Ae.isFinderPattern(x)){this.startEnd[0]=H,this.startEnd[1]=q;return}C&&Ae.reverseCounters(x),H+=x[0]+x[1],x[0]=x[2],x[1]=x[3],x[2]=0,x[3]=0,O--}else O++;x[O]=1,R=!R}throw new re}static reverseCounters(a){let u=a.length;for(let m=0;m<u/2;++m){let x=a[m];a[m]=a[u-m-1],a[u-m-1]=x}}parseFoundFinderPattern(a,u,m){let x,v,b;if(m){let O=this.startEnd[0]-1;for(;O>=0&&!a.get(O);)O--;O++,x=this.startEnd[0]-O,v=O,b=this.startEnd[1]}else v=this.startEnd[0],b=a.getNextUnset(this.startEnd[1]+1),x=b-this.startEnd[1];let C=this.getDecodeFinderCounters();S.arraycopy(C,0,C,1,C.length-1),C[0]=x;let R;try{R=this.parseFinderValue(C,Ae.FINDER_PATTERNS)}catch{return null}return new Vu(R,[v,b],v,b,u)}decodeDataCharacter(a,u,m,x){let v=this.getDataCharacterCounters();for(let un=0;un<v.length;un++)v[un]=0;if(x)Ae.recordPatternInReverse(a,u.getStartEnd()[0],v);else{Ae.recordPattern(a,u.getStartEnd()[1],v);for(let un=0,Wr=v.length-1;un<Wr;un++,Wr--){let Fs=v[un];v[un]=v[Wr],v[Wr]=Fs}}let b=17,C=Et.sum(new Int32Array(v))/b,R=(u.getStartEnd()[1]-u.getStartEnd()[0])/15;if(Math.abs(C-R)/R>.3)throw new re;let O=this.getOddCounts(),H=this.getEvenCounts(),q=this.getOddRoundingErrors(),Y=this.getEvenRoundingErrors();for(let un=0;un<v.length;un++){let Wr=1*v[un]/C,Fs=Wr+.5;if(Fs<1){if(Wr<.3)throw new re;Fs=1}else if(Fs>8){if(Wr>8.7)throw new re;Fs=8}let Zu=un/2;un&1?(H[Zu]=Fs,Y[Zu]=Wr-Fs):(O[Zu]=Fs,q[Zu]=Wr-Fs)}this.adjustOddEvenCounts(b);let te=4*u.getValue()+(m?0:2)+(x?0:1)-1,ae=0,le=0;for(let un=O.length-1;un>=0;un--){if(Ae.isNotA1left(u,m,x)){let Wr=Ae.WEIGHTS[te][2*un];le+=O[un]*Wr}ae+=O[un]}let me=0;for(let un=H.length-1;un>=0;un--)if(Ae.isNotA1left(u,m,x)){let Wr=Ae.WEIGHTS[te][2*un+1];me+=H[un]*Wr}let ve=le+me;if(ae&1||ae>13||ae<4)throw new re;let Ie=(13-ae)/2,Re=Ae.SYMBOL_WIDEST[Ie],Ne=9-Re,Bt=Lo.getRSSvalue(O,Re,!0),wt=Lo.getRSSvalue(H,Ne,!1),Yn=Ae.EVEN_TOTAL_SUBSET[Ie],Ls=Ae.GSUM[Ie],Bs=Bt*Yn+wt+Ls;return new Hu(Bs,ve)}static isNotA1left(a,u,m){return!(a.getValue()==0&&u&&m)}adjustOddEvenCounts(a){let u=Et.sum(new Int32Array(this.getOddCounts())),m=Et.sum(new Int32Array(this.getEvenCounts())),x=!1,v=!1;u>13?v=!0:u<4&&(x=!0);let b=!1,C=!1;m>13?C=!0:m<4&&(b=!0);let R=u+m-a,O=(u&1)==1,H=(m&1)==0;if(R==1)if(O){if(H)throw new re;v=!0}else{if(!H)throw new re;C=!0}else if(R==-1)if(O){if(H)throw new re;x=!0}else{if(!H)throw new re;b=!0}else if(R==0){if(O){if(!H)throw new re;u<m?(x=!0,C=!0):(v=!0,b=!0)}else if(H)throw new re}else throw new re;if(x){if(v)throw new re;Ae.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(v&&Ae.decrement(this.getOddCounts(),this.getOddRoundingErrors()),b){if(C)throw new re;Ae.increment(this.getEvenCounts(),this.getOddRoundingErrors())}C&&Ae.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ae.SYMBOL_WIDEST=[7,5,4,3,1],Ae.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ae.GSUM=[0,348,1388,2948,3988],Ae.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ae.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ae.FINDER_PAT_A=0,Ae.FINDER_PAT_B=1,Ae.FINDER_PAT_C=2,Ae.FINDER_PAT_D=3,Ae.FINDER_PAT_E=4,Ae.FINDER_PAT_F=5,Ae.FINDER_PATTERN_SEQUENCES=[[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_C,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_C],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_E],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F]],Ae.MAX_PAIRS=11;class hA extends Hu{constructor(a,u,m){super(a,u),this.count=0,this.finderPattern=m}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class tr extends es{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(a,u,m){const x=this.decodePair(u,!1,a,m);tr.addOrTally(this.possibleLeftPairs,x),u.reverse();let v=this.decodePair(u,!0,a,m);tr.addOrTally(this.possibleRightPairs,v),u.reverse();for(let b of this.possibleLeftPairs)if(b.getCount()>1){for(let C of this.possibleRightPairs)if(C.getCount()>1&&tr.checkChecksum(b,C))return tr.constructResult(b,C)}throw new re}static addOrTally(a,u){if(u==null)return;let m=!1;for(let x of a)if(x.getValue()===u.getValue()){x.incrementCount(),m=!0;break}m||a.push(u)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(a,u){let m=4537077*a.getValue()+u.getValue(),x=new String(m).toString(),v=new ce;for(let O=13-x.length;O>0;O--)v.append("0");v.append(x);let b=0;for(let O=0;O<13;O++){let H=v.charAt(O).charCodeAt(0)-48;b+=O&1?H:3*H}b=10-b%10,b===10&&(b=0),v.append(b.toString());let C=a.getFinderPattern().getResultPoints(),R=u.getFinderPattern().getResultPoints();return new De(v.toString(),null,0,[C[0],C[1],R[0],R[1]],be.RSS_14,new Date().getTime())}static checkChecksum(a,u){let m=(a.getChecksumPortion()+16*u.getChecksumPortion())%79,x=9*a.getFinderPattern().getValue()+u.getFinderPattern().getValue();return x>72&&x--,x>8&&x--,m===x}decodePair(a,u,m,x){try{let v=this.findFinderPattern(a,u),b=this.parseFoundFinderPattern(a,m,u,v),C=x==null?null:x.get(z.NEED_RESULT_POINT_CALLBACK);if(C!=null){let H=(v[0]+v[1])/2;u&&(H=a.getSize()-1-H),C.foundPossibleResultPoint(new $e(H,m))}let R=this.decodeDataCharacter(a,b,!0),O=this.decodeDataCharacter(a,b,!1);return new hA(1597*R.getValue()+O.getValue(),R.getChecksumPortion()+4*O.getChecksumPortion(),b)}catch{return null}}decodeDataCharacter(a,u,m){let x=this.getDataCharacterCounters();for(let me=0;me<x.length;me++)x[me]=0;if(m)fn.recordPatternInReverse(a,u.getStartEnd()[0],x);else{fn.recordPattern(a,u.getStartEnd()[1]+1,x);for(let me=0,ve=x.length-1;me<ve;me++,ve--){let Ie=x[me];x[me]=x[ve],x[ve]=Ie}}let v=m?16:15,b=Et.sum(new Int32Array(x))/v,C=this.getOddCounts(),R=this.getEvenCounts(),O=this.getOddRoundingErrors(),H=this.getEvenRoundingErrors();for(let me=0;me<x.length;me++){let ve=x[me]/b,Ie=Math.floor(ve+.5);Ie<1?Ie=1:Ie>8&&(Ie=8);let Re=Math.floor(me/2);me&1?(R[Re]=Ie,H[Re]=ve-Ie):(C[Re]=Ie,O[Re]=ve-Ie)}this.adjustOddEvenCounts(m,v);let q=0,Y=0;for(let me=C.length-1;me>=0;me--)Y*=9,Y+=C[me],q+=C[me];let te=0,ae=0;for(let me=R.length-1;me>=0;me--)te*=9,te+=R[me],ae+=R[me];let le=Y+3*te;if(m){if(q&1||q>12||q<4)throw new re;let me=(12-q)/2,ve=tr.OUTSIDE_ODD_WIDEST[me],Ie=9-ve,Re=Lo.getRSSvalue(C,ve,!1),Ne=Lo.getRSSvalue(R,Ie,!0),Bt=tr.OUTSIDE_EVEN_TOTAL_SUBSET[me],wt=tr.OUTSIDE_GSUM[me];return new Hu(Re*Bt+Ne+wt,le)}else{if(ae&1||ae>10||ae<4)throw new re;let me=(10-ae)/2,ve=tr.INSIDE_ODD_WIDEST[me],Ie=9-ve,Re=Lo.getRSSvalue(C,ve,!0),Ne=Lo.getRSSvalue(R,Ie,!1),Bt=tr.INSIDE_ODD_TOTAL_SUBSET[me],wt=tr.INSIDE_GSUM[me];return new Hu(Ne*Bt+Re+wt,le)}}findFinderPattern(a,u){let m=this.getDecodeFinderCounters();m[0]=0,m[1]=0,m[2]=0,m[3]=0;let x=a.getSize(),v=!1,b=0;for(;b<x&&(v=!a.get(b),u!==v);)b++;let C=0,R=b;for(let O=b;O<x;O++)if(a.get(O)!==v)m[C]++;else{if(C===3){if(es.isFinderPattern(m))return[R,O];R+=m[0]+m[1],m[0]=m[2],m[1]=m[3],m[2]=0,m[3]=0,C--}else C++;m[C]=1,v=!v}throw new re}parseFoundFinderPattern(a,u,m,x){let v=a.get(x[0]),b=x[0]-1;for(;b>=0&&v!==a.get(b);)b--;b++;const C=x[0]-b,R=this.getDecodeFinderCounters(),O=new Int32Array(R.length);S.arraycopy(R,0,O,1,R.length-1),O[0]=C;const H=this.parseFinderValue(O,tr.FINDER_PATTERNS);let q=b,Y=x[1];return m&&(q=a.getSize()-1-q,Y=a.getSize()-1-Y),new Vu(H,[b,x[1]],q,Y,u)}adjustOddEvenCounts(a,u){let m=Et.sum(new Int32Array(this.getOddCounts())),x=Et.sum(new Int32Array(this.getEvenCounts())),v=!1,b=!1,C=!1,R=!1;a?(m>12?b=!0:m<4&&(v=!0),x>12?R=!0:x<4&&(C=!0)):(m>11?b=!0:m<5&&(v=!0),x>10?R=!0:x<4&&(C=!0));let O=m+x-u,H=(m&1)===(a?1:0),q=(x&1)===1;if(O===1)if(H){if(q)throw new re;b=!0}else{if(!q)throw new re;R=!0}else if(O===-1)if(H){if(q)throw new re;v=!0}else{if(!q)throw new re;C=!0}else if(O===0){if(H){if(!q)throw new re;m<x?(v=!0,R=!0):(b=!0,C=!0)}else if(q)throw new re}else throw new re;if(v){if(b)throw new re;es.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(b&&es.decrement(this.getOddCounts(),this.getOddRoundingErrors()),C){if(R)throw new re;es.increment(this.getEvenCounts(),this.getOddRoundingErrors())}R&&es.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}tr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],tr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],tr.OUTSIDE_GSUM=[0,161,961,2015,2715],tr.INSIDE_GSUM=[0,336,1036,1516],tr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],tr.INSIDE_ODD_WIDEST=[2,4,6,8],tr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ml extends fn{constructor(a,u){super(),this.readers=[],this.verbose=u===!0;const m=a?a.get(z.POSSIBLE_FORMATS):null,x=a&&a.get(z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;m?((m.includes(be.EAN_13)||m.includes(be.UPC_A)||m.includes(be.EAN_8)||m.includes(be.UPC_E))&&this.readers.push(new rx(a)),m.includes(be.CODE_39)&&this.readers.push(new In(x)),m.includes(be.CODE_128)&&this.readers.push(new Me),m.includes(be.ITF)&&this.readers.push(new ln),m.includes(be.RSS_14)&&this.readers.push(new tr),m.includes(be.RSS_EXPANDED)&&this.readers.push(new Ae(this.verbose))):(this.readers.push(new rx(a)),this.readers.push(new In),this.readers.push(new rx(a)),this.readers.push(new Me),this.readers.push(new ln),this.readers.push(new tr),this.readers.push(new Ae(this.verbose)))}decodeRow(a,u,m){for(let x=0;x<this.readers.length;x++)try{return this.readers[x].decodeRow(a,u,m)}catch{}throw new re}reset(){this.readers.forEach(a=>a.reset())}}class rf extends Oe{constructor(a=500,u){super(new ml(u),a,u)}}class rn{constructor(a,u,m){this.ecCodewords=a,this.ecBlocks=[u],m&&this.ecBlocks.push(m)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class tn{constructor(a,u){this.count=a,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Rt{constructor(a,u,m,x,v,b){this.versionNumber=a,this.symbolSizeRows=u,this.symbolSizeColumns=m,this.dataRegionSizeRows=x,this.dataRegionSizeColumns=v,this.ecBlocks=b;let C=0;const R=b.getECCodewords(),O=b.getECBlocks();for(let H of O)C+=H.getCount()*(H.getDataCodewords()+R);this.totalCodewords=C}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(a,u){if(a&1||u&1)throw new F;for(let m of Rt.VERSIONS)if(m.symbolSizeRows===a&&m.symbolSizeColumns===u)return m;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new Rt(1,10,10,8,8,new rn(5,new tn(1,3))),new Rt(2,12,12,10,10,new rn(7,new tn(1,5))),new Rt(3,14,14,12,12,new rn(10,new tn(1,8))),new Rt(4,16,16,14,14,new rn(12,new tn(1,12))),new Rt(5,18,18,16,16,new rn(14,new tn(1,18))),new Rt(6,20,20,18,18,new rn(18,new tn(1,22))),new Rt(7,22,22,20,20,new rn(20,new tn(1,30))),new Rt(8,24,24,22,22,new rn(24,new tn(1,36))),new Rt(9,26,26,24,24,new rn(28,new tn(1,44))),new Rt(10,32,32,14,14,new rn(36,new tn(1,62))),new Rt(11,36,36,16,16,new rn(42,new tn(1,86))),new Rt(12,40,40,18,18,new rn(48,new tn(1,114))),new Rt(13,44,44,20,20,new rn(56,new tn(1,144))),new Rt(14,48,48,22,22,new rn(68,new tn(1,174))),new Rt(15,52,52,24,24,new rn(42,new tn(2,102))),new Rt(16,64,64,14,14,new rn(56,new tn(2,140))),new Rt(17,72,72,16,16,new rn(36,new tn(4,92))),new Rt(18,80,80,18,18,new rn(48,new tn(4,114))),new Rt(19,88,88,20,20,new rn(56,new tn(4,144))),new Rt(20,96,96,22,22,new rn(68,new tn(4,174))),new Rt(21,104,104,24,24,new rn(56,new tn(6,136))),new Rt(22,120,120,18,18,new rn(68,new tn(6,175))),new Rt(23,132,132,20,20,new rn(62,new tn(8,163))),new Rt(24,144,144,22,22,new rn(62,new tn(8,156),new tn(2,155))),new Rt(25,8,18,6,16,new rn(7,new tn(1,5))),new Rt(26,8,32,6,14,new rn(11,new tn(1,10))),new Rt(27,12,26,10,24,new rn(14,new tn(1,16))),new Rt(28,12,36,10,16,new rn(18,new tn(1,22))),new Rt(29,16,36,14,16,new rn(24,new tn(1,32))),new Rt(30,16,48,14,22,new rn(28,new tn(1,49)))]}}Rt.VERSIONS=Rt.buildVersions();class Gt{constructor(a){const u=a.getHeight();if(u<8||u>144||u&1)throw new F;this.version=Gt.readVersion(a),this.mappingBitMatrix=this.extractDataRegion(a),this.readMappingMatrix=new de(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(a){const u=a.getHeight(),m=a.getWidth();return Rt.getVersionForDimensions(u,m)}readCodewords(){const a=new Int8Array(this.version.getTotalCodewords());let u=0,m=4,x=0;const v=this.mappingBitMatrix.getHeight(),b=this.mappingBitMatrix.getWidth();let C=!1,R=!1,O=!1,H=!1;do if(m===v&&x===0&&!C)a[u++]=this.readCorner1(v,b)&255,m-=2,x+=2,C=!0;else if(m===v-2&&x===0&&b&3&&!R)a[u++]=this.readCorner2(v,b)&255,m-=2,x+=2,R=!0;else if(m===v+4&&x===2&&!(b&7)&&!O)a[u++]=this.readCorner3(v,b)&255,m-=2,x+=2,O=!0;else if(m===v-2&&x===0&&(b&7)===4&&!H)a[u++]=this.readCorner4(v,b)&255,m-=2,x+=2,H=!0;else{do m<v&&x>=0&&!this.readMappingMatrix.get(x,m)&&(a[u++]=this.readUtah(m,x,v,b)&255),m-=2,x+=2;while(m>=0&&x<b);m+=1,x+=3;do m>=0&&x<b&&!this.readMappingMatrix.get(x,m)&&(a[u++]=this.readUtah(m,x,v,b)&255),m+=2,x-=2;while(m<v&&x>=0);m+=3,x+=1}while(m<v||x<b);if(u!==this.version.getTotalCodewords())throw new F;return a}readModule(a,u,m,x){return a<0&&(a+=m,u+=4-(m+4&7)),u<0&&(u+=x,a+=4-(x+4&7)),this.readMappingMatrix.set(u,a),this.mappingBitMatrix.get(u,a)}readUtah(a,u,m,x){let v=0;return this.readModule(a-2,u-2,m,x)&&(v|=1),v<<=1,this.readModule(a-2,u-1,m,x)&&(v|=1),v<<=1,this.readModule(a-1,u-2,m,x)&&(v|=1),v<<=1,this.readModule(a-1,u-1,m,x)&&(v|=1),v<<=1,this.readModule(a-1,u,m,x)&&(v|=1),v<<=1,this.readModule(a,u-2,m,x)&&(v|=1),v<<=1,this.readModule(a,u-1,m,x)&&(v|=1),v<<=1,this.readModule(a,u,m,x)&&(v|=1),v}readCorner1(a,u){let m=0;return this.readModule(a-1,0,a,u)&&(m|=1),m<<=1,this.readModule(a-1,1,a,u)&&(m|=1),m<<=1,this.readModule(a-1,2,a,u)&&(m|=1),m<<=1,this.readModule(0,u-2,a,u)&&(m|=1),m<<=1,this.readModule(0,u-1,a,u)&&(m|=1),m<<=1,this.readModule(1,u-1,a,u)&&(m|=1),m<<=1,this.readModule(2,u-1,a,u)&&(m|=1),m<<=1,this.readModule(3,u-1,a,u)&&(m|=1),m}readCorner2(a,u){let m=0;return this.readModule(a-3,0,a,u)&&(m|=1),m<<=1,this.readModule(a-2,0,a,u)&&(m|=1),m<<=1,this.readModule(a-1,0,a,u)&&(m|=1),m<<=1,this.readModule(0,u-4,a,u)&&(m|=1),m<<=1,this.readModule(0,u-3,a,u)&&(m|=1),m<<=1,this.readModule(0,u-2,a,u)&&(m|=1),m<<=1,this.readModule(0,u-1,a,u)&&(m|=1),m<<=1,this.readModule(1,u-1,a,u)&&(m|=1),m}readCorner3(a,u){let m=0;return this.readModule(a-1,0,a,u)&&(m|=1),m<<=1,this.readModule(a-1,u-1,a,u)&&(m|=1),m<<=1,this.readModule(0,u-3,a,u)&&(m|=1),m<<=1,this.readModule(0,u-2,a,u)&&(m|=1),m<<=1,this.readModule(0,u-1,a,u)&&(m|=1),m<<=1,this.readModule(1,u-3,a,u)&&(m|=1),m<<=1,this.readModule(1,u-2,a,u)&&(m|=1),m<<=1,this.readModule(1,u-1,a,u)&&(m|=1),m}readCorner4(a,u){let m=0;return this.readModule(a-3,0,a,u)&&(m|=1),m<<=1,this.readModule(a-2,0,a,u)&&(m|=1),m<<=1,this.readModule(a-1,0,a,u)&&(m|=1),m<<=1,this.readModule(0,u-2,a,u)&&(m|=1),m<<=1,this.readModule(0,u-1,a,u)&&(m|=1),m<<=1,this.readModule(1,u-1,a,u)&&(m|=1),m<<=1,this.readModule(2,u-1,a,u)&&(m|=1),m<<=1,this.readModule(3,u-1,a,u)&&(m|=1),m}extractDataRegion(a){const u=this.version.getSymbolSizeRows(),m=this.version.getSymbolSizeColumns();if(a.getHeight()!==u)throw new y("Dimension of bitMatrix must match the version size");const x=this.version.getDataRegionSizeRows(),v=this.version.getDataRegionSizeColumns(),b=u/x|0,C=m/v|0,R=b*x,O=C*v,H=new de(O,R);for(let q=0;q<b;++q){const Y=q*x;for(let te=0;te<C;++te){const ae=te*v;for(let le=0;le<x;++le){const me=q*(x+2)+1+le,ve=Y+le;for(let Ie=0;Ie<v;++Ie){const Re=te*(v+2)+1+Ie;if(a.get(Re,me)){const Ne=ae+Ie;H.set(Ne,ve)}}}}}return H}}class Rn{constructor(a,u){this.numDataCodewords=a,this.codewords=u}static getDataBlocks(a,u){const m=u.getECBlocks();let x=0;const v=m.getECBlocks();for(let le of v)x+=le.getCount();const b=new Array(x);let C=0;for(let le of v)for(let me=0;me<le.getCount();me++){const ve=le.getDataCodewords(),Ie=m.getECCodewords()+ve;b[C++]=new Rn(ve,new Uint8Array(Ie))}const O=b[0].codewords.length-m.getECCodewords(),H=O-1;let q=0;for(let le=0;le<H;le++)for(let me=0;me<C;me++)b[me].codewords[le]=a[q++];const Y=u.getVersionNumber()===24,te=Y?8:C;for(let le=0;le<te;le++)b[le].codewords[O-1]=a[q++];const ae=b[0].codewords.length;for(let le=O;le<ae;le++)for(let me=0;me<C;me++){const ve=Y?(me+8)%C:me,Ie=Y&&ve>7?le-1:le;b[ve].codewords[Ie]=a[q++]}if(q!==a.length)throw new y;return b}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Wu{constructor(a){this.bytes=a,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(a){if(a<1||a>32||a>this.available())throw new y(""+a);let u=0,m=this.bitOffset,x=this.byteOffset;const v=this.bytes;if(m>0){const b=8-m,C=a<b?a:b,R=b-C,O=255>>8-C<<R;u=(v[x]&O)>>R,a-=C,m+=C,m===8&&(m=0,x++)}if(a>0){for(;a>=8;)u=u<<8|v[x]&255,x++,a-=8;if(a>0){const b=8-a,C=255>>b<<b;u=u<<a|(v[x]&C)>>b,m+=a}}return this.bitOffset=m,this.byteOffset=x,u}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Bn;(function($){$[$.PAD_ENCODE=0]="PAD_ENCODE",$[$.ASCII_ENCODE=1]="ASCII_ENCODE",$[$.C40_ENCODE=2]="C40_ENCODE",$[$.TEXT_ENCODE=3]="TEXT_ENCODE",$[$.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",$[$.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",$[$.BASE256_ENCODE=6]="BASE256_ENCODE"})(Bn||(Bn={}));class ni{static decode(a){const u=new Wu(a),m=new ce,x=new ce,v=new Array;let b=Bn.ASCII_ENCODE;do if(b===Bn.ASCII_ENCODE)b=this.decodeAsciiSegment(u,m,x);else{switch(b){case Bn.C40_ENCODE:this.decodeC40Segment(u,m);break;case Bn.TEXT_ENCODE:this.decodeTextSegment(u,m);break;case Bn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(u,m);break;case Bn.EDIFACT_ENCODE:this.decodeEdifactSegment(u,m);break;case Bn.BASE256_ENCODE:this.decodeBase256Segment(u,m,v);break;default:throw new F}b=Bn.ASCII_ENCODE}while(b!==Bn.PAD_ENCODE&&u.available()>0);return x.length()>0&&m.append(x.toString()),new Nt(a,m.toString(),v.length===0?null:v,null)}static decodeAsciiSegment(a,u,m){let x=!1;do{let v=a.readBits(8);if(v===0)throw new F;if(v<=128)return x&&(v+=128),u.append(String.fromCharCode(v-1)),Bn.ASCII_ENCODE;if(v===129)return Bn.PAD_ENCODE;if(v<=229){const b=v-130;b<10&&u.append("0"),u.append(""+b)}else switch(v){case 230:return Bn.C40_ENCODE;case 231:return Bn.BASE256_ENCODE;case 232:u.append("");break;case 233:case 234:break;case 235:x=!0;break;case 236:u.append("[)>05"),m.insert(0,"");break;case 237:u.append("[)>06"),m.insert(0,"");break;case 238:return Bn.ANSIX12_ENCODE;case 239:return Bn.TEXT_ENCODE;case 240:return Bn.EDIFACT_ENCODE;case 241:break;default:if(v!==254||a.available()!==0)throw new F;break}}while(a.available()>0);return Bn.ASCII_ENCODE}static decodeC40Segment(a,u){let m=!1;const x=[];let v=0;do{if(a.available()===8)return;const b=a.readBits(8);if(b===254)return;this.parseTwoBytes(b,a.readBits(8),x);for(let C=0;C<3;C++){const R=x[C];switch(v){case 0:if(R<3)v=R+1;else if(R<this.C40_BASIC_SET_CHARS.length){const O=this.C40_BASIC_SET_CHARS[R];m?(u.append(String.fromCharCode(O.charCodeAt(0)+128)),m=!1):u.append(O)}else throw new F;break;case 1:m?(u.append(String.fromCharCode(R+128)),m=!1):u.append(String.fromCharCode(R)),v=0;break;case 2:if(R<this.C40_SHIFT2_SET_CHARS.length){const O=this.C40_SHIFT2_SET_CHARS[R];m?(u.append(String.fromCharCode(O.charCodeAt(0)+128)),m=!1):u.append(O)}else switch(R){case 27:u.append("");break;case 30:m=!0;break;default:throw new F}v=0;break;case 3:m?(u.append(String.fromCharCode(R+224)),m=!1):u.append(String.fromCharCode(R+96)),v=0;break;default:throw new F}}}while(a.available()>0)}static decodeTextSegment(a,u){let m=!1,x=[],v=0;do{if(a.available()===8)return;const b=a.readBits(8);if(b===254)return;this.parseTwoBytes(b,a.readBits(8),x);for(let C=0;C<3;C++){const R=x[C];switch(v){case 0:if(R<3)v=R+1;else if(R<this.TEXT_BASIC_SET_CHARS.length){const O=this.TEXT_BASIC_SET_CHARS[R];m?(u.append(String.fromCharCode(O.charCodeAt(0)+128)),m=!1):u.append(O)}else throw new F;break;case 1:m?(u.append(String.fromCharCode(R+128)),m=!1):u.append(String.fromCharCode(R)),v=0;break;case 2:if(R<this.TEXT_SHIFT2_SET_CHARS.length){const O=this.TEXT_SHIFT2_SET_CHARS[R];m?(u.append(String.fromCharCode(O.charCodeAt(0)+128)),m=!1):u.append(O)}else switch(R){case 27:u.append("");break;case 30:m=!0;break;default:throw new F}v=0;break;case 3:if(R<this.TEXT_SHIFT3_SET_CHARS.length){const O=this.TEXT_SHIFT3_SET_CHARS[R];m?(u.append(String.fromCharCode(O.charCodeAt(0)+128)),m=!1):u.append(O),v=0}else throw new F;break;default:throw new F}}}while(a.available()>0)}static decodeAnsiX12Segment(a,u){const m=[];do{if(a.available()===8)return;const x=a.readBits(8);if(x===254)return;this.parseTwoBytes(x,a.readBits(8),m);for(let v=0;v<3;v++){const b=m[v];switch(b){case 0:u.append("\r");break;case 1:u.append("*");break;case 2:u.append(">");break;case 3:u.append(" ");break;default:if(b<14)u.append(String.fromCharCode(b+44));else if(b<40)u.append(String.fromCharCode(b+51));else throw new F;break}}}while(a.available()>0)}static parseTwoBytes(a,u,m){let x=(a<<8)+u-1,v=Math.floor(x/1600);m[0]=v,x-=v*1600,v=Math.floor(x/40),m[1]=v,m[2]=x-v*40}static decodeEdifactSegment(a,u){do{if(a.available()<=16)return;for(let m=0;m<4;m++){let x=a.readBits(6);if(x===31){const v=8-a.getBitOffset();v!==8&&a.readBits(v);return}x&32||(x|=64),u.append(String.fromCharCode(x))}}while(a.available()>0)}static decodeBase256Segment(a,u,m){let x=1+a.getByteOffset();const v=this.unrandomize255State(a.readBits(8),x++);let b;if(v===0?b=a.available()/8|0:v<250?b=v:b=250*(v-249)+this.unrandomize255State(a.readBits(8),x++),b<0)throw new F;const C=new Uint8Array(b);for(let R=0;R<b;R++){if(a.available()<8)throw new F;C[R]=this.unrandomize255State(a.readBits(8),x++)}m.push(C);try{u.append(se.decode(C,ee.ISO88591))}catch(R){throw new gr("Platform does not support required encoding: "+R.message)}}static unrandomize255State(a,u){const m=149*u%255+1,x=a-m;return x>=0?x:x+256}}ni.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ni.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ni.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ni.TEXT_SHIFT2_SET_CHARS=ni.C40_SHIFT2_SET_CHARS,ni.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ox{constructor(){this.rsDecoder=new xr(at.DATA_MATRIX_FIELD_256)}decode(a){const u=new Gt(a),m=u.getVersion(),x=u.readCodewords(),v=Rn.getDataBlocks(x,m);let b=0;for(let O of v)b+=O.getNumDataCodewords();const C=new Uint8Array(b),R=v.length;for(let O=0;O<R;O++){const H=v[O],q=H.getCodewords(),Y=H.getNumDataCodewords();this.correctErrors(q,Y);for(let te=0;te<Y;te++)C[te*R+O]=q[te]}return ni.decode(C)}correctErrors(a,u){const m=new Int32Array(a);try{this.rsDecoder.decode(m,a.length-u)}catch{throw new E}for(let x=0;x<u;x++)a[x]=m[x]}}class tt{constructor(a){this.image=a,this.rectangleDetector=new Gi(this.image)}detect(){const a=this.rectangleDetector.detect();let u=this.detectSolid1(a);if(u=this.detectSolid2(u),u[3]=this.correctTopRight(u),!u[3])throw new re;u=this.shiftToModuleCenter(u);const m=u[0],x=u[1],v=u[2],b=u[3];let C=this.transitionsBetween(m,b)+1,R=this.transitionsBetween(v,b)+1;(C&1)===1&&(C+=1),(R&1)===1&&(R+=1),4*C<7*R&&4*R<7*C&&(C=R=Math.max(C,R));let O=tt.sampleGrid(this.image,m,x,v,b,C,R);return new dl(O,[m,x,v,b])}static shiftPoint(a,u,m){let x=(u.getX()-a.getX())/(m+1),v=(u.getY()-a.getY())/(m+1);return new $e(a.getX()+x,a.getY()+v)}static moveAway(a,u,m){let x=a.getX(),v=a.getY();return x<u?x-=1:x+=1,v<m?v-=1:v+=1,new $e(x,v)}detectSolid1(a){let u=a[0],m=a[1],x=a[3],v=a[2],b=this.transitionsBetween(u,m),C=this.transitionsBetween(m,x),R=this.transitionsBetween(x,v),O=this.transitionsBetween(v,u),H=b,q=[v,u,m,x];return H>C&&(H=C,q[0]=u,q[1]=m,q[2]=x,q[3]=v),H>R&&(H=R,q[0]=m,q[1]=x,q[2]=v,q[3]=u),H>O&&(q[0]=x,q[1]=v,q[2]=u,q[3]=m),q}detectSolid2(a){let u=a[0],m=a[1],x=a[2],v=a[3],b=this.transitionsBetween(u,v),C=tt.shiftPoint(m,x,(b+1)*4),R=tt.shiftPoint(x,m,(b+1)*4),O=this.transitionsBetween(C,u),H=this.transitionsBetween(R,v);return O<H?(a[0]=u,a[1]=m,a[2]=x,a[3]=v):(a[0]=m,a[1]=x,a[2]=v,a[3]=u),a}correctTopRight(a){let u=a[0],m=a[1],x=a[2],v=a[3],b=this.transitionsBetween(u,v),C=this.transitionsBetween(m,v),R=tt.shiftPoint(u,m,(C+1)*4),O=tt.shiftPoint(x,m,(b+1)*4);b=this.transitionsBetween(R,v),C=this.transitionsBetween(O,v);let H=new $e(v.getX()+(x.getX()-m.getX())/(b+1),v.getY()+(x.getY()-m.getY())/(b+1)),q=new $e(v.getX()+(u.getX()-m.getX())/(C+1),v.getY()+(u.getY()-m.getY())/(C+1));if(!this.isValid(H))return this.isValid(q)?q:null;if(!this.isValid(q))return H;let Y=this.transitionsBetween(R,H)+this.transitionsBetween(O,H),te=this.transitionsBetween(R,q)+this.transitionsBetween(O,q);return Y>te?H:q}shiftToModuleCenter(a){let u=a[0],m=a[1],x=a[2],v=a[3],b=this.transitionsBetween(u,v)+1,C=this.transitionsBetween(x,v)+1,R=tt.shiftPoint(u,m,C*4),O=tt.shiftPoint(x,m,b*4);b=this.transitionsBetween(R,v)+1,C=this.transitionsBetween(O,v)+1,(b&1)===1&&(b+=1),(C&1)===1&&(C+=1);let H=(u.getX()+m.getX()+x.getX()+v.getX())/4,q=(u.getY()+m.getY()+x.getY()+v.getY())/4;u=tt.moveAway(u,H,q),m=tt.moveAway(m,H,q),x=tt.moveAway(x,H,q),v=tt.moveAway(v,H,q);let Y,te;return R=tt.shiftPoint(u,m,C*4),R=tt.shiftPoint(R,v,b*4),Y=tt.shiftPoint(m,u,C*4),Y=tt.shiftPoint(Y,x,b*4),O=tt.shiftPoint(x,v,C*4),O=tt.shiftPoint(O,m,b*4),te=tt.shiftPoint(v,x,C*4),te=tt.shiftPoint(te,u,b*4),[R,Y,O,te]}isValid(a){return a.getX()>=0&&a.getX()<this.image.getWidth()&&a.getY()>0&&a.getY()<this.image.getHeight()}static sampleGrid(a,u,m,x,v,b,C){return xt.getInstance().sampleGrid(a,b,C,.5,.5,b-.5,.5,b-.5,C-.5,.5,C-.5,u.getX(),u.getY(),v.getX(),v.getY(),x.getX(),x.getY(),m.getX(),m.getY())}transitionsBetween(a,u){let m=Math.trunc(a.getX()),x=Math.trunc(a.getY()),v=Math.trunc(u.getX()),b=Math.trunc(u.getY()),C=Math.abs(b-x)>Math.abs(v-m);if(C){let le=m;m=x,x=le,le=v,v=b,b=le}let R=Math.abs(v-m),O=Math.abs(b-x),H=-R/2,q=x<b?1:-1,Y=m<v?1:-1,te=0,ae=this.image.get(C?x:m,C?m:x);for(let le=m,me=x;le!==v;le+=Y){let ve=this.image.get(C?me:le,C?le:me);if(ve!==ae&&(te++,ae=ve),H+=O,H>0){if(me===b)break;me+=q,H-=R}}return te}}class mn{constructor(){this.decoder=new ox}decode(a,u=null){let m,x;if(u!=null&&u.has(z.PURE_BARCODE)){const O=mn.extractPureBits(a.getBlackMatrix());m=this.decoder.decode(O),x=mn.NO_POINTS}else{const O=new tt(a.getBlackMatrix()).detect();m=this.decoder.decode(O.getBits()),x=O.getPoints()}const v=m.getRawBytes(),b=new De(m.getText(),v,8*v.length,x,be.DATA_MATRIX,S.currentTimeMillis()),C=m.getByteSegments();C!=null&&b.putMetadata(Ze.BYTE_SEGMENTS,C);const R=m.getECLevel();return R!=null&&b.putMetadata(Ze.ERROR_CORRECTION_LEVEL,R),b}reset(){}static extractPureBits(a){const u=a.getTopLeftOnBit(),m=a.getBottomRightOnBit();if(u==null||m==null)throw new re;const x=this.moduleSize(u,a);let v=u[1];const b=m[1];let C=u[0];const O=(m[0]-C+1)/x,H=(b-v+1)/x;if(O<=0||H<=0)throw new re;const q=x/2;v+=q,C+=q;const Y=new de(O,H);for(let te=0;te<H;te++){const ae=v+te*x;for(let le=0;le<O;le++)a.get(C+le*x,ae)&&Y.set(le,te)}return Y}static moduleSize(a,u){const m=u.getWidth();let x=a[0];const v=a[1];for(;x<m&&u.get(x,v);)x++;if(x===m)throw new re;const b=x-a[0];if(b===0)throw new re;return b}}mn.NO_POINTS=[];class ax extends Oe{constructor(a=500){super(new mn,a)}}var ba;(function($){$[$.L=0]="L",$[$.M=1]="M",$[$.Q=2]="Q",$[$.H=3]="H"})(ba||(ba={}));class Lt{constructor(a,u,m){this.value=a,this.stringValue=u,this.bits=m,Lt.FOR_BITS.set(m,this),Lt.FOR_VALUE.set(a,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(a){switch(a){case"L":return Lt.L;case"M":return Lt.M;case"Q":return Lt.Q;case"H":return Lt.H;default:throw new g(a+"not available")}}toString(){return this.stringValue}equals(a){if(!(a instanceof Lt))return!1;const u=a;return this.value===u.value}static forBits(a){if(a<0||a>=Lt.FOR_BITS.size)throw new y;return Lt.FOR_BITS.get(a)}}Lt.FOR_BITS=new Map,Lt.FOR_VALUE=new Map,Lt.L=new Lt(ba.L,"L",1),Lt.M=new Lt(ba.M,"M",0),Lt.Q=new Lt(ba.Q,"Q",3),Lt.H=new Lt(ba.H,"H",2);class rs{constructor(a){this.errorCorrectionLevel=Lt.forBits(a>>3&3),this.dataMask=a&7}static numBitsDiffering(a,u){return T.bitCount(a^u)}static decodeFormatInformation(a,u){const m=rs.doDecodeFormatInformation(a,u);return m!==null?m:rs.doDecodeFormatInformation(a^rs.FORMAT_INFO_MASK_QR,u^rs.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(a,u){let m=Number.MAX_SAFE_INTEGER,x=0;for(const v of rs.FORMAT_INFO_DECODE_LOOKUP){const b=v[0];if(b===a||b===u)return new rs(v[1]);let C=rs.numBitsDiffering(a,b);C<m&&(x=v[1],m=C),a!==u&&(C=rs.numBitsDiffering(u,b),C<m&&(x=v[1],m=C))}return m<=3?new rs(x):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(a){if(!(a instanceof rs))return!1;const u=a;return this.errorCorrectionLevel===u.errorCorrectionLevel&&this.dataMask===u.dataMask}}rs.FORMAT_INFO_MASK_QR=21522,rs.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class pe{constructor(a,...u){this.ecCodewordsPerBlock=a,this.ecBlocks=u}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let a=0;const u=this.ecBlocks;for(const m of u)a+=m.getCount();return a}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class J{constructor(a,u){this.count=a,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class je{constructor(a,u,...m){this.versionNumber=a,this.alignmentPatternCenters=u,this.ecBlocks=m;let x=0;const v=m[0].getECCodewordsPerBlock(),b=m[0].getECBlocks();for(const C of b)x+=C.getCount()*(C.getDataCodewords()+v);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(a){return this.ecBlocks[a.getValue()]}static getProvisionalVersionForDimension(a){if(a%4!==1)throw new F;try{return this.getVersionForNumber((a-17)/4)}catch{throw new F}}static getVersionForNumber(a){if(a<1||a>40)throw new y;return je.VERSIONS[a-1]}static decodeVersionInformation(a){let u=Number.MAX_SAFE_INTEGER,m=0;for(let x=0;x<je.VERSION_DECODE_INFO.length;x++){const v=je.VERSION_DECODE_INFO[x];if(v===a)return je.getVersionForNumber(x+7);const b=rs.numBitsDiffering(a,v);b<u&&(m=x+7,u=b)}return u<=3?je.getVersionForNumber(m):null}buildFunctionPattern(){const a=this.getDimensionForVersion(),u=new de(a);u.setRegion(0,0,9,9),u.setRegion(a-8,0,8,9),u.setRegion(0,a-8,9,8);const m=this.alignmentPatternCenters.length;for(let x=0;x<m;x++){const v=this.alignmentPatternCenters[x]-2;for(let b=0;b<m;b++)x===0&&(b===0||b===m-1)||x===m-1&&b===0||u.setRegion(this.alignmentPatternCenters[b]-2,v,5,5)}return u.setRegion(6,9,1,a-17),u.setRegion(9,6,a-17,1),this.versionNumber>6&&(u.setRegion(a-11,0,3,6),u.setRegion(0,a-11,6,3)),u}toString(){return""+this.versionNumber}}je.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),je.VERSIONS=[new je(1,new Int32Array(0),new pe(7,new J(1,19)),new pe(10,new J(1,16)),new pe(13,new J(1,13)),new pe(17,new J(1,9))),new je(2,Int32Array.from([6,18]),new pe(10,new J(1,34)),new pe(16,new J(1,28)),new pe(22,new J(1,22)),new pe(28,new J(1,16))),new je(3,Int32Array.from([6,22]),new pe(15,new J(1,55)),new pe(26,new J(1,44)),new pe(18,new J(2,17)),new pe(22,new J(2,13))),new je(4,Int32Array.from([6,26]),new pe(20,new J(1,80)),new pe(18,new J(2,32)),new pe(26,new J(2,24)),new pe(16,new J(4,9))),new je(5,Int32Array.from([6,30]),new pe(26,new J(1,108)),new pe(24,new J(2,43)),new pe(18,new J(2,15),new J(2,16)),new pe(22,new J(2,11),new J(2,12))),new je(6,Int32Array.from([6,34]),new pe(18,new J(2,68)),new pe(16,new J(4,27)),new pe(24,new J(4,19)),new pe(28,new J(4,15))),new je(7,Int32Array.from([6,22,38]),new pe(20,new J(2,78)),new pe(18,new J(4,31)),new pe(18,new J(2,14),new J(4,15)),new pe(26,new J(4,13),new J(1,14))),new je(8,Int32Array.from([6,24,42]),new pe(24,new J(2,97)),new pe(22,new J(2,38),new J(2,39)),new pe(22,new J(4,18),new J(2,19)),new pe(26,new J(4,14),new J(2,15))),new je(9,Int32Array.from([6,26,46]),new pe(30,new J(2,116)),new pe(22,new J(3,36),new J(2,37)),new pe(20,new J(4,16),new J(4,17)),new pe(24,new J(4,12),new J(4,13))),new je(10,Int32Array.from([6,28,50]),new pe(18,new J(2,68),new J(2,69)),new pe(26,new J(4,43),new J(1,44)),new pe(24,new J(6,19),new J(2,20)),new pe(28,new J(6,15),new J(2,16))),new je(11,Int32Array.from([6,30,54]),new pe(20,new J(4,81)),new pe(30,new J(1,50),new J(4,51)),new pe(28,new J(4,22),new J(4,23)),new pe(24,new J(3,12),new J(8,13))),new je(12,Int32Array.from([6,32,58]),new pe(24,new J(2,92),new J(2,93)),new pe(22,new J(6,36),new J(2,37)),new pe(26,new J(4,20),new J(6,21)),new pe(28,new J(7,14),new J(4,15))),new je(13,Int32Array.from([6,34,62]),new pe(26,new J(4,107)),new pe(22,new J(8,37),new J(1,38)),new pe(24,new J(8,20),new J(4,21)),new pe(22,new J(12,11),new J(4,12))),new je(14,Int32Array.from([6,26,46,66]),new pe(30,new J(3,115),new J(1,116)),new pe(24,new J(4,40),new J(5,41)),new pe(20,new J(11,16),new J(5,17)),new pe(24,new J(11,12),new J(5,13))),new je(15,Int32Array.from([6,26,48,70]),new pe(22,new J(5,87),new J(1,88)),new pe(24,new J(5,41),new J(5,42)),new pe(30,new J(5,24),new J(7,25)),new pe(24,new J(11,12),new J(7,13))),new je(16,Int32Array.from([6,26,50,74]),new pe(24,new J(5,98),new J(1,99)),new pe(28,new J(7,45),new J(3,46)),new pe(24,new J(15,19),new J(2,20)),new pe(30,new J(3,15),new J(13,16))),new je(17,Int32Array.from([6,30,54,78]),new pe(28,new J(1,107),new J(5,108)),new pe(28,new J(10,46),new J(1,47)),new pe(28,new J(1,22),new J(15,23)),new pe(28,new J(2,14),new J(17,15))),new je(18,Int32Array.from([6,30,56,82]),new pe(30,new J(5,120),new J(1,121)),new pe(26,new J(9,43),new J(4,44)),new pe(28,new J(17,22),new J(1,23)),new pe(28,new J(2,14),new J(19,15))),new je(19,Int32Array.from([6,30,58,86]),new pe(28,new J(3,113),new J(4,114)),new pe(26,new J(3,44),new J(11,45)),new pe(26,new J(17,21),new J(4,22)),new pe(26,new J(9,13),new J(16,14))),new je(20,Int32Array.from([6,34,62,90]),new pe(28,new J(3,107),new J(5,108)),new pe(26,new J(3,41),new J(13,42)),new pe(30,new J(15,24),new J(5,25)),new pe(28,new J(15,15),new J(10,16))),new je(21,Int32Array.from([6,28,50,72,94]),new pe(28,new J(4,116),new J(4,117)),new pe(26,new J(17,42)),new pe(28,new J(17,22),new J(6,23)),new pe(30,new J(19,16),new J(6,17))),new je(22,Int32Array.from([6,26,50,74,98]),new pe(28,new J(2,111),new J(7,112)),new pe(28,new J(17,46)),new pe(30,new J(7,24),new J(16,25)),new pe(24,new J(34,13))),new je(23,Int32Array.from([6,30,54,78,102]),new pe(30,new J(4,121),new J(5,122)),new pe(28,new J(4,47),new J(14,48)),new pe(30,new J(11,24),new J(14,25)),new pe(30,new J(16,15),new J(14,16))),new je(24,Int32Array.from([6,28,54,80,106]),new pe(30,new J(6,117),new J(4,118)),new pe(28,new J(6,45),new J(14,46)),new pe(30,new J(11,24),new J(16,25)),new pe(30,new J(30,16),new J(2,17))),new je(25,Int32Array.from([6,32,58,84,110]),new pe(26,new J(8,106),new J(4,107)),new pe(28,new J(8,47),new J(13,48)),new pe(30,new J(7,24),new J(22,25)),new pe(30,new J(22,15),new J(13,16))),new je(26,Int32Array.from([6,30,58,86,114]),new pe(28,new J(10,114),new J(2,115)),new pe(28,new J(19,46),new J(4,47)),new pe(28,new J(28,22),new J(6,23)),new pe(30,new J(33,16),new J(4,17))),new je(27,Int32Array.from([6,34,62,90,118]),new pe(30,new J(8,122),new J(4,123)),new pe(28,new J(22,45),new J(3,46)),new pe(30,new J(8,23),new J(26,24)),new pe(30,new J(12,15),new J(28,16))),new je(28,Int32Array.from([6,26,50,74,98,122]),new pe(30,new J(3,117),new J(10,118)),new pe(28,new J(3,45),new J(23,46)),new pe(30,new J(4,24),new J(31,25)),new pe(30,new J(11,15),new J(31,16))),new je(29,Int32Array.from([6,30,54,78,102,126]),new pe(30,new J(7,116),new J(7,117)),new pe(28,new J(21,45),new J(7,46)),new pe(30,new J(1,23),new J(37,24)),new pe(30,new J(19,15),new J(26,16))),new je(30,Int32Array.from([6,26,52,78,104,130]),new pe(30,new J(5,115),new J(10,116)),new pe(28,new J(19,47),new J(10,48)),new pe(30,new J(15,24),new J(25,25)),new pe(30,new J(23,15),new J(25,16))),new je(31,Int32Array.from([6,30,56,82,108,134]),new pe(30,new J(13,115),new J(3,116)),new pe(28,new J(2,46),new J(29,47)),new pe(30,new J(42,24),new J(1,25)),new pe(30,new J(23,15),new J(28,16))),new je(32,Int32Array.from([6,34,60,86,112,138]),new pe(30,new J(17,115)),new pe(28,new J(10,46),new J(23,47)),new pe(30,new J(10,24),new J(35,25)),new pe(30,new J(19,15),new J(35,16))),new je(33,Int32Array.from([6,30,58,86,114,142]),new pe(30,new J(17,115),new J(1,116)),new pe(28,new J(14,46),new J(21,47)),new pe(30,new J(29,24),new J(19,25)),new pe(30,new J(11,15),new J(46,16))),new je(34,Int32Array.from([6,34,62,90,118,146]),new pe(30,new J(13,115),new J(6,116)),new pe(28,new J(14,46),new J(23,47)),new pe(30,new J(44,24),new J(7,25)),new pe(30,new J(59,16),new J(1,17))),new je(35,Int32Array.from([6,30,54,78,102,126,150]),new pe(30,new J(12,121),new J(7,122)),new pe(28,new J(12,47),new J(26,48)),new pe(30,new J(39,24),new J(14,25)),new pe(30,new J(22,15),new J(41,16))),new je(36,Int32Array.from([6,24,50,76,102,128,154]),new pe(30,new J(6,121),new J(14,122)),new pe(28,new J(6,47),new J(34,48)),new pe(30,new J(46,24),new J(10,25)),new pe(30,new J(2,15),new J(64,16))),new je(37,Int32Array.from([6,28,54,80,106,132,158]),new pe(30,new J(17,122),new J(4,123)),new pe(28,new J(29,46),new J(14,47)),new pe(30,new J(49,24),new J(10,25)),new pe(30,new J(24,15),new J(46,16))),new je(38,Int32Array.from([6,32,58,84,110,136,162]),new pe(30,new J(4,122),new J(18,123)),new pe(28,new J(13,46),new J(32,47)),new pe(30,new J(48,24),new J(14,25)),new pe(30,new J(42,15),new J(32,16))),new je(39,Int32Array.from([6,26,54,82,110,138,166]),new pe(30,new J(20,117),new J(4,118)),new pe(28,new J(40,47),new J(7,48)),new pe(30,new J(43,24),new J(22,25)),new pe(30,new J(10,15),new J(67,16))),new je(40,Int32Array.from([6,30,58,86,114,142,170]),new pe(30,new J(19,118),new J(6,119)),new pe(28,new J(18,47),new J(31,48)),new pe(30,new J(34,24),new J(34,25)),new pe(30,new J(20,15),new J(61,16)))];var Fn;(function($){$[$.DATA_MASK_000=0]="DATA_MASK_000",$[$.DATA_MASK_001=1]="DATA_MASK_001",$[$.DATA_MASK_010=2]="DATA_MASK_010",$[$.DATA_MASK_011=3]="DATA_MASK_011",$[$.DATA_MASK_100=4]="DATA_MASK_100",$[$.DATA_MASK_101=5]="DATA_MASK_101",$[$.DATA_MASK_110=6]="DATA_MASK_110",$[$.DATA_MASK_111=7]="DATA_MASK_111"})(Fn||(Fn={}));class ss{constructor(a,u){this.value=a,this.isMasked=u}unmaskBitMatrix(a,u){for(let m=0;m<u;m++)for(let x=0;x<u;x++)this.isMasked(m,x)&&a.flip(x,m)}}ss.values=new Map([[Fn.DATA_MASK_000,new ss(Fn.DATA_MASK_000,($,a)=>($+a&1)===0)],[Fn.DATA_MASK_001,new ss(Fn.DATA_MASK_001,($,a)=>($&1)===0)],[Fn.DATA_MASK_010,new ss(Fn.DATA_MASK_010,($,a)=>a%3===0)],[Fn.DATA_MASK_011,new ss(Fn.DATA_MASK_011,($,a)=>($+a)%3===0)],[Fn.DATA_MASK_100,new ss(Fn.DATA_MASK_100,($,a)=>(Math.floor($/2)+Math.floor(a/3)&1)===0)],[Fn.DATA_MASK_101,new ss(Fn.DATA_MASK_101,($,a)=>$*a%6===0)],[Fn.DATA_MASK_110,new ss(Fn.DATA_MASK_110,($,a)=>$*a%6<3)],[Fn.DATA_MASK_111,new ss(Fn.DATA_MASK_111,($,a)=>($+a+$*a%3&1)===0)]]);class sf{constructor(a){const u=a.getHeight();if(u<21||(u&3)!==1)throw new F;this.bitMatrix=a}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let a=0;for(let v=0;v<6;v++)a=this.copyBit(v,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(let v=5;v>=0;v--)a=this.copyBit(8,v,a);const u=this.bitMatrix.getHeight();let m=0;const x=u-7;for(let v=u-1;v>=x;v--)m=this.copyBit(8,v,m);for(let v=u-8;v<u;v++)m=this.copyBit(v,8,m);if(this.parsedFormatInfo=rs.decodeFormatInformation(a,m),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const a=this.bitMatrix.getHeight(),u=Math.floor((a-17)/4);if(u<=6)return je.getVersionForNumber(u);let m=0;const x=a-11;for(let b=5;b>=0;b--)for(let C=a-9;C>=x;C--)m=this.copyBit(C,b,m);let v=je.decodeVersionInformation(m);if(v!==null&&v.getDimensionForVersion()===a)return this.parsedVersion=v,v;m=0;for(let b=5;b>=0;b--)for(let C=a-9;C>=x;C--)m=this.copyBit(b,C,m);if(v=je.decodeVersionInformation(m),v!==null&&v.getDimensionForVersion()===a)return this.parsedVersion=v,v;throw new F}copyBit(a,u,m){return(this.isMirror?this.bitMatrix.get(u,a):this.bitMatrix.get(a,u))?m<<1|1:m<<1}readCodewords(){const a=this.readFormatInformation(),u=this.readVersion(),m=ss.values.get(a.getDataMask()),x=this.bitMatrix.getHeight();m.unmaskBitMatrix(this.bitMatrix,x);const v=u.buildFunctionPattern();let b=!0;const C=new Uint8Array(u.getTotalCodewords());let R=0,O=0,H=0;for(let q=x-1;q>0;q-=2){q===6&&q--;for(let Y=0;Y<x;Y++){const te=b?x-1-Y:Y;for(let ae=0;ae<2;ae++)v.get(q-ae,te)||(H++,O<<=1,this.bitMatrix.get(q-ae,te)&&(O|=1),H===8&&(C[R++]=O,H=0,O=0))}b=!b}if(R!==u.getTotalCodewords())throw new F;return C}remask(){if(this.parsedFormatInfo===null)return;const a=ss.values[this.parsedFormatInfo.getDataMask()],u=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,u)}setMirror(a){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=a}mirror(){const a=this.bitMatrix;for(let u=0,m=a.getWidth();u<m;u++)for(let x=u+1,v=a.getHeight();x<v;x++)a.get(u,x)!==a.get(x,u)&&(a.flip(x,u),a.flip(u,x))}}class of{constructor(a,u){this.numDataCodewords=a,this.codewords=u}static getDataBlocks(a,u,m){if(a.length!==u.getTotalCodewords())throw new y;const x=u.getECBlocksForLevel(m);let v=0;const b=x.getECBlocks();for(const ae of b)v+=ae.getCount();const C=new Array(v);let R=0;for(const ae of b)for(let le=0;le<ae.getCount();le++){const me=ae.getDataCodewords(),ve=x.getECCodewordsPerBlock()+me;C[R++]=new of(me,new Uint8Array(ve))}const O=C[0].codewords.length;let H=C.length-1;for(;H>=0&&C[H].codewords.length!==O;)H--;H++;const q=O-x.getECCodewordsPerBlock();let Y=0;for(let ae=0;ae<q;ae++)for(let le=0;le<R;le++)C[le].codewords[ae]=a[Y++];for(let ae=H;ae<R;ae++)C[ae].codewords[q]=a[Y++];const te=C[0].codewords.length;for(let ae=q;ae<te;ae++)for(let le=0;le<R;le++){const me=le<H?ae:ae+1;C[le].codewords[me]=a[Y++]}return C}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var is;(function($){$[$.TERMINATOR=0]="TERMINATOR",$[$.NUMERIC=1]="NUMERIC",$[$.ALPHANUMERIC=2]="ALPHANUMERIC",$[$.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",$[$.BYTE=4]="BYTE",$[$.ECI=5]="ECI",$[$.KANJI=6]="KANJI",$[$.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",$[$.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",$[$.HANZI=9]="HANZI"})(is||(is={}));class ot{constructor(a,u,m,x){this.value=a,this.stringValue=u,this.characterCountBitsForVersions=m,this.bits=x,ot.FOR_BITS.set(x,this),ot.FOR_VALUE.set(a,this)}static forBits(a){const u=ot.FOR_BITS.get(a);if(u===void 0)throw new y;return u}getCharacterCountBits(a){const u=a.getVersionNumber();let m;return u<=9?m=0:u<=26?m=1:m=2,this.characterCountBitsForVersions[m]}getValue(){return this.value}getBits(){return this.bits}equals(a){if(!(a instanceof ot))return!1;const u=a;return this.value===u.value}toString(){return this.stringValue}}ot.FOR_BITS=new Map,ot.FOR_VALUE=new Map,ot.TERMINATOR=new ot(is.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ot.NUMERIC=new ot(is.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ot.ALPHANUMERIC=new ot(is.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ot.STRUCTURED_APPEND=new ot(is.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ot.BYTE=new ot(is.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ot.ECI=new ot(is.ECI,"ECI",Int32Array.from([0,0,0]),7),ot.KANJI=new ot(is.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ot.FNC1_FIRST_POSITION=new ot(is.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ot.FNC1_SECOND_POSITION=new ot(is.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ot.HANZI=new ot(is.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class kn{static decode(a,u,m,x){const v=new Wu(a);let b=new ce;const C=new Array;let R=-1,O=-1;try{let H=null,q=!1,Y;do{if(v.available()<4)Y=ot.TERMINATOR;else{const te=v.readBits(4);Y=ot.forBits(te)}switch(Y){case ot.TERMINATOR:break;case ot.FNC1_FIRST_POSITION:case ot.FNC1_SECOND_POSITION:q=!0;break;case ot.STRUCTURED_APPEND:if(v.available()<16)throw new F;R=v.readBits(8),O=v.readBits(8);break;case ot.ECI:const te=kn.parseECIValue(v);if(H=Z.getCharacterSetECIByValue(te),H===null)throw new F;break;case ot.HANZI:const ae=v.readBits(4),le=v.readBits(Y.getCharacterCountBits(u));ae===kn.GB2312_SUBSET&&kn.decodeHanziSegment(v,b,le);break;default:const me=v.readBits(Y.getCharacterCountBits(u));switch(Y){case ot.NUMERIC:kn.decodeNumericSegment(v,b,me);break;case ot.ALPHANUMERIC:kn.decodeAlphanumericSegment(v,b,me,q);break;case ot.BYTE:kn.decodeByteSegment(v,b,me,H,C,x);break;case ot.KANJI:kn.decodeKanjiSegment(v,b,me);break;default:throw new F}break}}while(Y!==ot.TERMINATOR)}catch{throw new F}return new Nt(a,b.toString(),C.length===0?null:C,m===null?null:m.toString(),R,O)}static decodeHanziSegment(a,u,m){if(m*13>a.available())throw new F;const x=new Uint8Array(2*m);let v=0;for(;m>0;){const b=a.readBits(13);let C=b/96<<8&4294967295|b%96;C<959?C+=41377:C+=42657,x[v]=C>>8&255,x[v+1]=C&255,v+=2,m--}try{u.append(se.decode(x,ee.GB2312))}catch(b){throw new F(b)}}static decodeKanjiSegment(a,u,m){if(m*13>a.available())throw new F;const x=new Uint8Array(2*m);let v=0;for(;m>0;){const b=a.readBits(13);let C=b/192<<8&4294967295|b%192;C<7936?C+=33088:C+=49472,x[v]=C>>8,x[v+1]=C,v+=2,m--}try{u.append(se.decode(x,ee.SHIFT_JIS))}catch(b){throw new F(b)}}static decodeByteSegment(a,u,m,x,v,b){if(8*m>a.available())throw new F;const C=new Uint8Array(m);for(let O=0;O<m;O++)C[O]=a.readBits(8);let R;x===null?R=ee.guessEncoding(C,b):R=x.getName();try{u.append(se.decode(C,R))}catch(O){throw new F(O)}v.push(C)}static toAlphaNumericChar(a){if(a>=kn.ALPHANUMERIC_CHARS.length)throw new F;return kn.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,u,m,x){const v=u.length();for(;m>1;){if(a.available()<11)throw new F;const b=a.readBits(11);u.append(kn.toAlphaNumericChar(Math.floor(b/45))),u.append(kn.toAlphaNumericChar(b%45)),m-=2}if(m===1){if(a.available()<6)throw new F;u.append(kn.toAlphaNumericChar(a.readBits(6)))}if(x)for(let b=v;b<u.length();b++)u.charAt(b)==="%"&&(b<u.length()-1&&u.charAt(b+1)==="%"?u.deleteCharAt(b+1):u.setCharAt(b,""))}static decodeNumericSegment(a,u,m){for(;m>=3;){if(a.available()<10)throw new F;const x=a.readBits(10);if(x>=1e3)throw new F;u.append(kn.toAlphaNumericChar(Math.floor(x/100))),u.append(kn.toAlphaNumericChar(Math.floor(x/10)%10)),u.append(kn.toAlphaNumericChar(x%10)),m-=3}if(m===2){if(a.available()<7)throw new F;const x=a.readBits(7);if(x>=100)throw new F;u.append(kn.toAlphaNumericChar(Math.floor(x/10))),u.append(kn.toAlphaNumericChar(x%10))}else if(m===1){if(a.available()<4)throw new F;const x=a.readBits(4);if(x>=10)throw new F;u.append(kn.toAlphaNumericChar(x))}}static parseECIValue(a){const u=a.readBits(8);if(!(u&128))return u&127;if((u&192)===128){const m=a.readBits(8);return(u&63)<<8&4294967295|m}if((u&224)===192){const m=a.readBits(16);return(u&31)<<16&4294967295|m}throw new F}}kn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",kn.GB2312_SUBSET=1;class af{constructor(a){this.mirrored=a}isMirrored(){return this.mirrored}applyMirroredCorrection(a){if(!this.mirrored||a===null||a.length<3)return;const u=a[0];a[0]=a[2],a[2]=u}}class lx{constructor(){this.rsDecoder=new xr(at.QR_CODE_FIELD_256)}decodeBooleanArray(a,u){return this.decodeBitMatrix(de.parseFromBooleanArray(a),u)}decodeBitMatrix(a,u){const m=new sf(a);let x=null;try{return this.decodeBitMatrixParser(m,u)}catch(v){x=v}try{m.remask(),m.setMirror(!0),m.readVersion(),m.readFormatInformation(),m.mirror();const v=this.decodeBitMatrixParser(m,u);return v.setOther(new af(!0)),v}catch(v){throw x!==null?x:v}}decodeBitMatrixParser(a,u){const m=a.readVersion(),x=a.readFormatInformation().getErrorCorrectionLevel(),v=a.readCodewords(),b=of.getDataBlocks(v,m,x);let C=0;for(const H of b)C+=H.getNumDataCodewords();const R=new Uint8Array(C);let O=0;for(const H of b){const q=H.getCodewords(),Y=H.getNumDataCodewords();this.correctErrors(q,Y);for(let te=0;te<Y;te++)R[O++]=q[te]}return kn.decode(R,m,x,u)}correctErrors(a,u){const m=new Int32Array(a);try{this.rsDecoder.decode(m,a.length-u)}catch{throw new E}for(let x=0;x<u;x++)a[x]=m[x]}}class lf extends $e{constructor(a,u,m){super(a,u),this.estimatedModuleSize=m}aboutEquals(a,u,m){if(Math.abs(u-this.getY())<=a&&Math.abs(m-this.getX())<=a){const x=Math.abs(a-this.estimatedModuleSize);return x<=1||x<=this.estimatedModuleSize}return!1}combineEstimate(a,u,m){const x=(this.getX()+u)/2,v=(this.getY()+a)/2,b=(this.estimatedModuleSize+m)/2;return new lf(x,v,b)}}class bc{constructor(a,u,m,x,v,b,C){this.image=a,this.startX=u,this.startY=m,this.width=x,this.height=v,this.moduleSize=b,this.resultPointCallback=C,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const a=this.startX,u=this.height,m=this.width,x=a+m,v=this.startY+u/2,b=new Int32Array(3),C=this.image;for(let R=0;R<u;R++){const O=v+(R&1?-Math.floor((R+1)/2):Math.floor((R+1)/2));b[0]=0,b[1]=0,b[2]=0;let H=a;for(;H<x&&!C.get(H,O);)H++;let q=0;for(;H<x;){if(C.get(H,O))if(q===1)b[1]++;else if(q===2){if(this.foundPatternCross(b)){const Y=this.handlePossibleCenter(b,O,H);if(Y!==null)return Y}b[0]=b[2],b[1]=1,b[2]=0,q=1}else b[++q]++;else q===1&&q++,b[q]++;H++}if(this.foundPatternCross(b)){const Y=this.handlePossibleCenter(b,O,x);if(Y!==null)return Y}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new re}static centerFromEnd(a,u){return u-a[2]-a[1]/2}foundPatternCross(a){const u=this.moduleSize,m=u/2;for(let x=0;x<3;x++)if(Math.abs(u-a[x])>=m)return!1;return!0}crossCheckVertical(a,u,m,x){const v=this.image,b=v.getHeight(),C=this.crossCheckStateCount;C[0]=0,C[1]=0,C[2]=0;let R=a;for(;R>=0&&v.get(u,R)&&C[1]<=m;)C[1]++,R--;if(R<0||C[1]>m)return NaN;for(;R>=0&&!v.get(u,R)&&C[0]<=m;)C[0]++,R--;if(C[0]>m)return NaN;for(R=a+1;R<b&&v.get(u,R)&&C[1]<=m;)C[1]++,R++;if(R===b||C[1]>m)return NaN;for(;R<b&&!v.get(u,R)&&C[2]<=m;)C[2]++,R++;if(C[2]>m)return NaN;const O=C[0]+C[1]+C[2];return 5*Math.abs(O-x)>=2*x?NaN:this.foundPatternCross(C)?bc.centerFromEnd(C,R):NaN}handlePossibleCenter(a,u,m){const x=a[0]+a[1]+a[2],v=bc.centerFromEnd(a,m),b=this.crossCheckVertical(u,v,2*a[1],x);if(!isNaN(b)){const C=(a[0]+a[1]+a[2])/3;for(const O of this.possibleCenters)if(O.aboutEquals(C,b,v))return O.combineEstimate(b,v,C);const R=new lf(v,b,C);this.possibleCenters.push(R),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(R)}return null}}class Np extends $e{constructor(a,u,m,x){super(a,u),this.estimatedModuleSize=m,this.count=x,x===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(a,u,m){if(Math.abs(u-this.getY())<=a&&Math.abs(m-this.getX())<=a){const x=Math.abs(a-this.estimatedModuleSize);return x<=1||x<=this.estimatedModuleSize}return!1}combineEstimate(a,u,m){const x=this.count+1,v=(this.count*this.getX()+u)/x,b=(this.count*this.getY()+a)/x,C=(this.count*this.estimatedModuleSize+m)/x;return new Np(v,b,C,x)}}class cx{constructor(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class kr{constructor(a,u){this.image=a,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=u}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){const u=a!=null&&a.get(z.TRY_HARDER)!==void 0,m=a!=null&&a.get(z.PURE_BARCODE)!==void 0,x=this.image,v=x.getHeight(),b=x.getWidth();let C=Math.floor(3*v/(4*kr.MAX_MODULES));(C<kr.MIN_SKIP||u)&&(C=kr.MIN_SKIP);let R=!1;const O=new Int32Array(5);for(let q=C-1;q<v&&!R;q+=C){O[0]=0,O[1]=0,O[2]=0,O[3]=0,O[4]=0;let Y=0;for(let te=0;te<b;te++)if(x.get(te,q))(Y&1)===1&&Y++,O[Y]++;else if(Y&1)O[Y]++;else if(Y===4)if(kr.foundPatternCross(O)){if(this.handlePossibleCenter(O,q,te,m)===!0)if(C=2,this.hasSkipped===!0)R=this.haveMultiplyConfirmedCenters();else{const le=this.findRowSkip();le>O[2]&&(q+=le-O[2]-C,te=b-1)}else{O[0]=O[2],O[1]=O[3],O[2]=O[4],O[3]=1,O[4]=0,Y=3;continue}Y=0,O[0]=0,O[1]=0,O[2]=0,O[3]=0,O[4]=0}else O[0]=O[2],O[1]=O[3],O[2]=O[4],O[3]=1,O[4]=0,Y=3;else O[++Y]++;kr.foundPatternCross(O)&&this.handlePossibleCenter(O,q,b,m)===!0&&(C=O[0],this.hasSkipped&&(R=this.haveMultiplyConfirmedCenters()))}const H=this.selectBestPatterns();return $e.orderBestPatterns(H),new cx(H)}static centerFromEnd(a,u){return u-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let u=0;for(let v=0;v<5;v++){const b=a[v];if(b===0)return!1;u+=b}if(u<7)return!1;const m=u/7,x=m/2;return Math.abs(m-a[0])<x&&Math.abs(m-a[1])<x&&Math.abs(3*m-a[2])<3*x&&Math.abs(m-a[3])<x&&Math.abs(m-a[4])<x}getCrossCheckStateCount(){const a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,u,m,x){const v=this.getCrossCheckStateCount();let b=0;const C=this.image;for(;a>=b&&u>=b&&C.get(u-b,a-b);)v[2]++,b++;if(a<b||u<b)return!1;for(;a>=b&&u>=b&&!C.get(u-b,a-b)&&v[1]<=m;)v[1]++,b++;if(a<b||u<b||v[1]>m)return!1;for(;a>=b&&u>=b&&C.get(u-b,a-b)&&v[0]<=m;)v[0]++,b++;if(v[0]>m)return!1;const R=C.getHeight(),O=C.getWidth();for(b=1;a+b<R&&u+b<O&&C.get(u+b,a+b);)v[2]++,b++;if(a+b>=R||u+b>=O)return!1;for(;a+b<R&&u+b<O&&!C.get(u+b,a+b)&&v[3]<m;)v[3]++,b++;if(a+b>=R||u+b>=O||v[3]>=m)return!1;for(;a+b<R&&u+b<O&&C.get(u+b,a+b)&&v[4]<m;)v[4]++,b++;if(v[4]>=m)return!1;const H=v[0]+v[1]+v[2]+v[3]+v[4];return Math.abs(H-x)<2*x&&kr.foundPatternCross(v)}crossCheckVertical(a,u,m,x){const v=this.image,b=v.getHeight(),C=this.getCrossCheckStateCount();let R=a;for(;R>=0&&v.get(u,R);)C[2]++,R--;if(R<0)return NaN;for(;R>=0&&!v.get(u,R)&&C[1]<=m;)C[1]++,R--;if(R<0||C[1]>m)return NaN;for(;R>=0&&v.get(u,R)&&C[0]<=m;)C[0]++,R--;if(C[0]>m)return NaN;for(R=a+1;R<b&&v.get(u,R);)C[2]++,R++;if(R===b)return NaN;for(;R<b&&!v.get(u,R)&&C[3]<m;)C[3]++,R++;if(R===b||C[3]>=m)return NaN;for(;R<b&&v.get(u,R)&&C[4]<m;)C[4]++,R++;if(C[4]>=m)return NaN;const O=C[0]+C[1]+C[2]+C[3]+C[4];return 5*Math.abs(O-x)>=2*x?NaN:kr.foundPatternCross(C)?kr.centerFromEnd(C,R):NaN}crossCheckHorizontal(a,u,m,x){const v=this.image,b=v.getWidth(),C=this.getCrossCheckStateCount();let R=a;for(;R>=0&&v.get(R,u);)C[2]++,R--;if(R<0)return NaN;for(;R>=0&&!v.get(R,u)&&C[1]<=m;)C[1]++,R--;if(R<0||C[1]>m)return NaN;for(;R>=0&&v.get(R,u)&&C[0]<=m;)C[0]++,R--;if(C[0]>m)return NaN;for(R=a+1;R<b&&v.get(R,u);)C[2]++,R++;if(R===b)return NaN;for(;R<b&&!v.get(R,u)&&C[3]<m;)C[3]++,R++;if(R===b||C[3]>=m)return NaN;for(;R<b&&v.get(R,u)&&C[4]<m;)C[4]++,R++;if(C[4]>=m)return NaN;const O=C[0]+C[1]+C[2]+C[3]+C[4];return 5*Math.abs(O-x)>=x?NaN:kr.foundPatternCross(C)?kr.centerFromEnd(C,R):NaN}handlePossibleCenter(a,u,m,x){const v=a[0]+a[1]+a[2]+a[3]+a[4];let b=kr.centerFromEnd(a,m),C=this.crossCheckVertical(u,Math.floor(b),a[2],v);if(!isNaN(C)&&(b=this.crossCheckHorizontal(Math.floor(b),Math.floor(C),a[2],v),!isNaN(b)&&(!x||this.crossCheckDiagonal(Math.floor(C),Math.floor(b),a[2],v)))){const R=v/7;let O=!1;const H=this.possibleCenters;for(let q=0,Y=H.length;q<Y;q++){const te=H[q];if(te.aboutEquals(R,C,b)){H[q]=te.combineEstimate(C,b,R),O=!0;break}}if(!O){const q=new Np(b,C,R);H.push(q),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(q)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let u=null;for(const m of this.possibleCenters)if(m.getCount()>=kr.CENTER_QUORUM)if(u==null)u=m;else return this.hasSkipped=!0,Math.floor((Math.abs(u.getX()-m.getX())-Math.abs(u.getY()-m.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let a=0,u=0;const m=this.possibleCenters.length;for(const b of this.possibleCenters)b.getCount()>=kr.CENTER_QUORUM&&(a++,u+=b.getEstimatedModuleSize());if(a<3)return!1;const x=u/m;let v=0;for(const b of this.possibleCenters)v+=Math.abs(b.getEstimatedModuleSize()-x);return v<=.05*u}selectBestPatterns(){const a=this.possibleCenters.length;if(a<3)throw new re;const u=this.possibleCenters;let m;if(a>3){let x=0,v=0;for(const R of this.possibleCenters){const O=R.getEstimatedModuleSize();x+=O,v+=O*O}m=x/a;let b=Math.sqrt(v/a-m*m);u.sort((R,O)=>{const H=Math.abs(O.getEstimatedModuleSize()-m),q=Math.abs(R.getEstimatedModuleSize()-m);return H<q?-1:H>q?1:0});const C=Math.max(.2*m,b);for(let R=0;R<u.length&&u.length>3;R++){const O=u[R];Math.abs(O.getEstimatedModuleSize()-m)>C&&(u.splice(R,1),R--)}}if(u.length>3){let x=0;for(const v of u)x+=v.getEstimatedModuleSize();m=x/u.length,u.sort((v,b)=>{if(b.getCount()===v.getCount()){const C=Math.abs(b.getEstimatedModuleSize()-m),R=Math.abs(v.getEstimatedModuleSize()-m);return C<R?1:C>R?-1:0}else return b.getCount()-v.getCount()}),u.splice(3)}return[u[0],u[1],u[2]]}}kr.CENTER_QUORUM=2,kr.MIN_SKIP=3,kr.MAX_MODULES=57;class mt{constructor(a){this.image=a}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(a){this.resultPointCallback=a==null?null:a.get(z.NEED_RESULT_POINT_CALLBACK);const m=new kr(this.image,this.resultPointCallback).find(a);return this.processFinderPatternInfo(m)}processFinderPatternInfo(a){const u=a.getTopLeft(),m=a.getTopRight(),x=a.getBottomLeft(),v=this.calculateModuleSize(u,m,x);if(v<1)throw new re("No pattern found in proccess finder.");const b=mt.computeDimension(u,m,x,v),C=je.getProvisionalVersionForDimension(b),R=C.getDimensionForVersion()-7;let O=null;if(C.getAlignmentPatternCenters().length>0){const te=m.getX()-u.getX()+x.getX(),ae=m.getY()-u.getY()+x.getY(),le=1-3/R,me=Math.floor(u.getX()+le*(te-u.getX())),ve=Math.floor(u.getY()+le*(ae-u.getY()));for(let Ie=4;Ie<=16;Ie<<=1)try{O=this.findAlignmentInRegion(v,me,ve,Ie);break}catch(Re){if(!(Re instanceof re))throw Re}}const H=mt.createTransform(u,m,x,O,b),q=mt.sampleGrid(this.image,H,b);let Y;return O===null?Y=[x,u,m]:Y=[x,u,m,O],new dl(q,Y)}static createTransform(a,u,m,x,v){const b=v-3.5;let C,R,O,H;return x!==null?(C=x.getX(),R=x.getY(),O=b-3,H=O):(C=u.getX()-a.getX()+m.getX(),R=u.getY()-a.getY()+m.getY(),O=b,H=b),ys.quadrilateralToQuadrilateral(3.5,3.5,b,3.5,O,H,3.5,b,a.getX(),a.getY(),u.getX(),u.getY(),C,R,m.getX(),m.getY())}static sampleGrid(a,u,m){return xt.getInstance().sampleGridWithTransform(a,m,m,u)}static computeDimension(a,u,m,x){const v=Et.round($e.distance(a,u)/x),b=Et.round($e.distance(a,m)/x);let C=Math.floor((v+b)/2)+7;switch(C&3){case 0:C++;break;case 2:C--;break;case 3:throw new re("Dimensions could be not found.")}return C}calculateModuleSize(a,u,m){return(this.calculateModuleSizeOneWay(a,u)+this.calculateModuleSizeOneWay(a,m))/2}calculateModuleSizeOneWay(a,u){const m=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(u.getX()),Math.floor(u.getY())),x=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(u.getX()),Math.floor(u.getY()),Math.floor(a.getX()),Math.floor(a.getY()));return isNaN(m)?x/7:isNaN(x)?m/7:(m+x)/14}sizeOfBlackWhiteBlackRunBothWays(a,u,m,x){let v=this.sizeOfBlackWhiteBlackRun(a,u,m,x),b=1,C=a-(m-a);C<0?(b=a/(a-C),C=0):C>=this.image.getWidth()&&(b=(this.image.getWidth()-1-a)/(C-a),C=this.image.getWidth()-1);let R=Math.floor(u-(x-u)*b);return b=1,R<0?(b=u/(u-R),R=0):R>=this.image.getHeight()&&(b=(this.image.getHeight()-1-u)/(R-u),R=this.image.getHeight()-1),C=Math.floor(a+(C-a)*b),v+=this.sizeOfBlackWhiteBlackRun(a,u,C,R),v-1}sizeOfBlackWhiteBlackRun(a,u,m,x){const v=Math.abs(x-u)>Math.abs(m-a);if(v){let te=a;a=u,u=te,te=m,m=x,x=te}const b=Math.abs(m-a),C=Math.abs(x-u);let R=-b/2;const O=a<m?1:-1,H=u<x?1:-1;let q=0;const Y=m+O;for(let te=a,ae=u;te!==Y;te+=O){const le=v?ae:te,me=v?te:ae;if(q===1===this.image.get(le,me)){if(q===2)return Et.distance(te,ae,a,u);q++}if(R+=C,R>0){if(ae===x)break;ae+=H,R-=b}}return q===2?Et.distance(m+O,x,a,u):NaN}findAlignmentInRegion(a,u,m,x){const v=Math.floor(x*a),b=Math.max(0,u-v),C=Math.min(this.image.getWidth()-1,u+v);if(C-b<a*3)throw new re("Alignment top exceeds estimated module size.");const R=Math.max(0,m-v),O=Math.min(this.image.getHeight()-1,m+v);if(O-R<a*3)throw new re("Alignment bottom exceeds estimated module size.");return new bc(this.image,b,R,C-b,O-R,a,this.resultPointCallback).find()}}class zr{constructor(){this.decoder=new lx}getDecoder(){return this.decoder}decode(a,u){let m,x;if(u!=null&&u.get(z.PURE_BARCODE)!==void 0){const R=zr.extractPureBits(a.getBlackMatrix());m=this.decoder.decodeBitMatrix(R,u),x=zr.NO_POINTS}else{const R=new mt(a.getBlackMatrix()).detect(u);m=this.decoder.decodeBitMatrix(R.getBits(),u),x=R.getPoints()}m.getOther()instanceof af&&m.getOther().applyMirroredCorrection(x);const v=new De(m.getText(),m.getRawBytes(),void 0,x,be.QR_CODE,void 0),b=m.getByteSegments();b!==null&&v.putMetadata(Ze.BYTE_SEGMENTS,b);const C=m.getECLevel();return C!==null&&v.putMetadata(Ze.ERROR_CORRECTION_LEVEL,C),m.hasStructuredAppend()&&(v.putMetadata(Ze.STRUCTURED_APPEND_SEQUENCE,m.getStructuredAppendSequenceNumber()),v.putMetadata(Ze.STRUCTURED_APPEND_PARITY,m.getStructuredAppendParity())),v}reset(){}static extractPureBits(a){const u=a.getTopLeftOnBit(),m=a.getBottomRightOnBit();if(u===null||m===null)throw new re;const x=this.moduleSize(u,a);let v=u[1],b=m[1],C=u[0],R=m[0];if(C>=R||v>=b)throw new re;if(b-v!==R-C&&(R=C+(b-v),R>=a.getWidth()))throw new re;const O=Math.round((R-C+1)/x),H=Math.round((b-v+1)/x);if(O<=0||H<=0)throw new re;if(H!==O)throw new re;const q=Math.floor(x/2);v+=q,C+=q;const Y=C+Math.floor((O-1)*x)-R;if(Y>0){if(Y>q)throw new re;C-=Y}const te=v+Math.floor((H-1)*x)-b;if(te>0){if(te>q)throw new re;v-=te}const ae=new de(O,H);for(let le=0;le<H;le++){const me=v+Math.floor(le*x);for(let ve=0;ve<O;ve++)a.get(C+Math.floor(ve*x),me)&&ae.set(ve,le)}return ae}static moduleSize(a,u){const m=u.getHeight(),x=u.getWidth();let v=a[0],b=a[1],C=!0,R=0;for(;v<x&&b<m;){if(C!==u.get(v,b)){if(++R===5)break;C=!C}v++,b++}if(v===x||b===m)throw new re;return(v-a[0])/7}}zr.NO_POINTS=new Array;class Le{PDF417Common(){}static getBitCountSum(a){return Et.sum(a)}static toIntArray(a){if(a==null||!a.length)return Le.EMPTY_INT_ARRAY;const u=new Int32Array(a.length);let m=0;for(const x of a)u[m++]=x;return u}static getCodeword(a){const u=k.binarySearch(Le.SYMBOL_TABLE,a&262143);return u<0?-1:(Le.CODEWORD_TABLE[u]-1)%Le.NUMBER_OF_CODEWORDS}}Le.NUMBER_OF_CODEWORDS=929,Le.MAX_CODEWORDS_IN_BARCODE=Le.NUMBER_OF_CODEWORDS-1,Le.MIN_ROWS_IN_BARCODE=3,Le.MAX_ROWS_IN_BARCODE=90,Le.MODULES_IN_CODEWORD=17,Le.MODULES_IN_STOP_PATTERN=18,Le.BARS_IN_MODULE=8,Le.EMPTY_INT_ARRAY=new Int32Array([]),Le.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Le.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ib{constructor(a,u){this.bits=a,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class yt{static detectMultiple(a,u,m){let x=a.getBlackMatrix(),v=yt.detect(m,x);return v.length||(x=x.clone(),x.rotate180(),v=yt.detect(m,x)),new Ib(x,v)}static detect(a,u){const m=new Array;let x=0,v=0,b=!1;for(;x<u.getHeight();){const C=yt.findVertices(u,x,v);if(C[0]==null&&C[3]==null){if(!b)break;b=!1,v=0;for(const R of m)R[1]!=null&&(x=Math.trunc(Math.max(x,R[1].getY()))),R[3]!=null&&(x=Math.max(x,Math.trunc(R[3].getY())));x+=yt.ROW_STEP;continue}if(b=!0,m.push(C),!a)break;C[2]!=null?(v=Math.trunc(C[2].getX()),x=Math.trunc(C[2].getY())):(v=Math.trunc(C[4].getX()),x=Math.trunc(C[4].getY()))}return m}static findVertices(a,u,m){const x=a.getHeight(),v=a.getWidth(),b=new Array(8);return yt.copyToResult(b,yt.findRowsWithPattern(a,x,v,u,m,yt.START_PATTERN),yt.INDEXES_START_PATTERN),b[4]!=null&&(m=Math.trunc(b[4].getX()),u=Math.trunc(b[4].getY())),yt.copyToResult(b,yt.findRowsWithPattern(a,x,v,u,m,yt.STOP_PATTERN),yt.INDEXES_STOP_PATTERN),b}static copyToResult(a,u,m){for(let x=0;x<m.length;x++)a[m[x]]=u[x]}static findRowsWithPattern(a,u,m,x,v,b){const C=new Array(4);let R=!1;const O=new Int32Array(b.length);for(;x<u;x+=yt.ROW_STEP){let q=yt.findGuardPattern(a,v,x,m,!1,b,O);if(q!=null){for(;x>0;){const Y=yt.findGuardPattern(a,v,--x,m,!1,b,O);if(Y!=null)q=Y;else{x++;break}}C[0]=new $e(q[0],x),C[1]=new $e(q[1],x),R=!0;break}}let H=x+1;if(R){let q=0,Y=Int32Array.from([Math.trunc(C[0].getX()),Math.trunc(C[1].getX())]);for(;H<u;H++){const te=yt.findGuardPattern(a,Y[0],H,m,!1,b,O);if(te!=null&&Math.abs(Y[0]-te[0])<yt.MAX_PATTERN_DRIFT&&Math.abs(Y[1]-te[1])<yt.MAX_PATTERN_DRIFT)Y=te,q=0;else{if(q>yt.SKIPPED_ROW_COUNT_MAX)break;q++}}H-=q+1,C[2]=new $e(Y[0],H),C[3]=new $e(Y[1],H)}return H-x<yt.BARCODE_MIN_HEIGHT&&k.fill(C,null),C}static findGuardPattern(a,u,m,x,v,b,C){k.fillWithin(C,0,C.length,0);let R=u,O=0;for(;a.get(R,m)&&R>0&&O++<yt.MAX_PIXEL_DRIFT;)R--;let H=R,q=0,Y=b.length;for(let te=v;H<x;H++)if(a.get(H,m)!==te)C[q]++;else{if(q===Y-1){if(yt.patternMatchVariance(C,b,yt.MAX_INDIVIDUAL_VARIANCE)<yt.MAX_AVG_VARIANCE)return new Int32Array([R,H]);R+=C[0]+C[1],S.arraycopy(C,2,C,0,q-1),C[q-1]=0,C[q]=0,q--}else q++;C[q]=1,te=!te}return q===Y-1&&yt.patternMatchVariance(C,b,yt.MAX_INDIVIDUAL_VARIANCE)<yt.MAX_AVG_VARIANCE?new Int32Array([R,H-1]):null}static patternMatchVariance(a,u,m){let x=a.length,v=0,b=0;for(let O=0;O<x;O++)v+=a[O],b+=u[O];if(v<b)return 1/0;let C=v/b;m*=C;let R=0;for(let O=0;O<x;O++){let H=a[O],q=u[O]*C,Y=H>q?H-q:q-H;if(Y>m)return 1/0;R+=Y}return R/v}}yt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),yt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),yt.MAX_AVG_VARIANCE=.42,yt.MAX_INDIVIDUAL_VARIANCE=.8,yt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),yt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),yt.MAX_PIXEL_DRIFT=3,yt.MAX_PATTERN_DRIFT=5,yt.SKIPPED_ROW_COUNT_MAX=25,yt.ROW_STEP=5,yt.BARCODE_MIN_HEIGHT=10;class Tr{constructor(a,u){if(u.length===0)throw new y;this.field=a;let m=u.length;if(m>1&&u[0]===0){let x=1;for(;x<m&&u[x]===0;)x++;x===m?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(m-x),S.arraycopy(u,x,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);if(a===1){let x=0;for(let v of this.coefficients)x=this.field.add(x,v);return x}let u=this.coefficients[0],m=this.coefficients.length;for(let x=1;x<m;x++)u=this.field.add(this.field.multiply(a,u),this.coefficients[x]);return u}add(a){if(!this.field.equals(a.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero())return a;if(a.isZero())return this;let u=this.coefficients,m=a.coefficients;if(u.length>m.length){let b=u;u=m,m=b}let x=new Int32Array(m.length),v=m.length-u.length;S.arraycopy(m,0,x,0,v);for(let b=v;b<m.length;b++)x[b]=this.field.add(u[b-v],m[b]);return new Tr(this.field,x)}subtract(a){if(!this.field.equals(a.field))throw new y("ModulusPolys do not have same ModulusGF field");return a.isZero()?this:this.add(a.negative())}multiply(a){return a instanceof Tr?this.multiplyOther(a):this.multiplyScalar(a)}multiplyOther(a){if(!this.field.equals(a.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero()||a.isZero())return new Tr(this.field,new Int32Array([0]));let u=this.coefficients,m=u.length,x=a.coefficients,v=x.length,b=new Int32Array(m+v-1);for(let C=0;C<m;C++){let R=u[C];for(let O=0;O<v;O++)b[C+O]=this.field.add(b[C+O],this.field.multiply(R,x[O]))}return new Tr(this.field,b)}negative(){let a=this.coefficients.length,u=new Int32Array(a);for(let m=0;m<a;m++)u[m]=this.field.subtract(0,this.coefficients[m]);return new Tr(this.field,u)}multiplyScalar(a){if(a===0)return new Tr(this.field,new Int32Array([0]));if(a===1)return this;let u=this.coefficients.length,m=new Int32Array(u);for(let x=0;x<u;x++)m[x]=this.field.multiply(this.coefficients[x],a);return new Tr(this.field,m)}multiplyByMonomial(a,u){if(a<0)throw new y;if(u===0)return new Tr(this.field,new Int32Array([0]));let m=this.coefficients.length,x=new Int32Array(m+a);for(let v=0;v<m;v++)x[v]=this.field.multiply(this.coefficients[v],u);return new Tr(this.field,x)}toString(){let a=new ce;for(let u=this.getDegree();u>=0;u--){let m=this.getCoefficient(u);m!==0&&(m<0?(a.append(" - "),m=-m):a.length()>0&&a.append(" + "),(u===0||m!==1)&&a.append(m),u!==0&&(u===1?a.append("x"):(a.append("x^"),a.append(u))))}return a.toString()}}class ux{add(a,u){return(a+u)%this.modulus}subtract(a,u){return(this.modulus+a-u)%this.modulus}exp(a){return this.expTable[a]}log(a){if(a===0)throw new y;return this.logTable[a]}inverse(a){if(a===0)throw new gt;return this.expTable[this.modulus-this.logTable[a]-1]}multiply(a,u){return a===0||u===0?0:this.expTable[(this.logTable[a]+this.logTable[u])%(this.modulus-1)]}getSize(){return this.modulus}equals(a){return a===this}}class _a extends ux{constructor(a,u){super(),this.modulus=a,this.expTable=new Int32Array(a),this.logTable=new Int32Array(a);let m=1;for(let x=0;x<a;x++)this.expTable[x]=m,m=m*u%a;for(let x=0;x<a-1;x++)this.logTable[this.expTable[x]]=x;this.zero=new Tr(this,new Int32Array([0])),this.one=new Tr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,u){if(a<0)throw new y;if(u===0)return this.zero;let m=new Int32Array(a+1);return m[0]=u,new Tr(this,m)}}_a.PDF417_GF=new _a(Le.NUMBER_OF_CODEWORDS,3);class Tp{constructor(){this.field=_a.PDF417_GF}decode(a,u,m){let x=new Tr(this.field,a),v=new Int32Array(u),b=!1;for(let ae=u;ae>0;ae--){let le=x.evaluateAt(this.field.exp(ae));v[u-ae]=le,le!==0&&(b=!0)}if(!b)return 0;let C=this.field.getOne();if(m!=null)for(const ae of m){let le=this.field.exp(a.length-1-ae),me=new Tr(this.field,new Int32Array([this.field.subtract(0,le),1]));C=C.multiply(me)}let R=new Tr(this.field,v),O=this.runEuclideanAlgorithm(this.field.buildMonomial(u,1),R,u),H=O[0],q=O[1],Y=this.findErrorLocations(H),te=this.findErrorMagnitudes(q,H,Y);for(let ae=0;ae<Y.length;ae++){let le=a.length-1-this.field.log(Y[ae]);if(le<0)throw E.getChecksumInstance();a[le]=this.field.subtract(a[le],te[ae])}return Y.length}runEuclideanAlgorithm(a,u,m){if(a.getDegree()<u.getDegree()){let Y=a;a=u,u=Y}let x=a,v=u,b=this.field.getZero(),C=this.field.getOne();for(;v.getDegree()>=Math.round(m/2);){let Y=x,te=b;if(x=v,b=C,x.isZero())throw E.getChecksumInstance();v=Y;let ae=this.field.getZero(),le=x.getCoefficient(x.getDegree()),me=this.field.inverse(le);for(;v.getDegree()>=x.getDegree()&&!v.isZero();){let ve=v.getDegree()-x.getDegree(),Ie=this.field.multiply(v.getCoefficient(v.getDegree()),me);ae=ae.add(this.field.buildMonomial(ve,Ie)),v=v.subtract(x.multiplyByMonomial(ve,Ie))}C=ae.multiply(b).subtract(te).negative()}let R=C.getCoefficient(0);if(R===0)throw E.getChecksumInstance();let O=this.field.inverse(R),H=C.multiply(O),q=v.multiply(O);return[H,q]}findErrorLocations(a){let u=a.getDegree(),m=new Int32Array(u),x=0;for(let v=1;v<this.field.getSize()&&x<u;v++)a.evaluateAt(v)===0&&(m[x]=this.field.inverse(v),x++);if(x!==u)throw E.getChecksumInstance();return m}findErrorMagnitudes(a,u,m){let x=u.getDegree(),v=new Int32Array(x);for(let O=1;O<=x;O++)v[x-O]=this.field.multiply(O,u.getCoefficient(O));let b=new Tr(this.field,v),C=m.length,R=new Int32Array(C);for(let O=0;O<C;O++){let H=this.field.inverse(m[O]),q=this.field.subtract(0,a.evaluateAt(H)),Y=this.field.inverse(b.evaluateAt(H));R[O]=this.field.multiply(q,Y)}return R}}class Xi{constructor(a,u,m,x,v){a instanceof Xi?this.constructor_2(a):this.constructor_1(a,u,m,x,v)}constructor_1(a,u,m,x,v){const b=u==null||m==null,C=x==null||v==null;if(b&&C)throw new re;b?(u=new $e(0,x.getY()),m=new $e(0,v.getY())):C&&(x=new $e(a.getWidth()-1,u.getY()),v=new $e(a.getWidth()-1,m.getY())),this.image=a,this.topLeft=u,this.bottomLeft=m,this.topRight=x,this.bottomRight=v,this.minX=Math.trunc(Math.min(u.getX(),m.getX())),this.maxX=Math.trunc(Math.max(x.getX(),v.getX())),this.minY=Math.trunc(Math.min(u.getY(),x.getY())),this.maxY=Math.trunc(Math.max(m.getY(),v.getY()))}constructor_2(a){this.image=a.image,this.topLeft=a.getTopLeft(),this.bottomLeft=a.getBottomLeft(),this.topRight=a.getTopRight(),this.bottomRight=a.getBottomRight(),this.minX=a.getMinX(),this.maxX=a.getMaxX(),this.minY=a.getMinY(),this.maxY=a.getMaxY()}static merge(a,u){return a==null?u:u==null?a:new Xi(a.image,a.topLeft,a.bottomLeft,u.topRight,u.bottomRight)}addMissingRows(a,u,m){let x=this.topLeft,v=this.bottomLeft,b=this.topRight,C=this.bottomRight;if(a>0){let R=m?this.topLeft:this.topRight,O=Math.trunc(R.getY()-a);O<0&&(O=0);let H=new $e(R.getX(),O);m?x=H:b=H}if(u>0){let R=m?this.bottomLeft:this.bottomRight,O=Math.trunc(R.getY()+u);O>=this.image.getHeight()&&(O=this.image.getHeight()-1);let H=new $e(R.getX(),O);m?v=H:C=H}return new Xi(this.image,x,v,b,C)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Hr{constructor(a,u,m,x){this.columnCount=a,this.errorCorrectionLevel=x,this.rowCountUpperPart=u,this.rowCountLowerPart=m,this.rowCount=u+m}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Yi{constructor(){this.buffer=""}static form(a,u){let m=-1;function x(b,C,R,O,H,q){if(b==="%%")return"%";if(u[++m]===void 0)return;b=O?parseInt(O.substr(1)):void 0;let Y=H?parseInt(H.substr(1)):void 0,te;switch(q){case"s":te=u[m];break;case"c":te=u[m][0];break;case"f":te=parseFloat(u[m]).toFixed(b);break;case"p":te=parseFloat(u[m]).toPrecision(b);break;case"e":te=parseFloat(u[m]).toExponential(b);break;case"x":te=parseInt(u[m]).toString(Y||16);break;case"d":te=parseFloat(parseInt(u[m],Y||10).toPrecision(b)).toFixed(0);break}te=typeof te=="object"?JSON.stringify(te):(+te).toString(Y);let ae=parseInt(R),le=R&&R[0]+""=="0"?"0":" ";for(;te.length<ae;)te=C!==void 0?te+le:le+te;return te}let v=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(v,x)}format(a,...u){this.buffer+=Yi.form(a,u)}toString(){return this.buffer}}class Gu{constructor(a){this.boundingBox=new Xi(a),this.codewords=new Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let u=this.getCodeword(a);if(u!=null)return u;for(let m=1;m<Gu.MAX_NEARBY_DISTANCE;m++){let x=this.imageRowToCodewordIndex(a)-m;if(x>=0&&(u=this.codewords[x],u!=null)||(x=this.imageRowToCodewordIndex(a)+m,x<this.codewords.length&&(u=this.codewords[x],u!=null)))return u}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,u){this.codewords[this.imageRowToCodewordIndex(a)]=u}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const a=new Yi;let u=0;for(const m of this.codewords){if(m==null){a.format("%3d:    |   %n",u++);continue}a.format("%3d: %3d|%3d%n",u++,m.getRowNumber(),m.getValue())}return a.toString()}}Gu.MAX_NEARBY_DISTANCE=5;class $u{constructor(){this.values=new Map}setValue(a){a=Math.trunc(a);let u=this.values.get(a);u==null&&(u=0),u++,this.values.set(a,u)}getValue(){let a=-1,u=new Array;for(const[m,x]of this.values.entries()){const v={getKey:()=>m,getValue:()=>x};v.getValue()>a?(a=v.getValue(),u=[],u.push(v.getKey())):v.getValue()===a&&u.push(v.getKey())}return Le.toIntArray(u)}getConfidence(a){return this.values.get(a)}}class Rb extends Gu{constructor(a,u){super(a),this._isLeft=u}setRowNumbers(){for(let a of this.getCodewords())a!=null&&a.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(a){let u=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(u,a);let m=this.getBoundingBox(),x=this._isLeft?m.getTopLeft():m.getTopRight(),v=this._isLeft?m.getBottomLeft():m.getBottomRight(),b=this.imageRowToCodewordIndex(Math.trunc(x.getY())),C=this.imageRowToCodewordIndex(Math.trunc(v.getY())),R=-1,O=1,H=0;for(let q=b;q<C;q++){if(u[q]==null)continue;let Y=u[q],te=Y.getRowNumber()-R;if(te===0)H++;else if(te===1)O=Math.max(O,H),H=1,R=Y.getRowNumber();else if(te<0||Y.getRowNumber()>=a.getRowCount()||te>q)u[q]=null;else{let ae;O>2?ae=(O-2)*te:ae=te;let le=ae>=q;for(let me=1;me<=ae&&!le;me++)le=u[q-me]!=null;le?u[q]=null:(R=Y.getRowNumber(),H=1)}}}getRowHeights(){let a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);let u=new Int32Array(a.getRowCount());for(let m of this.getCodewords())if(m!=null){let x=m.getRowNumber();if(x>=u.length)continue;u[x]++}return u}adjustIncompleteIndicatorColumnRowNumbers(a){let u=this.getBoundingBox(),m=this._isLeft?u.getTopLeft():u.getTopRight(),x=this._isLeft?u.getBottomLeft():u.getBottomRight(),v=this.imageRowToCodewordIndex(Math.trunc(m.getY())),b=this.imageRowToCodewordIndex(Math.trunc(x.getY())),C=this.getCodewords(),R=-1;for(let O=v;O<b;O++){if(C[O]==null)continue;let H=C[O];H.setRowNumberAsRowIndicatorColumn();let q=H.getRowNumber()-R;q===0||(q===1?R=H.getRowNumber():H.getRowNumber()>=a.getRowCount()?C[O]=null:R=H.getRowNumber())}}getBarcodeMetadata(){let a=this.getCodewords(),u=new $u,m=new $u,x=new $u,v=new $u;for(let C of a){if(C==null)continue;C.setRowNumberAsRowIndicatorColumn();let R=C.getValue()%30,O=C.getRowNumber();switch(this._isLeft||(O+=2),O%3){case 0:m.setValue(R*3+1);break;case 1:v.setValue(R/3),x.setValue(R%3);break;case 2:u.setValue(R+1);break}}if(u.getValue().length===0||m.getValue().length===0||x.getValue().length===0||v.getValue().length===0||u.getValue()[0]<1||m.getValue()[0]+x.getValue()[0]<Le.MIN_ROWS_IN_BARCODE||m.getValue()[0]+x.getValue()[0]>Le.MAX_ROWS_IN_BARCODE)return null;let b=new Hr(u.getValue()[0],m.getValue()[0],x.getValue()[0],v.getValue()[0]);return this.removeIncorrectCodewords(a,b),b}removeIncorrectCodewords(a,u){for(let m=0;m<a.length;m++){let x=a[m];if(a[m]==null)continue;let v=x.getValue()%30,b=x.getRowNumber();if(b>u.getRowCount()){a[m]=null;continue}switch(this._isLeft||(b+=2),b%3){case 0:v*3+1!==u.getRowCountUpperPart()&&(a[m]=null);break;case 1:(Math.trunc(v/3)!==u.getErrorCorrectionLevel()||v%3!==u.getRowCountLowerPart())&&(a[m]=null);break;case 2:v+1!==u.getColumnCount()&&(a[m]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class qu{constructor(a,u){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=a,this.barcodeColumnCount=a.getColumnCount(),this.boundingBox=u,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let a=Le.MAX_CODEWORDS_IN_BARCODE,u;do u=a,a=this.adjustRowNumbersAndGetCount();while(a>0&&a<u);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(a){a!=null&&a.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let a=this.adjustRowNumbersByRow();if(a===0)return 0;for(let u=1;u<this.barcodeColumnCount+1;u++){let m=this.detectionResultColumns[u].getCodewords();for(let x=0;x<m.length;x++)m[x]!=null&&(m[x].hasValidRowNumber()||this.adjustRowNumbers(u,x,m))}return a}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let a=this.detectionResultColumns[0].getCodewords(),u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<a.length;m++)if(a[m]!=null&&u[m]!=null&&a[m].getRowNumber()===u[m].getRowNumber())for(let x=1;x<=this.barcodeColumnCount;x++){let v=this.detectionResultColumns[x].getCodewords()[m];v!=null&&(v.setRowNumber(a[m].getRowNumber()),v.hasValidRowNumber()||(this.detectionResultColumns[x].getCodewords()[m]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let a=0,u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<u.length;m++){if(u[m]==null)continue;let x=u[m].getRowNumber(),v=0;for(let b=this.barcodeColumnCount+1;b>0&&v<this.ADJUST_ROW_NUMBER_SKIP;b--){let C=this.detectionResultColumns[b].getCodewords()[m];C!=null&&(v=qu.adjustRowNumberIfValid(x,v,C),C.hasValidRowNumber()||a++)}}return a}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let a=0,u=this.detectionResultColumns[0].getCodewords();for(let m=0;m<u.length;m++){if(u[m]==null)continue;let x=u[m].getRowNumber(),v=0;for(let b=1;b<this.barcodeColumnCount+1&&v<this.ADJUST_ROW_NUMBER_SKIP;b++){let C=this.detectionResultColumns[b].getCodewords()[m];C!=null&&(v=qu.adjustRowNumberIfValid(x,v,C),C.hasValidRowNumber()||a++)}}return a}static adjustRowNumberIfValid(a,u,m){return m==null||m.hasValidRowNumber()||(m.isValidRowNumber(a)?(m.setRowNumber(a),u=0):++u),u}adjustRowNumbers(a,u,m){if(!this.detectionResultColumns[a-1])return;let x=m[u],v=this.detectionResultColumns[a-1].getCodewords(),b=v;this.detectionResultColumns[a+1]!=null&&(b=this.detectionResultColumns[a+1].getCodewords());let C=new Array(14);C[2]=v[u],C[3]=b[u],u>0&&(C[0]=m[u-1],C[4]=v[u-1],C[5]=b[u-1]),u>1&&(C[8]=m[u-2],C[10]=v[u-2],C[11]=b[u-2]),u<m.length-1&&(C[1]=m[u+1],C[6]=v[u+1],C[7]=b[u+1]),u<m.length-2&&(C[9]=m[u+2],C[12]=v[u+2],C[13]=b[u+2]);for(let R of C)if(qu.adjustRowNumber(x,R))return}static adjustRowNumber(a,u){return u==null?!1:u.hasValidRowNumber()&&u.getBucket()===a.getBucket()?(a.setRowNumber(u.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(a){this.boundingBox=a}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(a,u){this.detectionResultColumns[a]=u}getDetectionResultColumn(a){return this.detectionResultColumns[a]}toString(){let a=this.detectionResultColumns[0];a==null&&(a=this.detectionResultColumns[this.barcodeColumnCount+1]);let u=new Yi;for(let m=0;m<a.getCodewords().length;m++){u.format("CW %3d:",m);for(let x=0;x<this.barcodeColumnCount+2;x++){if(this.detectionResultColumns[x]==null){u.format("    |   ");continue}let v=this.detectionResultColumns[x].getCodewords()[m];if(v==null){u.format("    |   ");continue}u.format(" %3d|%3d",v.getRowNumber(),v.getValue())}u.format("%n")}return u.toString()}}class _c{constructor(a,u,m,x){this.rowNumber=_c.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(u),this.bucket=Math.trunc(m),this.value=Math.trunc(x)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==_c.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}_c.BARCODE_ROW_UNKNOWN=-1;class js{static initialize(){for(let a=0;a<Le.SYMBOL_TABLE.length;a++){let u=Le.SYMBOL_TABLE[a],m=u&1;for(let x=0;x<Le.BARS_IN_MODULE;x++){let v=0;for(;(u&1)===m;)v+=1,u>>=1;m=u&1,js.RATIOS_TABLE[a]||(js.RATIOS_TABLE[a]=new Array(Le.BARS_IN_MODULE)),js.RATIOS_TABLE[a][Le.BARS_IN_MODULE-x-1]=Math.fround(v/Le.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(a){let u=js.getDecodedCodewordValue(js.sampleBitCounts(a));return u!==-1?u:js.getClosestDecodedValue(a)}static sampleBitCounts(a){let u=Et.sum(a),m=new Int32Array(Le.BARS_IN_MODULE),x=0,v=0;for(let b=0;b<Le.MODULES_IN_CODEWORD;b++){let C=u/(2*Le.MODULES_IN_CODEWORD)+b*u/Le.MODULES_IN_CODEWORD;v+a[x]<=C&&(v+=a[x],x++),m[x]++}return m}static getDecodedCodewordValue(a){let u=js.getBitValue(a);return Le.getCodeword(u)===-1?-1:u}static getBitValue(a){let u=0;for(let m=0;m<a.length;m++)for(let x=0;x<a[m];x++)u=u<<1|(m%2===0?1:0);return Math.trunc(u)}static getClosestDecodedValue(a){let u=Et.sum(a),m=new Array(Le.BARS_IN_MODULE);if(u>1)for(let b=0;b<m.length;b++)m[b]=Math.fround(a[b]/u);let x=pc.MAX_VALUE,v=-1;this.bSymbolTableReady||js.initialize();for(let b=0;b<js.RATIOS_TABLE.length;b++){let C=0,R=js.RATIOS_TABLE[b];for(let O=0;O<Le.BARS_IN_MODULE;O++){let H=Math.fround(R[O]-m[O]);if(C+=Math.fround(H*H),C>=x)break}C<x&&(x=C,v=Le.SYMBOL_TABLE[b])}return v}}js.bSymbolTableReady=!1,js.RATIOS_TABLE=new Array(Le.SYMBOL_TABLE.length).map($=>new Array(Le.BARS_IN_MODULE));class dx{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(a){this.segmentIndex=a}getFileId(){return this.fileId}setFileId(a){this.fileId=a}getOptionalData(){return this.optionalData}setOptionalData(a){this.optionalData=a}isLastSegment(){return this.lastSegment}setLastSegment(a){this.lastSegment=a}getSegmentCount(){return this.segmentCount}setSegmentCount(a){this.segmentCount=a}getSender(){return this.sender||null}setSender(a){this.sender=a}getAddressee(){return this.addressee||null}setAddressee(a){this.addressee=a}getFileName(){return this.fileName}setFileName(a){this.fileName=a}getFileSize(){return this.fileSize}setFileSize(a){this.fileSize=a}getChecksum(){return this.checksum}setChecksum(a){this.checksum=a}getTimestamp(){return this.timestamp}setTimestamp(a){this.timestamp=a}}class Vt{static parseLong(a,u=void 0){return parseInt(a,u)}}class kb extends f{}kb.kind="NullPointerException";class Ki{writeBytes(a){this.writeBytesOffset(a,0,a.length)}writeBytesOffset(a,u,m){if(a==null)throw new kb;if(u<0||u>a.length||m<0||u+m>a.length||u+m<0)throw new I;if(m===0)return;for(let x=0;x<m;x++)this.write(a[u+x])}flush(){}close(){}}class cf extends f{}class Mb extends Ki{constructor(a=32){if(super(),this.count=0,a<0)throw new y("Negative initial size: "+a);this.buf=new Uint8Array(a)}ensureCapacity(a){a-this.buf.length>0&&this.grow(a)}grow(a){let m=this.buf.length<<1;if(m-a<0&&(m=a),m<0){if(a<0)throw new cf;m=T.MAX_VALUE}this.buf=k.copyOfUint8Array(this.buf,m)}write(a){this.ensureCapacity(this.count+1),this.buf[this.count]=a,this.count+=1}writeBytesOffset(a,u,m){if(u<0||u>a.length||m<0||u+m-a.length>0)throw new I;this.ensureCapacity(this.count+m),S.arraycopy(a,u,this.buf,this.count,m),this.count+=m}writeTo(a){a.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return k.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(a){return a?typeof a=="string"?this.toString_string(a):this.toString_number(a):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(a){return new String(this.buf).toString()}toString_number(a){return new String(this.buf).toString()}close(){}}var pn;(function($){$[$.ALPHA=0]="ALPHA",$[$.LOWER=1]="LOWER",$[$.MIXED=2]="MIXED",$[$.PUNCT=3]="PUNCT",$[$.ALPHA_SHIFT=4]="ALPHA_SHIFT",$[$.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(pn||(pn={}));function Pp(){if(typeof window<"u")return window.BigInt||null;if(typeof Yp<"u")return Yp.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ip;function Ea($){if(typeof Ip>"u"&&(Ip=Pp()),Ip===null)throw new Error("BigInt is not supported!");return Ip($)}function fA(){let $=[];$[0]=Ea(1);let a=Ea(900);$[1]=a;for(let u=2;u<16;u++)$[u]=$[u-1]*a;return $}class ye{static decode(a,u){let m=new ce(""),x=Z.ISO8859_1;m.enableDecoding(x);let v=1,b=a[v++],C=new dx;for(;v<a[0];){switch(b){case ye.TEXT_COMPACTION_MODE_LATCH:v=ye.textCompaction(a,v,m);break;case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:v=ye.byteCompaction(b,a,x,v,m);break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(a[v++]);break;case ye.NUMERIC_COMPACTION_MODE_LATCH:v=ye.numericCompaction(a,v,m);break;case ye.ECI_CHARSET:Z.getCharacterSetECIByValue(a[v++]);break;case ye.ECI_GENERAL_PURPOSE:v+=2;break;case ye.ECI_USER_DEFINED:v++;break;case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:v=ye.decodeMacroBlock(a,v,C);break;case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:throw new F;default:v--,v=ye.textCompaction(a,v,m);break}if(v<a.length)b=a[v++];else throw F.getFormatInstance()}if(m.length()===0)throw F.getFormatInstance();let R=new Nt(null,m.toString(),null,u);return R.setOther(C),R}static decodeMacroBlock(a,u,m){if(u+ye.NUMBER_OF_SEQUENCE_CODEWORDS>a[0])throw F.getFormatInstance();let x=new Int32Array(ye.NUMBER_OF_SEQUENCE_CODEWORDS);for(let C=0;C<ye.NUMBER_OF_SEQUENCE_CODEWORDS;C++,u++)x[C]=a[u];m.setSegmentIndex(T.parseInt(ye.decodeBase900toBase10(x,ye.NUMBER_OF_SEQUENCE_CODEWORDS)));let v=new ce;u=ye.textCompaction(a,u,v),m.setFileId(v.toString());let b=-1;for(a[u]===ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(b=u+1);u<a[0];)switch(a[u]){case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(u++,a[u]){case ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let C=new ce;u=ye.textCompaction(a,u+1,C),m.setFileName(C.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let R=new ce;u=ye.textCompaction(a,u+1,R),m.setSender(R.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let O=new ce;u=ye.textCompaction(a,u+1,O),m.setAddressee(O.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let H=new ce;u=ye.numericCompaction(a,u+1,H),m.setSegmentCount(T.parseInt(H.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let q=new ce;u=ye.numericCompaction(a,u+1,q),m.setTimestamp(Vt.parseLong(q.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let Y=new ce;u=ye.numericCompaction(a,u+1,Y),m.setChecksum(T.parseInt(Y.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let te=new ce;u=ye.numericCompaction(a,u+1,te),m.setFileSize(Vt.parseLong(te.toString()));break;default:throw F.getFormatInstance()}break;case ye.MACRO_PDF417_TERMINATOR:u++,m.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(b!==-1){let C=u-b;m.isLastSegment()&&C--,m.setOptionalData(k.copyOfRange(a,b,b+C))}return u}static textCompaction(a,u,m){let x=new Int32Array((a[0]-u)*2),v=new Int32Array((a[0]-u)*2),b=0,C=!1;for(;u<a[0]&&!C;){let R=a[u++];if(R<ye.TEXT_COMPACTION_MODE_LATCH)x[b]=R/30,x[b+1]=R%30,b+=2;else switch(R){case ye.TEXT_COMPACTION_MODE_LATCH:x[b++]=ye.TEXT_COMPACTION_MODE_LATCH;break;case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:u--,C=!0;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x[b]=ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,R=a[u++],v[b]=R,b++;break}}return ye.decodeTextCompaction(x,v,b,m),u}static decodeTextCompaction(a,u,m,x){let v=pn.ALPHA,b=pn.ALPHA,C=0;for(;C<m;){let R=a[C],O="";switch(v){case pn.ALPHA:if(R<26)O=String.fromCharCode(65+R);else switch(R){case 26:O=" ";break;case ye.LL:v=pn.LOWER;break;case ye.ML:v=pn.MIXED;break;case ye.PS:b=v,v=pn.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(u[C]);break;case ye.TEXT_COMPACTION_MODE_LATCH:v=pn.ALPHA;break}break;case pn.LOWER:if(R<26)O=String.fromCharCode(97+R);else switch(R){case 26:O=" ";break;case ye.AS:b=v,v=pn.ALPHA_SHIFT;break;case ye.ML:v=pn.MIXED;break;case ye.PS:b=v,v=pn.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(u[C]);break;case ye.TEXT_COMPACTION_MODE_LATCH:v=pn.ALPHA;break}break;case pn.MIXED:if(R<ye.PL)O=ye.MIXED_CHARS[R];else switch(R){case ye.PL:v=pn.PUNCT;break;case 26:O=" ";break;case ye.LL:v=pn.LOWER;break;case ye.AL:v=pn.ALPHA;break;case ye.PS:b=v,v=pn.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(u[C]);break;case ye.TEXT_COMPACTION_MODE_LATCH:v=pn.ALPHA;break}break;case pn.PUNCT:if(R<ye.PAL)O=ye.PUNCT_CHARS[R];else switch(R){case ye.PAL:v=pn.ALPHA;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(u[C]);break;case ye.TEXT_COMPACTION_MODE_LATCH:v=pn.ALPHA;break}break;case pn.ALPHA_SHIFT:if(v=b,R<26)O=String.fromCharCode(65+R);else switch(R){case 26:O=" ";break;case ye.TEXT_COMPACTION_MODE_LATCH:v=pn.ALPHA;break}break;case pn.PUNCT_SHIFT:if(v=b,R<ye.PAL)O=ye.PUNCT_CHARS[R];else switch(R){case ye.PAL:v=pn.ALPHA;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(u[C]);break;case ye.TEXT_COMPACTION_MODE_LATCH:v=pn.ALPHA;break}break}O!==""&&x.append(O),C++}}static byteCompaction(a,u,m,x,v){let b=new Mb,C=0,R=0,O=!1;switch(a){case ye.BYTE_COMPACTION_MODE_LATCH:let H=new Int32Array(6),q=u[x++];for(;x<u[0]&&!O;)switch(H[C++]=q,R=900*R+q,q=u[x++],q){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:x--,O=!0;break;default:if(C%5===0&&C>0){for(let Y=0;Y<6;++Y)b.write(Number(Ea(R)>>Ea(8*(5-Y))));R=0,C=0}break}x===u[0]&&q<ye.TEXT_COMPACTION_MODE_LATCH&&(H[C++]=q);for(let Y=0;Y<C;Y++)b.write(H[Y]);break;case ye.BYTE_COMPACTION_MODE_LATCH_6:for(;x<u[0]&&!O;){let Y=u[x++];if(Y<ye.TEXT_COMPACTION_MODE_LATCH)C++,R=900*R+Y;else switch(Y){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:x--,O=!0;break}if(C%5===0&&C>0){for(let te=0;te<6;++te)b.write(Number(Ea(R)>>Ea(8*(5-te))));R=0,C=0}}break}return v.append(se.decode(b.toByteArray(),m)),x}static numericCompaction(a,u,m){let x=0,v=!1,b=new Int32Array(ye.MAX_NUMERIC_CODEWORDS);for(;u<a[0]&&!v;){let C=a[u++];if(u===a[0]&&(v=!0),C<ye.TEXT_COMPACTION_MODE_LATCH)b[x]=C,x++;else switch(C){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:u--,v=!0;break}(x%ye.MAX_NUMERIC_CODEWORDS===0||C===ye.NUMERIC_COMPACTION_MODE_LATCH||v)&&x>0&&(m.append(ye.decodeBase900toBase10(b,x)),x=0)}return u}static decodeBase900toBase10(a,u){let m=Ea(0);for(let v=0;v<u;v++)m+=ye.EXP900[u-v-1]*Ea(a[v]);let x=m.toString();if(x.charAt(0)!=="1")throw new F;return x.substring(1)}}ye.TEXT_COMPACTION_MODE_LATCH=900,ye.BYTE_COMPACTION_MODE_LATCH=901,ye.NUMERIC_COMPACTION_MODE_LATCH=902,ye.BYTE_COMPACTION_MODE_LATCH_6=924,ye.ECI_USER_DEFINED=925,ye.ECI_GENERAL_PURPOSE=926,ye.ECI_CHARSET=927,ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ye.MACRO_PDF417_TERMINATOR=922,ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ye.MAX_NUMERIC_CODEWORDS=15,ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ye.PL=25,ye.LL=27,ye.AS=27,ye.ML=28,ye.AL=28,ye.PS=29,ye.PAL=29,ye.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ye.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ye.EXP900=Pp()?fA():[],ye.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ct{constructor(){}static decode(a,u,m,x,v,b,C){let R=new Xi(a,u,m,x,v),O=null,H=null,q;for(let ae=!0;;ae=!1){if(u!=null&&(O=Ct.getRowIndicatorColumn(a,R,u,!0,b,C)),x!=null&&(H=Ct.getRowIndicatorColumn(a,R,x,!1,b,C)),q=Ct.merge(O,H),q==null)throw re.getNotFoundInstance();let le=q.getBoundingBox();if(ae&&le!=null&&(le.getMinY()<R.getMinY()||le.getMaxY()>R.getMaxY()))R=le;else break}q.setBoundingBox(R);let Y=q.getBarcodeColumnCount()+1;q.setDetectionResultColumn(0,O),q.setDetectionResultColumn(Y,H);let te=O!=null;for(let ae=1;ae<=Y;ae++){let le=te?ae:Y-ae;if(q.getDetectionResultColumn(le)!==void 0)continue;let me;le===0||le===Y?me=new Rb(R,le===0):me=new Gu(R),q.setDetectionResultColumn(le,me);let ve=-1,Ie=ve;for(let Re=R.getMinY();Re<=R.getMaxY();Re++){if(ve=Ct.getStartColumn(q,le,Re,te),ve<0||ve>R.getMaxX()){if(Ie===-1)continue;ve=Ie}let Ne=Ct.detectCodeword(a,R.getMinX(),R.getMaxX(),te,ve,Re,b,C);Ne!=null&&(me.setCodeword(Re,Ne),Ie=ve,b=Math.min(b,Ne.getWidth()),C=Math.max(C,Ne.getWidth()))}}return Ct.createDecoderResult(q)}static merge(a,u){if(a==null&&u==null)return null;let m=Ct.getBarcodeMetadata(a,u);if(m==null)return null;let x=Xi.merge(Ct.adjustBoundingBox(a),Ct.adjustBoundingBox(u));return new qu(m,x)}static adjustBoundingBox(a){if(a==null)return null;let u=a.getRowHeights();if(u==null)return null;let m=Ct.getMax(u),x=0;for(let C of u)if(x+=m-C,C>0)break;let v=a.getCodewords();for(let C=0;x>0&&v[C]==null;C++)x--;let b=0;for(let C=u.length-1;C>=0&&(b+=m-u[C],!(u[C]>0));C--);for(let C=v.length-1;b>0&&v[C]==null;C--)b--;return a.getBoundingBox().addMissingRows(x,b,a.isLeft())}static getMax(a){let u=-1;for(let m of a)u=Math.max(u,m);return u}static getBarcodeMetadata(a,u){let m;if(a==null||(m=a.getBarcodeMetadata())==null)return u==null?null:u.getBarcodeMetadata();let x;return u==null||(x=u.getBarcodeMetadata())==null?m:m.getColumnCount()!==x.getColumnCount()&&m.getErrorCorrectionLevel()!==x.getErrorCorrectionLevel()&&m.getRowCount()!==x.getRowCount()?null:m}static getRowIndicatorColumn(a,u,m,x,v,b){let C=new Rb(u,x);for(let R=0;R<2;R++){let O=R===0?1:-1,H=Math.trunc(Math.trunc(m.getX()));for(let q=Math.trunc(Math.trunc(m.getY()));q<=u.getMaxY()&&q>=u.getMinY();q+=O){let Y=Ct.detectCodeword(a,0,a.getWidth(),x,H,q,v,b);Y!=null&&(C.setCodeword(q,Y),x?H=Y.getStartX():H=Y.getEndX())}}return C}static adjustCodewordCount(a,u){let m=u[0][1],x=m.getValue(),v=a.getBarcodeColumnCount()*a.getBarcodeRowCount()-Ct.getNumberOfECCodeWords(a.getBarcodeECLevel());if(x.length===0){if(v<1||v>Le.MAX_CODEWORDS_IN_BARCODE)throw re.getNotFoundInstance();m.setValue(v)}else x[0]!==v&&m.setValue(v)}static createDecoderResult(a){let u=Ct.createBarcodeMatrix(a);Ct.adjustCodewordCount(a,u);let m=new Array,x=new Int32Array(a.getBarcodeRowCount()*a.getBarcodeColumnCount()),v=[],b=new Array;for(let R=0;R<a.getBarcodeRowCount();R++)for(let O=0;O<a.getBarcodeColumnCount();O++){let H=u[R][O+1].getValue(),q=R*a.getBarcodeColumnCount()+O;H.length===0?m.push(q):H.length===1?x[q]=H[0]:(b.push(q),v.push(H))}let C=new Array(v.length);for(let R=0;R<C.length;R++)C[R]=v[R];return Ct.createDecoderResultFromAmbiguousValues(a.getBarcodeECLevel(),x,Le.toIntArray(m),Le.toIntArray(b),C)}static createDecoderResultFromAmbiguousValues(a,u,m,x,v){let b=new Int32Array(x.length),C=100;for(;C-- >0;){for(let R=0;R<b.length;R++)u[x[R]]=v[R][b[R]];try{return Ct.decodeCodewords(u,a,m)}catch(R){if(!(R instanceof E))throw R}if(b.length===0)throw E.getChecksumInstance();for(let R=0;R<b.length;R++)if(b[R]<v[R].length-1){b[R]++;break}else if(b[R]=0,R===b.length-1)throw E.getChecksumInstance()}throw E.getChecksumInstance()}static createBarcodeMatrix(a){let u=Array.from({length:a.getBarcodeRowCount()},()=>new Array(a.getBarcodeColumnCount()+2));for(let x=0;x<u.length;x++)for(let v=0;v<u[x].length;v++)u[x][v]=new $u;let m=0;for(let x of a.getDetectionResultColumns()){if(x!=null){for(let v of x.getCodewords())if(v!=null){let b=v.getRowNumber();if(b>=0){if(b>=u.length)continue;u[b][m].setValue(v.getValue())}}}m++}return u}static isValidBarcodeColumn(a,u){return u>=0&&u<=a.getBarcodeColumnCount()+1}static getStartColumn(a,u,m,x){let v=x?1:-1,b=null;if(Ct.isValidBarcodeColumn(a,u-v)&&(b=a.getDetectionResultColumn(u-v).getCodeword(m)),b!=null)return x?b.getEndX():b.getStartX();if(b=a.getDetectionResultColumn(u).getCodewordNearby(m),b!=null)return x?b.getStartX():b.getEndX();if(Ct.isValidBarcodeColumn(a,u-v)&&(b=a.getDetectionResultColumn(u-v).getCodewordNearby(m)),b!=null)return x?b.getEndX():b.getStartX();let C=0;for(;Ct.isValidBarcodeColumn(a,u-v);){u-=v;for(let R of a.getDetectionResultColumn(u).getCodewords())if(R!=null)return(x?R.getEndX():R.getStartX())+v*C*(R.getEndX()-R.getStartX());C++}return x?a.getBoundingBox().getMinX():a.getBoundingBox().getMaxX()}static detectCodeword(a,u,m,x,v,b,C,R){v=Ct.adjustCodewordStartColumn(a,u,m,x,v,b);let O=Ct.getModuleBitCount(a,u,m,x,v,b);if(O==null)return null;let H,q=Et.sum(O);if(x)H=v+q;else{for(let ae=0;ae<O.length/2;ae++){let le=O[ae];O[ae]=O[O.length-1-ae],O[O.length-1-ae]=le}H=v,v=H-q}if(!Ct.checkCodewordSkew(q,C,R))return null;let Y=js.getDecodedValue(O),te=Le.getCodeword(Y);return te===-1?null:new _c(v,H,Ct.getCodewordBucketNumber(Y),te)}static getModuleBitCount(a,u,m,x,v,b){let C=v,R=new Int32Array(8),O=0,H=x?1:-1,q=x;for(;(x?C<m:C>=u)&&O<R.length;)a.get(C,b)===q?(R[O]++,C+=H):(O++,q=!q);return O===R.length||C===(x?m:u)&&O===R.length-1?R:null}static getNumberOfECCodeWords(a){return 2<<a}static adjustCodewordStartColumn(a,u,m,x,v,b){let C=v,R=x?-1:1;for(let O=0;O<2;O++){for(;(x?C>=u:C<m)&&x===a.get(C,b);){if(Math.abs(v-C)>Ct.CODEWORD_SKEW_SIZE)return v;C+=R}R=-R,x=!x}return C}static checkCodewordSkew(a,u,m){return u-Ct.CODEWORD_SKEW_SIZE<=a&&a<=m+Ct.CODEWORD_SKEW_SIZE}static decodeCodewords(a,u,m){if(a.length===0)throw F.getFormatInstance();let x=1<<u+1,v=Ct.correctErrors(a,m,x);Ct.verifyCodewordCount(a,x);let b=ye.decode(a,""+u);return b.setErrorsCorrected(v),b.setErasures(m.length),b}static correctErrors(a,u,m){if(u!=null&&u.length>m/2+Ct.MAX_ERRORS||m<0||m>Ct.MAX_EC_CODEWORDS)throw E.getChecksumInstance();return Ct.errorCorrection.decode(a,m,u)}static verifyCodewordCount(a,u){if(a.length<4)throw F.getFormatInstance();let m=a[0];if(m>a.length)throw F.getFormatInstance();if(m===0)if(u<a.length)a[0]=a.length-u;else throw F.getFormatInstance()}static getBitCountForCodeword(a){let u=new Int32Array(8),m=0,x=u.length-1;for(;!((a&1)!==m&&(m=a&1,x--,x<0));)u[x]++,a>>=1;return u}static getCodewordBucketNumber(a){return a instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(a):this.getCodewordBucketNumber_number(a)}static getCodewordBucketNumber_number(a){return Ct.getCodewordBucketNumber(Ct.getBitCountForCodeword(a))}static getCodewordBucketNumber_Int32Array(a){return(a[0]-a[2]+a[4]-a[6]+9)%9}static toString(a){let u=new Yi;for(let m=0;m<a.length;m++){u.format("Row %2d: ",m);for(let x=0;x<a[m].length;x++){let v=a[m][x];v.getValue().length===0?u.format("        ",null):u.format("%4d(%2d)",v.getValue()[0],v.getConfidence(v.getValue()[0]))}u.format("%n")}return u.toString()}}Ct.CODEWORD_SKEW_SIZE=2,Ct.MAX_ERRORS=3,Ct.MAX_EC_CODEWORDS=512,Ct.errorCorrection=new Tp;class Vr{decode(a,u=null){let m=Vr.decode(a,u,!1);if(m==null||m.length===0||m[0]==null)throw re.getNotFoundInstance();return m[0]}decodeMultiple(a,u=null){try{return Vr.decode(a,u,!0)}catch(m){throw m instanceof F||m instanceof E?re.getNotFoundInstance():m}}static decode(a,u,m){const x=new Array,v=yt.detectMultiple(a,u,m);for(const b of v.getPoints()){const C=Ct.decode(v.getBits(),b[4],b[5],b[6],b[7],Vr.getMinCodewordWidth(b),Vr.getMaxCodewordWidth(b)),R=new De(C.getText(),C.getRawBytes(),void 0,b,be.PDF_417);R.putMetadata(Ze.ERROR_CORRECTION_LEVEL,C.getECLevel());const O=C.getOther();O!=null&&R.putMetadata(Ze.PDF417_EXTRA_METADATA,O),x.push(R)}return x.map(b=>b)}static getMaxWidth(a,u){return a==null||u==null?0:Math.trunc(Math.abs(a.getX()-u.getX()))}static getMinWidth(a,u){return a==null||u==null?T.MAX_VALUE:Math.trunc(Math.abs(a.getX()-u.getX()))}static getMaxCodewordWidth(a){return Math.floor(Math.max(Math.max(Vr.getMaxWidth(a[0],a[4]),Vr.getMaxWidth(a[6],a[2])*Le.MODULES_IN_CODEWORD/Le.MODULES_IN_STOP_PATTERN),Math.max(Vr.getMaxWidth(a[1],a[5]),Vr.getMaxWidth(a[7],a[3])*Le.MODULES_IN_CODEWORD/Le.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(a){return Math.floor(Math.min(Math.min(Vr.getMinWidth(a[0],a[4]),Vr.getMinWidth(a[6],a[2])*Le.MODULES_IN_CODEWORD/Le.MODULES_IN_STOP_PATTERN),Math.min(Vr.getMinWidth(a[1],a[5]),Vr.getMinWidth(a[7],a[3])*Le.MODULES_IN_CODEWORD/Le.MODULES_IN_STOP_PATTERN)))}reset(){}}class ri extends f{}ri.kind="ReaderException";class Ob{constructor(a,u){this.verbose=a===!0,u&&this.setHints(u)}decode(a,u){return u&&this.setHints(u),this.decodeInternal(a)}decodeWithState(a){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(a)}setHints(a){this.hints=a;const u=!r(a)&&a.get(z.TRY_HARDER)===!0,m=r(a)?null:a.get(z.POSSIBLE_FORMATS),x=new Array;if(!r(m)){const v=m.some(b=>b===be.UPC_A||b===be.UPC_E||b===be.EAN_13||b===be.EAN_8||b===be.CODABAR||b===be.CODE_39||b===be.CODE_93||b===be.CODE_128||b===be.ITF||b===be.RSS_14||b===be.RSS_EXPANDED);v&&!u&&x.push(new ml(a,this.verbose)),m.includes(be.QR_CODE)&&x.push(new zr),m.includes(be.DATA_MATRIX)&&x.push(new mn),m.includes(be.AZTEC)&&x.push(new Ai),m.includes(be.PDF_417)&&x.push(new Vr),v&&u&&x.push(new ml(a,this.verbose))}x.length===0&&(u||x.push(new ml(a,this.verbose)),x.push(new zr),x.push(new mn),x.push(new Ai),x.push(new Vr),u&&x.push(new ml(a,this.verbose))),this.readers=x}reset(){if(this.readers!==null)for(const a of this.readers)a.reset()}decodeInternal(a){if(this.readers===null)throw new ri("No readers where selected, nothing can be read.");for(const u of this.readers)try{return u.decode(a,this.hints)}catch(m){if(m instanceof ri)continue}throw new re("No MultiFormat Readers were able to detect the code.")}}class Db extends Oe{constructor(a=null,u=500){const m=new Ob;m.setHints(a),super(m,u)}decodeBitmap(a){return this.reader.decodeWithState(a)}}class pl extends Oe{constructor(a=500){super(new Vr,a)}}class jb extends Oe{constructor(a=500){super(new zr,a)}}var Rp;(function($){$[$.ERROR_CORRECTION=0]="ERROR_CORRECTION",$[$.CHARACTER_SET=1]="CHARACTER_SET",$[$.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",$[$.MIN_SIZE=3]="MIN_SIZE",$[$.MAX_SIZE=4]="MAX_SIZE",$[$.MARGIN=5]="MARGIN",$[$.PDF417_COMPACT=6]="PDF417_COMPACT",$[$.PDF417_COMPACTION=7]="PDF417_COMPACTION",$[$.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",$[$.AZTEC_LAYERS=9]="AZTEC_LAYERS",$[$.QR_VERSION=10]="QR_VERSION"})(Rp||(Rp={}));var ar=Rp;class hx{constructor(a){this.field=a,this.cachedGenerators=[],this.cachedGenerators.push(new st(a,Int32Array.from([1])))}buildGenerator(a){const u=this.cachedGenerators;if(a>=u.length){let m=u[u.length-1];const x=this.field;for(let v=u.length;v<=a;v++){const b=m.multiply(new st(x,Int32Array.from([1,x.exp(v-1+x.getGeneratorBase())])));u.push(b),m=b}}return u[a]}encode(a,u){if(u===0)throw new y("No error correction bytes");const m=a.length-u;if(m<=0)throw new y("No data bytes provided");const x=this.buildGenerator(u),v=new Int32Array(m);S.arraycopy(a,0,v,0,m);let b=new st(this.field,v);b=b.multiplyByMonomial(u,1);const R=b.divide(x)[1].getCoefficients(),O=u-R.length;for(let H=0;H<O;H++)a[m+H]=0;S.arraycopy(R,0,a,m+O,R.length)}}class Xn{constructor(){}static applyMaskPenaltyRule1(a){return Xn.applyMaskPenaltyRule1Internal(a,!0)+Xn.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let u=0;const m=a.getArray(),x=a.getWidth(),v=a.getHeight();for(let b=0;b<v-1;b++){const C=m[b];for(let R=0;R<x-1;R++){const O=C[R];O===C[R+1]&&O===m[b+1][R]&&O===m[b+1][R+1]&&u++}}return Xn.N2*u}static applyMaskPenaltyRule3(a){let u=0;const m=a.getArray(),x=a.getWidth(),v=a.getHeight();for(let b=0;b<v;b++)for(let C=0;C<x;C++){const R=m[b];C+6<x&&R[C]===1&&R[C+1]===0&&R[C+2]===1&&R[C+3]===1&&R[C+4]===1&&R[C+5]===0&&R[C+6]===1&&(Xn.isWhiteHorizontal(R,C-4,C)||Xn.isWhiteHorizontal(R,C+7,C+11))&&u++,b+6<v&&m[b][C]===1&&m[b+1][C]===0&&m[b+2][C]===1&&m[b+3][C]===1&&m[b+4][C]===1&&m[b+5][C]===0&&m[b+6][C]===1&&(Xn.isWhiteVertical(m,C,b-4,b)||Xn.isWhiteVertical(m,C,b+7,b+11))&&u++}return u*Xn.N3}static isWhiteHorizontal(a,u,m){u=Math.max(u,0),m=Math.min(m,a.length);for(let x=u;x<m;x++)if(a[x]===1)return!1;return!0}static isWhiteVertical(a,u,m,x){m=Math.max(m,0),x=Math.min(x,a.length);for(let v=m;v<x;v++)if(a[v][u]===1)return!1;return!0}static applyMaskPenaltyRule4(a){let u=0;const m=a.getArray(),x=a.getWidth(),v=a.getHeight();for(let R=0;R<v;R++){const O=m[R];for(let H=0;H<x;H++)O[H]===1&&u++}const b=a.getHeight()*a.getWidth();return Math.floor(Math.abs(u*2-b)*10/b)*Xn.N4}static getDataMaskBit(a,u,m){let x,v;switch(a){case 0:x=m+u&1;break;case 1:x=m&1;break;case 2:x=u%3;break;case 3:x=(m+u)%3;break;case 4:x=Math.floor(m/2)+Math.floor(u/3)&1;break;case 5:v=m*u,x=(v&1)+v%3;break;case 6:v=m*u,x=(v&1)+v%3&1;break;case 7:v=m*u,x=v%3+(m+u&1)&1;break;default:throw new y("Invalid mask pattern: "+a)}return x===0}static applyMaskPenaltyRule1Internal(a,u){let m=0;const x=u?a.getHeight():a.getWidth(),v=u?a.getWidth():a.getHeight(),b=a.getArray();for(let C=0;C<x;C++){let R=0,O=-1;for(let H=0;H<v;H++){const q=u?b[C][H]:b[H][C];q===O?R++:(R>=5&&(m+=Xn.N1+(R-5)),R=1,O=q)}R>=5&&(m+=Xn.N1+(R-5))}return m}}Xn.N1=3,Xn.N2=3,Xn.N3=40,Xn.N4=10;class uf{constructor(a,u){this.width=a,this.height=u;const m=new Array(u);for(let x=0;x!==u;x++)m[x]=new Uint8Array(a);this.bytes=m}getHeight(){return this.height}getWidth(){return this.width}get(a,u){return this.bytes[u][a]}getArray(){return this.bytes}setNumber(a,u,m){this.bytes[u][a]=m}setBoolean(a,u,m){this.bytes[u][a]=m?1:0}clear(a){for(const u of this.bytes)k.fill(u,a)}equals(a){if(!(a instanceof uf))return!1;const u=a;if(this.width!==u.width||this.height!==u.height)return!1;for(let m=0,x=this.height;m<x;++m){const v=this.bytes[m],b=u.bytes[m];for(let C=0,R=this.width;C<R;++C)if(v[C]!==b[C])return!1}return!0}toString(){const a=new ce;for(let u=0,m=this.height;u<m;++u){const x=this.bytes[u];for(let v=0,b=this.width;v<b;++v)switch(x[v]){case 0:a.append(" 0");break;case 1:a.append(" 1");break;default:a.append("  ");break}a.append(`
`)}return a.toString()}}class Ec{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const a=new ce;return a.append(`<<
`),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append(`
 ecLevel: `),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append(`
 version: `),a.append(this.version?this.version.toString():"null"),a.append(`
 maskPattern: `),a.append(this.maskPattern.toString()),this.matrix?(a.append(`
 matrix:
`),a.append(this.matrix.toString())):a.append(`
 matrix: null
`),a.append(`>>
`),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<Ec.NUM_MASK_PATTERNS}}Ec.NUM_MASK_PATTERNS=8;class xn extends f{}xn.kind="WriterException";class lt{constructor(){}static clearMatrix(a){a.clear(255)}static buildMatrix(a,u,m,x,v){lt.clearMatrix(v),lt.embedBasicPatterns(m,v),lt.embedTypeInfo(u,x,v),lt.maybeEmbedVersionInfo(m,v),lt.embedDataBits(a,x,v)}static embedBasicPatterns(a,u){lt.embedPositionDetectionPatternsAndSeparators(u),lt.embedDarkDotAtLeftBottomCorner(u),lt.maybeEmbedPositionAdjustmentPatterns(a,u),lt.embedTimingPatterns(u)}static embedTypeInfo(a,u,m){const x=new D;lt.makeTypeInfoBits(a,u,x);for(let v=0,b=x.getSize();v<b;++v){const C=x.get(x.getSize()-1-v),R=lt.TYPE_INFO_COORDINATES[v],O=R[0],H=R[1];if(m.setBoolean(O,H,C),v<8){const q=m.getWidth()-v-1;m.setBoolean(q,8,C)}else{const Y=m.getHeight()-7+(v-8);m.setBoolean(8,Y,C)}}}static maybeEmbedVersionInfo(a,u){if(a.getVersionNumber()<7)return;const m=new D;lt.makeVersionInfoBits(a,m);let x=6*3-1;for(let v=0;v<6;++v)for(let b=0;b<3;++b){const C=m.get(x);x--,u.setBoolean(v,u.getHeight()-11+b,C),u.setBoolean(u.getHeight()-11+b,v,C)}}static embedDataBits(a,u,m){let x=0,v=-1,b=m.getWidth()-1,C=m.getHeight()-1;for(;b>0;){for(b===6&&(b-=1);C>=0&&C<m.getHeight();){for(let R=0;R<2;++R){const O=b-R;if(!lt.isEmpty(m.get(O,C)))continue;let H;x<a.getSize()?(H=a.get(x),++x):H=!1,u!==255&&Xn.getDataMaskBit(u,O,C)&&(H=!H),m.setBoolean(O,C,H)}C+=v}v=-v,C+=v,b-=2}if(x!==a.getSize())throw new xn("Not all bits consumed: "+x+"/"+a.getSize())}static findMSBSet(a){return 32-T.numberOfLeadingZeros(a)}static calculateBCHCode(a,u){if(u===0)throw new y("0 polynomial");const m=lt.findMSBSet(u);for(a<<=m-1;lt.findMSBSet(a)>=m;)a^=u<<lt.findMSBSet(a)-m;return a}static makeTypeInfoBits(a,u,m){if(!Ec.isValidMaskPattern(u))throw new xn("Invalid mask pattern");const x=a.getBits()<<3|u;m.appendBits(x,5);const v=lt.calculateBCHCode(x,lt.TYPE_INFO_POLY);m.appendBits(v,10);const b=new D;if(b.appendBits(lt.TYPE_INFO_MASK_PATTERN,15),m.xor(b),m.getSize()!==15)throw new xn("should not happen but we got: "+m.getSize())}static makeVersionInfoBits(a,u){u.appendBits(a.getVersionNumber(),6);const m=lt.calculateBCHCode(a.getVersionNumber(),lt.VERSION_INFO_POLY);if(u.appendBits(m,12),u.getSize()!==18)throw new xn("should not happen but we got: "+u.getSize())}static isEmpty(a){return a===255}static embedTimingPatterns(a){for(let u=8;u<a.getWidth()-8;++u){const m=(u+1)%2;lt.isEmpty(a.get(u,6))&&a.setNumber(u,6,m),lt.isEmpty(a.get(6,u))&&a.setNumber(6,u,m)}}static embedDarkDotAtLeftBottomCorner(a){if(a.get(8,a.getHeight()-8)===0)throw new xn;a.setNumber(8,a.getHeight()-8,1)}static embedHorizontalSeparationPattern(a,u,m){for(let x=0;x<8;++x){if(!lt.isEmpty(m.get(a+x,u)))throw new xn;m.setNumber(a+x,u,0)}}static embedVerticalSeparationPattern(a,u,m){for(let x=0;x<7;++x){if(!lt.isEmpty(m.get(a,u+x)))throw new xn;m.setNumber(a,u+x,0)}}static embedPositionAdjustmentPattern(a,u,m){for(let x=0;x<5;++x){const v=lt.POSITION_ADJUSTMENT_PATTERN[x];for(let b=0;b<5;++b)m.setNumber(a+b,u+x,v[b])}}static embedPositionDetectionPattern(a,u,m){for(let x=0;x<7;++x){const v=lt.POSITION_DETECTION_PATTERN[x];for(let b=0;b<7;++b)m.setNumber(a+b,u+x,v[b])}}static embedPositionDetectionPatternsAndSeparators(a){const u=lt.POSITION_DETECTION_PATTERN[0].length;lt.embedPositionDetectionPattern(0,0,a),lt.embedPositionDetectionPattern(a.getWidth()-u,0,a),lt.embedPositionDetectionPattern(0,a.getWidth()-u,a);const m=8;lt.embedHorizontalSeparationPattern(0,m-1,a),lt.embedHorizontalSeparationPattern(a.getWidth()-m,m-1,a),lt.embedHorizontalSeparationPattern(0,a.getWidth()-m,a);const x=7;lt.embedVerticalSeparationPattern(x,0,a),lt.embedVerticalSeparationPattern(a.getHeight()-x-1,0,a),lt.embedVerticalSeparationPattern(x,a.getHeight()-x,a)}static maybeEmbedPositionAdjustmentPatterns(a,u){if(a.getVersionNumber()<2)return;const m=a.getVersionNumber()-1,x=lt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[m];for(let v=0,b=x.length;v!==b;v++){const C=x[v];if(C>=0)for(let R=0;R!==b;R++){const O=x[R];O>=0&&lt.isEmpty(u.get(O,C))&&lt.embedPositionAdjustmentPattern(O-2,C-2,u)}}}}lt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),lt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),lt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),lt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),lt.VERSION_INFO_POLY=7973,lt.TYPE_INFO_POLY=1335,lt.TYPE_INFO_MASK_PATTERN=21522;class mA{constructor(a,u){this.dataBytes=a,this.errorCorrectionBytes=u}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class _n{constructor(){}static calculateMaskPenalty(a){return Xn.applyMaskPenaltyRule1(a)+Xn.applyMaskPenaltyRule2(a)+Xn.applyMaskPenaltyRule3(a)+Xn.applyMaskPenaltyRule4(a)}static encode(a,u,m=null){let x=_n.DEFAULT_BYTE_MODE_ENCODING;const v=m!==null&&m.get(ar.CHARACTER_SET)!==void 0;v&&(x=m.get(ar.CHARACTER_SET).toString());const b=this.chooseMode(a,x),C=new D;if(b===ot.BYTE&&(v||_n.DEFAULT_BYTE_MODE_ENCODING!==x)){const Re=Z.getCharacterSetECIByName(x);Re!==void 0&&this.appendECI(Re,C)}this.appendModeInfo(b,C);const R=new D;this.appendBytes(a,b,R,x);let O;if(m!==null&&m.get(ar.QR_VERSION)!==void 0){const Re=Number.parseInt(m.get(ar.QR_VERSION).toString(),10);O=je.getVersionForNumber(Re);const Ne=this.calculateBitsNeeded(b,C,R,O);if(!this.willFit(Ne,O,u))throw new xn("Data too big for requested version")}else O=this.recommendVersion(u,b,C,R);const H=new D;H.appendBitArray(C);const q=b===ot.BYTE?R.getSizeInBytes():a.length;this.appendLengthInfo(q,O,b,H),H.appendBitArray(R);const Y=O.getECBlocksForLevel(u),te=O.getTotalCodewords()-Y.getTotalECCodewords();this.terminateBits(te,H);const ae=this.interleaveWithECBytes(H,O.getTotalCodewords(),te,Y.getNumBlocks()),le=new Ec;le.setECLevel(u),le.setMode(b),le.setVersion(O);const me=O.getDimensionForVersion(),ve=new uf(me,me),Ie=this.chooseMaskPattern(ae,u,O,ve);return le.setMaskPattern(Ie),lt.buildMatrix(ae,u,O,Ie,ve),le.setMatrix(ve),le}static recommendVersion(a,u,m,x){const v=this.calculateBitsNeeded(u,m,x,je.getVersionForNumber(1)),b=this.chooseVersion(v,a),C=this.calculateBitsNeeded(u,m,x,b);return this.chooseVersion(C,a)}static calculateBitsNeeded(a,u,m,x){return u.getSize()+a.getCharacterCountBits(x)+m.getSize()}static getAlphanumericCode(a){return a<_n.ALPHANUMERIC_TABLE.length?_n.ALPHANUMERIC_TABLE[a]:-1}static chooseMode(a,u=null){if(Z.SJIS.getName()===u&&this.isOnlyDoubleByteKanji(a))return ot.KANJI;let m=!1,x=!1;for(let v=0,b=a.length;v<b;++v){const C=a.charAt(v);if(_n.isDigit(C))m=!0;else if(this.getAlphanumericCode(C.charCodeAt(0))!==-1)x=!0;else return ot.BYTE}return x?ot.ALPHANUMERIC:m?ot.NUMERIC:ot.BYTE}static isOnlyDoubleByteKanji(a){let u;try{u=se.encode(a,Z.SJIS)}catch{return!1}const m=u.length;if(m%2!==0)return!1;for(let x=0;x<m;x+=2){const v=u[x]&255;if((v<129||v>159)&&(v<224||v>235))return!1}return!0}static chooseMaskPattern(a,u,m,x){let v=Number.MAX_SAFE_INTEGER,b=-1;for(let C=0;C<Ec.NUM_MASK_PATTERNS;C++){lt.buildMatrix(a,u,m,C,x);let R=this.calculateMaskPenalty(x);R<v&&(v=R,b=C)}return b}static chooseVersion(a,u){for(let m=1;m<=40;m++){const x=je.getVersionForNumber(m);if(_n.willFit(a,x,u))return x}throw new xn("Data too big")}static willFit(a,u,m){const x=u.getTotalCodewords(),b=u.getECBlocksForLevel(m).getTotalECCodewords(),C=x-b,R=(a+7)/8;return C>=R}static terminateBits(a,u){const m=a*8;if(u.getSize()>m)throw new xn("data bits cannot fit in the QR Code"+u.getSize()+" > "+m);for(let b=0;b<4&&u.getSize()<m;++b)u.appendBit(!1);const x=u.getSize()&7;if(x>0)for(let b=x;b<8;b++)u.appendBit(!1);const v=a-u.getSizeInBytes();for(let b=0;b<v;++b)u.appendBits(b&1?17:236,8);if(u.getSize()!==m)throw new xn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(a,u,m,x,v,b){if(x>=m)throw new xn("Block ID too large");const C=a%m,R=m-C,O=Math.floor(a/m),H=O+1,q=Math.floor(u/m),Y=q+1,te=O-q,ae=H-Y;if(te!==ae)throw new xn("EC bytes mismatch");if(m!==R+C)throw new xn("RS blocks mismatch");if(a!==(q+te)*R+(Y+ae)*C)throw new xn("Total bytes mismatch");x<R?(v[0]=q,b[0]=te):(v[0]=Y,b[0]=ae)}static interleaveWithECBytes(a,u,m,x){if(a.getSizeInBytes()!==m)throw new xn("Number of bits and data bytes does not match");let v=0,b=0,C=0;const R=new Array;for(let H=0;H<x;++H){const q=new Int32Array(1),Y=new Int32Array(1);_n.getNumDataBytesAndNumECBytesForBlockID(u,m,x,H,q,Y);const te=q[0],ae=new Uint8Array(te);a.toBytes(8*v,ae,0,te);const le=_n.generateECBytes(ae,Y[0]);R.push(new mA(ae,le)),b=Math.max(b,te),C=Math.max(C,le.length),v+=q[0]}if(m!==v)throw new xn("Data bytes does not match offset");const O=new D;for(let H=0;H<b;++H)for(const q of R){const Y=q.getDataBytes();H<Y.length&&O.appendBits(Y[H],8)}for(let H=0;H<C;++H)for(const q of R){const Y=q.getErrorCorrectionBytes();H<Y.length&&O.appendBits(Y[H],8)}if(u!==O.getSizeInBytes())throw new xn("Interleaving error: "+u+" and "+O.getSizeInBytes()+" differ.");return O}static generateECBytes(a,u){const m=a.length,x=new Int32Array(m+u);for(let b=0;b<m;b++)x[b]=a[b]&255;new hx(at.QR_CODE_FIELD_256).encode(x,u);const v=new Uint8Array(u);for(let b=0;b<u;b++)v[b]=x[m+b];return v}static appendModeInfo(a,u){u.appendBits(a.getBits(),4)}static appendLengthInfo(a,u,m,x){const v=m.getCharacterCountBits(u);if(a>=1<<v)throw new xn(a+" is bigger than "+((1<<v)-1));x.appendBits(a,v)}static appendBytes(a,u,m,x){switch(u){case ot.NUMERIC:_n.appendNumericBytes(a,m);break;case ot.ALPHANUMERIC:_n.appendAlphanumericBytes(a,m);break;case ot.BYTE:_n.append8BitBytes(a,m,x);break;case ot.KANJI:_n.appendKanjiBytes(a,m);break;default:throw new xn("Invalid mode: "+u)}}static getDigit(a){return a.charCodeAt(0)-48}static isDigit(a){const u=_n.getDigit(a);return u>=0&&u<=9}static appendNumericBytes(a,u){const m=a.length;let x=0;for(;x<m;){const v=_n.getDigit(a.charAt(x));if(x+2<m){const b=_n.getDigit(a.charAt(x+1)),C=_n.getDigit(a.charAt(x+2));u.appendBits(v*100+b*10+C,10),x+=3}else if(x+1<m){const b=_n.getDigit(a.charAt(x+1));u.appendBits(v*10+b,7),x+=2}else u.appendBits(v,4),x++}}static appendAlphanumericBytes(a,u){const m=a.length;let x=0;for(;x<m;){const v=_n.getAlphanumericCode(a.charCodeAt(x));if(v===-1)throw new xn;if(x+1<m){const b=_n.getAlphanumericCode(a.charCodeAt(x+1));if(b===-1)throw new xn;u.appendBits(v*45+b,11),x+=2}else u.appendBits(v,6),x++}}static append8BitBytes(a,u,m){let x;try{x=se.encode(a,m)}catch(v){throw new xn(v)}for(let v=0,b=x.length;v!==b;v++){const C=x[v];u.appendBits(C,8)}}static appendKanjiBytes(a,u){let m;try{m=se.encode(a,Z.SJIS)}catch(v){throw new xn(v)}const x=m.length;for(let v=0;v<x;v+=2){const b=m[v]&255,C=m[v+1]&255,R=b<<8&4294967295|C;let O=-1;if(R>=33088&&R<=40956?O=R-33088:R>=57408&&R<=60351&&(O=R-49472),O===-1)throw new xn("Invalid byte sequence");const H=(O>>8)*192+(O&255);u.appendBits(H,13)}}static appendECI(a,u){u.appendBits(ot.ECI.getBits(),4),u.appendBits(a.getValue(),8)}}_n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),_n.DEFAULT_BYTE_MODE_ENCODING=Z.UTF8.getName();class gl{write(a,u,m,x=null){if(a.length===0)throw new y("Found empty contents");if(u<0||m<0)throw new y("Requested dimensions are too small: "+u+"x"+m);let v=Lt.L,b=gl.QUIET_ZONE_SIZE;x!==null&&(x.get(ar.ERROR_CORRECTION)!==void 0&&(v=Lt.fromString(x.get(ar.ERROR_CORRECTION).toString())),x.get(ar.MARGIN)!==void 0&&(b=Number.parseInt(x.get(ar.MARGIN).toString(),10)));const C=_n.encode(a,v,x);return this.renderResult(C,u,m,b)}writeToDom(a,u,m,x,v=null){typeof a=="string"&&(a=document.querySelector(a));const b=this.write(u,m,x,v);a&&a.appendChild(b)}renderResult(a,u,m,x){const v=a.getMatrix();if(v===null)throw new gr;const b=v.getWidth(),C=v.getHeight(),R=b+x*2,O=C+x*2,H=Math.max(u,R),q=Math.max(m,O),Y=Math.min(Math.floor(H/R),Math.floor(q/O)),te=Math.floor((H-b*Y)/2),ae=Math.floor((q-C*Y)/2),le=this.createSVGElement(H,q);for(let me=0,ve=ae;me<C;me++,ve+=Y)for(let Ie=0,Re=te;Ie<b;Ie++,Re+=Y)if(v.get(Ie,me)===1){const Ne=this.createSvgRectElement(Re,ve,Y,Y);le.appendChild(Ne)}return le}createSVGElement(a,u){const m=document.createElementNS(gl.SVG_NS,"svg");return m.setAttributeNS(null,"height",a.toString()),m.setAttributeNS(null,"width",u.toString()),m}createSvgRectElement(a,u,m,x){const v=document.createElementNS(gl.SVG_NS,"rect");return v.setAttributeNS(null,"x",a.toString()),v.setAttributeNS(null,"y",u.toString()),v.setAttributeNS(null,"height",m.toString()),v.setAttributeNS(null,"width",x.toString()),v.setAttributeNS(null,"fill","#000000"),v}}gl.QUIET_ZONE_SIZE=4,gl.SVG_NS="http://www.w3.org/2000/svg";class Ca{encode(a,u,m,x,v){if(a.length===0)throw new y("Found empty contents");if(u!==be.QR_CODE)throw new y("Can only encode QR_CODE, but got "+u);if(m<0||x<0)throw new y(`Requested dimensions are too small: ${m}x${x}`);let b=Lt.L,C=Ca.QUIET_ZONE_SIZE;v!==null&&(v.get(ar.ERROR_CORRECTION)!==void 0&&(b=Lt.fromString(v.get(ar.ERROR_CORRECTION).toString())),v.get(ar.MARGIN)!==void 0&&(C=Number.parseInt(v.get(ar.MARGIN).toString(),10)));const R=_n.encode(a,b,v);return Ca.renderResult(R,m,x,C)}static renderResult(a,u,m,x){const v=a.getMatrix();if(v===null)throw new gr;const b=v.getWidth(),C=v.getHeight(),R=b+x*2,O=C+x*2,H=Math.max(u,R),q=Math.max(m,O),Y=Math.min(Math.floor(H/R),Math.floor(q/O)),te=Math.floor((H-b*Y)/2),ae=Math.floor((q-C*Y)/2),le=new de(H,q);for(let me=0,ve=ae;me<C;me++,ve+=Y)for(let Ie=0,Re=te;Ie<b;Ie++,Re+=Y)v.get(Ie,me)===1&&le.setRegion(Re,ve,Y,Y);return le}}Ca.QUIET_ZONE_SIZE=4;class Cc{encode(a,u,m,x,v){let b;switch(u){case be.QR_CODE:b=new Ca;break;default:throw new y("No encoder available for format "+u)}return b.encode(a,u,m,x,v)}}class Uo extends Q{constructor(a,u,m,x,v,b,C,R){if(super(b,C),this.yuvData=a,this.dataWidth=u,this.dataHeight=m,this.left=x,this.top=v,x+b>u||v+C>m)throw new y("Crop rectangle does not fit within image data.");R&&this.reverseHorizontal(b,C)}getRow(a,u){if(a<0||a>=this.getHeight())throw new y("Requested row is outside the image: "+a);const m=this.getWidth();(u==null||u.length<m)&&(u=new Uint8ClampedArray(m));const x=(a+this.top)*this.dataWidth+this.left;return S.arraycopy(this.yuvData,x,u,0,m),u}getMatrix(){const a=this.getWidth(),u=this.getHeight();if(a===this.dataWidth&&u===this.dataHeight)return this.yuvData;const m=a*u,x=new Uint8ClampedArray(m);let v=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return S.arraycopy(this.yuvData,v,x,0,m),x;for(let b=0;b<u;b++){const C=b*a;S.arraycopy(this.yuvData,v,x,C,a),v+=this.dataWidth}return x}isCropSupported(){return!0}crop(a,u,m,x){return new Uo(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+u,m,x,!1)}renderThumbnail(){const a=this.getWidth()/Uo.THUMBNAIL_SCALE_FACTOR,u=this.getHeight()/Uo.THUMBNAIL_SCALE_FACTOR,m=new Int32Array(a*u),x=this.yuvData;let v=this.top*this.dataWidth+this.left;for(let b=0;b<u;b++){const C=b*a;for(let R=0;R<a;R++){const O=x[v+R*Uo.THUMBNAIL_SCALE_FACTOR]&255;m[C+R]=4278190080|O*65793}v+=this.dataWidth*Uo.THUMBNAIL_SCALE_FACTOR}return m}getThumbnailWidth(){return this.getWidth()/Uo.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Uo.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,u){const m=this.yuvData;for(let x=0,v=this.top*this.dataWidth+this.left;x<u;x++,v+=this.dataWidth){const b=v+a/2;for(let C=v,R=v+a-1;C<b;C++,R--){const O=m[C];m[C]=m[R],m[R]=O}}}invert(){return new ue(this)}}Uo.THUMBNAIL_SCALE_FACTOR=2;class Ac extends Q{constructor(a,u,m,x,v,b,C){if(super(u,m),this.dataWidth=x,this.dataHeight=v,this.left=b,this.top=C,a.BYTES_PER_ELEMENT===4){const R=u*m,O=new Uint8ClampedArray(R);for(let H=0;H<R;H++){const q=a[H],Y=q>>16&255,te=q>>7&510,ae=q&255;O[H]=(Y+te+ae)/4&255}this.luminances=O}else this.luminances=a;if(x===void 0&&(this.dataWidth=u),v===void 0&&(this.dataHeight=m),b===void 0&&(this.left=0),C===void 0&&(this.top=0),this.left+u>this.dataWidth||this.top+m>this.dataHeight)throw new y("Crop rectangle does not fit within image data.")}getRow(a,u){if(a<0||a>=this.getHeight())throw new y("Requested row is outside the image: "+a);const m=this.getWidth();(u==null||u.length<m)&&(u=new Uint8ClampedArray(m));const x=(a+this.top)*this.dataWidth+this.left;return S.arraycopy(this.luminances,x,u,0,m),u}getMatrix(){const a=this.getWidth(),u=this.getHeight();if(a===this.dataWidth&&u===this.dataHeight)return this.luminances;const m=a*u,x=new Uint8ClampedArray(m);let v=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return S.arraycopy(this.luminances,v,x,0,m),x;for(let b=0;b<u;b++){const C=b*a;S.arraycopy(this.luminances,v,x,C,a),v+=this.dataWidth}return x}isCropSupported(){return!0}crop(a,u,m,x){return new Ac(this.luminances,m,x,this.dataWidth,this.dataHeight,this.left+a,this.top+u)}invert(){return new ue(this)}}class si extends Z{static forName(a){return this.getCharacterSetECIByName(a)}}class kp{}kp.ISO_8859_1=Z.ISO8859_1;class fx{isCompact(){return this.compact}setCompact(a){this.compact=a}getSize(){return this.size}setSize(a){this.size=a}getLayers(){return this.layers}setLayers(a){this.layers=a}getCodeWords(){return this.codeWords}setCodeWords(a){this.codeWords=a}getMatrix(){return this.matrix}setMatrix(a){this.matrix=a}}class Lb{static singletonList(a){return[a]}static min(a,u){return a.sort(u)[0]}}class mx{constructor(a){this.previous=a}getPrevious(){return this.previous}}class xl extends mx{constructor(a,u,m){super(a),this.value=u,this.bitCount=m}appendTo(a,u){a.appendBits(this.value,this.bitCount)}add(a,u){return new xl(this,a,u)}addBinaryShift(a,u){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new xl(this,a,u)}toString(){let a=this.value&(1<<this.bitCount)-1;return a|=1<<this.bitCount,"<"+T.toBinaryString(a|1<<this.bitCount).substring(1)+">"}}class px extends xl{constructor(a,u,m){super(a,0,0),this.binaryShiftStart=u,this.binaryShiftByteCount=m}appendTo(a,u){for(let m=0;m<this.binaryShiftByteCount;m++)(m===0||m===31&&this.binaryShiftByteCount<=62)&&(a.appendBits(31,5),this.binaryShiftByteCount>62?a.appendBits(this.binaryShiftByteCount-31,16):m===0?a.appendBits(Math.min(this.binaryShiftByteCount,31),5):a.appendBits(this.binaryShiftByteCount-31,5)),a.appendBits(u[this.binaryShiftStart+m],8)}addBinaryShift(a,u){return new px(this,a,u)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function pA($,a,u){return new px($,a,u)}function Xu($,a,u){return new xl($,a,u)}const gA=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Mr=0,Aa=1,Si=2,zo=3,Ho=4,Yu=new xl(null,0,0),gx=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function df($){for(let a of $)k.fill(a,-1);return $[Mr][Ho]=0,$[Aa][Ho]=0,$[Aa][Mr]=28,$[zo][Ho]=0,$[Si][Ho]=0,$[Si][Mr]=15,$}const xx=df(k.createInt32Array(6,6));class ii{constructor(a,u,m,x){this.token=a,this.mode=u,this.binaryShiftByteCount=m,this.bitCount=x}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(a,u){let m=this.bitCount,x=this.token;if(a!==this.mode){let b=gx[this.mode][a];x=Xu(x,b&65535,b>>16),m+=b>>16}let v=a===Si?4:5;return x=Xu(x,u,v),new ii(x,a,0,m+v)}shiftAndAppend(a,u){let m=this.token,x=this.mode===Si?4:5;return m=Xu(m,xx[this.mode][a],x),m=Xu(m,u,5),new ii(m,this.mode,0,this.bitCount+x+5)}addBinaryShiftChar(a){let u=this.token,m=this.mode,x=this.bitCount;if(this.mode===Ho||this.mode===Si){let C=gx[m][Mr];u=Xu(u,C&65535,C>>16),x+=C>>16,m=Mr}let v=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,b=new ii(u,m,this.binaryShiftByteCount+1,x+v);return b.binaryShiftByteCount===2078&&(b=b.endBinaryShift(a+1)),b}endBinaryShift(a){if(this.binaryShiftByteCount===0)return this;let u=this.token;return u=pA(u,a-this.binaryShiftByteCount,this.binaryShiftByteCount),new ii(u,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(a){let u=this.bitCount+(gx[this.mode][a.mode]>>16);return this.binaryShiftByteCount<a.binaryShiftByteCount?u+=ii.calculateBinaryShiftCost(a)-ii.calculateBinaryShiftCost(this):this.binaryShiftByteCount>a.binaryShiftByteCount&&a.binaryShiftByteCount>0&&(u+=10),u<=a.bitCount}toBitArray(a){let u=[];for(let x=this.endBinaryShift(a.length).token;x!==null;x=x.getPrevious())u.unshift(x);let m=new D;for(const x of u)x.appendTo(m,a);return m}toString(){return ee.format("%s bits=%d bytes=%d",gA[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(a){return a.binaryShiftByteCount>62?21:a.binaryShiftByteCount>31?20:a.binaryShiftByteCount>0?10:0}}ii.INITIAL_STATE=new ii(Yu,Mr,0,0);function xA($){const a=ee.getCharCode(" "),u=ee.getCharCode("."),m=ee.getCharCode(",");$[Mr][a]=1;const x=ee.getCharCode("Z"),v=ee.getCharCode("A");for(let Y=v;Y<=x;Y++)$[Mr][Y]=Y-v+2;$[Aa][a]=1;const b=ee.getCharCode("z"),C=ee.getCharCode("a");for(let Y=C;Y<=b;Y++)$[Aa][Y]=Y-C+2;$[Si][a]=1;const R=ee.getCharCode("9"),O=ee.getCharCode("0");for(let Y=O;Y<=R;Y++)$[Si][Y]=Y-O+2;$[Si][m]=12,$[Si][u]=13;const H=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let Y=0;Y<H.length;Y++)$[zo][ee.getCharCode(H[Y])]=Y;const q=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let Y=0;Y<q.length;Y++)ee.getCharCode(q[Y])>0&&($[Ho][ee.getCharCode(q[Y])]=Y);return $}const Vo=xA(k.createInt32Array(5,256));class vl{constructor(a){this.text=a}encode(){const a=ee.getCharCode(" "),u=ee.getCharCode(`
`);let m=Lb.singletonList(ii.INITIAL_STATE);for(let v=0;v<this.text.length;v++){let b,C=v+1<this.text.length?this.text[v+1]:0;switch(this.text[v]){case ee.getCharCode("\r"):b=C===u?2:0;break;case ee.getCharCode("."):b=C===a?3:0;break;case ee.getCharCode(","):b=C===a?4:0;break;case ee.getCharCode(":"):b=C===a?5:0;break;default:b=0}b>0?(m=vl.updateStateListForPair(m,v,b),v++):m=this.updateStateListForChar(m,v)}return Lb.min(m,(v,b)=>v.getBitCount()-b.getBitCount()).toBitArray(this.text)}updateStateListForChar(a,u){const m=[];for(let x of a)this.updateStateForChar(x,u,m);return vl.simplifyStates(m)}updateStateForChar(a,u,m){let x=this.text[u]&255,v=Vo[a.getMode()][x]>0,b=null;for(let C=0;C<=Ho;C++){let R=Vo[C][x];if(R>0){if(b==null&&(b=a.endBinaryShift(u)),!v||C===a.getMode()||C===Si){const O=b.latchAndAppend(C,R);m.push(O)}if(!v&&xx[a.getMode()][C]>=0){const O=b.shiftAndAppend(C,R);m.push(O)}}}if(a.getBinaryShiftByteCount()>0||Vo[a.getMode()][x]===0){let C=a.addBinaryShiftChar(u);m.push(C)}}static updateStateListForPair(a,u,m){const x=[];for(let v of a)this.updateStateForPair(v,u,m,x);return this.simplifyStates(x)}static updateStateForPair(a,u,m,x){let v=a.endBinaryShift(u);if(x.push(v.latchAndAppend(Ho,m)),a.getMode()!==Ho&&x.push(v.shiftAndAppend(Ho,m)),m===3||m===4){let b=v.latchAndAppend(Si,16-m).latchAndAppend(Si,1);x.push(b)}if(a.getBinaryShiftByteCount()>0){let b=a.addBinaryShiftChar(u).addBinaryShiftChar(u+1);x.push(b)}}static simplifyStates(a){let u=[];for(const m of a){let x=!0;for(const v of u){if(v.isBetterThanOrEqualTo(m)){x=!1;break}m.isBetterThanOrEqualTo(v)&&(u=u.filter(b=>b!==v))}x&&u.push(m)}return u}}class Yt{constructor(){}static encodeBytes(a){return Yt.encode(a,Yt.DEFAULT_EC_PERCENT,Yt.DEFAULT_AZTEC_LAYERS)}static encode(a,u,m){let x=new vl(a).encode(),v=T.truncDivision(x.getSize()*u,100)+11,b=x.getSize()+v,C,R,O,H,q;if(m!==Yt.DEFAULT_AZTEC_LAYERS){if(C=m<0,R=Math.abs(m),R>(C?Yt.MAX_NB_BITS_COMPACT:Yt.MAX_NB_BITS))throw new y(ee.format("Illegal value %s for layers",m));O=Yt.totalBitsInLayer(R,C),H=Yt.WORD_SIZE[R];let Ne=O-O%H;if(q=Yt.stuffBits(x,H),q.getSize()+v>Ne)throw new y("Data to large for user specified layer");if(C&&q.getSize()>H*64)throw new y("Data to large for user specified layer")}else{H=0,q=null;for(let Ne=0;;Ne++){if(Ne>Yt.MAX_NB_BITS)throw new y("Data too large for an Aztec code");if(C=Ne<=3,R=C?Ne+1:Ne,O=Yt.totalBitsInLayer(R,C),b>O)continue;(q==null||H!==Yt.WORD_SIZE[R])&&(H=Yt.WORD_SIZE[R],q=Yt.stuffBits(x,H));let Bt=O-O%H;if(!(C&&q.getSize()>H*64)&&q.getSize()+v<=Bt)break}}let Y=Yt.generateCheckWords(q,O,H),te=q.getSize()/H,ae=Yt.generateModeMessage(C,R,te),le=(C?11:14)+R*4,me=new Int32Array(le),ve;if(C){ve=le;for(let Ne=0;Ne<me.length;Ne++)me[Ne]=Ne}else{ve=le+1+2*T.truncDivision(T.truncDivision(le,2)-1,15);let Ne=T.truncDivision(le,2),Bt=T.truncDivision(ve,2);for(let wt=0;wt<Ne;wt++){let Yn=wt+T.truncDivision(wt,15);me[Ne-wt-1]=Bt-Yn-1,me[Ne+wt]=Bt+Yn+1}}let Ie=new de(ve);for(let Ne=0,Bt=0;Ne<R;Ne++){let wt=(R-Ne)*4+(C?9:12);for(let Yn=0;Yn<wt;Yn++){let Ls=Yn*2;for(let Bs=0;Bs<2;Bs++)Y.get(Bt+Ls+Bs)&&Ie.set(me[Ne*2+Bs],me[Ne*2+Yn]),Y.get(Bt+wt*2+Ls+Bs)&&Ie.set(me[Ne*2+Yn],me[le-1-Ne*2-Bs]),Y.get(Bt+wt*4+Ls+Bs)&&Ie.set(me[le-1-Ne*2-Bs],me[le-1-Ne*2-Yn]),Y.get(Bt+wt*6+Ls+Bs)&&Ie.set(me[le-1-Ne*2-Yn],me[Ne*2+Bs])}Bt+=wt*8}if(Yt.drawModeMessage(Ie,C,ve,ae),C)Yt.drawBullsEye(Ie,T.truncDivision(ve,2),5);else{Yt.drawBullsEye(Ie,T.truncDivision(ve,2),7);for(let Ne=0,Bt=0;Ne<T.truncDivision(le,2)-1;Ne+=15,Bt+=16)for(let wt=T.truncDivision(ve,2)&1;wt<ve;wt+=2)Ie.set(T.truncDivision(ve,2)-Bt,wt),Ie.set(T.truncDivision(ve,2)+Bt,wt),Ie.set(wt,T.truncDivision(ve,2)-Bt),Ie.set(wt,T.truncDivision(ve,2)+Bt)}let Re=new fx;return Re.setCompact(C),Re.setSize(ve),Re.setLayers(R),Re.setCodeWords(te),Re.setMatrix(Ie),Re}static drawBullsEye(a,u,m){for(let x=0;x<m;x+=2)for(let v=u-x;v<=u+x;v++)a.set(v,u-x),a.set(v,u+x),a.set(u-x,v),a.set(u+x,v);a.set(u-m,u-m),a.set(u-m+1,u-m),a.set(u-m,u-m+1),a.set(u+m,u-m),a.set(u+m,u-m+1),a.set(u+m,u+m-1)}static generateModeMessage(a,u,m){let x=new D;return a?(x.appendBits(u-1,2),x.appendBits(m-1,6),x=Yt.generateCheckWords(x,28,4)):(x.appendBits(u-1,5),x.appendBits(m-1,11),x=Yt.generateCheckWords(x,40,4)),x}static drawModeMessage(a,u,m,x){let v=T.truncDivision(m,2);if(u)for(let b=0;b<7;b++){let C=v-3+b;x.get(b)&&a.set(C,v-5),x.get(b+7)&&a.set(v+5,C),x.get(20-b)&&a.set(C,v+5),x.get(27-b)&&a.set(v-5,C)}else for(let b=0;b<10;b++){let C=v-5+b+T.truncDivision(b,5);x.get(b)&&a.set(C,v-7),x.get(b+10)&&a.set(v+7,C),x.get(29-b)&&a.set(C,v+7),x.get(39-b)&&a.set(v-7,C)}}static generateCheckWords(a,u,m){let x=a.getSize()/m,v=new hx(Yt.getGF(m)),b=T.truncDivision(u,m),C=Yt.bitsToWords(a,m,b);v.encode(C,b-x);let R=u%m,O=new D;O.appendBits(0,R);for(const H of Array.from(C))O.appendBits(H,m);return O}static bitsToWords(a,u,m){let x=new Int32Array(m),v,b;for(v=0,b=a.getSize()/u;v<b;v++){let C=0;for(let R=0;R<u;R++)C|=a.get(v*u+R)?1<<u-R-1:0;x[v]=C}return x}static getGF(a){switch(a){case 4:return at.AZTEC_PARAM;case 6:return at.AZTEC_DATA_6;case 8:return at.AZTEC_DATA_8;case 10:return at.AZTEC_DATA_10;case 12:return at.AZTEC_DATA_12;default:throw new y("Unsupported word size "+a)}}static stuffBits(a,u){let m=new D,x=a.getSize(),v=(1<<u)-2;for(let b=0;b<x;b+=u){let C=0;for(let R=0;R<u;R++)(b+R>=x||a.get(b+R))&&(C|=1<<u-1-R);(C&v)===v?(m.appendBits(C&v,u),b--):C&v?m.appendBits(C,u):(m.appendBits(C|1,u),b--)}return m}static totalBitsInLayer(a,u){return((u?88:112)+16*a)*a}}Yt.DEFAULT_EC_PERCENT=33,Yt.DEFAULT_AZTEC_LAYERS=0,Yt.MAX_NB_BITS=32,Yt.MAX_NB_BITS_COMPACT=4,Yt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ku{encode(a,u,m,x){return this.encodeWithHints(a,u,m,x,null)}encodeWithHints(a,u,m,x,v){let b=kp.ISO_8859_1,C=Yt.DEFAULT_EC_PERCENT,R=Yt.DEFAULT_AZTEC_LAYERS;return v!=null&&(v.has(ar.CHARACTER_SET)&&(b=si.forName(v.get(ar.CHARACTER_SET).toString())),v.has(ar.ERROR_CORRECTION)&&(C=T.parseInt(v.get(ar.ERROR_CORRECTION).toString())),v.has(ar.AZTEC_LAYERS)&&(R=T.parseInt(v.get(ar.AZTEC_LAYERS).toString()))),Ku.encodeLayers(a,u,m,x,b,C,R)}static encodeLayers(a,u,m,x,v,b,C){if(u!==be.AZTEC)throw new y("Can only encode AZTEC, but got "+u);let R=Yt.encode(ee.getBytes(a,v),b,C);return Ku.renderResult(R,m,x)}static renderResult(a,u,m){let x=a.getMatrix();if(x==null)throw new gr;let v=x.getWidth(),b=x.getHeight(),C=Math.max(u,v),R=Math.max(m,b),O=Math.min(C/v,R/b),H=(C-v*O)/2,q=(R-b*O)/2,Y=new de(C,R);for(let te=0,ae=q;te<b;te++,ae+=O)for(let le=0,me=H;le<v;le++,me+=O)x.get(le,te)&&Y.setRegion(me,ae,O,O);return Y}}t.AbstractExpandedDecoder=Sp,t.ArgumentException=g,t.ArithmeticException=gt,t.AztecCode=fx,t.AztecCodeReader=Ai,t.AztecCodeWriter=Ku,t.AztecDecoder=Ht,t.AztecDetector=$i,t.AztecDetectorResult=Jh,t.AztecEncoder=Yt,t.AztecHighLevelEncoder=vl,t.AztecPoint=jt,t.BarcodeFormat=be,t.Binarizer=P,t.BinaryBitmap=_,t.BitArray=D,t.BitMatrix=de,t.BitSource=Wu,t.BrowserAztecCodeReader=gc,t.BrowserBarcodeReader=rf,t.BrowserCodeReader=Oe,t.BrowserDatamatrixCodeReader=ax,t.BrowserMultiFormatReader=Db,t.BrowserPDF417Reader=pl,t.BrowserQRCodeReader=jb,t.BrowserQRCodeSvgWriter=gl,t.CharacterSetECI=Z,t.ChecksumException=E,t.Code128Reader=Me,t.Code39Reader=In,t.DataMatrixDecodedBitStreamParser=ni,t.DataMatrixReader=mn,t.DecodeHintType=z,t.DecoderResult=Nt,t.DefaultGridSampler=We,t.DetectorResult=dl,t.EAN13Reader=hl,t.EncodeHintType=ar,t.Exception=f,t.FormatException=F,t.GenericGF=at,t.GenericGFPoly=st,t.GlobalHistogramBinarizer=fe,t.GridSampler=ef,t.GridSamplerInstance=xt,t.HTMLCanvasElementLuminanceSource=he,t.HybridBinarizer=oe,t.ITFReader=ln,t.IllegalArgumentException=y,t.IllegalStateException=gr,t.InvertedLuminanceSource=ue,t.LuminanceSource=Q,t.MathUtils=Et,t.MultiFormatOneDReader=ml,t.MultiFormatReader=Ob,t.MultiFormatWriter=Cc,t.NotFoundException=re,t.OneDReader=fn,t.PDF417DecodedBitStreamParser=ye,t.PDF417DecoderErrorCorrection=Tp,t.PDF417Reader=Vr,t.PDF417ResultMetadata=dx,t.PerspectiveTransform=ys,t.PlanarYUVLuminanceSource=Uo,t.QRCodeByteMatrix=uf,t.QRCodeDataMask=ss,t.QRCodeDecodedBitStreamParser=kn,t.QRCodeDecoderErrorCorrectionLevel=Lt,t.QRCodeDecoderFormatInformation=rs,t.QRCodeEncoder=_n,t.QRCodeEncoderQRCode=Ec,t.QRCodeMaskUtil=Xn,t.QRCodeMatrixUtil=lt,t.QRCodeMode=ot,t.QRCodeReader=zr,t.QRCodeVersion=je,t.QRCodeWriter=Ca,t.RGBLuminanceSource=Ac,t.RSS14Reader=tr,t.RSSExpandedReader=Ae,t.ReaderException=ri,t.ReedSolomonDecoder=xr,t.ReedSolomonEncoder=hx,t.ReedSolomonException=$n,t.Result=De,t.ResultMetadataType=Ze,t.ResultPoint=$e,t.StringUtils=ee,t.UnsupportedOperationException=ne,t.VideoInputDevice=Ee,t.WhiteRectangleDetector=Gi,t.WriterException=xn,t.ZXingArrays=k,t.ZXingCharset=si,t.ZXingInteger=T,t.ZXingStandardCharsets=kp,t.ZXingStringBuilder=ce,t.ZXingStringEncoding=se,t.ZXingSystem=S,t.createAbstractExpandedDecoder=nf,Object.defineProperty(t,"__esModule",{value:!0})})})(K3,K3.exports);var Qn=K3.exports;const ele=JE(Qn),tle=sP({__proto__:null,default:ele},[Qn]);var MO=function(){function n(e,t,r){if(this.formatMap=new Map([[Xe.QR_CODE,Qn.BarcodeFormat.QR_CODE],[Xe.AZTEC,Qn.BarcodeFormat.AZTEC],[Xe.CODABAR,Qn.BarcodeFormat.CODABAR],[Xe.CODE_39,Qn.BarcodeFormat.CODE_39],[Xe.CODE_93,Qn.BarcodeFormat.CODE_93],[Xe.CODE_128,Qn.BarcodeFormat.CODE_128],[Xe.DATA_MATRIX,Qn.BarcodeFormat.DATA_MATRIX],[Xe.MAXICODE,Qn.BarcodeFormat.MAXICODE],[Xe.ITF,Qn.BarcodeFormat.ITF],[Xe.EAN_13,Qn.BarcodeFormat.EAN_13],[Xe.EAN_8,Qn.BarcodeFormat.EAN_8],[Xe.PDF_417,Qn.BarcodeFormat.PDF_417],[Xe.RSS_14,Qn.BarcodeFormat.RSS_14],[Xe.RSS_EXPANDED,Qn.BarcodeFormat.RSS_EXPANDED],[Xe.UPC_A,Qn.BarcodeFormat.UPC_A],[Xe.UPC_E,Qn.BarcodeFormat.UPC_E],[Xe.UPC_EAN_EXTENSION,Qn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!tle)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var s=this.createZXingFormats(e),i=new Map;i.set(Qn.DecodeHintType.POSSIBLE_FORMATS,s),i.set(Qn.DecodeHintType.TRY_HARDER,!1),this.hints=i}return n.prototype.decodeAsync=function(e){var t=this;return new Promise(function(r,s){try{r(t.decode(e))}catch(i){s(i)}})},n.prototype.decode=function(e){var t=new Qn.MultiFormatReader(this.verbose,this.hints),r=new Qn.HTMLCanvasElementLuminanceSource(e),s=new Qn.BinaryBitmap(new Qn.HybridBinarizer(r)),i=t.decode(s);return{text:i.text,format:OU.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,s){e.set(t,r)}),e},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createZXingFormats=function(e){for(var t=[],r=0,s=e;r<s.length;r++){var i=s[r];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return t},n.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},n}(),nle=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(g){try{f(r.next(g))}catch(y){o(y)}}function c(g){try{f(r.throw(g))}catch(y){o(y)}}function f(g){g.done?i(g.value):s(g.value).then(l,c)}f((r=r.apply(n,e||[])).next())})},rle=function(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(f){return function(g){return c([f,g])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(r=1,s&&(i=f[0]&2?s.return:f[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,f[1])).done)return i;switch(s=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,s=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(g){f=[6,g],s=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},OO=function(){function n(e,t,r){if(this.formatMap=new Map([[Xe.QR_CODE,"qr_code"],[Xe.AZTEC,"aztec"],[Xe.CODABAR,"codabar"],[Xe.CODE_39,"code_39"],[Xe.CODE_93,"code_93"],[Xe.CODE_128,"code_128"],[Xe.DATA_MATRIX,"data_matrix"],[Xe.ITF,"itf"],[Xe.EAN_13,"ean_13"],[Xe.EAN_8,"ean_8"],[Xe.PDF_417,"pdf417"],[Xe.UPC_A,"upc_a"],[Xe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!n.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=r;var s=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return n.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},n.prototype.decodeAsync=function(e){return nle(this,void 0,void 0,function(){var t,r;return rle(this,function(s){switch(s.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=s.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(t),[2,{text:r.rawValue,format:OU.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},n.prototype.selectLargestBarcode=function(e){for(var t=null,r=0,s=0,i=e;s<i.length;s++){var o=i[s],l=o.boundingBox.width*o.boundingBox.height;l>r&&(r=l,t=o)}if(!t)throw"No largest barcode found";return t},n.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],r=0,s=e;r<s.length;r++){var i=s[r];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,s){e.set(t,r)}),e},n.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},n}(),DO=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(g){try{f(r.next(g))}catch(y){o(y)}}function c(g){try{f(r.throw(g))}catch(y){o(y)}}function f(g){g.done?i(g.value):s(g.value).then(l,c)}f((r=r.apply(n,e||[])).next())})},jO=function(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(f){return function(g){return c([f,g])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(r=1,s&&(i=f[0]&2?s.return:f[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,f[1])).done)return i;switch(s=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,s=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(g){f=[6,g],s=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},sle=function(){function n(e,t,r,s){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&OO.isSupported()?(this.primaryDecoder=new OO(e,r,s),this.secondaryDecoder=new MO(e,r,s)):this.primaryDecoder=new MO(e,r,s)}return n.prototype.decodeAsync=function(e){return DO(this,void 0,void 0,function(){var t;return jO(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},n.prototype.decodeRobustlyAsync=function(e){return DO(this,void 0,void 0,function(){var t,r;return jO(this,function(s){switch(s.label){case 0:t=performance.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,s.sent()];case 3:if(r=s.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},n.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},n.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},n.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,r=this.executionResults;t<r.length;t++){var s=r[t];e+=s}var i=e/this.executionResults.length;console.log("".concat(i," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},n}(),PR=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),IE=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(g){try{f(r.next(g))}catch(y){o(y)}}function c(g){try{f(r.throw(g))}catch(y){o(y)}}function f(g){g.done?i(g.value):s(g.value).then(l,c)}f((r=r.apply(n,e||[])).next())})},RE=function(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(f){return function(g){return c([f,g])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(r=1,s&&(i=f[0]&2?s.return:f[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,f[1])).done)return i;switch(s=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,s=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(g){f=[6,g],s=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},jU=function(){function n(e,t){this.name=e,this.track=t}return n.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},n.prototype.apply=function(e){var t={};t[this.name]=e;var r={advanced:[t]};return this.track.applyConstraints(r)},n.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},n}(),ile=function(n){PR(e,n);function e(t,r){return n.call(this,t,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var r={};r[this.name]=t;var s={advanced:[r]};return this.track.applyConstraints(s)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),r=t[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(jU),ole=function(n){PR(e,n);function e(t){return n.call(this,"zoom",t)||this}return e}(ile),ale=function(n){PR(e,n);function e(t){return n.call(this,"torch",t)||this}return e}(jU),lle=function(){function n(e){this.track=e}return n.prototype.zoomFeature=function(){return new ole(this.track)},n.prototype.torchFeature=function(){return new ale(this.track)},n}(),cle=function(){function n(e,t,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return n.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},n.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=e.surface.clientWidth,s=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,s),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},n.create=function(e,t,r,s){return IE(this,void 0,void 0,function(){var i,o;return RE(this,function(l){switch(l.label){case 0:return i=new n(e,t,s),r.aspectRatio?(o={aspectRatio:r.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:l.sent(),l.label=2;case 2:return i.setupSurface(),[2,i]}})})},n.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},n.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},n.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},n.prototype.resume=function(e){this.failIfClosed();var t=this,r=function(){setTimeout(e,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},n.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},n.prototype.getSurface=function(){return this.failIfClosed(),this.surface},n.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},n.prototype.applyVideoConstraints=function(e){return IE(this,void 0,void 0,function(){return RE(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},n.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,r){var s=e.mediaStream.getVideoTracks(),i=s.length,o=0;e.mediaStream.getVideoTracks().forEach(function(l){e.mediaStream.removeTrack(l),l.stop(),++o,o>=i&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},n.prototype.getCapabilities=function(){return new lle(this.getFirstTrackOrFail())},n}(),ule=function(){function n(e){this.mediaStream=e}return n.prototype.render=function(e,t,r){return IE(this,void 0,void 0,function(){return RE(this,function(s){return[2,cle.create(e,this.mediaStream,t,r)]})})},n.create=function(e){return IE(this,void 0,void 0,function(){var t,r;return RE(this,function(s){switch(s.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=s.sent(),[2,new n(r)]}})})},n}(),LO=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(g){try{f(r.next(g))}catch(y){o(y)}}function c(g){try{f(r.throw(g))}catch(y){o(y)}}function f(g){g.done?i(g.value):s(g.value).then(l,c)}f((r=r.apply(n,e||[])).next())})},BO=function(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(f){return function(g){return c([f,g])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(r=1,s&&(i=f[0]&2?s.return:f[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,f[1])).done)return i;switch(s=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,s=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(g){f=[6,g],s=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},dle=function(){function n(){}return n.failIfNotSupported=function(){return LO(this,void 0,void 0,function(){return BO(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new n]})})},n.prototype.create=function(e){return LO(this,void 0,void 0,function(){return BO(this,function(t){return[2,ule.create(e)]})})},n}(),hle=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(g){try{f(r.next(g))}catch(y){o(y)}}function c(g){try{f(r.throw(g))}catch(y){o(y)}}function f(g){g.done?i(g.value):s(g.value).then(l,c)}f((r=r.apply(n,e||[])).next())})},fle=function(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(f){return function(g){return c([f,g])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(r=1,s&&(i=f[0]&2?s.return:f[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,f[1])).done)return i;switch(s=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,s=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(g){f=[6,g],s=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},mle=function(){function n(){}return n.retrieve=function(){if(navigator.mediaDevices)return n.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?n.getCamerasFromMediaStreamTrack():n.rejectWithError()},n.rejectWithError=function(){var e=bg.unableToQuerySupportedDevices();return n.isHttpsOrLocalhost()||(e=bg.insecureContextCameraQueryError()),Promise.reject(e)},n.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},n.getCamerasFromMediaDevices=function(){return hle(this,void 0,void 0,function(){var e,t,r,s,i,o,l;return fle(this,function(c){switch(c.label){case 0:return e=function(f){for(var g=f.getVideoTracks(),y=0,_=g;y<_.length;y++){var E=_[y];E.enabled=!1,E.stop(),f.removeTrack(E)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=c.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=c.sent(),s=[],i=0,o=r;i<o.length;i++)l=o[i],l.kind==="videoinput"&&s.push({id:l.deviceId,label:l.label});return e(t),[2,s]}})})},n.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var r=function(i){for(var o=[],l=0,c=i;l<c.length;l++){var f=c[l];f.kind==="video"&&o.push({id:f.id,label:f.label})}e(o)},s=MediaStreamTrack;s.getSources(r)})},n}(),Cr;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.NOT_STARTED=1]="NOT_STARTED",n[n.SCANNING=2]="SCANNING",n[n.PAUSED=3]="PAUSED"})(Cr||(Cr={}));var ple=function(){function n(){this.state=Cr.NOT_STARTED,this.onGoingTransactionNewState=Cr.UNKNOWN}return n.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},n.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},n.prototype.execute=function(){if(this.onGoingTransactionNewState===Cr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Cr.UNKNOWN,this.directTransition(e)},n.prototype.cancel=function(){if(this.onGoingTransactionNewState===Cr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Cr.UNKNOWN},n.prototype.getState=function(){return this.state},n.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Cr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},n.prototype.validateTransition=function(e){switch(this.state){case Cr.UNKNOWN:throw"Transition from unknown is not allowed";case Cr.NOT_STARTED:this.failIfNewStateIs(e,[Cr.PAUSED]);break;case Cr.SCANNING:break;case Cr.PAUSED:break}},n.prototype.failIfNewStateIs=function(e,t){for(var r=0,s=t;r<s.length;r++){var i=s[r];if(e===i)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},n}(),gle=function(){function n(e){this.stateManager=e}return n.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},n.prototype.directTransition=function(e){this.stateManager.directTransition(e)},n.prototype.getState=function(){return this.stateManager.getState()},n.prototype.canScanFile=function(){return this.stateManager.getState()===Cr.NOT_STARTED},n.prototype.isScanning=function(){return this.stateManager.getState()!==Cr.NOT_STARTED},n.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Cr.SCANNING},n.prototype.isPaused=function(){return this.stateManager.getState()===Cr.PAUSED},n}(),xle=function(){function n(){}return n.create=function(){return new gle(new ple)},n}(),vle=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qi=function(n){vle(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Zae),yle=function(){function n(e,t){this.logger=t,this.fps=Qi.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Qi.DEFAULT_DISABLE_FLIP}return n.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?DU.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},n.prototype.isShadedBoxEnabled=function(){return!Oc(this.qrbox)},n.create=function(e,t){return new n(e,t)},n}(),wle=function(){function n(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof t=="boolean"?this.verbose=t===!0:t&&(r=t,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new Jae(this.verbose),this.qrcode=new sle(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=xle.create()}return n.prototype.start=function(e,t,r,s){var i=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;s?o=s:o=this.verbose?this.logger.log:function(){};var l=yle.create(t,this.logger);this.clearElement();var c=!1;l.videoConstraints&&(l.isMediaStreamConstraintsValid()?c=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var f=c,g=document.getElementById(this.elementId);g.clientWidth?g.clientWidth:Qi.DEFAULT_WIDTH,g.style.position="relative",this.shouldScan=!0,this.element=g;var y=this,_=this.stateManagerProxy.startTransition(Cr.SCANNING);return new Promise(function(E,P){var S=f?l.videoConstraints:y.createVideoConstraints(e);if(!S){_.cancel(),P("videoConstraints should be defined");return}var I={};(!f||l.aspectRatio)&&(I.aspectRatio=l.aspectRatio);var N={onRenderSurfaceReady:function(k,T){y.setupUi(k,T,l),y.isScanning=!0,y.foreverScan(l,r,o)}};dle.failIfNotSupported().then(function(k){k.create(S).then(function(T){return T.render(i.element,I,N).then(function(D){y.renderedCamera=D,_.execute(),E(null)}).catch(function(D){_.cancel(),P(D)})}).catch(function(T){_.cancel(),P(bg.errorGettingUserMedia(T))})}).catch(function(k){_.cancel(),P(bg.cameraStreamingNotSupported())})})},n.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Cr.PAUSED),this.showPausedState(),(Oc(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},n.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(Cr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},n.prototype.getState=function(){return this.stateManagerProxy.getState()},n.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Cr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var i=document.getElementById(Qi.SHADED_REGION_ELEMENT_ID);i&&e.element.removeChild(i)}},s=this;return this.renderedCamera.close().then(function(){return s.renderedCamera=null,s.element&&(s.element.removeChild(s.canvasElement),s.canvasElement=null),r(),s.qrRegion&&(s.qrRegion=null),s.context&&(s.context=null),t.execute(),s.hidePausedState(),s.isScanning=!1,Promise.resolve()})},n.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(r){return r.decodedText})},n.prototype.scanFileV2=function(e,t){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Oc(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(s,i){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var l=o.width,c=o.height,f=document.getElementById(r.elementId),g=f.clientWidth?f.clientWidth:Qi.DEFAULT_WIDTH,y=Math.max(f.clientHeight?f.clientHeight:c,Qi.FILE_SCAN_MIN_HEIGHT),_=r.computeCanvasDrawConfig(l,c,g,y);if(t){var E=r.createCanvasElement(g,y,"qr-canvas-visible");E.style.display="inline-block",f.appendChild(E);var P=E.getContext("2d");if(!P)throw"Unable to get 2d context from canvas";P.canvas.width=g,P.canvas.height=y,P.drawImage(o,0,0,l,c,_.x,_.y,_.width,_.height)}var S=Qi.FILE_SCAN_HIDDEN_CANVAS_PADDING,I=Math.max(o.width,_.width),N=Math.max(o.height,_.height),k=I+2*S,T=N+2*S,D=r.createCanvasElement(k,T);f.appendChild(D);var U=D.getContext("2d");if(!U)throw"Unable to get 2d context from canvas";U.canvas.width=k,U.canvas.height=T,U.drawImage(o,0,0,l,c,S,S,I,N);try{r.qrcode.decodeRobustlyAsync(D).then(function(z){s(kO.createFromQrcodeResult(z))}).catch(i)}catch(z){i("QR code parse error, error = ".concat(z))}},o.onerror=i,o.onabort=i,o.onstalled=i,o.onsuspend=i,o.src=URL.createObjectURL(e)})},n.prototype.clear=function(){this.clearElement()},n.getCameras=function(){return mle.retrieve()},n.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},n.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},n.prototype.applyVideoConstraints=function(e){if(e){if(!DU.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},n.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},n.prototype.getSupportedFormats=function(e){var t=[Xe.QR_CODE,Xe.AZTEC,Xe.CODABAR,Xe.CODE_39,Xe.CODE_93,Xe.CODE_128,Xe.DATA_MATRIX,Xe.MAXICODE,Xe.ITF,Xe.EAN_13,Xe.EAN_8,Xe.PDF_417,Xe.RSS_14,Xe.RSS_EXPANDED,Xe.UPC_A,Xe.UPC_E,Xe.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],s=0,i=e.formatsToSupport;s<i.length;s++){var o=i[s];Kae(o)?r.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},n.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Oc(e))return!0;if(!Oc(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Oc(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return Oc(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},n.prototype.validateQrboxSize=function(e,t,r){var s=this,i=r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(e,t,i),l=function(f){if(f<Qi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Qi.MIN_QR_BOX_SIZE,"px.")},c=function(f){return f>e&&(s.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),f=e),f};l(o.width),l(o.height),o.width=c(o.width)},n.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},n.prototype.toQrdimensions=function(e,t,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,t)}catch(s){throw new Error("qrbox config was passed as a function but it failed with unknown error"+s)}return r},n.prototype.setupUi=function(e,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,r);var s=Oc(r.qrbox)?{width:e,height:t}:r.qrbox;this.validateQrboxConfig(s);var i=this.toQrdimensions(e,t,s);i.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=r.isShadedBoxEnabled()&&i.height<=t,l={x:0,y:0,width:e,height:t},c=o?this.getShadedRegionBounds(e,t,i):l,f=this.createCanvasElement(c.width,c.height),g={willReadFrequently:!0},y=f.getContext("2d",g);y.canvas.width=c.width,y.canvas.height=c.height,this.element.append(f),o&&this.possiblyInsertShadingElement(this.element,e,t,i),this.createScannerPausedUiElement(this.element),this.qrRegion=c,this.context=y,this.canvasElement=f},n.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=bg.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},n.prototype.scanContext=function(e,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(s){return e(s.text,kO.createFromQrcodeResult(s)),r.possiblyUpdateShaders(!0),!0}).catch(function(s){r.possiblyUpdateShaders(!1);var i=bg.codeParseError(s);return t(i,Qae.createFrom(i)),!1})},n.prototype.foreverScan=function(e,t,r){var s=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),o=i.videoWidth/i.clientWidth,l=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var c=this.qrRegion.width*o,f=this.qrRegion.height*l,g=this.qrRegion.x*o,y=this.qrRegion.y*l;this.context.drawImage(i,g,y,c,f,0,0,this.qrRegion.width,this.qrRegion.height);var _=function(){s.foreverScanTimeout=setTimeout(function(){s.foreverScan(e,t,r)},s.getTimeoutFps(e.fps))};this.scanContext(t,r).then(function(E){!E&&e.disableFlip!==!0?(s.context.translate(s.context.canvas.width,0),s.context.scale(-1,1),s.scanContext(t,r).finally(function(){_()})):_()}).catch(function(E){s.logger.logError("Error happend while scanning context",E),_()})}},n.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",r="deviceId",s={user:!0,environment:!0},i="exact",o=function(P){if(P in s)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(P,"'")},l=Object.keys(e);if(l.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(l.length," keys");var c=Object.keys(e)[0];if(c!==t&&c!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(c===t){var f=e.facingMode;if(typeof f=="string"){if(o(f))return{facingMode:f}}else if(typeof f=="object")if(i in f){if(o(f["".concat(i)]))return{facingMode:{exact:f["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.");else{var g=typeof f;throw"Invalid type of 'facingMode' = ".concat(g)}}else{var y=e.deviceId;if(typeof y=="string")return{deviceId:y};if(typeof y=="object"){if(i in y)return{deviceId:{exact:y["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}else{var _=typeof y;throw"Invalid type of 'deviceId' = ".concat(_)}}}var E=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(E)},n.prototype.computeCanvasDrawConfig=function(e,t,r,s){if(e<=r&&t<=s){var i=(r-e)/2,o=(s-t)/2;return{x:i,y:o,width:e,height:t}}else{var l=e,c=t;return e>r&&(t=r/e*t,e=r),t>s&&(e=s/t*e,t=s),this.logger.log("Image downsampled from "+"".concat(l,"X").concat(c)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,r,s)}},n.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},n.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Qi.BORDER_SHADER_MATCH_COLOR:Qi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},n.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},n.prototype.createCanvasElement=function(e,t,r){var s=e,i=t,o=document.createElement("canvas");return o.style.width="".concat(s,"px"),o.style.height="".concat(i,"px"),o.style.display="none",o.id=Oc(r)?"qr-canvas":r,o},n.prototype.getShadedRegionBounds=function(e,t,r){if(r.width>e||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},n.prototype.possiblyInsertShadingElement=function(e,t,r,s){if(!(t-s.width<1||r-s.height<1)){var i=document.createElement("div");i.style.position="absolute";var o=(t-s.width)/2,l=(r-s.height)/2;if(i.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(Qi.SHADED_REGION_ELEMENT_ID),t-s.width<11||r-s.height<11)this.hasBorderShaders=!1;else{var c=5,f=40;this.insertShaderBorders(i,f,c,-c,null,0,!0),this.insertShaderBorders(i,f,c,-c,null,0,!1),this.insertShaderBorders(i,f,c,null,-c,0,!0),this.insertShaderBorders(i,f,c,null,-c,0,!1),this.insertShaderBorders(i,c,f+c,-c,null,-c,!0),this.insertShaderBorders(i,c,f+c,null,-c,-c,!0),this.insertShaderBorders(i,c,f+c,-c,null,-c,!1),this.insertShaderBorders(i,c,f+c,null,-c,-c,!1),this.hasBorderShaders=!0}e.append(i)}},n.prototype.insertShaderBorders=function(e,t,r,s,i,o,l){var c=document.createElement("div");c.style.position="absolute",c.style.backgroundColor=Qi.BORDER_SHADER_DEFAULT_COLOR,c.style.width="".concat(t,"px"),c.style.height="".concat(r,"px"),s!==null&&(c.style.top="".concat(s,"px")),i!==null&&(c.style.bottom="".concat(i,"px")),l?c.style.left="".concat(o,"px"):c.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(c),e.appendChild(c)},n.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},n.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},n.prototype.getTimeoutFps=function(e){return 1e3/e},n}(),FO;(function(n){n[n.STATUS_DEFAULT=0]="STATUS_DEFAULT",n[n.STATUS_SUCCESS=1]="STATUS_SUCCESS",n[n.STATUS_WARNING=2]="STATUS_WARNING",n[n.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(FO||(FO={}));function ble(){const[n,e]=M.useState(""),[t,r]=M.useState(""),[s,i]=M.useState(""),[o,l]=M.useState("qrcode"),[c,f]=M.useState(!1),g=M.useRef(null),y=M.useRef(null),[_,E]=M.useState([]),[P,S]=M.useState(!0),[I,N]=M.useState(null);M.useEffect(()=>()=>{try{if(g.current){const ee=g.current.stop();if(ee&&typeof ee.then=="function")ee.then(()=>{var ce;try{(ce=g.current)==null||ce.clear()}catch{}}).catch(ce=>{console.error("Erro ao parar scanner (cleanup):",ce)});else try{g.current.clear()}catch{}}}catch(ee){console.error("Erro no cleanup do scanner:",ee)}},[c]);const k=async()=>{var ee,ce;if(!n||!t||!s){xe.error("Preencha todos os campos");return}try{const{data:{session:de}}=await Ce.auth.getSession();if(!((ee=de==null?void 0:de.user)!=null&&ee.email)){xe.error("Voc precisa estar logado");return}if(!z.find(Oe=>Oe.id===n)){xe.error("Evento no encontrado");return}const fe=t.match(/^(\d{2})\/(\d{2})\/(\d{4})/);let oe=new Date;if(fe){const[,Oe,De,ze]=fe;oe=new Date(parseInt(ze),parseInt(De)-1,parseInt(Oe))}const{data:Q,error:ue}=await Ce.from("inscricoes").select("id").eq("evento_id",n).eq("usuario_email",de.user.email).single();if(ue||!Q){console.error("Erro ao buscar inscrio:",ue),xe.error("Voc no est inscrito neste evento");return}const he={evento_id:n,usuario_email:de.user.email,inscricao_id:Q.id};try{he.usuario_nome=((ce=de.user.user_metadata)==null?void 0:ce.name)||de.user.email,he.data_presenca=oe.toISOString()}catch{console.warn("No foi possvel adicionar todas as colunas opcionais")}console.log("Tentando inserir presena:",he);const{data:Ee,error:_e}=await Ce.from("presencas").insert(he).select();if(_e){const Oe={message:_e.message,details:_e.details,hint:_e.hint,code:_e.code};if(console.error("Erro detalhado ao registrar presena:",JSON.stringify(Oe,null,2)),console.error("Erro completo:",_e),_e.code==="42703"){console.log("Tentando inserir apenas com colunas essenciais...");const De={evento_id:n,usuario_email:de.user.email},{data:ze,error:be}=await Ce.from("presencas").insert(De).select();if(be){console.error("Erro na segunda tentativa:",be),xe.error(`Erro: ${be.message||"Erro ao registrar presena"}`);return}console.log("Presena registrada com sucesso (minimal):",ze),xe.success("Presena registrada com sucesso!"),i(""),await se();return}xe.error(`Erro: ${_e.message||"Erro ao registrar presena"}`);return}console.log("Presena registrada com sucesso:",Ee),xe.success("Presena registrada com sucesso!"),i(""),await se()}catch(de){console.error("Erro ao validar presena:",de),xe.error("Erro ao registrar presena")}},T=async()=>{if(!n||!t){xe.error("Selecione o evento e o dia primeiro");return}try{f(!0),await new Promise(re=>setTimeout(re,100));const ee=new wle("qr-reader");g.current=ee;const ce={fps:10,qrbox:{width:250,height:250},aspectRatio:1},de={facingMode:"environment"};await ee.start(de,ce,re=>{xe.success("QR Code detectado!"),U(re),D()},re=>{}).catch(async re=>{console.log("Tentando cmera frontal..."),await ee.start({facingMode:"user"},ce,fe=>{xe.success("QR Code detectado!"),U(fe),D()},fe=>{})})}catch(ee){const ce=ee;console.error("Erro ao iniciar cmera:",ce),f(!1);const de=ce&&typeof ce=="object"&&"name"in ce?ce.name:void 0,re=ce&&typeof ce=="object"&&"message"in ce?ce.message:void 0;de==="NotAllowedError"||de==="PermissionDeniedError"?xe.error("Permisso de cmera negada. Permita o acesso  cmera."):de==="NotFoundError"||de==="DevicesNotFoundError"?xe.error("Nenhuma cmera encontrada."):de==="NotReadableError"||de==="TrackStartError"?xe.error("Cmera est sendo usada por outro aplicativo."):typeof re=="string"&&re.includes("NotAllowedError")?xe.error("Permisso de cmera negada. Permita o acesso  cmera."):(xe.error("Erro ao acessar cmera. Use a palavra-chave."),console.error("Detalhes do erro:",ce))}},D=async()=>{if(!g.current){f(!1);return}try{const ee=g.current.stop();ee&&typeof ee.then=="function"&&await ee}catch(ee){console.warn("Aviso ao parar scanner:",ee)}try{g.current.clear()}catch{}g.current=null,f(!1)},U=async ee=>{var ce,de;if(!n||!t){xe.error("Selecione o evento e o dia primeiro");return}try{const{data:{session:re}}=await Ce.auth.getSession();if(!((ce=re==null?void 0:re.user)!=null&&ce.email)){xe.error("Voc precisa estar logado");return}if(!z.find(De=>De.id===n)){xe.error("Evento no encontrado");return}const oe=t.match(/^(\d{2})\/(\d{2})\/(\d{4})/);let Q=new Date;if(oe){const[,De,ze,be]=oe;Q=new Date(parseInt(be),parseInt(ze)-1,parseInt(De))}const{data:ue,error:he}=await Ce.from("inscricoes").select("id").eq("evento_id",n).eq("usuario_email",re.user.email).single();if(he||!ue){console.error("Erro ao buscar inscrio:",he),xe.error("Voc no est inscrito neste evento");return}const Ee={evento_id:n,usuario_email:re.user.email,inscricao_id:ue.id};try{Ee.usuario_nome=((de=re.user.user_metadata)==null?void 0:de.name)||re.user.email,Ee.data_presenca=Q.toISOString()}catch{console.warn("No foi possvel adicionar todas as colunas opcionais")}console.log("Tentando inserir presena via QR:",Ee);const{data:_e,error:Oe}=await Ce.from("presencas").insert(Ee).select();if(Oe){const De={message:Oe.message,details:Oe.details,hint:Oe.hint,code:Oe.code};if(console.error("Erro detalhado ao registrar presena via QR Code:",JSON.stringify(De,null,2)),console.error("Erro completo:",Oe),Oe.code==="42703"){console.log("Tentando inserir sem colunas opcionais...");const ze={evento_id:n,usuario_email:re.user.email},{data:be,error:Te}=await Ce.from("presencas").insert(ze).select();if(Te){console.error("Erro na segunda tentativa:",Te),xe.error(`Erro: ${Te.message||"Erro ao registrar presena"}`);return}console.log("Presena via QR registrada com sucesso (minimal):",be),xe.success("Presena registrada via QR Code!"),console.log("QR Code detectado:",ee),await se();return}xe.error(`Erro: ${Oe.message||"Erro ao registrar presena"}`);return}console.log("Presena via QR registrada com sucesso:",_e),xe.success("Presena registrada via QR Code!"),console.log("QR Code detectado:",ee),await se()}catch(re){console.error("Erro ao processar QR Code:",re),xe.error("Erro ao registrar presena")}},[z,F]=M.useState([]),X=z.find(ee=>ee.id===n),Z=(ee,ce)=>{try{const de=new Date(ee),re=new Date(ce);return Tte({start:de,end:re}).map(oe=>ht(oe,"dd/MM/yyyy (EEEE)",{locale:Xt}))}catch{return[]}},ne=M.useCallback(async()=>{var ee;try{const{data:{session:ce}}=await Ce.auth.getSession();if(!((ee=ce==null?void 0:ce.user)!=null&&ee.email)){F([]);return}const{data:de,error:re}=await Ce.from("inscricoes").select("evento_id, eventos:evento_id(id, titulo, data_inicio, data_fim)").eq("usuario_email",ce.user.email).eq("status","confirmada").order("created_at",{ascending:!1});if(re){console.error("Erro ao buscar inscries:",re),F([]);return}const fe=(de||[]).map(oe=>{const Q=oe.eventos&&(Array.isArray(oe.eventos)?oe.eventos[0]:oe.eventos);if(!Q)return null;const ue=Q,he=Z(ue.data_inicio,ue.data_fim);return{id:ue.id,titulo:ue.titulo,data_inicio:ue.data_inicio,data_fim:ue.data_fim,dias:he}}).filter(Boolean);F(fe)}catch(ce){console.error("Erro ao buscar inscries/eventos:",ce),F([])}},[]);M.useEffect(()=>{ne()},[ne]),M.useEffect(()=>{r("")},[n]);const se=M.useCallback(async()=>{try{if(S(!0),!I){S(!1);return}console.log("Buscando presenas para:",I);const{data:ee,error:ce}=await Ce.from("presencas").select("id, evento_id, created_at").eq("usuario_email",I).order("created_at",{ascending:!1});if(ce){console.error("Erro detalhado ao buscar presenas:",{message:ce.message,details:ce.details,hint:ce.hint,code:ce.code,error:ce}),xe.error(`Erro ao carregar presenas: ${ce.message}`),E([]);return}if(console.log("Presenas carregadas:",ee),ee&&ee.length>0){const de=[...new Set(ee.map(re=>re.evento_id))];try{const{data:re}=await Ce.from("eventos").select("id, titulo, data_inicio, data_fim").in("id",de),fe=ee.map(oe=>{const Q=re==null?void 0:re.find(ue=>ue.id===oe.evento_id);return{...oe,eventos:Q||null}});E(fe)}catch(re){console.warn("No foi possvel carregar dados dos eventos, mostrando s presenas:",re),E(ee)}}else E(ee||[])}catch(ee){console.error("Erro geral ao buscar presenas:",ee),xe.error("Erro ao carregar presenas"),E([])}finally{S(!1)}},[I]);return M.useEffect(()=>{(async()=>{var de;const{data:{session:ce}}=await Ce.auth.getSession();(de=ce==null?void 0:ce.user)!=null&&de.email?N(ce.user.email):S(!1)})()},[]),M.useEffect(()=>{I&&se()},[I,se]),h.jsxs("div",{className:"space-y-6",children:[h.jsx("h1",{className:"text-3xl font-light",children:"Registrar Presena"}),h.jsx(Fe,{className:"p-6 max-w-2xl",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx(Tn,{children:"Selecione o Evento"}),h.jsxs(Qs,{value:n,onValueChange:e,children:[h.jsx(ks,{children:h.jsx(Js,{placeholder:"Escolha um evento"})}),h.jsx(Ms,{children:z.length===0?h.jsx(Pt,{value:"__no_event",disabled:!0,children:"Nenhum evento inscrito"}):z.map(ee=>h.jsx(Pt,{value:ee.id,children:ee.titulo},ee.id))})]})]}),X&&h.jsxs("div",{children:[h.jsx(Tn,{children:"Selecione o Dia"}),h.jsxs(Qs,{value:t,onValueChange:r,children:[h.jsx(ks,{children:h.jsx(Js,{placeholder:"Escolha um dia"})}),h.jsx(Ms,{children:X.dias.map(ee=>h.jsx(Pt,{value:ee,children:ee},ee))})]})]}),h.jsxs(TR,{value:o,onValueChange:ee=>l(ee),className:"w-full",children:[h.jsxs(rA,{className:"grid w-full grid-cols-2",children:[h.jsxs(ec,{value:"qrcode",children:[h.jsx(Nh,{className:"w-4 h-4 mr-2"}),"QR Code"]}),h.jsxs(ec,{value:"palavrachave",children:[h.jsx(w5,{className:"w-4 h-4 mr-2"}),"Palavra-chave"]})]}),h.jsx(gh,{value:"qrcode",className:"space-y-4",children:h.jsxs("div",{className:"space-y-4",children:[c?h.jsxs(h.Fragment,{children:[h.jsx("div",{id:"qr-reader",ref:y,className:"w-full border rounded-lg overflow-hidden"}),h.jsx(Je,{variant:"outline",onClick:D,className:"w-full",children:"Cancelar Scan"})]}):h.jsxs(Je,{variant:"elegant",onClick:T,className:"w-full",disabled:!n||!t,children:[h.jsx(Nh,{className:"w-4 h-4 mr-2"}),"Escanear QR Code"]}),!n||!t?h.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Selecione o evento e o dia antes de escanear"}):null]})}),h.jsxs(gh,{value:"palavrachave",className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx(Tn,{children:"Palavra-chave do Dia"}),h.jsx(Qt,{type:"password",value:s,onChange:ee=>i(ee.target.value),placeholder:"Digite a palavra-chave"})]}),h.jsxs(Je,{variant:"elegant",onClick:k,className:"w-full",disabled:!n||!t,children:[h.jsx(bi,{className:"w-4 h-4 mr-2"}),"Validar Presena"]})]})]})]})}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h2",{className:"text-xl font-light",children:"Presenas Confirmadas"}),P?h.jsx("div",{className:"flex items-center justify-center py-8",children:h.jsx(vs,{className:"w-8 h-8 animate-spin"})}):_.length===0?h.jsx(Fe,{className:"p-12 text-center text-muted-foreground",children:"Voc ainda no registrou presena em nenhum evento"}):_.map(ee=>{const ce=ee.eventos&&(Array.isArray(ee.eventos)?ee.eventos[0]:ee.eventos)||null,de=(ce==null?void 0:ce.titulo)||ee.evento_nome||"Evento",re=ee.data_presenca||ee.created_at,fe=re?new Date(re).toLocaleDateString("pt-BR"):"",oe=re?new Date(re).toLocaleTimeString("pt-BR"):"";let Q="";if(ee.dia_evento!==void 0&&ee.dia_evento!==null)Q=String(ee.dia_evento);else if(re)try{Q=ht(new Date(re),"EEEE",{locale:Xt})}catch{Q=""}return h.jsx(Fe,{className:"p-4",children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-normal",children:de}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:[Q," ",fe?`- ${fe}`:""," ",oe?`s ${oe}`:""]})]}),h.jsxs(qt,{variant:"default",children:[h.jsx(bi,{className:"w-3 h-3 mr-1"}),"Validada"]})]})},ee.id)})]})]})}function _le(){const[n,e]=M.useState([]),[t,r]=M.useState(!0),[s,i]=M.useState(null),o=M.useCallback(async()=>{if(!s){console.log(" Email no disponvel");return}console.log(" Buscando certificados para:",s);try{r(!0);const{data:g,error:y}=await Ce.from("certificados").select(`
          id,
          evento_id,
          usuario_email,
          usuario_nome,
          codigo_validacao,
          url_pdf,
          data_emissao,
          eventos:evento_id (
            id,
            titulo,
            carga_horaria,
            data_inicio,
            data_fim
          )
        `).eq("usuario_email",s).order("data_emissao",{ascending:!1});if(y)throw console.error(" Erro ao buscar certificados:",y),y;console.log(" Certificados encontrados:",(g==null?void 0:g.length)||0);const _=new Date;_.setHours(0,0,0,0);const E=(g||[]).filter(S=>{const I=S.eventos;if(!I)return!1;const N=Array.isArray(I)?I[0]:I;return!N||typeof N!="object"||!("data_fim"in N)?!1:new Date(N.data_fim)<_});console.log(` Certificados de eventos finalizados: ${E.length}/${(g==null?void 0:g.length)||0}`);const P=await Promise.all(E.map(async S=>{const I=S;if(!I.evento_id)return console.warn("Certificado sem evento_id, pulando clculo de presena:",I),{id:I.id,evento_id:I.evento_id,usuario_email:I.usuario_email,usuario_nome:I.usuario_nome,codigo_validacao:I.codigo_validacao,url_pdf:I.url_pdf,data_emissao:I.data_emissao,evento:Array.isArray(I.eventos)?I.eventos[0]:I.eventos,presenca_percentual:0};const{count:N,error:k}=await Ce.from("presencas").select("dia_evento",{count:"exact",head:!0}).eq("evento_id",I.evento_id);k&&console.error("Erro ao buscar total de dias (presencas):",k);const{count:T,error:D}=await Ce.from("presencas").select("*",{count:"exact",head:!0}).eq("evento_id",I.evento_id).eq("usuario_email",s);D&&console.error("Erro ao buscar presenas do usurio:",D);const F=Math.round((T??0)/(N??1)*100);return{id:I.id,evento_id:I.evento_id,usuario_email:I.usuario_email,usuario_nome:I.usuario_nome,codigo_validacao:I.codigo_validacao,url_pdf:I.url_pdf,data_emissao:I.data_emissao,evento:Array.isArray(I.eventos)?I.eventos[0]:I.eventos,presenca_percentual:F}}));e(P)}catch(g){console.error("Erro ao buscar certificados:",g),xe.error("Erro ao carregar certificados")}finally{r(!1)}},[s]);M.useEffect(()=>{(async()=>{var _;const{data:{session:y}}=await Ce.auth.getSession();(_=y==null?void 0:y.user)!=null&&_.email?i(y.user.email):r(!1)})()},[]),M.useEffect(()=>{s&&o()},[s,o]);const l=g=>{g.url_pdf?(window.open(g.url_pdf,"_blank"),xe.success("Abrindo certificado...")):xe.error("PDF do certificado no disponvel")},c=g=>{navigator.clipboard.writeText(g),xe.success("Cdigo de validao copiado!")},f=g=>new Date(g).toLocaleDateString("pt-BR");return t?h.jsxs("div",{className:"space-y-6",children:[h.jsx("h1",{className:"text-3xl font-light",children:"Meus Certificados"}),h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(vs,{className:"w-8 h-8 animate-spin"})})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsx("h1",{className:"text-3xl font-light",children:"Meus Certificados"}),n.length===0?h.jsxs(Fe,{className:"p-12 text-center text-muted-foreground",children:[h.jsx(Su,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),h.jsx("p",{children:"Voc ainda no possui certificados emitidos"})]}):h.jsx("div",{className:"space-y-4",children:n.map(g=>{const y=(g.presenca_percentual||0)>=75;return h.jsxs(Fe,{className:"p-6",children:[h.jsx("div",{className:"flex justify-between items-start mb-4",children:h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("h3",{className:"text-xl font-normal",children:g.evento.titulo}),y?h.jsxs(qt,{variant:"default",className:"gap-1",children:[h.jsx(bi,{className:"w-3 h-3"}),"Apto"]}):h.jsxs(qt,{variant:"destructive",className:"gap-1",children:[h.jsx(Po,{className:"w-3 h-3"}),"No Apto"]})]}),h.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[h.jsxs("p",{children:["Emitido em ",f(g.data_emissao)]}),h.jsxs("p",{children:[g.evento.carga_horaria,"h de carga horria"]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"flex-1 bg-muted rounded-full h-2 overflow-hidden max-w-xs",children:h.jsx("div",{className:"bg-primary h-full transition-all",style:{width:`${g.presenca_percentual}%`}})}),h.jsxs("span",{className:"text-xs",children:[g.presenca_percentual,"% presena"]})]})]}),h.jsxs("div",{className:"mt-3 p-3 bg-muted rounded-md",children:[h.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Cdigo de Validao:"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("code",{className:"text-xs font-mono flex-1 truncate",children:g.codigo_validacao}),h.jsx(Je,{size:"sm",variant:"ghost",onClick:()=>c(g.codigo_validacao),children:"Copiar"})]})]})]})}),y&&h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(Je,{variant:"elegant",size:"sm",onClick:()=>l(g),children:[h.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Download PDF"]}),g.url_pdf&&h.jsxs(Je,{variant:"outline",size:"sm",onClick:()=>window.open(g.url_pdf,"_blank"),children:[h.jsx(LC,{className:"w-4 h-4 mr-2"}),"Visualizar"]})]})]},g.id)})})]})}function Ele(){const[n,e]=M.useState(""),[t,r]=M.useState(""),[s,i]=M.useState(""),[o,l]=M.useState(""),[c,f]=M.useState(!0),[g,y]=M.useState(!1),_=M.useRef(null);M.useEffect(()=>{(async()=>{var k;try{const{data:{session:T},error:D}=await Ce.auth.getSession();if(D){xe.error("Erro ao carregar dados do usurio");return}if((k=T==null?void 0:T.user)!=null&&k.email){const U=T.user.email;r(U);const z=U.split("@")[0];i(z);const{data:F,error:X}=await Ce.from("usuarios").select("*").eq("email",U).single();console.log("Dados do usurio:",F),console.log("Erro:",X),!X&&F&&(F.nome_completo&&e(F.nome_completo),F.avatar_url&&l(F.avatar_url))}}catch(T){console.error("Erro ao buscar dados:",T)}finally{f(!1)}})()},[]);const E=()=>{var N;(N=_.current)==null||N.click()},P=async N=>{var T;const k=(T=N.target.files)==null?void 0:T[0];if(k){if(!k.type.startsWith("image/")){xe.error("Por favor, selecione uma imagem");return}if(k.size>2*1024*1024){xe.error("A imagem deve ter no mximo 2MB");return}y(!0);try{const D=k.name.split(".").pop(),z=`avatars/${`${s}-${Date.now()}.${D}`}`,{error:F}=await Ce.storage.from("perfil").upload(z,k,{cacheControl:"3600",upsert:!0});if(F)throw F;const{data:{publicUrl:X}}=Ce.storage.from("perfil").getPublicUrl(z);l(X),xe.success("Foto alterada com sucesso!")}catch(D){console.error("Erro ao fazer upload:",D),xe.error(D.message||"Erro ao alterar foto")}finally{y(!1)}}},S=async()=>{if(!n.trim()){xe.error("Por favor, preencha seu nome");return}try{const{error:N}=await Ce.from("usuarios").upsert({email:t,nome_completo:n,avatar_url:o||null},{onConflict:"email"});if(N)throw console.error("Erro detalhado:",N),N;xe.success("Perfil atualizado com sucesso!")}catch(N){console.error("Erro ao salvar:",N),xe.error(N.message||"Erro ao salvar alteraes")}},I=()=>n?n.split(" ").map(N=>N.charAt(0)).join("").toUpperCase().slice(0,2):t.charAt(0).toUpperCase();return h.jsxs("div",{className:"space-y-6 max-w-2xl",children:[h.jsx("h1",{className:"text-3xl font-light",children:"Meu Perfil"}),h.jsxs(Fe,{className:"p-8",children:[h.jsxs("div",{className:"flex flex-col items-center gap-6 mb-8",children:[h.jsxs(VI,{className:"w-32 h-32",children:[h.jsx(WI,{src:o||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t}`,className:"object-cover"}),h.jsx(GI,{children:I()})]}),h.jsx("input",{ref:_,type:"file",accept:"image/*",onChange:P,className:"hidden"}),h.jsxs(Je,{variant:"outline",size:"sm",onClick:E,disabled:g,children:[h.jsx(UI,{className:"w-4 h-4 mr-2"}),g?"Enviando...":"Alterar Foto"]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx(Tn,{children:"Nome Completo"}),h.jsx(Qt,{value:n,onChange:N=>e(N.target.value),placeholder:"Digite seu nome completo"})]}),h.jsxs("div",{children:[h.jsx(Tn,{children:"E-mail Institucional"}),h.jsx(Qt,{value:t,disabled:!0})]}),h.jsxs("div",{children:[h.jsx(Tn,{children:"Matrcula"}),h.jsx(Qt,{value:s,disabled:!0})]}),h.jsxs(Je,{variant:"elegant",onClick:S,className:"w-full",children:[h.jsx(b5,{className:"w-4 h-4 mr-2"}),"Salvar Alteraes"]})]})]})]})}const Fg=M.forwardRef(({className:n,...e},t)=>h.jsx("textarea",{className:et("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));Fg.displayName="Textarea";function Cle(){const[n,e]=M.useState(!1),[t,r]=M.useState([]),[s,i]=M.useState(!0),[o,l]=M.useState(null),[c,f]=M.useState(""),[g,y]=M.useState(""),[_,E]=M.useState(""),[P,S]=M.useState(""),[I,N]=M.useState(""),[k,T]=M.useState(""),D=F=>{const X={pendente:{variant:"outline",icon:xs,label:"Pendente"},aprovado:{variant:"default",icon:bi,label:"Aprovado"},ajustes:{variant:"outline",icon:ac,label:"Requer Ajustes"},rejeitado:{variant:"destructive",icon:Po,label:"Rejeitado"}},Z=X[F]??X.pendente,{variant:ne,icon:se,label:ee}=Z;return h.jsxs(qt,{variant:ne,className:"gap-1",children:[h.jsx(se,{className:"w-3 h-3"}),ee]})},U=M.useCallback(async()=>{if(!o)return;let F=!0;try{i(!0);const{data:X,error:Z}=await Ce.from("eventos").select("id, titulo, status, created_at, motivo_rejeicao").eq("organizador_email",o).order("created_at",{ascending:!1});if(Z){console.error("Erro ao buscar solicitaes:",Z),F&&(xe.error("Erro ao carregar solicitaes"),r([]));return}F&&r(X||[])}catch(X){console.error(X),F&&(xe.error("Erro ao carregar solicitaes"),r([]))}finally{F&&i(!1)}return()=>{F=!1}},[o]);M.useEffect(()=>{let F=!0;return(async()=>{var Z;try{const{data:{session:ne}}=await Ce.auth.getSession();F&&((Z=ne==null?void 0:ne.user)!=null&&Z.email)?l(ne.user.email):F&&i(!1)}catch(ne){console.error("Erro ao obter sesso:",ne),F&&i(!1)}})(),()=>{F=!1}},[]),M.useEffect(()=>{o&&U()},[o,U]);const z=async()=>{var F;if(!c||!_||!P){xe.error("Preencha ttulo e datas");return}try{const{data:{session:X}}=await Ce.auth.getSession();if(!((F=X==null?void 0:X.user)!=null&&F.email)){xe.error("Voc precisa estar logado");return}const Z={titulo:c,descricao:g,data_inicio:new Date(_).toISOString(),data_fim:new Date(P).toISOString(),carga_horaria:I===""?null:Number(I),tags:k?k.split(",").map(se=>se.trim()):[],organizador_email:X.user.email,status:"pendente",created_at:new Date().toISOString()},{error:ne}=await Ce.from("eventos").insert(Z);if(ne)throw ne;xe.success("Solicitao enviada com sucesso!"),e(!1),f(""),y(""),E(""),S(""),N(""),T(""),U()}catch(X){console.error("Erro ao criar solicitao:",X),xe.error("Erro ao enviar solicitao")}};return s?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h1",{className:"text-3xl font-light",children:"Minhas Solicitaes de Evento"}),h.jsxs(Je,{variant:"elegant",onClick:()=>e(!0),children:[h.jsx(sT,{className:"w-4 h-4 mr-2"}),"Nova Solicitao"]})]}),h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(vs,{className:"w-8 h-8 animate-spin"})})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h1",{className:"text-3xl font-light",children:"Minhas Solicitaes de Evento"}),h.jsxs(Je,{variant:"elegant",onClick:()=>e(!0),children:[h.jsx(sT,{className:"w-4 h-4 mr-2"}),"Nova Solicitao"]})]}),h.jsx("div",{className:"space-y-4",children:t.length===0?h.jsx(Fe,{className:"p-12 text-center text-muted-foreground",children:"Voc ainda no enviou nenhuma solicitao"}):t.map(F=>h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("h3",{className:"text-lg font-normal",children:F.titulo}),D(F.status)]}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:["Enviado em ",new Date(F.created_at).toLocaleDateString("pt-BR")]}),F.feedback&&h.jsxs("div",{className:"mt-3 p-3 bg-muted rounded-md",children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Feedback:"}),h.jsx("p",{className:"text-sm",children:F.feedback})]}),F.motivo_rejeicao&&h.jsxs("div",{className:"mt-3 p-3 bg-destructive/10 rounded-md",children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Motivo da rejeio:"}),h.jsx("p",{className:"text-sm",children:F.motivo_rejeicao})]})]}),F.status==="ajustes"&&h.jsxs(Je,{variant:"outline",size:"sm",children:[h.jsx(ac,{className:"w-4 h-4 mr-2"}),"Editar"]})]})},F.id))}),h.jsx(sy,{open:n,onOpenChange:e,children:h.jsxs(M1,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[h.jsx(O1,{children:h.jsx(D1,{children:"Nova Solicitao de Evento"})}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx(Tn,{children:"Nome do Evento"}),h.jsx(Qt,{value:c,onChange:F=>f(F.target.value),placeholder:"Ex: Workshop de React Avanado"})]}),h.jsxs("div",{children:[h.jsx(Tn,{children:"Descrio"}),h.jsx(Fg,{value:g,onChange:F=>y(F.target.value),placeholder:"Descreva o evento...",rows:4})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(Tn,{children:"Data de Incio"}),h.jsx(Qt,{value:_,onChange:F=>E(F.target.value),type:"date"})]}),h.jsxs("div",{children:[h.jsx(Tn,{children:"Data de Trmino"}),h.jsx(Qt,{value:P,onChange:F=>S(F.target.value),type:"date"})]})]}),h.jsxs("div",{children:[h.jsx(Tn,{children:"Carga Horria (horas)"}),h.jsx(Qt,{value:I,onChange:F=>N(F.target.value===""?"":Number(F.target.value)),type:"number",placeholder:"Ex: 40"})]}),h.jsxs("div",{children:[h.jsx(Tn,{children:"Palestrantes (separados por vrgula)"}),h.jsx(Qt,{value:k,onChange:F=>T(F.target.value),placeholder:"Ex: Dr. Joo Silva, Profa. Maria Santos"})]}),h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx(Je,{variant:"outline",onClick:()=>e(!1),children:"Cancelar"}),h.jsx(Je,{variant:"elegant",onClick:z,children:"Enviar Solicitao"})]})]})]})})]})}function Ale(){const n=ul(),[e,t]=M.useState([]),[r,s]=M.useState(!0),i=async()=>{var c;try{s(!0);const{data:{session:f}}=await Ce.auth.getSession();if(!((c=f==null?void 0:f.user)!=null&&c.email)){xe.error("Voc precisa estar logado"),n("/login");return}const{data:g,error:y}=await Ce.from("eventos").select("*").eq("organizador_email",f.user.email).order("created_at",{ascending:!1});if(y)throw y;t(g||[])}catch(f){console.error("Erro ao carregar eventos:",f),xe.error("Erro ao carregar eventos")}finally{s(!1)}};M.useEffect(()=>{i();const c=Ce.channel("meus-eventos-changes").on("postgres_changes",{event:"*",schema:"public",table:"eventos"},()=>{i()}).subscribe();return()=>{Ce.removeChannel(c)}},[]);const o=c=>{switch(c){case"aprovado":return h.jsx(qt,{className:"bg-green-500/10 text-green-500 border-green-500/20",children:"Aprovado"});case"pendente":return h.jsx(qt,{className:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",children:"Pendente"});case"rejeitado":return h.jsx(qt,{className:"bg-red-500/10 text-red-500 border-red-500/20",children:"Rejeitado"});default:return h.jsx(qt,{variant:"outline",children:c})}},l=c=>{const f=c.capacidade_maxima-c.vagas_disponiveis,g=Math.round(f/c.capacidade_maxima*100);return{ocupadas:f,percentual:g}};return r?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h1",{className:"text-3xl font-light",children:"Meus Eventos"}),h.jsxs(Je,{onClick:()=>n("/organizador/criar-evento"),children:[h.jsx(mS,{className:"w-4 h-4 mr-2"}),"Novo Evento"]})]}),h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(vs,{className:"w-8 h-8 animate-spin text-muted-foreground"})})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h1",{className:"text-3xl font-light",children:"Meus Eventos"}),h.jsxs(Je,{onClick:()=>n("/organizador/criar-evento"),children:[h.jsx(mS,{className:"w-4 h-4 mr-2"}),"Novo Evento"]})]}),e.length===0?h.jsx(Fe,{className:"p-12",children:h.jsxs("div",{className:"text-center text-muted-foreground space-y-4",children:[h.jsx(or,{className:"w-12 h-12 mx-auto opacity-50"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-lg",children:"Voc ainda no criou nenhum evento"}),h.jsx("p",{className:"text-sm",children:'Clique em "Novo Evento" para comear'})]}),h.jsxs(Je,{onClick:()=>n("/organizador/criar-evento"),children:[h.jsx(mS,{className:"w-4 h-4 mr-2"}),"Criar Primeiro Evento"]})]})}):h.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.map(c=>{const{ocupadas:f,percentual:g}=l(c);return h.jsxs(Fe,{className:"overflow-hidden hover:glow-border-hover transition-all cursor-pointer",onClick:()=>n(`/organizador/evento/${c.id}`),children:[h.jsx("div",{className:"w-full h-40 bg-muted bg-cover bg-center",style:{backgroundImage:c.banner_url?`url(${c.banner_url})`:"none"},children:!c.banner_url&&h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx(or,{className:"w-12 h-12 text-muted-foreground opacity-20"})})}),h.jsxs("div",{className:"p-6 space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-start justify-between gap-2",children:[h.jsx("h3",{className:"text-xl font-normal line-clamp-2",children:c.titulo}),o(c.status)]}),h.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:c.descricao})]}),h.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(or,{className:"w-4 h-4"}),h.jsxs("span",{children:[ht(new Date(c.data_inicio),"dd/MM/yyyy",{locale:Xt}),c.data_inicio!==c.data_fim&&h.jsxs(h.Fragment,{children:[" - ",ht(new Date(c.data_fim),"dd/MM/yyyy",{locale:Xt})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(fp,{className:"w-4 h-4"}),h.jsx("span",{className:"line-clamp-1",children:c.local})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Zs,{className:"w-4 h-4"}),h.jsxs("span",{children:[f,"/",c.capacidade_maxima," inscritos (",g,"%)"]})]}),c.carga_horaria&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(xs,{className:"w-4 h-4"}),h.jsxs("span",{children:[c.carga_horaria,"h"]})]})]}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsx(qt,{variant:"outline",className:"text-xs",children:c.tipo}),c.valor>0?h.jsxs(qt,{variant:"outline",className:"text-xs",children:["R$ ",c.valor.toFixed(2)]}):h.jsx(qt,{variant:"outline",className:"text-xs text-green-500 border-green-500/20",children:"Gratuito"})]})]})]},c.id)})})]})}var Z3={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(n,e){(function(t,r){r(e)})(Yp,function(t){var r="1.9.4";function s(d){var w,A,j,V;for(A=1,j=arguments.length;A<j;A++){V=arguments[A];for(w in V)d[w]=V[w]}return d}var i=Object.create||function(){function d(){}return function(w){return d.prototype=w,new d}}();function o(d,w){var A=Array.prototype.slice;if(d.bind)return d.bind.apply(d,A.call(arguments,1));var j=A.call(arguments,2);return function(){return d.apply(w,j.length?j.concat(A.call(arguments)):arguments)}}var l=0;function c(d){return"_leaflet_id"in d||(d._leaflet_id=++l),d._leaflet_id}function f(d,w,A){var j,V,K,ie;return ie=function(){j=!1,V&&(K.apply(A,V),V=!1)},K=function(){j?V=arguments:(d.apply(A,arguments),setTimeout(ie,w),j=!0)},K}function g(d,w,A){var j=w[1],V=w[0],K=j-V;return d===j&&A?d:((d-V)%K+K)%K+V}function y(){return!1}function _(d,w){if(w===!1)return d;var A=Math.pow(10,w===void 0?6:w);return Math.round(d*A)/A}function E(d){return d.trim?d.trim():d.replace(/^\s+|\s+$/g,"")}function P(d){return E(d).split(/\s+/)}function S(d,w){Object.prototype.hasOwnProperty.call(d,"options")||(d.options=d.options?i(d.options):{});for(var A in w)d.options[A]=w[A];return d.options}function I(d,w,A){var j=[];for(var V in d)j.push(encodeURIComponent(A?V.toUpperCase():V)+"="+encodeURIComponent(d[V]));return(!w||w.indexOf("?")===-1?"?":"&")+j.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function k(d,w){return d.replace(N,function(A,j){var V=w[j];if(V===void 0)throw new Error("No value provided for variable "+A);return typeof V=="function"&&(V=V(w)),V})}var T=Array.isArray||function(d){return Object.prototype.toString.call(d)==="[object Array]"};function D(d,w){for(var A=0;A<d.length;A++)if(d[A]===w)return A;return-1}var U="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(d){return window["webkit"+d]||window["moz"+d]||window["ms"+d]}var F=0;function X(d){var w=+new Date,A=Math.max(0,16-(w-F));return F=w+A,window.setTimeout(d,A)}var Z=window.requestAnimationFrame||z("RequestAnimationFrame")||X,ne=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(d){window.clearTimeout(d)};function se(d,w,A){if(A&&Z===X)d.call(w);else return Z.call(window,o(d,w))}function ee(d){d&&ne.call(window,d)}var ce={__proto__:null,extend:s,create:i,bind:o,get lastId(){return l},stamp:c,throttle:f,wrapNum:g,falseFn:y,formatNum:_,trim:E,splitWords:P,setOptions:S,getParamString:I,template:k,isArray:T,indexOf:D,emptyImageUrl:U,requestFn:Z,cancelFn:ne,requestAnimFrame:se,cancelAnimFrame:ee};function de(){}de.extend=function(d){var w=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},A=w.__super__=this.prototype,j=i(A);j.constructor=w,w.prototype=j;for(var V in this)Object.prototype.hasOwnProperty.call(this,V)&&V!=="prototype"&&V!=="__super__"&&(w[V]=this[V]);return d.statics&&s(w,d.statics),d.includes&&(re(d.includes),s.apply(null,[j].concat(d.includes))),s(j,d),delete j.statics,delete j.includes,j.options&&(j.options=A.options?i(A.options):{},s(j.options,d.options)),j._initHooks=[],j.callInitHooks=function(){if(!this._initHooksCalled){A.callInitHooks&&A.callInitHooks.call(this),this._initHooksCalled=!0;for(var K=0,ie=j._initHooks.length;K<ie;K++)j._initHooks[K].call(this)}},w},de.include=function(d){var w=this.prototype.options;return s(this.prototype,d),d.options&&(this.prototype.options=w,this.mergeOptions(d.options)),this},de.mergeOptions=function(d){return s(this.prototype.options,d),this},de.addInitHook=function(d){var w=Array.prototype.slice.call(arguments,1),A=typeof d=="function"?d:function(){this[d].apply(this,w)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(A),this};function re(d){if(!(typeof L>"u"||!L||!L.Mixin)){d=T(d)?d:[d];for(var w=0;w<d.length;w++)d[w]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var fe={on:function(d,w,A){if(typeof d=="object")for(var j in d)this._on(j,d[j],w);else{d=P(d);for(var V=0,K=d.length;V<K;V++)this._on(d[V],w,A)}return this},off:function(d,w,A){if(!arguments.length)delete this._events;else if(typeof d=="object")for(var j in d)this._off(j,d[j],w);else{d=P(d);for(var V=arguments.length===1,K=0,ie=d.length;K<ie;K++)V?this._off(d[K]):this._off(d[K],w,A)}return this},_on:function(d,w,A,j){if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}if(this._listens(d,w,A)===!1){A===this&&(A=void 0);var V={fn:w,ctx:A};j&&(V.once=!0),this._events=this._events||{},this._events[d]=this._events[d]||[],this._events[d].push(V)}},_off:function(d,w,A){var j,V,K;if(this._events&&(j=this._events[d],!!j)){if(arguments.length===1){if(this._firingCount)for(V=0,K=j.length;V<K;V++)j[V].fn=y;delete this._events[d];return}if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}var ie=this._listens(d,w,A);if(ie!==!1){var ge=j[ie];this._firingCount&&(ge.fn=y,this._events[d]=j=j.slice()),j.splice(ie,1)}}},fire:function(d,w,A){if(!this.listens(d,A))return this;var j=s({},w,{type:d,target:this,sourceTarget:w&&w.sourceTarget||this});if(this._events){var V=this._events[d];if(V){this._firingCount=this._firingCount+1||1;for(var K=0,ie=V.length;K<ie;K++){var ge=V[K],we=ge.fn;ge.once&&this.off(d,we,ge.ctx),we.call(ge.ctx||this,j)}this._firingCount--}}return A&&this._propagateEvent(j),this},listens:function(d,w,A,j){typeof d!="string"&&console.warn('"string" type argument expected');var V=w;typeof w!="function"&&(j=!!w,V=void 0,A=void 0);var K=this._events&&this._events[d];if(K&&K.length&&this._listens(d,V,A)!==!1)return!0;if(j){for(var ie in this._eventParents)if(this._eventParents[ie].listens(d,w,A,j))return!0}return!1},_listens:function(d,w,A){if(!this._events)return!1;var j=this._events[d]||[];if(!w)return!!j.length;A===this&&(A=void 0);for(var V=0,K=j.length;V<K;V++)if(j[V].fn===w&&j[V].ctx===A)return V;return!1},once:function(d,w,A){if(typeof d=="object")for(var j in d)this._on(j,d[j],w,!0);else{d=P(d);for(var V=0,K=d.length;V<K;V++)this._on(d[V],w,A,!0)}return this},addEventParent:function(d){return this._eventParents=this._eventParents||{},this._eventParents[c(d)]=d,this},removeEventParent:function(d){return this._eventParents&&delete this._eventParents[c(d)],this},_propagateEvent:function(d){for(var w in this._eventParents)this._eventParents[w].fire(d.type,s({layer:d.target,propagatedFrom:d.target},d),!0)}};fe.addEventListener=fe.on,fe.removeEventListener=fe.clearAllEventListeners=fe.off,fe.addOneTimeEventListener=fe.once,fe.fireEvent=fe.fire,fe.hasEventListeners=fe.listens;var oe=de.extend(fe);function Q(d,w,A){this.x=A?Math.round(d):d,this.y=A?Math.round(w):w}var ue=Math.trunc||function(d){return d>0?Math.floor(d):Math.ceil(d)};Q.prototype={clone:function(){return new Q(this.x,this.y)},add:function(d){return this.clone()._add(he(d))},_add:function(d){return this.x+=d.x,this.y+=d.y,this},subtract:function(d){return this.clone()._subtract(he(d))},_subtract:function(d){return this.x-=d.x,this.y-=d.y,this},divideBy:function(d){return this.clone()._divideBy(d)},_divideBy:function(d){return this.x/=d,this.y/=d,this},multiplyBy:function(d){return this.clone()._multiplyBy(d)},_multiplyBy:function(d){return this.x*=d,this.y*=d,this},scaleBy:function(d){return new Q(this.x*d.x,this.y*d.y)},unscaleBy:function(d){return new Q(this.x/d.x,this.y/d.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ue(this.x),this.y=ue(this.y),this},distanceTo:function(d){d=he(d);var w=d.x-this.x,A=d.y-this.y;return Math.sqrt(w*w+A*A)},equals:function(d){return d=he(d),d.x===this.x&&d.y===this.y},contains:function(d){return d=he(d),Math.abs(d.x)<=Math.abs(this.x)&&Math.abs(d.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function he(d,w,A){return d instanceof Q?d:T(d)?new Q(d[0],d[1]):d==null?d:typeof d=="object"&&"x"in d&&"y"in d?new Q(d.x,d.y):new Q(d,w,A)}function Ee(d,w){if(d)for(var A=w?[d,w]:d,j=0,V=A.length;j<V;j++)this.extend(A[j])}Ee.prototype={extend:function(d){var w,A;if(!d)return this;if(d instanceof Q||typeof d[0]=="number"||"x"in d)w=A=he(d);else if(d=_e(d),w=d.min,A=d.max,!w||!A)return this;return!this.min&&!this.max?(this.min=w.clone(),this.max=A.clone()):(this.min.x=Math.min(w.x,this.min.x),this.max.x=Math.max(A.x,this.max.x),this.min.y=Math.min(w.y,this.min.y),this.max.y=Math.max(A.y,this.max.y)),this},getCenter:function(d){return he((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,d)},getBottomLeft:function(){return he(this.min.x,this.max.y)},getTopRight:function(){return he(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(d){var w,A;return typeof d[0]=="number"||d instanceof Q?d=he(d):d=_e(d),d instanceof Ee?(w=d.min,A=d.max):w=A=d,w.x>=this.min.x&&A.x<=this.max.x&&w.y>=this.min.y&&A.y<=this.max.y},intersects:function(d){d=_e(d);var w=this.min,A=this.max,j=d.min,V=d.max,K=V.x>=w.x&&j.x<=A.x,ie=V.y>=w.y&&j.y<=A.y;return K&&ie},overlaps:function(d){d=_e(d);var w=this.min,A=this.max,j=d.min,V=d.max,K=V.x>w.x&&j.x<A.x,ie=V.y>w.y&&j.y<A.y;return K&&ie},isValid:function(){return!!(this.min&&this.max)},pad:function(d){var w=this.min,A=this.max,j=Math.abs(w.x-A.x)*d,V=Math.abs(w.y-A.y)*d;return _e(he(w.x-j,w.y-V),he(A.x+j,A.y+V))},equals:function(d){return d?(d=_e(d),this.min.equals(d.getTopLeft())&&this.max.equals(d.getBottomRight())):!1}};function _e(d,w){return!d||d instanceof Ee?d:new Ee(d,w)}function Oe(d,w){if(d)for(var A=w?[d,w]:d,j=0,V=A.length;j<V;j++)this.extend(A[j])}Oe.prototype={extend:function(d){var w=this._southWest,A=this._northEast,j,V;if(d instanceof ze)j=d,V=d;else if(d instanceof Oe){if(j=d._southWest,V=d._northEast,!j||!V)return this}else return d?this.extend(be(d)||De(d)):this;return!w&&!A?(this._southWest=new ze(j.lat,j.lng),this._northEast=new ze(V.lat,V.lng)):(w.lat=Math.min(j.lat,w.lat),w.lng=Math.min(j.lng,w.lng),A.lat=Math.max(V.lat,A.lat),A.lng=Math.max(V.lng,A.lng)),this},pad:function(d){var w=this._southWest,A=this._northEast,j=Math.abs(w.lat-A.lat)*d,V=Math.abs(w.lng-A.lng)*d;return new Oe(new ze(w.lat-j,w.lng-V),new ze(A.lat+j,A.lng+V))},getCenter:function(){return new ze((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ze(this.getNorth(),this.getWest())},getSouthEast:function(){return new ze(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(d){typeof d[0]=="number"||d instanceof ze||"lat"in d?d=be(d):d=De(d);var w=this._southWest,A=this._northEast,j,V;return d instanceof Oe?(j=d.getSouthWest(),V=d.getNorthEast()):j=V=d,j.lat>=w.lat&&V.lat<=A.lat&&j.lng>=w.lng&&V.lng<=A.lng},intersects:function(d){d=De(d);var w=this._southWest,A=this._northEast,j=d.getSouthWest(),V=d.getNorthEast(),K=V.lat>=w.lat&&j.lat<=A.lat,ie=V.lng>=w.lng&&j.lng<=A.lng;return K&&ie},overlaps:function(d){d=De(d);var w=this._southWest,A=this._northEast,j=d.getSouthWest(),V=d.getNorthEast(),K=V.lat>w.lat&&j.lat<A.lat,ie=V.lng>w.lng&&j.lng<A.lng;return K&&ie},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(d,w){return d?(d=De(d),this._southWest.equals(d.getSouthWest(),w)&&this._northEast.equals(d.getNorthEast(),w)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function De(d,w){return d instanceof Oe?d:new Oe(d,w)}function ze(d,w,A){if(isNaN(d)||isNaN(w))throw new Error("Invalid LatLng object: ("+d+", "+w+")");this.lat=+d,this.lng=+w,A!==void 0&&(this.alt=+A)}ze.prototype={equals:function(d,w){if(!d)return!1;d=be(d);var A=Math.max(Math.abs(this.lat-d.lat),Math.abs(this.lng-d.lng));return A<=(w===void 0?1e-9:w)},toString:function(d){return"LatLng("+_(this.lat,d)+", "+_(this.lng,d)+")"},distanceTo:function(d){return Ze.distance(this,be(d))},wrap:function(){return Ze.wrapLatLng(this)},toBounds:function(d){var w=180*d/40075017,A=w/Math.cos(Math.PI/180*this.lat);return De([this.lat-w,this.lng-A],[this.lat+w,this.lng+A])},clone:function(){return new ze(this.lat,this.lng,this.alt)}};function be(d,w,A){return d instanceof ze?d:T(d)&&typeof d[0]!="object"?d.length===3?new ze(d[0],d[1],d[2]):d.length===2?new ze(d[0],d[1]):null:d==null?d:typeof d=="object"&&"lat"in d?new ze(d.lat,"lng"in d?d.lng:d.lon,d.alt):w===void 0?null:new ze(d,w,A)}var Te={latLngToPoint:function(d,w){var A=this.projection.project(d),j=this.scale(w);return this.transformation._transform(A,j)},pointToLatLng:function(d,w){var A=this.scale(w),j=this.transformation.untransform(d,A);return this.projection.unproject(j)},project:function(d){return this.projection.project(d)},unproject:function(d){return this.projection.unproject(d)},scale:function(d){return 256*Math.pow(2,d)},zoom:function(d){return Math.log(d/256)/Math.LN2},getProjectedBounds:function(d){if(this.infinite)return null;var w=this.projection.bounds,A=this.scale(d),j=this.transformation.transform(w.min,A),V=this.transformation.transform(w.max,A);return new Ee(j,V)},infinite:!1,wrapLatLng:function(d){var w=this.wrapLng?g(d.lng,this.wrapLng,!0):d.lng,A=this.wrapLat?g(d.lat,this.wrapLat,!0):d.lat,j=d.alt;return new ze(A,w,j)},wrapLatLngBounds:function(d){var w=d.getCenter(),A=this.wrapLatLng(w),j=w.lat-A.lat,V=w.lng-A.lng;if(j===0&&V===0)return d;var K=d.getSouthWest(),ie=d.getNorthEast(),ge=new ze(K.lat-j,K.lng-V),we=new ze(ie.lat-j,ie.lng-V);return new Oe(ge,we)}},Ze=s({},Te,{wrapLng:[-180,180],R:6371e3,distance:function(d,w){var A=Math.PI/180,j=d.lat*A,V=w.lat*A,K=Math.sin((w.lat-d.lat)*A/2),ie=Math.sin((w.lng-d.lng)*A/2),ge=K*K+Math.cos(j)*Math.cos(V)*ie*ie,we=2*Math.atan2(Math.sqrt(ge),Math.sqrt(1-ge));return this.R*we}}),Nt=6378137,ut={R:Nt,MAX_LATITUDE:85.0511287798,project:function(d){var w=Math.PI/180,A=this.MAX_LATITUDE,j=Math.max(Math.min(A,d.lat),-A),V=Math.sin(j*w);return new Q(this.R*d.lng*w,this.R*Math.log((1+V)/(1-V))/2)},unproject:function(d){var w=180/Math.PI;return new ze((2*Math.atan(Math.exp(d.y/this.R))-Math.PI/2)*w,d.x*w/this.R)},bounds:function(){var d=Nt*Math.PI;return new Ee([-d,-d],[d,d])}()};function st(d,w,A,j){if(T(d)){this._a=d[0],this._b=d[1],this._c=d[2],this._d=d[3];return}this._a=d,this._b=w,this._c=A,this._d=j}st.prototype={transform:function(d,w){return this._transform(d.clone(),w)},_transform:function(d,w){return w=w||1,d.x=w*(this._a*d.x+this._b),d.y=w*(this._c*d.y+this._d),d},untransform:function(d,w){return w=w||1,new Q((d.x/w-this._b)/this._a,(d.y/w-this._d)/this._c)}};function gt(d,w,A,j){return new st(d,w,A,j)}var at=s({},Ze,{code:"EPSG:3857",projection:ut,transformation:function(){var d=.5/(Math.PI*ut.R);return gt(d,.5,-d,.5)}()}),$n=s({},at,{code:"EPSG:900913"});function gr(d){return document.createElementNS("http://www.w3.org/2000/svg",d)}function xr(d,w){var A="",j,V,K,ie,ge,we;for(j=0,K=d.length;j<K;j++){for(ge=d[j],V=0,ie=ge.length;V<ie;V++)we=ge[V],A+=(V?"L":"M")+we.x+" "+we.y;A+=w?Qe.svg?"z":"x":""}return A||"M0 0"}var hn=document.documentElement.style,Ht="ActiveXObject"in window,Et=Ht&&!document.addEventListener,pc="msLaunchUri"in navigator&&!("documentMode"in document),$e=qn("webkit"),dl=qn("android"),Jh=qn("android 2")||qn("android 3"),Gi=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ef=dl&&qn("Google")&&Gi<537&&!("AudioNode"in window),ys=!!window.opera,We=!pc&&qn("chrome"),xt=qn("gecko")&&!$e&&!ys&&!Ht,jt=!We&&qn("safari"),$i=qn("phantom"),Ai="OTransition"in hn,gc=navigator.platform.indexOf("Win")===0,fn=Ht&&"transition"in hn,Me="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Jh,In="MozPerspective"in hn,ln=!window.L_DISABLE_3D&&(fn||Me||In)&&!Ai&&!$i,cn=typeof orientation<"u"||qn("mobile"),xc=cn&&$e,tx=cn&&Me,nx=!window.PointerEvent&&window.MSPointerEvent,en=!!(window.PointerEvent||nx),hl="ontouchstart"in window||!!window.TouchEvent,Tb=!window.L_NO_TOUCH&&(hl||en),Pb=cn&&ys,qi=cn&&xt,rx=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,es=function(){var d=!1;try{var w=Object.defineProperty({},"passive",{get:function(){d=!0}});window.addEventListener("testPassiveEventSupport",y,w),window.removeEventListener("testPassiveEventSupport",y,w)}catch{}return d}(),Hu=function(){return!!document.createElement("canvas").getContext}(),Vu=!!(document.createElementNS&&gr("svg").createSVGRect),Lo=!!Vu&&function(){var d=document.createElement("div");return d.innerHTML="<svg/>",(d.firstChild&&d.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),cA=!Vu&&function(){try{var d=document.createElement("div");d.innerHTML='<v:shape adj="1"/>';var w=d.firstChild;return w.style.behavior="url(#default#VML)",w&&typeof w.adj=="object"}catch{return!1}}(),vc=navigator.platform.indexOf("Mac")===0,sx=navigator.platform.indexOf("Linux")===0;function qn(d){return navigator.userAgent.toLowerCase().indexOf(d)>=0}var Qe={ie:Ht,ielt9:Et,edge:pc,webkit:$e,android:dl,android23:Jh,androidStock:ef,opera:ys,chrome:We,gecko:xt,safari:jt,phantom:$i,opera12:Ai,win:gc,ie3d:fn,webkit3d:Me,gecko3d:In,any3d:ln,mobile:cn,mobileWebkit:xc,mobileWebkit3d:tx,msPointer:nx,pointer:en,touch:Tb,touchNative:hl,mobileOpera:Pb,mobileGecko:qi,retina:rx,passiveEvents:es,canvas:Hu,svg:Vu,vml:cA,inlineSvg:Lo,mac:vc,linux:sx},ti=Qe.msPointer?"MSPointerDown":"pointerdown",He=Qe.msPointer?"MSPointerMove":"pointermove",yc=Qe.msPointer?"MSPointerUp":"pointerup",Sp=Qe.msPointer?"MSPointerCancel":"pointercancel",ts={touchstart:ti,touchmove:He,touchend:yc,touchcancel:Sp},wc={touchstart:fl,touchmove:nf,touchend:nf,touchcancel:nf},wa={},tf=!1;function Bo(d,w,A){return w==="touchstart"&&Ln(),wc[w]?(A=wc[w].bind(this,A),d.addEventListener(ts[w],A,!1),A):(console.warn("wrong event specified:",w),y)}function uA(d,w,A){if(!ts[w]){console.warn("wrong event specified:",w);return}d.removeEventListener(ts[w],A,!1)}function dA(d){wa[d.pointerId]=d}function Fo(d){wa[d.pointerId]&&(wa[d.pointerId]=d)}function ns(d){delete wa[d.pointerId]}function Ln(){tf||(document.addEventListener(ti,dA,!0),document.addEventListener(He,Fo,!0),document.addEventListener(yc,ns,!0),document.addEventListener(Sp,ns,!0),tf=!0)}function nf(d,w){if(w.pointerType!==(w.MSPOINTER_TYPE_MOUSE||"mouse")){w.touches=[];for(var A in wa)w.touches.push(wa[A]);w.changedTouches=[w],d(w)}}function fl(d,w){w.MSPOINTER_TYPE_TOUCH&&w.pointerType===w.MSPOINTER_TYPE_TOUCH&&Hr(w),nf(d,w)}function ix(d){var w={},A,j;for(j in d)A=d[j],w[j]=A&&A.bind?A.bind(d):A;return d=w,w.type="dblclick",w.detail=2,w.isTrusted=!1,w._simulated=!0,w}var Ae=200;function hA(d,w){d.addEventListener("dblclick",w);var A=0,j;function V(K){if(K.detail!==1){j=K.detail;return}if(!(K.pointerType==="mouse"||K.sourceCapabilities&&!K.sourceCapabilities.firesTouchEvents)){var ie=Gu(K);if(!(ie.some(function(we){return we instanceof HTMLLabelElement&&we.attributes.for})&&!ie.some(function(we){return we instanceof HTMLInputElement||we instanceof HTMLSelectElement}))){var ge=Date.now();ge-A<=Ae?(j++,j===2&&w(ix(K))):j=1,A=ge}}}return d.addEventListener("click",V),{dblclick:w,simDblclick:V}}function tr(d,w){d.removeEventListener("dblclick",w.dblclick),d.removeEventListener("click",w.simDblclick)}var ml=pe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),rf=pe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),rn=rf==="webkitTransition"||rf==="OTransition"?rf+"End":"transitionend";function tn(d){return typeof d=="string"?document.getElementById(d):d}function Rt(d,w){var A=d.style[w]||d.currentStyle&&d.currentStyle[w];if((!A||A==="auto")&&document.defaultView){var j=document.defaultView.getComputedStyle(d,null);A=j?j[w]:null}return A==="auto"?null:A}function Gt(d,w,A){var j=document.createElement(d);return j.className=w||"",A&&A.appendChild(j),j}function Rn(d){var w=d.parentNode;w&&w.removeChild(d)}function Wu(d){for(;d.firstChild;)d.removeChild(d.firstChild)}function Bn(d){var w=d.parentNode;w&&w.lastChild!==d&&w.appendChild(d)}function ni(d){var w=d.parentNode;w&&w.firstChild!==d&&w.insertBefore(d,w.firstChild)}function ox(d,w){if(d.classList!==void 0)return d.classList.contains(w);var A=ba(d);return A.length>0&&new RegExp("(^|\\s)"+w+"(\\s|$)").test(A)}function tt(d,w){if(d.classList!==void 0)for(var A=P(w),j=0,V=A.length;j<V;j++)d.classList.add(A[j]);else if(!ox(d,w)){var K=ba(d);ax(d,(K?K+" ":"")+w)}}function mn(d,w){d.classList!==void 0?d.classList.remove(w):ax(d,E((" "+ba(d)+" ").replace(" "+w+" "," ")))}function ax(d,w){d.className.baseVal===void 0?d.className=w:d.className.baseVal=w}function ba(d){return d.correspondingElement&&(d=d.correspondingElement),d.className.baseVal===void 0?d.className:d.className.baseVal}function Lt(d,w){"opacity"in d.style?d.style.opacity=w:"filter"in d.style&&rs(d,w)}function rs(d,w){var A=!1,j="DXImageTransform.Microsoft.Alpha";try{A=d.filters.item(j)}catch{if(w===1)return}w=Math.round(w*100),A?(A.Enabled=w!==100,A.Opacity=w):d.style.filter+=" progid:"+j+"(opacity="+w+")"}function pe(d){for(var w=document.documentElement.style,A=0;A<d.length;A++)if(d[A]in w)return d[A];return!1}function J(d,w,A){var j=w||new Q(0,0);d.style[ml]=(Qe.ie3d?"translate("+j.x+"px,"+j.y+"px)":"translate3d("+j.x+"px,"+j.y+"px,0)")+(A?" scale("+A+")":"")}function je(d,w){d._leaflet_pos=w,Qe.any3d?J(d,w):(d.style.left=w.x+"px",d.style.top=w.y+"px")}function Fn(d){return d._leaflet_pos||new Q(0,0)}var ss,sf,of;if("onselectstart"in document)ss=function(){mt(window,"selectstart",Hr)},sf=function(){Le(window,"selectstart",Hr)};else{var is=pe(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ss=function(){if(is){var d=document.documentElement.style;of=d[is],d[is]="none"}},sf=function(){is&&(document.documentElement.style[is]=of,of=void 0)}}function ot(){mt(window,"dragstart",Hr)}function kn(){Le(window,"dragstart",Hr)}var af,lx;function lf(d){for(;d.tabIndex===-1;)d=d.parentNode;d.style&&(bc(),af=d,lx=d.style.outlineStyle,d.style.outlineStyle="none",mt(window,"keydown",bc))}function bc(){af&&(af.style.outlineStyle=lx,af=void 0,lx=void 0,Le(window,"keydown",bc))}function Np(d){do d=d.parentNode;while((!d.offsetWidth||!d.offsetHeight)&&d!==document.body);return d}function cx(d){var w=d.getBoundingClientRect();return{x:w.width/d.offsetWidth||1,y:w.height/d.offsetHeight||1,boundingClientRect:w}}var kr={__proto__:null,TRANSFORM:ml,TRANSITION:rf,TRANSITION_END:rn,get:tn,getStyle:Rt,create:Gt,remove:Rn,empty:Wu,toFront:Bn,toBack:ni,hasClass:ox,addClass:tt,removeClass:mn,setClass:ax,getClass:ba,setOpacity:Lt,testProp:pe,setTransform:J,setPosition:je,getPosition:Fn,get disableTextSelection(){return ss},get enableTextSelection(){return sf},disableImageDrag:ot,enableImageDrag:kn,preventOutline:lf,restoreOutline:bc,getSizedParentNode:Np,getScale:cx};function mt(d,w,A,j){if(w&&typeof w=="object")for(var V in w)Tr(d,V,w[V],A);else{w=P(w);for(var K=0,ie=w.length;K<ie;K++)Tr(d,w[K],A,j)}return this}var zr="_leaflet_events";function Le(d,w,A,j){if(arguments.length===1)Ib(d),delete d[zr];else if(w&&typeof w=="object")for(var V in w)ux(d,V,w[V],A);else if(w=P(w),arguments.length===2)Ib(d,function(ge){return D(w,ge)!==-1});else for(var K=0,ie=w.length;K<ie;K++)ux(d,w[K],A,j);return this}function Ib(d,w){for(var A in d[zr]){var j=A.split(/\d/)[0];(!w||w(j))&&ux(d,j,null,null,A)}}var yt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Tr(d,w,A,j){var V=w+c(A)+(j?"_"+c(j):"");if(d[zr]&&d[zr][V])return this;var K=function(ge){return A.call(j||d,ge||window.event)},ie=K;!Qe.touchNative&&Qe.pointer&&w.indexOf("touch")===0?K=Bo(d,w,K):Qe.touch&&w==="dblclick"?K=hA(d,K):"addEventListener"in d?w==="touchstart"||w==="touchmove"||w==="wheel"||w==="mousewheel"?d.addEventListener(yt[w]||w,K,Qe.passiveEvents?{passive:!1}:!1):w==="mouseenter"||w==="mouseleave"?(K=function(ge){ge=ge||window.event,_c(d,ge)&&ie(ge)},d.addEventListener(yt[w],K,!1)):d.addEventListener(w,ie,!1):d.attachEvent("on"+w,K),d[zr]=d[zr]||{},d[zr][V]=K}function ux(d,w,A,j,V){V=V||w+c(A)+(j?"_"+c(j):"");var K=d[zr]&&d[zr][V];if(!K)return this;!Qe.touchNative&&Qe.pointer&&w.indexOf("touch")===0?uA(d,w,K):Qe.touch&&w==="dblclick"?tr(d,K):"removeEventListener"in d?d.removeEventListener(yt[w]||w,K,!1):d.detachEvent("on"+w,K),d[zr][V]=null}function _a(d){return d.stopPropagation?d.stopPropagation():d.originalEvent?d.originalEvent._stopped=!0:d.cancelBubble=!0,this}function Tp(d){return Tr(d,"wheel",_a),this}function Xi(d){return mt(d,"mousedown touchstart dblclick contextmenu",_a),d._leaflet_disable_click=!0,this}function Hr(d){return d.preventDefault?d.preventDefault():d.returnValue=!1,this}function Yi(d){return Hr(d),_a(d),this}function Gu(d){if(d.composedPath)return d.composedPath();for(var w=[],A=d.target;A;)w.push(A),A=A.parentNode;return w}function $u(d,w){if(!w)return new Q(d.clientX,d.clientY);var A=cx(w),j=A.boundingClientRect;return new Q((d.clientX-j.left)/A.x-w.clientLeft,(d.clientY-j.top)/A.y-w.clientTop)}var Rb=Qe.linux&&Qe.chrome?window.devicePixelRatio:Qe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function qu(d){return Qe.edge?d.wheelDeltaY/2:d.deltaY&&d.deltaMode===0?-d.deltaY/Rb:d.deltaY&&d.deltaMode===1?-d.deltaY*20:d.deltaY&&d.deltaMode===2?-d.deltaY*60:d.deltaX||d.deltaZ?0:d.wheelDelta?(d.wheelDeltaY||d.wheelDelta)/2:d.detail&&Math.abs(d.detail)<32765?-d.detail*20:d.detail?d.detail/-32765*60:0}function _c(d,w){var A=w.relatedTarget;if(!A)return!0;try{for(;A&&A!==d;)A=A.parentNode}catch{return!1}return A!==d}var js={__proto__:null,on:mt,off:Le,stopPropagation:_a,disableScrollPropagation:Tp,disableClickPropagation:Xi,preventDefault:Hr,stop:Yi,getPropagationPath:Gu,getMousePosition:$u,getWheelDelta:qu,isExternalTarget:_c,addListener:mt,removeListener:Le},dx=oe.extend({run:function(d,w,A,j){this.stop(),this._el=d,this._inProgress=!0,this._duration=A||.25,this._easeOutPower=1/Math.max(j||.5,.2),this._startPos=Fn(d),this._offset=w.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=se(this._animate,this),this._step()},_step:function(d){var w=+new Date-this._startTime,A=this._duration*1e3;w<A?this._runFrame(this._easeOut(w/A),d):(this._runFrame(1),this._complete())},_runFrame:function(d,w){var A=this._startPos.add(this._offset.multiplyBy(d));w&&A._round(),je(this._el,A),this.fire("step")},_complete:function(){ee(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(d){return 1-Math.pow(1-d,this._easeOutPower)}}),Vt=oe.extend({options:{crs:at,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(d,w){w=S(this,w),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(d),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),w.maxBounds&&this.setMaxBounds(w.maxBounds),w.zoom!==void 0&&(this._zoom=this._limitZoom(w.zoom)),w.center&&w.zoom!==void 0&&this.setView(be(w.center),w.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=rf&&Qe.any3d&&!Qe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),mt(this._proxy,rn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(d,w,A){if(w=w===void 0?this._zoom:this._limitZoom(w),d=this._limitCenter(be(d),w,this.options.maxBounds),A=A||{},this._stop(),this._loaded&&!A.reset&&A!==!0){A.animate!==void 0&&(A.zoom=s({animate:A.animate},A.zoom),A.pan=s({animate:A.animate,duration:A.duration},A.pan));var j=this._zoom!==w?this._tryAnimatedZoom&&this._tryAnimatedZoom(d,w,A.zoom):this._tryAnimatedPan(d,A.pan);if(j)return clearTimeout(this._sizeTimer),this}return this._resetView(d,w,A.pan&&A.pan.noMoveStart),this},setZoom:function(d,w){return this._loaded?this.setView(this.getCenter(),d,{zoom:w}):(this._zoom=d,this)},zoomIn:function(d,w){return d=d||(Qe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+d,w)},zoomOut:function(d,w){return d=d||(Qe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-d,w)},setZoomAround:function(d,w,A){var j=this.getZoomScale(w),V=this.getSize().divideBy(2),K=d instanceof Q?d:this.latLngToContainerPoint(d),ie=K.subtract(V).multiplyBy(1-1/j),ge=this.containerPointToLatLng(V.add(ie));return this.setView(ge,w,{zoom:A})},_getBoundsCenterZoom:function(d,w){w=w||{},d=d.getBounds?d.getBounds():De(d);var A=he(w.paddingTopLeft||w.padding||[0,0]),j=he(w.paddingBottomRight||w.padding||[0,0]),V=this.getBoundsZoom(d,!1,A.add(j));if(V=typeof w.maxZoom=="number"?Math.min(w.maxZoom,V):V,V===1/0)return{center:d.getCenter(),zoom:V};var K=j.subtract(A).divideBy(2),ie=this.project(d.getSouthWest(),V),ge=this.project(d.getNorthEast(),V),we=this.unproject(ie.add(ge).divideBy(2).add(K),V);return{center:we,zoom:V}},fitBounds:function(d,w){if(d=De(d),!d.isValid())throw new Error("Bounds are not valid.");var A=this._getBoundsCenterZoom(d,w);return this.setView(A.center,A.zoom,w)},fitWorld:function(d){return this.fitBounds([[-90,-180],[90,180]],d)},panTo:function(d,w){return this.setView(d,this._zoom,{pan:w})},panBy:function(d,w){if(d=he(d).round(),w=w||{},!d.x&&!d.y)return this.fire("moveend");if(w.animate!==!0&&!this.getSize().contains(d))return this._resetView(this.unproject(this.project(this.getCenter()).add(d)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new dx,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),w.noMoveStart||this.fire("movestart"),w.animate!==!1){tt(this._mapPane,"leaflet-pan-anim");var A=this._getMapPanePos().subtract(d).round();this._panAnim.run(this._mapPane,A,w.duration||.25,w.easeLinearity)}else this._rawPanBy(d),this.fire("move").fire("moveend");return this},flyTo:function(d,w,A){if(A=A||{},A.animate===!1||!Qe.any3d)return this.setView(d,w,A);this._stop();var j=this.project(this.getCenter()),V=this.project(d),K=this.getSize(),ie=this._zoom;d=be(d),w=w===void 0?ie:w;var ge=Math.max(K.x,K.y),we=ge*this.getZoomScale(ie,w),Se=V.distanceTo(j)||1,Ve=1.42,ft=Ve*Ve;function Ft(Or){var Fb=Or?-1:1,yz=Or?we:ge,wz=we*we-ge*ge+Fb*ft*ft*Se*Se,bz=2*yz*ft*Se,yA=wz/bz,sk=Math.sqrt(yA*yA+1)-yA,_z=sk<1e-9?-18:Math.log(sk);return _z}function oi(Or){return(Math.exp(Or)-Math.exp(-Or))/2}function os(Or){return(Math.exp(Or)+Math.exp(-Or))/2}function Go(Or){return oi(Or)/os(Or)}var Ni=Ft(0);function Mp(Or){return ge*(os(Ni)/os(Ni+Ve*Or))}function pz(Or){return ge*(os(Ni)*Go(Ni+Ve*Or)-oi(Ni))/ft}function gz(Or){return 1-Math.pow(1-Or,1.5)}var xz=Date.now(),nk=(Ft(1)-Ni)/Ve,vz=A.duration?1e3*A.duration:1e3*nk*.8;function rk(){var Or=(Date.now()-xz)/vz,Fb=gz(Or)*nk;Or<=1?(this._flyToFrame=se(rk,this),this._move(this.unproject(j.add(V.subtract(j).multiplyBy(pz(Fb)/Se)),ie),this.getScaleZoom(ge/Mp(Fb),ie),{flyTo:!0})):this._move(d,w)._moveEnd(!0)}return this._moveStart(!0,A.noMoveStart),rk.call(this),this},flyToBounds:function(d,w){var A=this._getBoundsCenterZoom(d,w);return this.flyTo(A.center,A.zoom,w)},setMaxBounds:function(d){return d=De(d),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),d.isValid()?(this.options.maxBounds=d,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(d){var w=this.options.minZoom;return this.options.minZoom=d,this._loaded&&w!==d&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(d):this},setMaxZoom:function(d){var w=this.options.maxZoom;return this.options.maxZoom=d,this._loaded&&w!==d&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(d):this},panInsideBounds:function(d,w){this._enforcingBounds=!0;var A=this.getCenter(),j=this._limitCenter(A,this._zoom,De(d));return A.equals(j)||this.panTo(j,w),this._enforcingBounds=!1,this},panInside:function(d,w){w=w||{};var A=he(w.paddingTopLeft||w.padding||[0,0]),j=he(w.paddingBottomRight||w.padding||[0,0]),V=this.project(this.getCenter()),K=this.project(d),ie=this.getPixelBounds(),ge=_e([ie.min.add(A),ie.max.subtract(j)]),we=ge.getSize();if(!ge.contains(K)){this._enforcingBounds=!0;var Se=K.subtract(ge.getCenter()),Ve=ge.extend(K).getSize().subtract(we);V.x+=Se.x<0?-Ve.x:Ve.x,V.y+=Se.y<0?-Ve.y:Ve.y,this.panTo(this.unproject(V),w),this._enforcingBounds=!1}return this},invalidateSize:function(d){if(!this._loaded)return this;d=s({animate:!1,pan:!0},d===!0?{animate:!0}:d);var w=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var A=this.getSize(),j=w.divideBy(2).round(),V=A.divideBy(2).round(),K=j.subtract(V);return!K.x&&!K.y?this:(d.animate&&d.pan?this.panBy(K):(d.pan&&this._rawPanBy(K),this.fire("move"),d.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:w,newSize:A}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(d){if(d=this._locateOptions=s({timeout:1e4,watch:!1},d),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var w=o(this._handleGeolocationResponse,this),A=o(this._handleGeolocationError,this);return d.watch?this._locationWatchId=navigator.geolocation.watchPosition(w,A,d):navigator.geolocation.getCurrentPosition(w,A,d),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(d){if(this._container._leaflet_id){var w=d.code,A=d.message||(w===1?"permission denied":w===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:w,message:"Geolocation error: "+A+"."})}},_handleGeolocationResponse:function(d){if(this._container._leaflet_id){var w=d.coords.latitude,A=d.coords.longitude,j=new ze(w,A),V=j.toBounds(d.coords.accuracy*2),K=this._locateOptions;if(K.setView){var ie=this.getBoundsZoom(V);this.setView(j,K.maxZoom?Math.min(ie,K.maxZoom):ie)}var ge={latlng:j,bounds:V,timestamp:d.timestamp};for(var we in d.coords)typeof d.coords[we]=="number"&&(ge[we]=d.coords[we]);this.fire("locationfound",ge)}},addHandler:function(d,w){if(!w)return this;var A=this[d]=new w(this);return this._handlers.push(A),this.options[d]&&A.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Rn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ee(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var d;for(d in this._layers)this._layers[d].remove();for(d in this._panes)Rn(this._panes[d]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(d,w){var A="leaflet-pane"+(d?" leaflet-"+d.replace("Pane","")+"-pane":""),j=Gt("div",A,w||this._mapPane);return d&&(this._panes[d]=j),j},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var d=this.getPixelBounds(),w=this.unproject(d.getBottomLeft()),A=this.unproject(d.getTopRight());return new Oe(w,A)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(d,w,A){d=De(d),A=he(A||[0,0]);var j=this.getZoom()||0,V=this.getMinZoom(),K=this.getMaxZoom(),ie=d.getNorthWest(),ge=d.getSouthEast(),we=this.getSize().subtract(A),Se=_e(this.project(ge,j),this.project(ie,j)).getSize(),Ve=Qe.any3d?this.options.zoomSnap:1,ft=we.x/Se.x,Ft=we.y/Se.y,oi=w?Math.max(ft,Ft):Math.min(ft,Ft);return j=this.getScaleZoom(oi,j),Ve&&(j=Math.round(j/(Ve/100))*(Ve/100),j=w?Math.ceil(j/Ve)*Ve:Math.floor(j/Ve)*Ve),Math.max(V,Math.min(K,j))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(d,w){var A=this._getTopLeftPoint(d,w);return new Ee(A,A.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(d){return this.options.crs.getProjectedBounds(d===void 0?this.getZoom():d)},getPane:function(d){return typeof d=="string"?this._panes[d]:d},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(d,w){var A=this.options.crs;return w=w===void 0?this._zoom:w,A.scale(d)/A.scale(w)},getScaleZoom:function(d,w){var A=this.options.crs;w=w===void 0?this._zoom:w;var j=A.zoom(d*A.scale(w));return isNaN(j)?1/0:j},project:function(d,w){return w=w===void 0?this._zoom:w,this.options.crs.latLngToPoint(be(d),w)},unproject:function(d,w){return w=w===void 0?this._zoom:w,this.options.crs.pointToLatLng(he(d),w)},layerPointToLatLng:function(d){var w=he(d).add(this.getPixelOrigin());return this.unproject(w)},latLngToLayerPoint:function(d){var w=this.project(be(d))._round();return w._subtract(this.getPixelOrigin())},wrapLatLng:function(d){return this.options.crs.wrapLatLng(be(d))},wrapLatLngBounds:function(d){return this.options.crs.wrapLatLngBounds(De(d))},distance:function(d,w){return this.options.crs.distance(be(d),be(w))},containerPointToLayerPoint:function(d){return he(d).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(d){return he(d).add(this._getMapPanePos())},containerPointToLatLng:function(d){var w=this.containerPointToLayerPoint(he(d));return this.layerPointToLatLng(w)},latLngToContainerPoint:function(d){return this.layerPointToContainerPoint(this.latLngToLayerPoint(be(d)))},mouseEventToContainerPoint:function(d){return $u(d,this._container)},mouseEventToLayerPoint:function(d){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(d))},mouseEventToLatLng:function(d){return this.layerPointToLatLng(this.mouseEventToLayerPoint(d))},_initContainer:function(d){var w=this._container=tn(d);if(w){if(w._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");mt(w,"scroll",this._onScroll,this),this._containerId=c(w)},_initLayout:function(){var d=this._container;this._fadeAnimated=this.options.fadeAnimation&&Qe.any3d,tt(d,"leaflet-container"+(Qe.touch?" leaflet-touch":"")+(Qe.retina?" leaflet-retina":"")+(Qe.ielt9?" leaflet-oldie":"")+(Qe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var w=Rt(d,"position");w!=="absolute"&&w!=="relative"&&w!=="fixed"&&w!=="sticky"&&(d.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var d=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),je(this._mapPane,new Q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(tt(d.markerPane,"leaflet-zoom-hide"),tt(d.shadowPane,"leaflet-zoom-hide"))},_resetView:function(d,w,A){je(this._mapPane,new Q(0,0));var j=!this._loaded;this._loaded=!0,w=this._limitZoom(w),this.fire("viewprereset");var V=this._zoom!==w;this._moveStart(V,A)._move(d,w)._moveEnd(V),this.fire("viewreset"),j&&this.fire("load")},_moveStart:function(d,w){return d&&this.fire("zoomstart"),w||this.fire("movestart"),this},_move:function(d,w,A,j){w===void 0&&(w=this._zoom);var V=this._zoom!==w;return this._zoom=w,this._lastCenter=d,this._pixelOrigin=this._getNewPixelOrigin(d),j?A&&A.pinch&&this.fire("zoom",A):((V||A&&A.pinch)&&this.fire("zoom",A),this.fire("move",A)),this},_moveEnd:function(d){return d&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ee(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(d){je(this._mapPane,this._getMapPanePos().subtract(d))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(d){this._targets={},this._targets[c(this._container)]=this;var w=d?Le:mt;w(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&w(window,"resize",this._onResize,this),Qe.any3d&&this.options.transform3DLimit&&(d?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ee(this._resizeRequest),this._resizeRequest=se(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var d=this._getMapPanePos();Math.max(Math.abs(d.x),Math.abs(d.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(d,w){for(var A=[],j,V=w==="mouseout"||w==="mouseover",K=d.target||d.srcElement,ie=!1;K;){if(j=this._targets[c(K)],j&&(w==="click"||w==="preclick")&&this._draggableMoved(j)){ie=!0;break}if(j&&j.listens(w,!0)&&(V&&!_c(K,d)||(A.push(j),V))||K===this._container)break;K=K.parentNode}return!A.length&&!ie&&!V&&this.listens(w,!0)&&(A=[this]),A},_isClickDisabled:function(d){for(;d&&d!==this._container;){if(d._leaflet_disable_click)return!0;d=d.parentNode}},_handleDOMEvent:function(d){var w=d.target||d.srcElement;if(!(!this._loaded||w._leaflet_disable_events||d.type==="click"&&this._isClickDisabled(w))){var A=d.type;A==="mousedown"&&lf(w),this._fireDOMEvent(d,A)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(d,w,A){if(d.type==="click"){var j=s({},d);j.type="preclick",this._fireDOMEvent(j,j.type,A)}var V=this._findEventTargets(d,w);if(A){for(var K=[],ie=0;ie<A.length;ie++)A[ie].listens(w,!0)&&K.push(A[ie]);V=K.concat(V)}if(V.length){w==="contextmenu"&&Hr(d);var ge=V[0],we={originalEvent:d};if(d.type!=="keypress"&&d.type!=="keydown"&&d.type!=="keyup"){var Se=ge.getLatLng&&(!ge._radius||ge._radius<=10);we.containerPoint=Se?this.latLngToContainerPoint(ge.getLatLng()):this.mouseEventToContainerPoint(d),we.layerPoint=this.containerPointToLayerPoint(we.containerPoint),we.latlng=Se?ge.getLatLng():this.layerPointToLatLng(we.layerPoint)}for(ie=0;ie<V.length;ie++)if(V[ie].fire(w,we,!0),we.originalEvent._stopped||V[ie].options.bubblingMouseEvents===!1&&D(this._mouseEvents,w)!==-1)return}},_draggableMoved:function(d){return d=d.dragging&&d.dragging.enabled()?d:this,d.dragging&&d.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var d=0,w=this._handlers.length;d<w;d++)this._handlers[d].disable()},whenReady:function(d,w){return this._loaded?d.call(w||this,{target:this}):this.on("load",d,w),this},_getMapPanePos:function(){return Fn(this._mapPane)||new Q(0,0)},_moved:function(){var d=this._getMapPanePos();return d&&!d.equals([0,0])},_getTopLeftPoint:function(d,w){var A=d&&w!==void 0?this._getNewPixelOrigin(d,w):this.getPixelOrigin();return A.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(d,w){var A=this.getSize()._divideBy(2);return this.project(d,w)._subtract(A)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(d,w,A){var j=this._getNewPixelOrigin(A,w);return this.project(d,w)._subtract(j)},_latLngBoundsToNewLayerBounds:function(d,w,A){var j=this._getNewPixelOrigin(A,w);return _e([this.project(d.getSouthWest(),w)._subtract(j),this.project(d.getNorthWest(),w)._subtract(j),this.project(d.getSouthEast(),w)._subtract(j),this.project(d.getNorthEast(),w)._subtract(j)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(d){return this.latLngToLayerPoint(d).subtract(this._getCenterLayerPoint())},_limitCenter:function(d,w,A){if(!A)return d;var j=this.project(d,w),V=this.getSize().divideBy(2),K=new Ee(j.subtract(V),j.add(V)),ie=this._getBoundsOffset(K,A,w);return Math.abs(ie.x)<=1&&Math.abs(ie.y)<=1?d:this.unproject(j.add(ie),w)},_limitOffset:function(d,w){if(!w)return d;var A=this.getPixelBounds(),j=new Ee(A.min.add(d),A.max.add(d));return d.add(this._getBoundsOffset(j,w))},_getBoundsOffset:function(d,w,A){var j=_e(this.project(w.getNorthEast(),A),this.project(w.getSouthWest(),A)),V=j.min.subtract(d.min),K=j.max.subtract(d.max),ie=this._rebound(V.x,-K.x),ge=this._rebound(V.y,-K.y);return new Q(ie,ge)},_rebound:function(d,w){return d+w>0?Math.round(d-w)/2:Math.max(0,Math.ceil(d))-Math.max(0,Math.floor(w))},_limitZoom:function(d){var w=this.getMinZoom(),A=this.getMaxZoom(),j=Qe.any3d?this.options.zoomSnap:1;return j&&(d=Math.round(d/j)*j),Math.max(w,Math.min(A,d))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(d,w){var A=this._getCenterOffset(d)._trunc();return(w&&w.animate)!==!0&&!this.getSize().contains(A)?!1:(this.panBy(A,w),!0)},_createAnimProxy:function(){var d=this._proxy=Gt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(d),this.on("zoomanim",function(w){var A=ml,j=this._proxy.style[A];J(this._proxy,this.project(w.center,w.zoom),this.getZoomScale(w.zoom,1)),j===this._proxy.style[A]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Rn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var d=this.getCenter(),w=this.getZoom();J(this._proxy,this.project(d,w),this.getZoomScale(w,1))},_catchTransitionEnd:function(d){this._animatingZoom&&d.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(d,w,A){if(this._animatingZoom)return!0;if(A=A||{},!this._zoomAnimated||A.animate===!1||this._nothingToAnimate()||Math.abs(w-this._zoom)>this.options.zoomAnimationThreshold)return!1;var j=this.getZoomScale(w),V=this._getCenterOffset(d)._divideBy(1-1/j);return A.animate!==!0&&!this.getSize().contains(V)?!1:(se(function(){this._moveStart(!0,A.noMoveStart||!1)._animateZoom(d,w,!0)},this),!0)},_animateZoom:function(d,w,A,j){this._mapPane&&(A&&(this._animatingZoom=!0,this._animateToCenter=d,this._animateToZoom=w,tt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:d,zoom:w,noUpdate:j}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function kb(d,w){return new Vt(d,w)}var Ki=de.extend({options:{position:"topright"},initialize:function(d){S(this,d)},getPosition:function(){return this.options.position},setPosition:function(d){var w=this._map;return w&&w.removeControl(this),this.options.position=d,w&&w.addControl(this),this},getContainer:function(){return this._container},addTo:function(d){this.remove(),this._map=d;var w=this._container=this.onAdd(d),A=this.getPosition(),j=d._controlCorners[A];return tt(w,"leaflet-control"),A.indexOf("bottom")!==-1?j.insertBefore(w,j.firstChild):j.appendChild(w),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Rn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(d){this._map&&d&&d.screenX>0&&d.screenY>0&&this._map.getContainer().focus()}}),cf=function(d){return new Ki(d)};Vt.include({addControl:function(d){return d.addTo(this),this},removeControl:function(d){return d.remove(),this},_initControlPos:function(){var d=this._controlCorners={},w="leaflet-",A=this._controlContainer=Gt("div",w+"control-container",this._container);function j(V,K){var ie=w+V+" "+w+K;d[V+K]=Gt("div",ie,A)}j("top","left"),j("top","right"),j("bottom","left"),j("bottom","right")},_clearControlPos:function(){for(var d in this._controlCorners)Rn(this._controlCorners[d]);Rn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Mb=Ki.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(d,w,A,j){return A<j?-1:j<A?1:0}},initialize:function(d,w,A){S(this,A),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var j in d)this._addLayer(d[j],j);for(j in w)this._addLayer(w[j],j,!0)},onAdd:function(d){this._initLayout(),this._update(),this._map=d,d.on("zoomend",this._checkDisabledLayers,this);for(var w=0;w<this._layers.length;w++)this._layers[w].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(d){return Ki.prototype.addTo.call(this,d),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(d,w){return this._addLayer(d,w),this._map?this._update():this},addOverlay:function(d,w){return this._addLayer(d,w,!0),this._map?this._update():this},removeLayer:function(d){d.off("add remove",this._onLayerChange,this);var w=this._getLayer(c(d));return w&&this._layers.splice(this._layers.indexOf(w),1),this._map?this._update():this},expand:function(){tt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var d=this._map.getSize().y-(this._container.offsetTop+50);return d<this._section.clientHeight?(tt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=d+"px"):mn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var d="leaflet-control-layers",w=this._container=Gt("div",d),A=this.options.collapsed;w.setAttribute("aria-haspopup",!0),Xi(w),Tp(w);var j=this._section=Gt("section",d+"-list");A&&(this._map.on("click",this.collapse,this),mt(w,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var V=this._layersLink=Gt("a",d+"-toggle",w);V.href="#",V.title="Layers",V.setAttribute("role","button"),mt(V,{keydown:function(K){K.keyCode===13&&this._expandSafely()},click:function(K){Hr(K),this._expandSafely()}},this),A||this.expand(),this._baseLayersList=Gt("div",d+"-base",j),this._separator=Gt("div",d+"-separator",j),this._overlaysList=Gt("div",d+"-overlays",j),w.appendChild(j)},_getLayer:function(d){for(var w=0;w<this._layers.length;w++)if(this._layers[w]&&c(this._layers[w].layer)===d)return this._layers[w]},_addLayer:function(d,w,A){this._map&&d.on("add remove",this._onLayerChange,this),this._layers.push({layer:d,name:w,overlay:A}),this.options.sortLayers&&this._layers.sort(o(function(j,V){return this.options.sortFunction(j.layer,V.layer,j.name,V.name)},this)),this.options.autoZIndex&&d.setZIndex&&(this._lastZIndex++,d.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Wu(this._baseLayersList),Wu(this._overlaysList),this._layerControlInputs=[];var d,w,A,j,V=0;for(A=0;A<this._layers.length;A++)j=this._layers[A],this._addItem(j),w=w||j.overlay,d=d||!j.overlay,V+=j.overlay?0:1;return this.options.hideSingleBase&&(d=d&&V>1,this._baseLayersList.style.display=d?"":"none"),this._separator.style.display=w&&d?"":"none",this},_onLayerChange:function(d){this._handlingClick||this._update();var w=this._getLayer(c(d.target)),A=w.overlay?d.type==="add"?"overlayadd":"overlayremove":d.type==="add"?"baselayerchange":null;A&&this._map.fire(A,w)},_createRadioElement:function(d,w){var A='<input type="radio" class="leaflet-control-layers-selector" name="'+d+'"'+(w?' checked="checked"':"")+"/>",j=document.createElement("div");return j.innerHTML=A,j.firstChild},_addItem:function(d){var w=document.createElement("label"),A=this._map.hasLayer(d.layer),j;d.overlay?(j=document.createElement("input"),j.type="checkbox",j.className="leaflet-control-layers-selector",j.defaultChecked=A):j=this._createRadioElement("leaflet-base-layers_"+c(this),A),this._layerControlInputs.push(j),j.layerId=c(d.layer),mt(j,"click",this._onInputClick,this);var V=document.createElement("span");V.innerHTML=" "+d.name;var K=document.createElement("span");w.appendChild(K),K.appendChild(j),K.appendChild(V);var ie=d.overlay?this._overlaysList:this._baseLayersList;return ie.appendChild(w),this._checkDisabledLayers(),w},_onInputClick:function(){if(!this._preventClick){var d=this._layerControlInputs,w,A,j=[],V=[];this._handlingClick=!0;for(var K=d.length-1;K>=0;K--)w=d[K],A=this._getLayer(w.layerId).layer,w.checked?j.push(A):w.checked||V.push(A);for(K=0;K<V.length;K++)this._map.hasLayer(V[K])&&this._map.removeLayer(V[K]);for(K=0;K<j.length;K++)this._map.hasLayer(j[K])||this._map.addLayer(j[K]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var d=this._layerControlInputs,w,A,j=this._map.getZoom(),V=d.length-1;V>=0;V--)w=d[V],A=this._getLayer(w.layerId).layer,w.disabled=A.options.minZoom!==void 0&&j<A.options.minZoom||A.options.maxZoom!==void 0&&j>A.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var d=this._section;this._preventClick=!0,mt(d,"click",Hr),this.expand();var w=this;setTimeout(function(){Le(d,"click",Hr),w._preventClick=!1})}}),pn=function(d,w,A){return new Mb(d,w,A)},Pp=Ki.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(d){var w="leaflet-control-zoom",A=Gt("div",w+" leaflet-bar"),j=this.options;return this._zoomInButton=this._createButton(j.zoomInText,j.zoomInTitle,w+"-in",A,this._zoomIn),this._zoomOutButton=this._createButton(j.zoomOutText,j.zoomOutTitle,w+"-out",A,this._zoomOut),this._updateDisabled(),d.on("zoomend zoomlevelschange",this._updateDisabled,this),A},onRemove:function(d){d.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(d){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(d.shiftKey?3:1))},_zoomOut:function(d){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(d.shiftKey?3:1))},_createButton:function(d,w,A,j,V){var K=Gt("a",A,j);return K.innerHTML=d,K.href="#",K.title=w,K.setAttribute("role","button"),K.setAttribute("aria-label",w),Xi(K),mt(K,"click",Yi),mt(K,"click",V,this),mt(K,"click",this._refocusOnMap,this),K},_updateDisabled:function(){var d=this._map,w="leaflet-disabled";mn(this._zoomInButton,w),mn(this._zoomOutButton,w),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||d._zoom===d.getMinZoom())&&(tt(this._zoomOutButton,w),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||d._zoom===d.getMaxZoom())&&(tt(this._zoomInButton,w),this._zoomInButton.setAttribute("aria-disabled","true"))}});Vt.mergeOptions({zoomControl:!0}),Vt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Pp,this.addControl(this.zoomControl))});var Ip=function(d){return new Pp(d)},Ea=Ki.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(d){var w="leaflet-control-scale",A=Gt("div",w),j=this.options;return this._addScales(j,w+"-line",A),d.on(j.updateWhenIdle?"moveend":"move",this._update,this),d.whenReady(this._update,this),A},onRemove:function(d){d.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(d,w,A){d.metric&&(this._mScale=Gt("div",w,A)),d.imperial&&(this._iScale=Gt("div",w,A))},_update:function(){var d=this._map,w=d.getSize().y/2,A=d.distance(d.containerPointToLatLng([0,w]),d.containerPointToLatLng([this.options.maxWidth,w]));this._updateScales(A)},_updateScales:function(d){this.options.metric&&d&&this._updateMetric(d),this.options.imperial&&d&&this._updateImperial(d)},_updateMetric:function(d){var w=this._getRoundNum(d),A=w<1e3?w+" m":w/1e3+" km";this._updateScale(this._mScale,A,w/d)},_updateImperial:function(d){var w=d*3.2808399,A,j,V;w>5280?(A=w/5280,j=this._getRoundNum(A),this._updateScale(this._iScale,j+" mi",j/A)):(V=this._getRoundNum(w),this._updateScale(this._iScale,V+" ft",V/w))},_updateScale:function(d,w,A){d.style.width=Math.round(this.options.maxWidth*A)+"px",d.innerHTML=w},_getRoundNum:function(d){var w=Math.pow(10,(Math.floor(d)+"").length-1),A=d/w;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:1,w*A}}),fA=function(d){return new Ea(d)},ye='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ct=Ki.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Qe.inlineSvg?ye+" ":"")+"Leaflet</a>"},initialize:function(d){S(this,d),this._attributions={}},onAdd:function(d){d.attributionControl=this,this._container=Gt("div","leaflet-control-attribution"),Xi(this._container);for(var w in d._layers)d._layers[w].getAttribution&&this.addAttribution(d._layers[w].getAttribution());return this._update(),d.on("layeradd",this._addAttribution,this),this._container},onRemove:function(d){d.off("layeradd",this._addAttribution,this)},_addAttribution:function(d){d.layer.getAttribution&&(this.addAttribution(d.layer.getAttribution()),d.layer.once("remove",function(){this.removeAttribution(d.layer.getAttribution())},this))},setPrefix:function(d){return this.options.prefix=d,this._update(),this},addAttribution:function(d){return d?(this._attributions[d]||(this._attributions[d]=0),this._attributions[d]++,this._update(),this):this},removeAttribution:function(d){return d?(this._attributions[d]&&(this._attributions[d]--,this._update()),this):this},_update:function(){if(this._map){var d=[];for(var w in this._attributions)this._attributions[w]&&d.push(w);var A=[];this.options.prefix&&A.push(this.options.prefix),d.length&&A.push(d.join(", ")),this._container.innerHTML=A.join(' <span aria-hidden="true">|</span> ')}}});Vt.mergeOptions({attributionControl:!0}),Vt.addInitHook(function(){this.options.attributionControl&&new Ct().addTo(this)});var Vr=function(d){return new Ct(d)};Ki.Layers=Mb,Ki.Zoom=Pp,Ki.Scale=Ea,Ki.Attribution=Ct,cf.layers=pn,cf.zoom=Ip,cf.scale=fA,cf.attribution=Vr;var ri=de.extend({initialize:function(d){this._map=d},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ri.addTo=function(d,w){return d.addHandler(w,this),this};var Ob={Events:fe},Db=Qe.touch?"touchstart mousedown":"mousedown",pl=oe.extend({options:{clickTolerance:3},initialize:function(d,w,A,j){S(this,j),this._element=d,this._dragStartTarget=w||d,this._preventOutline=A},enable:function(){this._enabled||(mt(this._dragStartTarget,Db,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(pl._dragging===this&&this.finishDrag(!0),Le(this._dragStartTarget,Db,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(d){if(this._enabled&&(this._moved=!1,!ox(this._element,"leaflet-zoom-anim"))){if(d.touches&&d.touches.length!==1){pl._dragging===this&&this.finishDrag();return}if(!(pl._dragging||d.shiftKey||d.which!==1&&d.button!==1&&!d.touches)&&(pl._dragging=this,this._preventOutline&&lf(this._element),ot(),ss(),!this._moving)){this.fire("down");var w=d.touches?d.touches[0]:d,A=Np(this._element);this._startPoint=new Q(w.clientX,w.clientY),this._startPos=Fn(this._element),this._parentScale=cx(A);var j=d.type==="mousedown";mt(document,j?"mousemove":"touchmove",this._onMove,this),mt(document,j?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(d){if(this._enabled){if(d.touches&&d.touches.length>1){this._moved=!0;return}var w=d.touches&&d.touches.length===1?d.touches[0]:d,A=new Q(w.clientX,w.clientY)._subtract(this._startPoint);!A.x&&!A.y||Math.abs(A.x)+Math.abs(A.y)<this.options.clickTolerance||(A.x/=this._parentScale.x,A.y/=this._parentScale.y,Hr(d),this._moved||(this.fire("dragstart"),this._moved=!0,tt(document.body,"leaflet-dragging"),this._lastTarget=d.target||d.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),tt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(A),this._moving=!0,this._lastEvent=d,this._updatePosition())}},_updatePosition:function(){var d={originalEvent:this._lastEvent};this.fire("predrag",d),je(this._element,this._newPos),this.fire("drag",d)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(d){mn(document.body,"leaflet-dragging"),this._lastTarget&&(mn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Le(document,"mousemove touchmove",this._onMove,this),Le(document,"mouseup touchend touchcancel",this._onUp,this),kn(),sf();var w=this._moved&&this._moving;this._moving=!1,pl._dragging=!1,w&&this.fire("dragend",{noInertia:d,distance:this._newPos.distanceTo(this._startPos)})}});function jb(d,w,A){var j,V=[1,4,2,8],K,ie,ge,we,Se,Ve,ft,Ft;for(K=0,Ve=d.length;K<Ve;K++)d[K]._code=Cc(d[K],w);for(ge=0;ge<4;ge++){for(ft=V[ge],j=[],K=0,Ve=d.length,ie=Ve-1;K<Ve;ie=K++)we=d[K],Se=d[ie],we._code&ft?Se._code&ft||(Ft=Ca(Se,we,ft,w,A),Ft._code=Cc(Ft,w),j.push(Ft)):(Se._code&ft&&(Ft=Ca(Se,we,ft,w,A),Ft._code=Cc(Ft,w),j.push(Ft)),j.push(we));d=j}return d}function Rp(d,w){var A,j,V,K,ie,ge,we,Se,Ve;if(!d||d.length===0)throw new Error("latlngs not passed");si(d)||(console.warn("latlngs are not flat! Only the first ring will be used"),d=d[0]);var ft=be([0,0]),Ft=De(d),oi=Ft.getNorthWest().distanceTo(Ft.getSouthWest())*Ft.getNorthEast().distanceTo(Ft.getNorthWest());oi<1700&&(ft=ar(d));var os=d.length,Go=[];for(A=0;A<os;A++){var Ni=be(d[A]);Go.push(w.project(be([Ni.lat-ft.lat,Ni.lng-ft.lng])))}for(ge=we=Se=0,A=0,j=os-1;A<os;j=A++)V=Go[A],K=Go[j],ie=V.y*K.x-K.y*V.x,we+=(V.x+K.x)*ie,Se+=(V.y+K.y)*ie,ge+=ie*3;ge===0?Ve=Go[0]:Ve=[we/ge,Se/ge];var Mp=w.unproject(he(Ve));return be([Mp.lat+ft.lat,Mp.lng+ft.lng])}function ar(d){for(var w=0,A=0,j=0,V=0;V<d.length;V++){var K=be(d[V]);w+=K.lat,A+=K.lng,j++}return be([w/j,A/j])}var hx={__proto__:null,clipPolygon:jb,polygonCenter:Rp,centroid:ar};function Xn(d,w){if(!w||!d.length)return d.slice();var A=w*w;return d=mA(d,A),d=xn(d,A),d}function uf(d,w,A){return Math.sqrt(Ac(d,w,A,!0))}function Ec(d,w,A){return Ac(d,w,A)}function xn(d,w){var A=d.length,j=typeof Uint8Array<"u"?Uint8Array:Array,V=new j(A);V[0]=V[A-1]=1,lt(d,V,w,0,A-1);var K,ie=[];for(K=0;K<A;K++)V[K]&&ie.push(d[K]);return ie}function lt(d,w,A,j,V){var K=0,ie,ge,we;for(ge=j+1;ge<=V-1;ge++)we=Ac(d[ge],d[j],d[V],!0),we>K&&(ie=ge,K=we);K>A&&(w[ie]=1,lt(d,w,A,j,ie),lt(d,w,A,ie,V))}function mA(d,w){for(var A=[d[0]],j=1,V=0,K=d.length;j<K;j++)Uo(d[j],d[V])>w&&(A.push(d[j]),V=j);return V<K-1&&A.push(d[K-1]),A}var _n;function gl(d,w,A,j,V){var K=j?_n:Cc(d,A),ie=Cc(w,A),ge,we,Se;for(_n=ie;;){if(!(K|ie))return[d,w];if(K&ie)return!1;ge=K||ie,we=Ca(d,w,ge,A,V),Se=Cc(we,A),ge===K?(d=we,K=Se):(w=we,ie=Se)}}function Ca(d,w,A,j,V){var K=w.x-d.x,ie=w.y-d.y,ge=j.min,we=j.max,Se,Ve;return A&8?(Se=d.x+K*(we.y-d.y)/ie,Ve=we.y):A&4?(Se=d.x+K*(ge.y-d.y)/ie,Ve=ge.y):A&2?(Se=we.x,Ve=d.y+ie*(we.x-d.x)/K):A&1&&(Se=ge.x,Ve=d.y+ie*(ge.x-d.x)/K),new Q(Se,Ve,V)}function Cc(d,w){var A=0;return d.x<w.min.x?A|=1:d.x>w.max.x&&(A|=2),d.y<w.min.y?A|=4:d.y>w.max.y&&(A|=8),A}function Uo(d,w){var A=w.x-d.x,j=w.y-d.y;return A*A+j*j}function Ac(d,w,A,j){var V=w.x,K=w.y,ie=A.x-V,ge=A.y-K,we=ie*ie+ge*ge,Se;return we>0&&(Se=((d.x-V)*ie+(d.y-K)*ge)/we,Se>1?(V=A.x,K=A.y):Se>0&&(V+=ie*Se,K+=ge*Se)),ie=d.x-V,ge=d.y-K,j?ie*ie+ge*ge:new Q(V,K)}function si(d){return!T(d[0])||typeof d[0][0]!="object"&&typeof d[0][0]<"u"}function kp(d){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),si(d)}function fx(d,w){var A,j,V,K,ie,ge,we,Se;if(!d||d.length===0)throw new Error("latlngs not passed");si(d)||(console.warn("latlngs are not flat! Only the first ring will be used"),d=d[0]);var Ve=be([0,0]),ft=De(d),Ft=ft.getNorthWest().distanceTo(ft.getSouthWest())*ft.getNorthEast().distanceTo(ft.getNorthWest());Ft<1700&&(Ve=ar(d));var oi=d.length,os=[];for(A=0;A<oi;A++){var Go=be(d[A]);os.push(w.project(be([Go.lat-Ve.lat,Go.lng-Ve.lng])))}for(A=0,j=0;A<oi-1;A++)j+=os[A].distanceTo(os[A+1])/2;if(j===0)Se=os[0];else for(A=0,K=0;A<oi-1;A++)if(ie=os[A],ge=os[A+1],V=ie.distanceTo(ge),K+=V,K>j){we=(K-j)/V,Se=[ge.x-we*(ge.x-ie.x),ge.y-we*(ge.y-ie.y)];break}var Ni=w.unproject(he(Se));return be([Ni.lat+Ve.lat,Ni.lng+Ve.lng])}var Lb={__proto__:null,simplify:Xn,pointToSegmentDistance:uf,closestPointOnSegment:Ec,clipSegment:gl,_getEdgeIntersection:Ca,_getBitCode:Cc,_sqClosestPointOnSegment:Ac,isFlat:si,_flat:kp,polylineCenter:fx},mx={project:function(d){return new Q(d.lng,d.lat)},unproject:function(d){return new ze(d.y,d.x)},bounds:new Ee([-180,-90],[180,90])},xl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ee([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(d){var w=Math.PI/180,A=this.R,j=d.lat*w,V=this.R_MINOR/A,K=Math.sqrt(1-V*V),ie=K*Math.sin(j),ge=Math.tan(Math.PI/4-j/2)/Math.pow((1-ie)/(1+ie),K/2);return j=-A*Math.log(Math.max(ge,1e-10)),new Q(d.lng*w*A,j)},unproject:function(d){for(var w=180/Math.PI,A=this.R,j=this.R_MINOR/A,V=Math.sqrt(1-j*j),K=Math.exp(-d.y/A),ie=Math.PI/2-2*Math.atan(K),ge=0,we=.1,Se;ge<15&&Math.abs(we)>1e-7;ge++)Se=V*Math.sin(ie),Se=Math.pow((1-Se)/(1+Se),V/2),we=Math.PI/2-2*Math.atan(K*Se)-ie,ie+=we;return new ze(ie*w,d.x*w/A)}},px={__proto__:null,LonLat:mx,Mercator:xl,SphericalMercator:ut},pA=s({},Ze,{code:"EPSG:3395",projection:xl,transformation:function(){var d=.5/(Math.PI*xl.R);return gt(d,.5,-d,.5)}()}),Xu=s({},Ze,{code:"EPSG:4326",projection:mx,transformation:gt(1/180,1,-1/180,.5)}),gA=s({},Te,{projection:mx,transformation:gt(1,0,-1,0),scale:function(d){return Math.pow(2,d)},zoom:function(d){return Math.log(d)/Math.LN2},distance:function(d,w){var A=w.lng-d.lng,j=w.lat-d.lat;return Math.sqrt(A*A+j*j)},infinite:!0});Te.Earth=Ze,Te.EPSG3395=pA,Te.EPSG3857=at,Te.EPSG900913=$n,Te.EPSG4326=Xu,Te.Simple=gA;var Mr=oe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(d){return d.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(d){return d&&d.removeLayer(this),this},getPane:function(d){return this._map.getPane(d?this.options[d]||d:this.options.pane)},addInteractiveTarget:function(d){return this._map._targets[c(d)]=this,this},removeInteractiveTarget:function(d){return delete this._map._targets[c(d)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(d){var w=d.target;if(w.hasLayer(this)){if(this._map=w,this._zoomAnimated=w._zoomAnimated,this.getEvents){var A=this.getEvents();w.on(A,this),this.once("remove",function(){w.off(A,this)},this)}this.onAdd(w),this.fire("add"),w.fire("layeradd",{layer:this})}}});Vt.include({addLayer:function(d){if(!d._layerAdd)throw new Error("The provided object is not a Layer.");var w=c(d);return this._layers[w]?this:(this._layers[w]=d,d._mapToAdd=this,d.beforeAdd&&d.beforeAdd(this),this.whenReady(d._layerAdd,d),this)},removeLayer:function(d){var w=c(d);return this._layers[w]?(this._loaded&&d.onRemove(this),delete this._layers[w],this._loaded&&(this.fire("layerremove",{layer:d}),d.fire("remove")),d._map=d._mapToAdd=null,this):this},hasLayer:function(d){return c(d)in this._layers},eachLayer:function(d,w){for(var A in this._layers)d.call(w,this._layers[A]);return this},_addLayers:function(d){d=d?T(d)?d:[d]:[];for(var w=0,A=d.length;w<A;w++)this.addLayer(d[w])},_addZoomLimit:function(d){(!isNaN(d.options.maxZoom)||!isNaN(d.options.minZoom))&&(this._zoomBoundLayers[c(d)]=d,this._updateZoomLevels())},_removeZoomLimit:function(d){var w=c(d);this._zoomBoundLayers[w]&&(delete this._zoomBoundLayers[w],this._updateZoomLevels())},_updateZoomLevels:function(){var d=1/0,w=-1/0,A=this._getZoomSpan();for(var j in this._zoomBoundLayers){var V=this._zoomBoundLayers[j].options;d=V.minZoom===void 0?d:Math.min(d,V.minZoom),w=V.maxZoom===void 0?w:Math.max(w,V.maxZoom)}this._layersMaxZoom=w===-1/0?void 0:w,this._layersMinZoom=d===1/0?void 0:d,A!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Aa=Mr.extend({initialize:function(d,w){S(this,w),this._layers={};var A,j;if(d)for(A=0,j=d.length;A<j;A++)this.addLayer(d[A])},addLayer:function(d){var w=this.getLayerId(d);return this._layers[w]=d,this._map&&this._map.addLayer(d),this},removeLayer:function(d){var w=d in this._layers?d:this.getLayerId(d);return this._map&&this._layers[w]&&this._map.removeLayer(this._layers[w]),delete this._layers[w],this},hasLayer:function(d){var w=typeof d=="number"?d:this.getLayerId(d);return w in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(d){var w=Array.prototype.slice.call(arguments,1),A,j;for(A in this._layers)j=this._layers[A],j[d]&&j[d].apply(j,w);return this},onAdd:function(d){this.eachLayer(d.addLayer,d)},onRemove:function(d){this.eachLayer(d.removeLayer,d)},eachLayer:function(d,w){for(var A in this._layers)d.call(w,this._layers[A]);return this},getLayer:function(d){return this._layers[d]},getLayers:function(){var d=[];return this.eachLayer(d.push,d),d},setZIndex:function(d){return this.invoke("setZIndex",d)},getLayerId:function(d){return c(d)}}),Si=function(d,w){return new Aa(d,w)},zo=Aa.extend({addLayer:function(d){return this.hasLayer(d)?this:(d.addEventParent(this),Aa.prototype.addLayer.call(this,d),this.fire("layeradd",{layer:d}))},removeLayer:function(d){return this.hasLayer(d)?(d in this._layers&&(d=this._layers[d]),d.removeEventParent(this),Aa.prototype.removeLayer.call(this,d),this.fire("layerremove",{layer:d})):this},setStyle:function(d){return this.invoke("setStyle",d)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var d=new Oe;for(var w in this._layers){var A=this._layers[w];d.extend(A.getBounds?A.getBounds():A.getLatLng())}return d}}),Ho=function(d,w){return new zo(d,w)},Yu=de.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(d){S(this,d)},createIcon:function(d){return this._createIcon("icon",d)},createShadow:function(d){return this._createIcon("shadow",d)},_createIcon:function(d,w){var A=this._getIconUrl(d);if(!A){if(d==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var j=this._createImg(A,w&&w.tagName==="IMG"?w:null);return this._setIconStyles(j,d),(this.options.crossOrigin||this.options.crossOrigin==="")&&(j.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),j},_setIconStyles:function(d,w){var A=this.options,j=A[w+"Size"];typeof j=="number"&&(j=[j,j]);var V=he(j),K=he(w==="shadow"&&A.shadowAnchor||A.iconAnchor||V&&V.divideBy(2,!0));d.className="leaflet-marker-"+w+" "+(A.className||""),K&&(d.style.marginLeft=-K.x+"px",d.style.marginTop=-K.y+"px"),V&&(d.style.width=V.x+"px",d.style.height=V.y+"px")},_createImg:function(d,w){return w=w||document.createElement("img"),w.src=d,w},_getIconUrl:function(d){return Qe.retina&&this.options[d+"RetinaUrl"]||this.options[d+"Url"]}});function gx(d){return new Yu(d)}var df=Yu.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(d){return typeof df.imagePath!="string"&&(df.imagePath=this._detectIconPath()),(this.options.imagePath||df.imagePath)+Yu.prototype._getIconUrl.call(this,d)},_stripUrl:function(d){var w=function(A,j,V){var K=j.exec(A);return K&&K[V]};return d=w(d,/^url\((['"])?(.+)\1\)$/,2),d&&w(d,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var d=Gt("div","leaflet-default-icon-path",document.body),w=Rt(d,"background-image")||Rt(d,"backgroundImage");if(document.body.removeChild(d),w=this._stripUrl(w),w)return w;var A=document.querySelector('link[href$="leaflet.css"]');return A?A.href.substring(0,A.href.length-11-1):""}}),xx=ri.extend({initialize:function(d){this._marker=d},addHooks:function(){var d=this._marker._icon;this._draggable||(this._draggable=new pl(d,d,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),tt(d,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(d){var w=this._marker,A=w._map,j=this._marker.options.autoPanSpeed,V=this._marker.options.autoPanPadding,K=Fn(w._icon),ie=A.getPixelBounds(),ge=A.getPixelOrigin(),we=_e(ie.min._subtract(ge).add(V),ie.max._subtract(ge).subtract(V));if(!we.contains(K)){var Se=he((Math.max(we.max.x,K.x)-we.max.x)/(ie.max.x-we.max.x)-(Math.min(we.min.x,K.x)-we.min.x)/(ie.min.x-we.min.x),(Math.max(we.max.y,K.y)-we.max.y)/(ie.max.y-we.max.y)-(Math.min(we.min.y,K.y)-we.min.y)/(ie.min.y-we.min.y)).multiplyBy(j);A.panBy(Se,{animate:!1}),this._draggable._newPos._add(Se),this._draggable._startPos._add(Se),je(w._icon,this._draggable._newPos),this._onDrag(d),this._panRequest=se(this._adjustPan.bind(this,d))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(d){this._marker.options.autoPan&&(ee(this._panRequest),this._panRequest=se(this._adjustPan.bind(this,d)))},_onDrag:function(d){var w=this._marker,A=w._shadow,j=Fn(w._icon),V=w._map.layerPointToLatLng(j);A&&je(A,j),w._latlng=V,d.latlng=V,d.oldLatLng=this._oldLatLng,w.fire("move",d).fire("drag",d)},_onDragEnd:function(d){ee(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",d)}}),ii=Mr.extend({options:{icon:new df,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(d,w){S(this,w),this._latlng=be(d)},onAdd:function(d){this._zoomAnimated=this._zoomAnimated&&d.options.markerZoomAnimation,this._zoomAnimated&&d.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(d){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&d.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(d){var w=this._latlng;return this._latlng=be(d),this.update(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},setZIndexOffset:function(d){return this.options.zIndexOffset=d,this.update()},getIcon:function(){return this.options.icon},setIcon:function(d){return this.options.icon=d,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var d=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(d)}return this},_initIcon:function(){var d=this.options,w="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),A=d.icon.createIcon(this._icon),j=!1;A!==this._icon&&(this._icon&&this._removeIcon(),j=!0,d.title&&(A.title=d.title),A.tagName==="IMG"&&(A.alt=d.alt||"")),tt(A,w),d.keyboard&&(A.tabIndex="0",A.setAttribute("role","button")),this._icon=A,d.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&mt(A,"focus",this._panOnFocus,this);var V=d.icon.createShadow(this._shadow),K=!1;V!==this._shadow&&(this._removeShadow(),K=!0),V&&(tt(V,w),V.alt=""),this._shadow=V,d.opacity<1&&this._updateOpacity(),j&&this.getPane().appendChild(this._icon),this._initInteraction(),V&&K&&this.getPane(d.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Le(this._icon,"focus",this._panOnFocus,this),Rn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Rn(this._shadow),this._shadow=null},_setPos:function(d){this._icon&&je(this._icon,d),this._shadow&&je(this._shadow,d),this._zIndex=d.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(d){this._icon&&(this._icon.style.zIndex=this._zIndex+d)},_animateZoom:function(d){var w=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center).round();this._setPos(w)},_initInteraction:function(){if(this.options.interactive&&(tt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),xx)){var d=this.options.draggable;this.dragging&&(d=this.dragging.enabled(),this.dragging.disable()),this.dragging=new xx(this),d&&this.dragging.enable()}},setOpacity:function(d){return this.options.opacity=d,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var d=this.options.opacity;this._icon&&Lt(this._icon,d),this._shadow&&Lt(this._shadow,d)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var d=this._map;if(d){var w=this.options.icon.options,A=w.iconSize?he(w.iconSize):he(0,0),j=w.iconAnchor?he(w.iconAnchor):he(0,0);d.panInside(this._latlng,{paddingTopLeft:j,paddingBottomRight:A.subtract(j)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function xA(d,w){return new ii(d,w)}var Vo=Mr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(d){this._renderer=d.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(d){return S(this,d),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&d&&Object.prototype.hasOwnProperty.call(d,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),vl=Vo.extend({options:{fill:!0,radius:10},initialize:function(d,w){S(this,w),this._latlng=be(d),this._radius=this.options.radius},setLatLng:function(d){var w=this._latlng;return this._latlng=be(d),this.redraw(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(d){return this.options.radius=this._radius=d,this.redraw()},getRadius:function(){return this._radius},setStyle:function(d){var w=d&&d.radius||this._radius;return Vo.prototype.setStyle.call(this,d),this.setRadius(w),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var d=this._radius,w=this._radiusY||d,A=this._clickTolerance(),j=[d+A,w+A];this._pxBounds=new Ee(this._point.subtract(j),this._point.add(j))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(d){return d.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Yt(d,w){return new vl(d,w)}var Ku=vl.extend({initialize:function(d,w,A){if(typeof w=="number"&&(w=s({},A,{radius:w})),S(this,w),this._latlng=be(d),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(d){return this._mRadius=d,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var d=[this._radius,this._radiusY||this._radius];return new Oe(this._map.layerPointToLatLng(this._point.subtract(d)),this._map.layerPointToLatLng(this._point.add(d)))},setStyle:Vo.prototype.setStyle,_project:function(){var d=this._latlng.lng,w=this._latlng.lat,A=this._map,j=A.options.crs;if(j.distance===Ze.distance){var V=Math.PI/180,K=this._mRadius/Ze.R/V,ie=A.project([w+K,d]),ge=A.project([w-K,d]),we=ie.add(ge).divideBy(2),Se=A.unproject(we).lat,Ve=Math.acos((Math.cos(K*V)-Math.sin(w*V)*Math.sin(Se*V))/(Math.cos(w*V)*Math.cos(Se*V)))/V;(isNaN(Ve)||Ve===0)&&(Ve=K/Math.cos(Math.PI/180*w)),this._point=we.subtract(A.getPixelOrigin()),this._radius=isNaN(Ve)?0:we.x-A.project([Se,d-Ve]).x,this._radiusY=we.y-ie.y}else{var ft=j.unproject(j.project(this._latlng).subtract([this._mRadius,0]));this._point=A.latLngToLayerPoint(this._latlng),this._radius=this._point.x-A.latLngToLayerPoint(ft).x}this._updateBounds()}});function $(d,w,A){return new Ku(d,w,A)}var a=Vo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(d,w){S(this,w),this._setLatLngs(d)},getLatLngs:function(){return this._latlngs},setLatLngs:function(d){return this._setLatLngs(d),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(d){for(var w=1/0,A=null,j=Ac,V,K,ie=0,ge=this._parts.length;ie<ge;ie++)for(var we=this._parts[ie],Se=1,Ve=we.length;Se<Ve;Se++){V=we[Se-1],K=we[Se];var ft=j(d,V,K,!0);ft<w&&(w=ft,A=j(d,V,K))}return A&&(A.distance=Math.sqrt(w)),A},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fx(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(d,w){return w=w||this._defaultShape(),d=be(d),w.push(d),this._bounds.extend(d),this.redraw()},_setLatLngs:function(d){this._bounds=new Oe,this._latlngs=this._convertLatLngs(d)},_defaultShape:function(){return si(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(d){for(var w=[],A=si(d),j=0,V=d.length;j<V;j++)A?(w[j]=be(d[j]),this._bounds.extend(w[j])):w[j]=this._convertLatLngs(d[j]);return w},_project:function(){var d=new Ee;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,d),this._bounds.isValid()&&d.isValid()&&(this._rawPxBounds=d,this._updateBounds())},_updateBounds:function(){var d=this._clickTolerance(),w=new Q(d,d);this._rawPxBounds&&(this._pxBounds=new Ee([this._rawPxBounds.min.subtract(w),this._rawPxBounds.max.add(w)]))},_projectLatlngs:function(d,w,A){var j=d[0]instanceof ze,V=d.length,K,ie;if(j){for(ie=[],K=0;K<V;K++)ie[K]=this._map.latLngToLayerPoint(d[K]),A.extend(ie[K]);w.push(ie)}else for(K=0;K<V;K++)this._projectLatlngs(d[K],w,A)},_clipPoints:function(){var d=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(d))){if(this.options.noClip){this._parts=this._rings;return}var w=this._parts,A,j,V,K,ie,ge,we;for(A=0,V=0,K=this._rings.length;A<K;A++)for(we=this._rings[A],j=0,ie=we.length;j<ie-1;j++)ge=gl(we[j],we[j+1],d,j,!0),ge&&(w[V]=w[V]||[],w[V].push(ge[0]),(ge[1]!==we[j+1]||j===ie-2)&&(w[V].push(ge[1]),V++))}},_simplifyPoints:function(){for(var d=this._parts,w=this.options.smoothFactor,A=0,j=d.length;A<j;A++)d[A]=Xn(d[A],w)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(d,w){var A,j,V,K,ie,ge,we=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(d))return!1;for(A=0,K=this._parts.length;A<K;A++)for(ge=this._parts[A],j=0,ie=ge.length,V=ie-1;j<ie;V=j++)if(!(!w&&j===0)&&uf(d,ge[V],ge[j])<=we)return!0;return!1}});function u(d,w){return new a(d,w)}a._flat=kp;var m=a.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Rp(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(d){var w=a.prototype._convertLatLngs.call(this,d),A=w.length;return A>=2&&w[0]instanceof ze&&w[0].equals(w[A-1])&&w.pop(),w},_setLatLngs:function(d){a.prototype._setLatLngs.call(this,d),si(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return si(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var d=this._renderer._bounds,w=this.options.weight,A=new Q(w,w);if(d=new Ee(d.min.subtract(A),d.max.add(A)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(d))){if(this.options.noClip){this._parts=this._rings;return}for(var j=0,V=this._rings.length,K;j<V;j++)K=jb(this._rings[j],d,!0),K.length&&this._parts.push(K)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(d){var w=!1,A,j,V,K,ie,ge,we,Se;if(!this._pxBounds||!this._pxBounds.contains(d))return!1;for(K=0,we=this._parts.length;K<we;K++)for(A=this._parts[K],ie=0,Se=A.length,ge=Se-1;ie<Se;ge=ie++)j=A[ie],V=A[ge],j.y>d.y!=V.y>d.y&&d.x<(V.x-j.x)*(d.y-j.y)/(V.y-j.y)+j.x&&(w=!w);return w||a.prototype._containsPoint.call(this,d,!0)}});function x(d,w){return new m(d,w)}var v=zo.extend({initialize:function(d,w){S(this,w),this._layers={},d&&this.addData(d)},addData:function(d){var w=T(d)?d:d.features,A,j,V;if(w){for(A=0,j=w.length;A<j;A++)V=w[A],(V.geometries||V.geometry||V.features||V.coordinates)&&this.addData(V);return this}var K=this.options;if(K.filter&&!K.filter(d))return this;var ie=b(d,K);return ie?(ie.feature=te(d),ie.defaultOptions=ie.options,this.resetStyle(ie),K.onEachFeature&&K.onEachFeature(d,ie),this.addLayer(ie)):this},resetStyle:function(d){return d===void 0?this.eachLayer(this.resetStyle,this):(d.options=s({},d.defaultOptions),this._setLayerStyle(d,this.options.style),this)},setStyle:function(d){return this.eachLayer(function(w){this._setLayerStyle(w,d)},this)},_setLayerStyle:function(d,w){d.setStyle&&(typeof w=="function"&&(w=w(d.feature)),d.setStyle(w))}});function b(d,w){var A=d.type==="Feature"?d.geometry:d,j=A?A.coordinates:null,V=[],K=w&&w.pointToLayer,ie=w&&w.coordsToLatLng||R,ge,we,Se,Ve;if(!j&&!A)return null;switch(A.type){case"Point":return ge=ie(j),C(K,d,ge,w);case"MultiPoint":for(Se=0,Ve=j.length;Se<Ve;Se++)ge=ie(j[Se]),V.push(C(K,d,ge,w));return new zo(V);case"LineString":case"MultiLineString":return we=O(j,A.type==="LineString"?0:1,ie),new a(we,w);case"Polygon":case"MultiPolygon":return we=O(j,A.type==="Polygon"?1:2,ie),new m(we,w);case"GeometryCollection":for(Se=0,Ve=A.geometries.length;Se<Ve;Se++){var ft=b({geometry:A.geometries[Se],type:"Feature",properties:d.properties},w);ft&&V.push(ft)}return new zo(V);case"FeatureCollection":for(Se=0,Ve=A.features.length;Se<Ve;Se++){var Ft=b(A.features[Se],w);Ft&&V.push(Ft)}return new zo(V);default:throw new Error("Invalid GeoJSON object.")}}function C(d,w,A,j){return d?d(w,A):new ii(A,j&&j.markersInheritOptions&&j)}function R(d){return new ze(d[1],d[0],d[2])}function O(d,w,A){for(var j=[],V=0,K=d.length,ie;V<K;V++)ie=w?O(d[V],w-1,A):(A||R)(d[V]),j.push(ie);return j}function H(d,w){return d=be(d),d.alt!==void 0?[_(d.lng,w),_(d.lat,w),_(d.alt,w)]:[_(d.lng,w),_(d.lat,w)]}function q(d,w,A,j){for(var V=[],K=0,ie=d.length;K<ie;K++)V.push(w?q(d[K],si(d[K])?0:w-1,A,j):H(d[K],j));return!w&&A&&V.length>0&&V.push(V[0].slice()),V}function Y(d,w){return d.feature?s({},d.feature,{geometry:w}):te(w)}function te(d){return d.type==="Feature"||d.type==="FeatureCollection"?d:{type:"Feature",properties:{},geometry:d}}var ae={toGeoJSON:function(d){return Y(this,{type:"Point",coordinates:H(this.getLatLng(),d)})}};ii.include(ae),Ku.include(ae),vl.include(ae),a.include({toGeoJSON:function(d){var w=!si(this._latlngs),A=q(this._latlngs,w?1:0,!1,d);return Y(this,{type:(w?"Multi":"")+"LineString",coordinates:A})}}),m.include({toGeoJSON:function(d){var w=!si(this._latlngs),A=w&&!si(this._latlngs[0]),j=q(this._latlngs,A?2:w?1:0,!0,d);return w||(j=[j]),Y(this,{type:(A?"Multi":"")+"Polygon",coordinates:j})}}),Aa.include({toMultiPoint:function(d){var w=[];return this.eachLayer(function(A){w.push(A.toGeoJSON(d).geometry.coordinates)}),Y(this,{type:"MultiPoint",coordinates:w})},toGeoJSON:function(d){var w=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(w==="MultiPoint")return this.toMultiPoint(d);var A=w==="GeometryCollection",j=[];return this.eachLayer(function(V){if(V.toGeoJSON){var K=V.toGeoJSON(d);if(A)j.push(K.geometry);else{var ie=te(K);ie.type==="FeatureCollection"?j.push.apply(j,ie.features):j.push(ie)}}}),A?Y(this,{geometries:j,type:"GeometryCollection"}):{type:"FeatureCollection",features:j}}});function le(d,w){return new v(d,w)}var me=le,ve=Mr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(d,w,A){this._url=d,this._bounds=De(w),S(this,A)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(tt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Rn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(d){return this.options.opacity=d,this._image&&this._updateOpacity(),this},setStyle:function(d){return d.opacity&&this.setOpacity(d.opacity),this},bringToFront:function(){return this._map&&Bn(this._image),this},bringToBack:function(){return this._map&&ni(this._image),this},setUrl:function(d){return this._url=d,this._image&&(this._image.src=d),this},setBounds:function(d){return this._bounds=De(d),this._map&&this._reset(),this},getEvents:function(){var d={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},setZIndex:function(d){return this.options.zIndex=d,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var d=this._url.tagName==="IMG",w=this._image=d?this._url:Gt("img");if(tt(w,"leaflet-image-layer"),this._zoomAnimated&&tt(w,"leaflet-zoom-animated"),this.options.className&&tt(w,this.options.className),w.onselectstart=y,w.onmousemove=y,w.onload=o(this.fire,this,"load"),w.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),d){this._url=w.src;return}w.src=this._url,w.alt=this.options.alt},_animateZoom:function(d){var w=this._map.getZoomScale(d.zoom),A=this._map._latLngBoundsToNewLayerBounds(this._bounds,d.zoom,d.center).min;J(this._image,A,w)},_reset:function(){var d=this._image,w=new Ee(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),A=w.getSize();je(d,w.min),d.style.width=A.x+"px",d.style.height=A.y+"px"},_updateOpacity:function(){Lt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var d=this.options.errorOverlayUrl;d&&this._url!==d&&(this._url=d,this._image.src=d)},getCenter:function(){return this._bounds.getCenter()}}),Ie=function(d,w,A){return new ve(d,w,A)},Re=ve.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var d=this._url.tagName==="VIDEO",w=this._image=d?this._url:Gt("video");if(tt(w,"leaflet-image-layer"),this._zoomAnimated&&tt(w,"leaflet-zoom-animated"),this.options.className&&tt(w,this.options.className),w.onselectstart=y,w.onmousemove=y,w.onloadeddata=o(this.fire,this,"load"),d){for(var A=w.getElementsByTagName("source"),j=[],V=0;V<A.length;V++)j.push(A[V].src);this._url=A.length>0?j:[w.src];return}T(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(w.style,"objectFit")&&(w.style.objectFit="fill"),w.autoplay=!!this.options.autoplay,w.loop=!!this.options.loop,w.muted=!!this.options.muted,w.playsInline=!!this.options.playsInline;for(var K=0;K<this._url.length;K++){var ie=Gt("source");ie.src=this._url[K],w.appendChild(ie)}}});function Ne(d,w,A){return new Re(d,w,A)}var Bt=ve.extend({_initImage:function(){var d=this._image=this._url;tt(d,"leaflet-image-layer"),this._zoomAnimated&&tt(d,"leaflet-zoom-animated"),this.options.className&&tt(d,this.options.className),d.onselectstart=y,d.onmousemove=y}});function wt(d,w,A){return new Bt(d,w,A)}var Yn=Mr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(d,w){d&&(d instanceof ze||T(d))?(this._latlng=be(d),S(this,w)):(S(this,d),this._source=w),this.options.content&&(this._content=this.options.content)},openOn:function(d){return d=arguments.length?d:this._source._map,d.hasLayer(this)||d.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(d){return this._map?this.close():(arguments.length?this._source=d:d=this._source,this._prepareOpen(),this.openOn(d._map)),this},onAdd:function(d){this._zoomAnimated=d._zoomAnimated,this._container||this._initLayout(),d._fadeAnimated&&Lt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),d._fadeAnimated&&Lt(this._container,1),this.bringToFront(),this.options.interactive&&(tt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(d){d._fadeAnimated?(Lt(this._container,0),this._removeTimeout=setTimeout(o(Rn,void 0,this._container),200)):Rn(this._container),this.options.interactive&&(mn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(d){return this._latlng=be(d),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(d){return this._content=d,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var d={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Bn(this._container),this},bringToBack:function(){return this._map&&ni(this._container),this},_prepareOpen:function(d){var w=this._source;if(!w._map)return!1;if(w instanceof zo){w=null;var A=this._source._layers;for(var j in A)if(A[j]._map){w=A[j];break}if(!w)return!1;this._source=w}if(!d)if(w.getCenter)d=w.getCenter();else if(w.getLatLng)d=w.getLatLng();else if(w.getBounds)d=w.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(d),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var d=this._contentNode,w=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof w=="string")d.innerHTML=w;else{for(;d.hasChildNodes();)d.removeChild(d.firstChild);d.appendChild(w)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var d=this._map.latLngToLayerPoint(this._latlng),w=he(this.options.offset),A=this._getAnchor();this._zoomAnimated?je(this._container,d.add(A)):w=w.add(d).add(A);var j=this._containerBottom=-w.y,V=this._containerLeft=-Math.round(this._containerWidth/2)+w.x;this._container.style.bottom=j+"px",this._container.style.left=V+"px"}},_getAnchor:function(){return[0,0]}});Vt.include({_initOverlay:function(d,w,A,j){var V=w;return V instanceof d||(V=new d(j).setContent(w)),A&&V.setLatLng(A),V}}),Mr.include({_initOverlay:function(d,w,A,j){var V=A;return V instanceof d?(S(V,j),V._source=this):(V=w&&!j?w:new d(j,this),V.setContent(A)),V}});var Ls=Yn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(d){return d=arguments.length?d:this._source._map,!d.hasLayer(this)&&d._popup&&d._popup.options.autoClose&&d.removeLayer(d._popup),d._popup=this,Yn.prototype.openOn.call(this,d)},onAdd:function(d){Yn.prototype.onAdd.call(this,d),d.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Vo||this._source.on("preclick",_a))},onRemove:function(d){Yn.prototype.onRemove.call(this,d),d.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Vo||this._source.off("preclick",_a))},getEvents:function(){var d=Yn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(d.preclick=this.close),this.options.keepInView&&(d.moveend=this._adjustPan),d},_initLayout:function(){var d="leaflet-popup",w=this._container=Gt("div",d+" "+(this.options.className||"")+" leaflet-zoom-animated"),A=this._wrapper=Gt("div",d+"-content-wrapper",w);if(this._contentNode=Gt("div",d+"-content",A),Xi(w),Tp(this._contentNode),mt(w,"contextmenu",_a),this._tipContainer=Gt("div",d+"-tip-container",w),this._tip=Gt("div",d+"-tip",this._tipContainer),this.options.closeButton){var j=this._closeButton=Gt("a",d+"-close-button",w);j.setAttribute("role","button"),j.setAttribute("aria-label","Close popup"),j.href="#close",j.innerHTML='<span aria-hidden="true">&#215;</span>',mt(j,"click",function(V){Hr(V),this.close()},this)}},_updateLayout:function(){var d=this._contentNode,w=d.style;w.width="",w.whiteSpace="nowrap";var A=d.offsetWidth;A=Math.min(A,this.options.maxWidth),A=Math.max(A,this.options.minWidth),w.width=A+1+"px",w.whiteSpace="",w.height="";var j=d.offsetHeight,V=this.options.maxHeight,K="leaflet-popup-scrolled";V&&j>V?(w.height=V+"px",tt(d,K)):mn(d,K),this._containerWidth=this._container.offsetWidth},_animateZoom:function(d){var w=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center),A=this._getAnchor();je(this._container,w.add(A))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var d=this._map,w=parseInt(Rt(this._container,"marginBottom"),10)||0,A=this._container.offsetHeight+w,j=this._containerWidth,V=new Q(this._containerLeft,-A-this._containerBottom);V._add(Fn(this._container));var K=d.layerPointToContainerPoint(V),ie=he(this.options.autoPanPadding),ge=he(this.options.autoPanPaddingTopLeft||ie),we=he(this.options.autoPanPaddingBottomRight||ie),Se=d.getSize(),Ve=0,ft=0;K.x+j+we.x>Se.x&&(Ve=K.x+j-Se.x+we.x),K.x-Ve-ge.x<0&&(Ve=K.x-ge.x),K.y+A+we.y>Se.y&&(ft=K.y+A-Se.y+we.y),K.y-ft-ge.y<0&&(ft=K.y-ge.y),(Ve||ft)&&(this.options.keepInView&&(this._autopanning=!0),d.fire("autopanstart").panBy([Ve,ft]))}},_getAnchor:function(){return he(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Bs=function(d,w){return new Ls(d,w)};Vt.mergeOptions({closePopupOnClick:!0}),Vt.include({openPopup:function(d,w,A){return this._initOverlay(Ls,d,w,A).openOn(this),this},closePopup:function(d){return d=arguments.length?d:this._popup,d&&d.close(),this}}),Mr.include({bindPopup:function(d,w){return this._popup=this._initOverlay(Ls,this._popup,d,w),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(d){return this._popup&&(this instanceof zo||(this._popup._source=this),this._popup._prepareOpen(d||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(d){return this._popup&&this._popup.setContent(d),this},getPopup:function(){return this._popup},_openPopup:function(d){if(!(!this._popup||!this._map)){Yi(d);var w=d.layer||d.target;if(this._popup._source===w&&!(w instanceof Vo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(d.latlng);return}this._popup._source=w,this.openPopup(d.latlng)}},_movePopup:function(d){this._popup.setLatLng(d.latlng)},_onKeyPress:function(d){d.originalEvent.keyCode===13&&this._openPopup(d)}});var un=Yn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(d){Yn.prototype.onAdd.call(this,d),this.setOpacity(this.options.opacity),d.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(d){Yn.prototype.onRemove.call(this,d),d.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var d=Yn.prototype.getEvents.call(this);return this.options.permanent||(d.preclick=this.close),d},_initLayout:function(){var d="leaflet-tooltip",w=d+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Gt("div",w),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(d){var w,A,j=this._map,V=this._container,K=j.latLngToContainerPoint(j.getCenter()),ie=j.layerPointToContainerPoint(d),ge=this.options.direction,we=V.offsetWidth,Se=V.offsetHeight,Ve=he(this.options.offset),ft=this._getAnchor();ge==="top"?(w=we/2,A=Se):ge==="bottom"?(w=we/2,A=0):ge==="center"?(w=we/2,A=Se/2):ge==="right"?(w=0,A=Se/2):ge==="left"?(w=we,A=Se/2):ie.x<K.x?(ge="right",w=0,A=Se/2):(ge="left",w=we+(Ve.x+ft.x)*2,A=Se/2),d=d.subtract(he(w,A,!0)).add(Ve).add(ft),mn(V,"leaflet-tooltip-right"),mn(V,"leaflet-tooltip-left"),mn(V,"leaflet-tooltip-top"),mn(V,"leaflet-tooltip-bottom"),tt(V,"leaflet-tooltip-"+ge),je(V,d)},_updatePosition:function(){var d=this._map.latLngToLayerPoint(this._latlng);this._setPosition(d)},setOpacity:function(d){this.options.opacity=d,this._container&&Lt(this._container,d)},_animateZoom:function(d){var w=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center);this._setPosition(w)},_getAnchor:function(){return he(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Wr=function(d,w){return new un(d,w)};Vt.include({openTooltip:function(d,w,A){return this._initOverlay(un,d,w,A).openOn(this),this},closeTooltip:function(d){return d.close(),this}}),Mr.include({bindTooltip:function(d,w){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(un,this._tooltip,d,w),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(d){if(!(!d&&this._tooltipHandlersAdded)){var w=d?"off":"on",A={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?A.add=this._openTooltip:(A.mouseover=this._openTooltip,A.mouseout=this.closeTooltip,A.click=this._openTooltip,this._map?this._addFocusListeners():A.add=this._addFocusListeners),this._tooltip.options.sticky&&(A.mousemove=this._moveTooltip),this[w](A),this._tooltipHandlersAdded=!d}},openTooltip:function(d){return this._tooltip&&(this instanceof zo||(this._tooltip._source=this),this._tooltip._prepareOpen(d)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(d){return this._tooltip&&this._tooltip.setContent(d),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(d){var w=typeof d.getElement=="function"&&d.getElement();w&&(mt(w,"focus",function(){this._tooltip._source=d,this.openTooltip()},this),mt(w,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(d){var w=typeof d.getElement=="function"&&d.getElement();w&&w.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(d){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var w=this;this._map.once("moveend",function(){w._openOnceFlag=!1,w._openTooltip(d)});return}this._tooltip._source=d.layer||d.target,this.openTooltip(this._tooltip.options.sticky?d.latlng:void 0)}},_moveTooltip:function(d){var w=d.latlng,A,j;this._tooltip.options.sticky&&d.originalEvent&&(A=this._map.mouseEventToContainerPoint(d.originalEvent),j=this._map.containerPointToLayerPoint(A),w=this._map.layerPointToLatLng(j)),this._tooltip.setLatLng(w)}});var Fs=Yu.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(d){var w=d&&d.tagName==="DIV"?d:document.createElement("div"),A=this.options;if(A.html instanceof Element?(Wu(w),w.appendChild(A.html)):w.innerHTML=A.html!==!1?A.html:"",A.bgPos){var j=he(A.bgPos);w.style.backgroundPosition=-j.x+"px "+-j.y+"px"}return this._setIconStyles(w,"icon"),w},createShadow:function(){return null}});function Zu(d){return new Fs(d)}Yu.Default=df;var Wo=Mr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Qe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(d){S(this,d)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(d){d._addZoomLimit(this)},onRemove:function(d){this._removeAllTiles(),Rn(this._container),d._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Bn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ni(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(d){return this.options.opacity=d,this._updateOpacity(),this},setZIndex:function(d){return this.options.zIndex=d,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var d=this._clampZoom(this._map.getZoom());d!==this._tileZoom&&(this._tileZoom=d,this._updateLevels()),this._update()}return this},getEvents:function(){var d={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),d.move=this._onMove),this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},createTile:function(){return document.createElement("div")},getTileSize:function(){var d=this.options.tileSize;return d instanceof Q?d:new Q(d,d)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(d){for(var w=this.getPane().children,A=-d(-1/0,1/0),j=0,V=w.length,K;j<V;j++)K=w[j].style.zIndex,w[j]!==this._container&&K&&(A=d(A,+K));isFinite(A)&&(this.options.zIndex=A+d(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Qe.ielt9){Lt(this._container,this.options.opacity);var d=+new Date,w=!1,A=!1;for(var j in this._tiles){var V=this._tiles[j];if(!(!V.current||!V.loaded)){var K=Math.min(1,(d-V.loaded)/200);Lt(V.el,K),K<1?w=!0:(V.active?A=!0:this._onOpaqueTile(V),V.active=!0)}}A&&!this._noPrune&&this._pruneTiles(),w&&(ee(this._fadeFrame),this._fadeFrame=se(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Gt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var d=this._tileZoom,w=this.options.maxZoom;if(d!==void 0){for(var A in this._levels)A=Number(A),this._levels[A].el.children.length||A===d?(this._levels[A].el.style.zIndex=w-Math.abs(d-A),this._onUpdateLevel(A)):(Rn(this._levels[A].el),this._removeTilesAtZoom(A),this._onRemoveLevel(A),delete this._levels[A]);var j=this._levels[d],V=this._map;return j||(j=this._levels[d]={},j.el=Gt("div","leaflet-tile-container leaflet-zoom-animated",this._container),j.el.style.zIndex=w,j.origin=V.project(V.unproject(V.getPixelOrigin()),d).round(),j.zoom=d,this._setZoomTransform(j,V.getCenter(),V.getZoom()),y(j.el.offsetWidth),this._onCreateLevel(j)),this._level=j,j}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var d,w,A=this._map.getZoom();if(A>this.options.maxZoom||A<this.options.minZoom){this._removeAllTiles();return}for(d in this._tiles)w=this._tiles[d],w.retain=w.current;for(d in this._tiles)if(w=this._tiles[d],w.current&&!w.active){var j=w.coords;this._retainParent(j.x,j.y,j.z,j.z-5)||this._retainChildren(j.x,j.y,j.z,j.z+2)}for(d in this._tiles)this._tiles[d].retain||this._removeTile(d)}},_removeTilesAtZoom:function(d){for(var w in this._tiles)this._tiles[w].coords.z===d&&this._removeTile(w)},_removeAllTiles:function(){for(var d in this._tiles)this._removeTile(d)},_invalidateAll:function(){for(var d in this._levels)Rn(this._levels[d].el),this._onRemoveLevel(Number(d)),delete this._levels[d];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(d,w,A,j){var V=Math.floor(d/2),K=Math.floor(w/2),ie=A-1,ge=new Q(+V,+K);ge.z=+ie;var we=this._tileCoordsToKey(ge),Se=this._tiles[we];return Se&&Se.active?(Se.retain=!0,!0):(Se&&Se.loaded&&(Se.retain=!0),ie>j?this._retainParent(V,K,ie,j):!1)},_retainChildren:function(d,w,A,j){for(var V=2*d;V<2*d+2;V++)for(var K=2*w;K<2*w+2;K++){var ie=new Q(V,K);ie.z=A+1;var ge=this._tileCoordsToKey(ie),we=this._tiles[ge];if(we&&we.active){we.retain=!0;continue}else we&&we.loaded&&(we.retain=!0);A+1<j&&this._retainChildren(V,K,A+1,j)}},_resetView:function(d){var w=d&&(d.pinch||d.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),w,w)},_animateZoom:function(d){this._setView(d.center,d.zoom,!0,d.noUpdate)},_clampZoom:function(d){var w=this.options;return w.minNativeZoom!==void 0&&d<w.minNativeZoom?w.minNativeZoom:w.maxNativeZoom!==void 0&&w.maxNativeZoom<d?w.maxNativeZoom:d},_setView:function(d,w,A,j){var V=Math.round(w);this.options.maxZoom!==void 0&&V>this.options.maxZoom||this.options.minZoom!==void 0&&V<this.options.minZoom?V=void 0:V=this._clampZoom(V);var K=this.options.updateWhenZooming&&V!==this._tileZoom;(!j||K)&&(this._tileZoom=V,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),V!==void 0&&this._update(d),A||this._pruneTiles(),this._noPrune=!!A),this._setZoomTransforms(d,w)},_setZoomTransforms:function(d,w){for(var A in this._levels)this._setZoomTransform(this._levels[A],d,w)},_setZoomTransform:function(d,w,A){var j=this._map.getZoomScale(A,d.zoom),V=d.origin.multiplyBy(j).subtract(this._map._getNewPixelOrigin(w,A)).round();Qe.any3d?J(d.el,V,j):je(d.el,V)},_resetGrid:function(){var d=this._map,w=d.options.crs,A=this._tileSize=this.getTileSize(),j=this._tileZoom,V=this._map.getPixelWorldBounds(this._tileZoom);V&&(this._globalTileRange=this._pxBoundsToTileRange(V)),this._wrapX=w.wrapLng&&!this.options.noWrap&&[Math.floor(d.project([0,w.wrapLng[0]],j).x/A.x),Math.ceil(d.project([0,w.wrapLng[1]],j).x/A.y)],this._wrapY=w.wrapLat&&!this.options.noWrap&&[Math.floor(d.project([w.wrapLat[0],0],j).y/A.x),Math.ceil(d.project([w.wrapLat[1],0],j).y/A.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(d){var w=this._map,A=w._animatingZoom?Math.max(w._animateToZoom,w.getZoom()):w.getZoom(),j=w.getZoomScale(A,this._tileZoom),V=w.project(d,this._tileZoom).floor(),K=w.getSize().divideBy(j*2);return new Ee(V.subtract(K),V.add(K))},_update:function(d){var w=this._map;if(w){var A=this._clampZoom(w.getZoom());if(d===void 0&&(d=w.getCenter()),this._tileZoom!==void 0){var j=this._getTiledPixelBounds(d),V=this._pxBoundsToTileRange(j),K=V.getCenter(),ie=[],ge=this.options.keepBuffer,we=new Ee(V.getBottomLeft().subtract([ge,-ge]),V.getTopRight().add([ge,-ge]));if(!(isFinite(V.min.x)&&isFinite(V.min.y)&&isFinite(V.max.x)&&isFinite(V.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Se in this._tiles){var Ve=this._tiles[Se].coords;(Ve.z!==this._tileZoom||!we.contains(new Q(Ve.x,Ve.y)))&&(this._tiles[Se].current=!1)}if(Math.abs(A-this._tileZoom)>1){this._setView(d,A);return}for(var ft=V.min.y;ft<=V.max.y;ft++)for(var Ft=V.min.x;Ft<=V.max.x;Ft++){var oi=new Q(Ft,ft);if(oi.z=this._tileZoom,!!this._isValidTile(oi)){var os=this._tiles[this._tileCoordsToKey(oi)];os?os.current=!0:ie.push(oi)}}if(ie.sort(function(Ni,Mp){return Ni.distanceTo(K)-Mp.distanceTo(K)}),ie.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Go=document.createDocumentFragment();for(Ft=0;Ft<ie.length;Ft++)this._addTile(ie[Ft],Go);this._level.el.appendChild(Go)}}}},_isValidTile:function(d){var w=this._map.options.crs;if(!w.infinite){var A=this._globalTileRange;if(!w.wrapLng&&(d.x<A.min.x||d.x>A.max.x)||!w.wrapLat&&(d.y<A.min.y||d.y>A.max.y))return!1}if(!this.options.bounds)return!0;var j=this._tileCoordsToBounds(d);return De(this.options.bounds).overlaps(j)},_keyToBounds:function(d){return this._tileCoordsToBounds(this._keyToTileCoords(d))},_tileCoordsToNwSe:function(d){var w=this._map,A=this.getTileSize(),j=d.scaleBy(A),V=j.add(A),K=w.unproject(j,d.z),ie=w.unproject(V,d.z);return[K,ie]},_tileCoordsToBounds:function(d){var w=this._tileCoordsToNwSe(d),A=new Oe(w[0],w[1]);return this.options.noWrap||(A=this._map.wrapLatLngBounds(A)),A},_tileCoordsToKey:function(d){return d.x+":"+d.y+":"+d.z},_keyToTileCoords:function(d){var w=d.split(":"),A=new Q(+w[0],+w[1]);return A.z=+w[2],A},_removeTile:function(d){var w=this._tiles[d];w&&(Rn(w.el),delete this._tiles[d],this.fire("tileunload",{tile:w.el,coords:this._keyToTileCoords(d)}))},_initTile:function(d){tt(d,"leaflet-tile");var w=this.getTileSize();d.style.width=w.x+"px",d.style.height=w.y+"px",d.onselectstart=y,d.onmousemove=y,Qe.ielt9&&this.options.opacity<1&&Lt(d,this.options.opacity)},_addTile:function(d,w){var A=this._getTilePos(d),j=this._tileCoordsToKey(d),V=this.createTile(this._wrapCoords(d),o(this._tileReady,this,d));this._initTile(V),this.createTile.length<2&&se(o(this._tileReady,this,d,null,V)),je(V,A),this._tiles[j]={el:V,coords:d,current:!0},w.appendChild(V),this.fire("tileloadstart",{tile:V,coords:d})},_tileReady:function(d,w,A){w&&this.fire("tileerror",{error:w,tile:A,coords:d});var j=this._tileCoordsToKey(d);A=this._tiles[j],A&&(A.loaded=+new Date,this._map._fadeAnimated?(Lt(A.el,0),ee(this._fadeFrame),this._fadeFrame=se(this._updateOpacity,this)):(A.active=!0,this._pruneTiles()),w||(tt(A.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:A.el,coords:d})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Qe.ielt9||!this._map._fadeAnimated?se(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(d){return d.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(d){var w=new Q(this._wrapX?g(d.x,this._wrapX):d.x,this._wrapY?g(d.y,this._wrapY):d.y);return w.z=d.z,w},_pxBoundsToTileRange:function(d){var w=this.getTileSize();return new Ee(d.min.unscaleBy(w).floor(),d.max.unscaleBy(w).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var d in this._tiles)if(!this._tiles[d].loaded)return!1;return!0}});function vA(d){return new Wo(d)}var Qu=Wo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(d,w){this._url=d,w=S(this,w),w.detectRetina&&Qe.retina&&w.maxZoom>0?(w.tileSize=Math.floor(w.tileSize/2),w.zoomReverse?(w.zoomOffset--,w.minZoom=Math.min(w.maxZoom,w.minZoom+1)):(w.zoomOffset++,w.maxZoom=Math.max(w.minZoom,w.maxZoom-1)),w.minZoom=Math.max(0,w.minZoom)):w.zoomReverse?w.minZoom=Math.min(w.maxZoom,w.minZoom):w.maxZoom=Math.max(w.minZoom,w.maxZoom),typeof w.subdomains=="string"&&(w.subdomains=w.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(d,w){return this._url===d&&w===void 0&&(w=!0),this._url=d,w||this.redraw(),this},createTile:function(d,w){var A=document.createElement("img");return mt(A,"load",o(this._tileOnLoad,this,w,A)),mt(A,"error",o(this._tileOnError,this,w,A)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(A.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(A.referrerPolicy=this.options.referrerPolicy),A.alt="",A.src=this.getTileUrl(d),A},getTileUrl:function(d){var w={r:Qe.retina?"@2x":"",s:this._getSubdomain(d),x:d.x,y:d.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var A=this._globalTileRange.max.y-d.y;this.options.tms&&(w.y=A),w["-y"]=A}return k(this._url,s(w,this.options))},_tileOnLoad:function(d,w){Qe.ielt9?setTimeout(o(d,this,null,w),0):d(null,w)},_tileOnError:function(d,w,A){var j=this.options.errorTileUrl;j&&w.getAttribute("src")!==j&&(w.src=j),d(A,w)},_onTileRemove:function(d){d.tile.onload=null},_getZoomForUrl:function(){var d=this._tileZoom,w=this.options.maxZoom,A=this.options.zoomReverse,j=this.options.zoomOffset;return A&&(d=w-d),d+j},_getSubdomain:function(d){var w=Math.abs(d.x+d.y)%this.options.subdomains.length;return this.options.subdomains[w]},_abortLoading:function(){var d,w;for(d in this._tiles)if(this._tiles[d].coords.z!==this._tileZoom&&(w=this._tiles[d].el,w.onload=y,w.onerror=y,!w.complete)){w.src=U;var A=this._tiles[d].coords;Rn(w),delete this._tiles[d],this.fire("tileabort",{tile:w,coords:A})}},_removeTile:function(d){var w=this._tiles[d];if(w)return w.el.setAttribute("src",U),Wo.prototype._removeTile.call(this,d)},_tileReady:function(d,w,A){if(!(!this._map||A&&A.getAttribute("src")===U))return Wo.prototype._tileReady.call(this,d,w,A)}});function VR(d,w){return new Qu(d,w)}var WR=Qu.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(d,w){this._url=d;var A=s({},this.defaultWmsParams);for(var j in w)j in this.options||(A[j]=w[j]);w=S(this,w);var V=w.detectRetina&&Qe.retina?2:1,K=this.getTileSize();A.width=K.x*V,A.height=K.y*V,this.wmsParams=A},onAdd:function(d){this._crs=this.options.crs||d.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var w=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[w]=this._crs.code,Qu.prototype.onAdd.call(this,d)},getTileUrl:function(d){var w=this._tileCoordsToNwSe(d),A=this._crs,j=_e(A.project(w[0]),A.project(w[1])),V=j.min,K=j.max,ie=(this._wmsVersion>=1.3&&this._crs===Xu?[V.y,V.x,K.y,K.x]:[V.x,V.y,K.x,K.y]).join(","),ge=Qu.prototype.getTileUrl.call(this,d);return ge+I(this.wmsParams,ge,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ie},setParams:function(d,w){return s(this.wmsParams,d),w||this.redraw(),this}});function uz(d,w){return new WR(d,w)}Qu.WMS=WR,VR.wms=uz;var Sc=Mr.extend({options:{padding:.1},initialize:function(d){S(this,d),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),tt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var d={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(d.zoomanim=this._onAnimZoom),d},_onAnimZoom:function(d){this._updateTransform(d.center,d.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(d,w){var A=this._map.getZoomScale(w,this._zoom),j=this._map.getSize().multiplyBy(.5+this.options.padding),V=this._map.project(this._center,w),K=j.multiplyBy(-A).add(V).subtract(this._map._getNewPixelOrigin(d,w));Qe.any3d?J(this._container,K,A):je(this._container,K)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var d in this._layers)this._layers[d]._reset()},_onZoomEnd:function(){for(var d in this._layers)this._layers[d]._project()},_updatePaths:function(){for(var d in this._layers)this._layers[d]._update()},_update:function(){var d=this.options.padding,w=this._map.getSize(),A=this._map.containerPointToLayerPoint(w.multiplyBy(-d)).round();this._bounds=new Ee(A,A.add(w.multiplyBy(1+d*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),GR=Sc.extend({options:{tolerance:0},getEvents:function(){var d=Sc.prototype.getEvents.call(this);return d.viewprereset=this._onViewPreReset,d},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Sc.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var d=this._container=document.createElement("canvas");mt(d,"mousemove",this._onMouseMove,this),mt(d,"click dblclick mousedown mouseup contextmenu",this._onClick,this),mt(d,"mouseout",this._handleMouseOut,this),d._leaflet_disable_events=!0,this._ctx=d.getContext("2d")},_destroyContainer:function(){ee(this._redrawRequest),delete this._ctx,Rn(this._container),Le(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var d;this._redrawBounds=null;for(var w in this._layers)d=this._layers[w],d._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Sc.prototype._update.call(this);var d=this._bounds,w=this._container,A=d.getSize(),j=Qe.retina?2:1;je(w,d.min),w.width=j*A.x,w.height=j*A.y,w.style.width=A.x+"px",w.style.height=A.y+"px",Qe.retina&&this._ctx.scale(2,2),this._ctx.translate(-d.min.x,-d.min.y),this.fire("update")}},_reset:function(){Sc.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(d){this._updateDashArray(d),this._layers[c(d)]=d;var w=d._order={layer:d,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=w),this._drawLast=w,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(d){this._requestRedraw(d)},_removePath:function(d){var w=d._order,A=w.next,j=w.prev;A?A.prev=j:this._drawLast=j,j?j.next=A:this._drawFirst=A,delete d._order,delete this._layers[c(d)],this._requestRedraw(d)},_updatePath:function(d){this._extendRedrawBounds(d),d._project(),d._update(),this._requestRedraw(d)},_updateStyle:function(d){this._updateDashArray(d),this._requestRedraw(d)},_updateDashArray:function(d){if(typeof d.options.dashArray=="string"){var w=d.options.dashArray.split(/[, ]+/),A=[],j,V;for(V=0;V<w.length;V++){if(j=Number(w[V]),isNaN(j))return;A.push(j)}d.options._dashArray=A}else d.options._dashArray=d.options.dashArray},_requestRedraw:function(d){this._map&&(this._extendRedrawBounds(d),this._redrawRequest=this._redrawRequest||se(this._redraw,this))},_extendRedrawBounds:function(d){if(d._pxBounds){var w=(d.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ee,this._redrawBounds.extend(d._pxBounds.min.subtract([w,w])),this._redrawBounds.extend(d._pxBounds.max.add([w,w]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var d=this._redrawBounds;if(d){var w=d.getSize();this._ctx.clearRect(d.min.x,d.min.y,w.x,w.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var d,w=this._redrawBounds;if(this._ctx.save(),w){var A=w.getSize();this._ctx.beginPath(),this._ctx.rect(w.min.x,w.min.y,A.x,A.y),this._ctx.clip()}this._drawing=!0;for(var j=this._drawFirst;j;j=j.next)d=j.layer,(!w||d._pxBounds&&d._pxBounds.intersects(w))&&d._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(d,w){if(this._drawing){var A,j,V,K,ie=d._parts,ge=ie.length,we=this._ctx;if(ge){for(we.beginPath(),A=0;A<ge;A++){for(j=0,V=ie[A].length;j<V;j++)K=ie[A][j],we[j?"lineTo":"moveTo"](K.x,K.y);w&&we.closePath()}this._fillStroke(we,d)}}},_updateCircle:function(d){if(!(!this._drawing||d._empty())){var w=d._point,A=this._ctx,j=Math.max(Math.round(d._radius),1),V=(Math.max(Math.round(d._radiusY),1)||j)/j;V!==1&&(A.save(),A.scale(1,V)),A.beginPath(),A.arc(w.x,w.y/V,j,0,Math.PI*2,!1),V!==1&&A.restore(),this._fillStroke(A,d)}},_fillStroke:function(d,w){var A=w.options;A.fill&&(d.globalAlpha=A.fillOpacity,d.fillStyle=A.fillColor||A.color,d.fill(A.fillRule||"evenodd")),A.stroke&&A.weight!==0&&(d.setLineDash&&d.setLineDash(w.options&&w.options._dashArray||[]),d.globalAlpha=A.opacity,d.lineWidth=A.weight,d.strokeStyle=A.color,d.lineCap=A.lineCap,d.lineJoin=A.lineJoin,d.stroke())},_onClick:function(d){for(var w=this._map.mouseEventToLayerPoint(d),A,j,V=this._drawFirst;V;V=V.next)A=V.layer,A.options.interactive&&A._containsPoint(w)&&(!(d.type==="click"||d.type==="preclick")||!this._map._draggableMoved(A))&&(j=A);this._fireEvent(j?[j]:!1,d)},_onMouseMove:function(d){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var w=this._map.mouseEventToLayerPoint(d);this._handleMouseHover(d,w)}},_handleMouseOut:function(d){var w=this._hoveredLayer;w&&(mn(this._container,"leaflet-interactive"),this._fireEvent([w],d,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(d,w){if(!this._mouseHoverThrottled){for(var A,j,V=this._drawFirst;V;V=V.next)A=V.layer,A.options.interactive&&A._containsPoint(w)&&(j=A);j!==this._hoveredLayer&&(this._handleMouseOut(d),j&&(tt(this._container,"leaflet-interactive"),this._fireEvent([j],d,"mouseover"),this._hoveredLayer=j)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,d),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(d,w,A){this._map._fireDOMEvent(w,A||w.type,d)},_bringToFront:function(d){var w=d._order;if(w){var A=w.next,j=w.prev;if(A)A.prev=j;else return;j?j.next=A:A&&(this._drawFirst=A),w.prev=this._drawLast,this._drawLast.next=w,w.next=null,this._drawLast=w,this._requestRedraw(d)}},_bringToBack:function(d){var w=d._order;if(w){var A=w.next,j=w.prev;if(j)j.next=A;else return;A?A.prev=j:j&&(this._drawLast=j),w.prev=null,w.next=this._drawFirst,this._drawFirst.prev=w,this._drawFirst=w,this._requestRedraw(d)}}});function $R(d){return Qe.canvas?new GR(d):null}var vx=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(d){return document.createElement("<lvml:"+d+' class="lvml">')}}catch{}return function(d){return document.createElement("<"+d+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),dz={_initContainer:function(){this._container=Gt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Sc.prototype._update.call(this),this.fire("update"))},_initPath:function(d){var w=d._container=vx("shape");tt(w,"leaflet-vml-shape "+(this.options.className||"")),w.coordsize="1 1",d._path=vx("path"),w.appendChild(d._path),this._updateStyle(d),this._layers[c(d)]=d},_addPath:function(d){var w=d._container;this._container.appendChild(w),d.options.interactive&&d.addInteractiveTarget(w)},_removePath:function(d){var w=d._container;Rn(w),d.removeInteractiveTarget(w),delete this._layers[c(d)]},_updateStyle:function(d){var w=d._stroke,A=d._fill,j=d.options,V=d._container;V.stroked=!!j.stroke,V.filled=!!j.fill,j.stroke?(w||(w=d._stroke=vx("stroke")),V.appendChild(w),w.weight=j.weight+"px",w.color=j.color,w.opacity=j.opacity,j.dashArray?w.dashStyle=T(j.dashArray)?j.dashArray.join(" "):j.dashArray.replace(/( *, *)/g," "):w.dashStyle="",w.endcap=j.lineCap.replace("butt","flat"),w.joinstyle=j.lineJoin):w&&(V.removeChild(w),d._stroke=null),j.fill?(A||(A=d._fill=vx("fill")),V.appendChild(A),A.color=j.fillColor||j.color,A.opacity=j.fillOpacity):A&&(V.removeChild(A),d._fill=null)},_updateCircle:function(d){var w=d._point.round(),A=Math.round(d._radius),j=Math.round(d._radiusY||A);this._setPath(d,d._empty()?"M0 0":"AL "+w.x+","+w.y+" "+A+","+j+" 0,"+65535*360)},_setPath:function(d,w){d._path.v=w},_bringToFront:function(d){Bn(d._container)},_bringToBack:function(d){ni(d._container)}},Bb=Qe.vml?vx:gr,yx=Sc.extend({_initContainer:function(){this._container=Bb("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Bb("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Rn(this._container),Le(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Sc.prototype._update.call(this);var d=this._bounds,w=d.getSize(),A=this._container;(!this._svgSize||!this._svgSize.equals(w))&&(this._svgSize=w,A.setAttribute("width",w.x),A.setAttribute("height",w.y)),je(A,d.min),A.setAttribute("viewBox",[d.min.x,d.min.y,w.x,w.y].join(" ")),this.fire("update")}},_initPath:function(d){var w=d._path=Bb("path");d.options.className&&tt(w,d.options.className),d.options.interactive&&tt(w,"leaflet-interactive"),this._updateStyle(d),this._layers[c(d)]=d},_addPath:function(d){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(d._path),d.addInteractiveTarget(d._path)},_removePath:function(d){Rn(d._path),d.removeInteractiveTarget(d._path),delete this._layers[c(d)]},_updatePath:function(d){d._project(),d._update()},_updateStyle:function(d){var w=d._path,A=d.options;w&&(A.stroke?(w.setAttribute("stroke",A.color),w.setAttribute("stroke-opacity",A.opacity),w.setAttribute("stroke-width",A.weight),w.setAttribute("stroke-linecap",A.lineCap),w.setAttribute("stroke-linejoin",A.lineJoin),A.dashArray?w.setAttribute("stroke-dasharray",A.dashArray):w.removeAttribute("stroke-dasharray"),A.dashOffset?w.setAttribute("stroke-dashoffset",A.dashOffset):w.removeAttribute("stroke-dashoffset")):w.setAttribute("stroke","none"),A.fill?(w.setAttribute("fill",A.fillColor||A.color),w.setAttribute("fill-opacity",A.fillOpacity),w.setAttribute("fill-rule",A.fillRule||"evenodd")):w.setAttribute("fill","none"))},_updatePoly:function(d,w){this._setPath(d,xr(d._parts,w))},_updateCircle:function(d){var w=d._point,A=Math.max(Math.round(d._radius),1),j=Math.max(Math.round(d._radiusY),1)||A,V="a"+A+","+j+" 0 1,0 ",K=d._empty()?"M0 0":"M"+(w.x-A)+","+w.y+V+A*2+",0 "+V+-A*2+",0 ";this._setPath(d,K)},_setPath:function(d,w){d._path.setAttribute("d",w)},_bringToFront:function(d){Bn(d._path)},_bringToBack:function(d){ni(d._path)}});Qe.vml&&yx.include(dz);function qR(d){return Qe.svg||Qe.vml?new yx(d):null}Vt.include({getRenderer:function(d){var w=d.options.renderer||this._getPaneRenderer(d.options.pane)||this.options.renderer||this._renderer;return w||(w=this._renderer=this._createRenderer()),this.hasLayer(w)||this.addLayer(w),w},_getPaneRenderer:function(d){if(d==="overlayPane"||d===void 0)return!1;var w=this._paneRenderers[d];return w===void 0&&(w=this._createRenderer({pane:d}),this._paneRenderers[d]=w),w},_createRenderer:function(d){return this.options.preferCanvas&&$R(d)||qR(d)}});var XR=m.extend({initialize:function(d,w){m.prototype.initialize.call(this,this._boundsToLatLngs(d),w)},setBounds:function(d){return this.setLatLngs(this._boundsToLatLngs(d))},_boundsToLatLngs:function(d){return d=De(d),[d.getSouthWest(),d.getNorthWest(),d.getNorthEast(),d.getSouthEast()]}});function hz(d,w){return new XR(d,w)}yx.create=Bb,yx.pointsToPath=xr,v.geometryToLayer=b,v.coordsToLatLng=R,v.coordsToLatLngs=O,v.latLngToCoords=H,v.latLngsToCoords=q,v.getFeature=Y,v.asFeature=te,Vt.mergeOptions({boxZoom:!0});var YR=ri.extend({initialize:function(d){this._map=d,this._container=d._container,this._pane=d._panes.overlayPane,this._resetStateTimeout=0,d.on("unload",this._destroy,this)},addHooks:function(){mt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Le(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Rn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(d){if(!d.shiftKey||d.which!==1&&d.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ss(),ot(),this._startPoint=this._map.mouseEventToContainerPoint(d),mt(document,{contextmenu:Yi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(d){this._moved||(this._moved=!0,this._box=Gt("div","leaflet-zoom-box",this._container),tt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(d);var w=new Ee(this._point,this._startPoint),A=w.getSize();je(this._box,w.min),this._box.style.width=A.x+"px",this._box.style.height=A.y+"px"},_finish:function(){this._moved&&(Rn(this._box),mn(this._container,"leaflet-crosshair")),sf(),kn(),Le(document,{contextmenu:Yi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(d){if(!(d.which!==1&&d.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var w=new Oe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(w).fire("boxzoomend",{boxZoomBounds:w})}},_onKeyDown:function(d){d.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Vt.addInitHook("addHandler","boxZoom",YR),Vt.mergeOptions({doubleClickZoom:!0});var KR=ri.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(d){var w=this._map,A=w.getZoom(),j=w.options.zoomDelta,V=d.originalEvent.shiftKey?A-j:A+j;w.options.doubleClickZoom==="center"?w.setZoom(V):w.setZoomAround(d.containerPoint,V)}});Vt.addInitHook("addHandler","doubleClickZoom",KR),Vt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ZR=ri.extend({addHooks:function(){if(!this._draggable){var d=this._map;this._draggable=new pl(d._mapPane,d._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),d.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),d.on("zoomend",this._onZoomEnd,this),d.whenReady(this._onZoomEnd,this))}tt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mn(this._map._container,"leaflet-grab"),mn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var d=this._map;if(d._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var w=De(this._map.options.maxBounds);this._offsetLimit=_e(this._map.latLngToContainerPoint(w.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(w.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;d.fire("movestart").fire("dragstart"),d.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(d){if(this._map.options.inertia){var w=this._lastTime=+new Date,A=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(A),this._times.push(w),this._prunePositions(w)}this._map.fire("move",d).fire("drag",d)},_prunePositions:function(d){for(;this._positions.length>1&&d-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var d=this._map.getSize().divideBy(2),w=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=w.subtract(d).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(d,w){return d-(d-w)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var d=this._draggable._newPos.subtract(this._draggable._startPos),w=this._offsetLimit;d.x<w.min.x&&(d.x=this._viscousLimit(d.x,w.min.x)),d.y<w.min.y&&(d.y=this._viscousLimit(d.y,w.min.y)),d.x>w.max.x&&(d.x=this._viscousLimit(d.x,w.max.x)),d.y>w.max.y&&(d.y=this._viscousLimit(d.y,w.max.y)),this._draggable._newPos=this._draggable._startPos.add(d)}},_onPreDragWrap:function(){var d=this._worldWidth,w=Math.round(d/2),A=this._initialWorldOffset,j=this._draggable._newPos.x,V=(j-w+A)%d+w-A,K=(j+w+A)%d-w-A,ie=Math.abs(V+A)<Math.abs(K+A)?V:K;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ie},_onDragEnd:function(d){var w=this._map,A=w.options,j=!A.inertia||d.noInertia||this._times.length<2;if(w.fire("dragend",d),j)w.fire("moveend");else{this._prunePositions(+new Date);var V=this._lastPos.subtract(this._positions[0]),K=(this._lastTime-this._times[0])/1e3,ie=A.easeLinearity,ge=V.multiplyBy(ie/K),we=ge.distanceTo([0,0]),Se=Math.min(A.inertiaMaxSpeed,we),Ve=ge.multiplyBy(Se/we),ft=Se/(A.inertiaDeceleration*ie),Ft=Ve.multiplyBy(-ft/2).round();!Ft.x&&!Ft.y?w.fire("moveend"):(Ft=w._limitOffset(Ft,w.options.maxBounds),se(function(){w.panBy(Ft,{duration:ft,easeLinearity:ie,noMoveStart:!0,animate:!0})}))}}});Vt.addInitHook("addHandler","dragging",ZR),Vt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var QR=ri.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(d){this._map=d,this._setPanDelta(d.options.keyboardPanDelta),this._setZoomDelta(d.options.zoomDelta)},addHooks:function(){var d=this._map._container;d.tabIndex<=0&&(d.tabIndex="0"),mt(d,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Le(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var d=document.body,w=document.documentElement,A=d.scrollTop||w.scrollTop,j=d.scrollLeft||w.scrollLeft;this._map._container.focus(),window.scrollTo(j,A)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(d){var w=this._panKeys={},A=this.keyCodes,j,V;for(j=0,V=A.left.length;j<V;j++)w[A.left[j]]=[-1*d,0];for(j=0,V=A.right.length;j<V;j++)w[A.right[j]]=[d,0];for(j=0,V=A.down.length;j<V;j++)w[A.down[j]]=[0,d];for(j=0,V=A.up.length;j<V;j++)w[A.up[j]]=[0,-1*d]},_setZoomDelta:function(d){var w=this._zoomKeys={},A=this.keyCodes,j,V;for(j=0,V=A.zoomIn.length;j<V;j++)w[A.zoomIn[j]]=d;for(j=0,V=A.zoomOut.length;j<V;j++)w[A.zoomOut[j]]=-d},_addHooks:function(){mt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Le(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(d){if(!(d.altKey||d.ctrlKey||d.metaKey)){var w=d.keyCode,A=this._map,j;if(w in this._panKeys){if(!A._panAnim||!A._panAnim._inProgress)if(j=this._panKeys[w],d.shiftKey&&(j=he(j).multiplyBy(3)),A.options.maxBounds&&(j=A._limitOffset(he(j),A.options.maxBounds)),A.options.worldCopyJump){var V=A.wrapLatLng(A.unproject(A.project(A.getCenter()).add(j)));A.panTo(V)}else A.panBy(j)}else if(w in this._zoomKeys)A.setZoom(A.getZoom()+(d.shiftKey?3:1)*this._zoomKeys[w]);else if(w===27&&A._popup&&A._popup.options.closeOnEscapeKey)A.closePopup();else return;Yi(d)}}});Vt.addInitHook("addHandler","keyboard",QR),Vt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var JR=ri.extend({addHooks:function(){mt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Le(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(d){var w=qu(d),A=this._map.options.wheelDebounceTime;this._delta+=w,this._lastMousePos=this._map.mouseEventToContainerPoint(d),this._startTime||(this._startTime=+new Date);var j=Math.max(A-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),j),Yi(d)},_performZoom:function(){var d=this._map,w=d.getZoom(),A=this._map.options.zoomSnap||0;d._stop();var j=this._delta/(this._map.options.wheelPxPerZoomLevel*4),V=4*Math.log(2/(1+Math.exp(-Math.abs(j))))/Math.LN2,K=A?Math.ceil(V/A)*A:V,ie=d._limitZoom(w+(this._delta>0?K:-K))-w;this._delta=0,this._startTime=null,ie&&(d.options.scrollWheelZoom==="center"?d.setZoom(w+ie):d.setZoomAround(this._lastMousePos,w+ie))}});Vt.addInitHook("addHandler","scrollWheelZoom",JR);var fz=600;Vt.mergeOptions({tapHold:Qe.touchNative&&Qe.safari&&Qe.mobile,tapTolerance:15});var ek=ri.extend({addHooks:function(){mt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Le(this._map._container,"touchstart",this._onDown,this)},_onDown:function(d){if(clearTimeout(this._holdTimeout),d.touches.length===1){var w=d.touches[0];this._startPos=this._newPos=new Q(w.clientX,w.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(mt(document,"touchend",Hr),mt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",w))},this),fz),mt(document,"touchend touchcancel contextmenu",this._cancel,this),mt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function d(){Le(document,"touchend",Hr),Le(document,"touchend touchcancel",d)},_cancel:function(){clearTimeout(this._holdTimeout),Le(document,"touchend touchcancel contextmenu",this._cancel,this),Le(document,"touchmove",this._onMove,this)},_onMove:function(d){var w=d.touches[0];this._newPos=new Q(w.clientX,w.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(d,w){var A=new MouseEvent(d,{bubbles:!0,cancelable:!0,view:window,screenX:w.screenX,screenY:w.screenY,clientX:w.clientX,clientY:w.clientY});A._simulated=!0,w.target.dispatchEvent(A)}});Vt.addInitHook("addHandler","tapHold",ek),Vt.mergeOptions({touchZoom:Qe.touch,bounceAtZoomLimits:!0});var tk=ri.extend({addHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),mt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mn(this._map._container,"leaflet-touch-zoom"),Le(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(d){var w=this._map;if(!(!d.touches||d.touches.length!==2||w._animatingZoom||this._zooming)){var A=w.mouseEventToContainerPoint(d.touches[0]),j=w.mouseEventToContainerPoint(d.touches[1]);this._centerPoint=w.getSize()._divideBy(2),this._startLatLng=w.containerPointToLatLng(this._centerPoint),w.options.touchZoom!=="center"&&(this._pinchStartLatLng=w.containerPointToLatLng(A.add(j)._divideBy(2))),this._startDist=A.distanceTo(j),this._startZoom=w.getZoom(),this._moved=!1,this._zooming=!0,w._stop(),mt(document,"touchmove",this._onTouchMove,this),mt(document,"touchend touchcancel",this._onTouchEnd,this),Hr(d)}},_onTouchMove:function(d){if(!(!d.touches||d.touches.length!==2||!this._zooming)){var w=this._map,A=w.mouseEventToContainerPoint(d.touches[0]),j=w.mouseEventToContainerPoint(d.touches[1]),V=A.distanceTo(j)/this._startDist;if(this._zoom=w.getScaleZoom(V,this._startZoom),!w.options.bounceAtZoomLimits&&(this._zoom<w.getMinZoom()&&V<1||this._zoom>w.getMaxZoom()&&V>1)&&(this._zoom=w._limitZoom(this._zoom)),w.options.touchZoom==="center"){if(this._center=this._startLatLng,V===1)return}else{var K=A._add(j)._divideBy(2)._subtract(this._centerPoint);if(V===1&&K.x===0&&K.y===0)return;this._center=w.unproject(w.project(this._pinchStartLatLng,this._zoom).subtract(K),this._zoom)}this._moved||(w._moveStart(!0,!1),this._moved=!0),ee(this._animRequest);var ie=o(w._move,w,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=se(ie,this,!0),Hr(d)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ee(this._animRequest),Le(document,"touchmove",this._onTouchMove,this),Le(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Vt.addInitHook("addHandler","touchZoom",tk),Vt.BoxZoom=YR,Vt.DoubleClickZoom=KR,Vt.Drag=ZR,Vt.Keyboard=QR,Vt.ScrollWheelZoom=JR,Vt.TapHold=ek,Vt.TouchZoom=tk,t.Bounds=Ee,t.Browser=Qe,t.CRS=Te,t.Canvas=GR,t.Circle=Ku,t.CircleMarker=vl,t.Class=de,t.Control=Ki,t.DivIcon=Fs,t.DivOverlay=Yn,t.DomEvent=js,t.DomUtil=kr,t.Draggable=pl,t.Evented=oe,t.FeatureGroup=zo,t.GeoJSON=v,t.GridLayer=Wo,t.Handler=ri,t.Icon=Yu,t.ImageOverlay=ve,t.LatLng=ze,t.LatLngBounds=Oe,t.Layer=Mr,t.LayerGroup=Aa,t.LineUtil=Lb,t.Map=Vt,t.Marker=ii,t.Mixin=Ob,t.Path=Vo,t.Point=Q,t.PolyUtil=hx,t.Polygon=m,t.Polyline=a,t.Popup=Ls,t.PosAnimation=dx,t.Projection=px,t.Rectangle=XR,t.Renderer=Sc,t.SVG=yx,t.SVGOverlay=Bt,t.TileLayer=Qu,t.Tooltip=un,t.Transformation=st,t.Util=ce,t.VideoOverlay=Re,t.bind=o,t.bounds=_e,t.canvas=$R,t.circle=$,t.circleMarker=Yt,t.control=cf,t.divIcon=Zu,t.extend=s,t.featureGroup=Ho,t.geoJSON=le,t.geoJson=me,t.gridLayer=vA,t.icon=gx,t.imageOverlay=Ie,t.latLng=be,t.latLngBounds=De,t.layerGroup=Si,t.map=kb,t.marker=xA,t.point=he,t.polygon=x,t.polyline=u,t.popup=Bs,t.rectangle=hz,t.setOptions=S,t.stamp=c,t.svg=qR,t.svgOverlay=wt,t.tileLayer=VR,t.tooltip=Wr,t.transformation=gt,t.version=r,t.videoOverlay=Ne;var mz=window.L;t.noConflict=function(){return window.L=mz,this},window.L=t})})(Z3,Z3.exports);var Sle=Z3.exports;const dd=JE(Sle),Nle="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",Tle="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",Ple="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";delete dd.Icon.Default.prototype._getIconUrl;dd.Icon.Default.mergeOptions({iconUrl:Tle,iconRetinaUrl:Nle,shadowUrl:Ple});function Ile({onLocationSelect:n,initialLocation:e,raioValidacaoMetros:t=100}){const r=M.useRef(null),s=M.useRef(null),i=M.useRef(null),o=M.useRef(null),[l,c]=M.useState(e?[e.lat,e.lng]:null),[f,g]=M.useState(""),[y,_]=M.useState(!1),E=(S,I)=>{i.current&&i.current.remove();const N=dd.circle(I,{color:"#22c55e",fillColor:"#22c55e",fillOpacity:.15,weight:2,radius:t}).addTo(S);i.current=N;const k=N.getBounds();S.fitBounds(k,{padding:[50,50]})};M.useEffect(()=>{if(!o.current||r.current)return;const S=e?[e.lat,e.lng]:[-29.6869,-53.8148],I=dd.map(o.current).setView(S,15);if(dd.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(I),l){const N=dd.marker(l).addTo(I);s.current=N,E(I,l)}return I.on("click",async N=>{const{lat:k,lng:T}=N.latlng,D=[k,T];if(c(D),s.current)s.current.setLatLng(D);else{const U=dd.marker(D).addTo(I);s.current=U}E(I,D);try{const z=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${k}&lon=${T}`)).json();n({address:z.display_name||"Local selecionado",lat:k,lng:T})}catch(U){console.error("Erro ao buscar endereo:",U),n({address:"Local selecionado",lat:k,lng:T})}}),r.current=I,()=>{r.current&&(r.current.remove(),r.current=null)}},[]),M.useEffect(()=>{r.current&&l&&E(r.current,l)},[t]);const P=async()=>{if(!(!f.trim()||!r.current)){_(!0);try{const I=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(f)}&limit=1`)).json();if(I&&I.length>0){const{lat:N,lon:k,display_name:T}=I[0],D=[parseFloat(N),parseFloat(k)];if(c(D),s.current)s.current.setLatLng(D);else{const U=dd.marker(D).addTo(r.current);s.current=U}E(r.current,D),n({address:T,lat:parseFloat(N),lng:parseFloat(k)})}else alert("Local no encontrado. Tente outro termo de busca.")}catch(S){console.error("Erro ao buscar local:",S),alert("Erro ao buscar local. Tente novamente.")}finally{_(!1)}}};return h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("div",{className:"relative flex-1",children:[h.jsx(Q1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),h.jsx(Qt,{placeholder:"Pesquise um endereo ou local...",value:f,onChange:S=>g(S.target.value),onKeyPress:S=>S.key==="Enter"&&P(),className:"pl-9"})]}),h.jsx(Je,{onClick:P,disabled:y||!f.trim(),variant:"outline",children:y?"Buscando...":"Buscar"})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[h.jsx(fp,{className:"w-4 h-4"}),h.jsx("span",{children:l?`Coordenadas: ${l[0].toFixed(6)}, ${l[1].toFixed(6)}`:"Clique no mapa para selecionar a localizao"})]}),h.jsx("div",{ref:o,className:"h-[400px] rounded-lg overflow-hidden border",style:{zIndex:0}}),l&&h.jsxs("div",{className:"flex items-center gap-2 text-sm p-3 bg-green-500/10 rounded-lg border border-green-500/20",children:[h.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),h.jsxs("span",{className:"text-muted-foreground",children:["rea verde = Raio de validao GPS de ",h.jsxs("strong",{children:[t,"m"]})," (",(t/1e3).toFixed(t>=1e3?1:2),"km)"]})]}),h.jsx("p",{className:"text-xs text-muted-foreground",children:" Pesquise um endereo ou clique diretamente no mapa para definir a localizao do evento"})]})}function Rle(){const n=ul(),e=M.useRef(null),[t,r]=M.useState("Nome do Evento"),[s,i]=M.useState(!1),[o,l]=M.useState(""),[c,f]=M.useState(""),[g,y]=M.useState(),[_,E]=M.useState(""),[P,S]=M.useState(null),[I,N]=M.useState(null),[k,T]=M.useState(100),[D,U]=M.useState(""),[z,F]=M.useState([]),[X,Z]=M.useState(""),[ne,se]=M.useState(0),[ee,ce]=M.useState(0),[de,re]=M.useState(0),[fe,oe]=M.useState(!1),[Q,ue]=M.useState(""),[he,Ee]=M.useState(""),[_e,Oe]=M.useState(""),[De,ze]=M.useState(""),[be,Te]=M.useState(null),[Ze,Nt]=M.useState(!1),[ut,st]=M.useState(""),[gt,at]=M.useState(""),[$n,gr]=M.useState(""),[xr,hn]=M.useState([]),[Ht,Et]=M.useState(!1);useEffect(()=>{(async()=>{try{const{data:xt,error:jt}=await Ce.from("campus").select("nome").eq("ativo",!0).order("nome",{ascending:!0});jt?console.error("Erro ao carregar campus:",jt):F(xt.map($i=>$i.nome))}catch(xt){console.error("Erro ao buscar campus:",xt)}})()},[]);const pc=()=>{var We;(We=e.current)==null||We.click()},$e=async We=>{var $i;const xt=($i=We.target.files)==null?void 0:$i[0];if(!xt)return;if(!xt.type.startsWith("image/")){xe.error("Por favor, selecione uma imagem");return}if(xt.size>5*1024*1024){xe.error("A imagem deve ter no mximo 5MB");return}Te(xt);const jt=new FileReader;jt.onloadend=()=>{ze(jt.result)},jt.readAsDataURL(xt)},dl=()=>{if(!ut.trim()){xe.error("Digite o nome do palestrante");return}if(!gt.trim()){xe.error("Digite o tema da palestra");return}if(!$n.trim()){xe.error("Digite a descrio do que ser apresentado");return}if(xr.some(We=>We.nome===ut)){xe.error("Este palestrante j foi adicionado");return}hn([...xr,{nome:ut,tema:gt,descricao:$n}]),st(""),at(""),gr(""),xe.success("Palestrante adicionado!")},Jh=We=>{hn(xr.filter(xt=>xt.nome!==We))},Gi=async()=>{var We;if(!be)return null;Nt(!0);try{const{data:{session:xt}}=await Ce.auth.getSession();if(!((We=xt==null?void 0:xt.user)!=null&&We.email))throw new Error("Usurio no autenticado");const jt=be.name.split(".").pop(),Ai=`banners/${`${Date.now()}-${Math.random().toString(36).slice(2)}.${jt}`}`;console.log("Tentando fazer upload:",{bucket:"eventos",filePath:Ai,fileSize:be.size,fileType:be.type});const{data:gc,error:fn}=await Ce.storage.from("eventos").upload(Ai,be,{cacheControl:"3600",upsert:!1});if(fn)throw console.error("Erro detalhado do upload:",fn),fn;console.log("Upload bem-sucedido:",gc);const{data:{publicUrl:Me}}=Ce.storage.from("eventos").getPublicUrl(Ai);return console.log("URL pblica gerada:",Me),Me}catch(xt){console.error("Erro ao fazer upload do banner:",xt);const jt=xt instanceof Error?xt.message:"Erro desconhecido";return jt.includes("not found")||jt.includes("does not exist")?xe.error(" Bucket 'eventos' no encontrado. Crie o bucket no Supabase Storage."):jt.includes("permission")||jt.includes("policy")?xe.error(" Sem permisso para upload. Configure as polticas do bucket."):jt.includes("size")?xe.error(" Arquivo muito grande. Mximo: 5MB"):xe.error(` Erro ao fazer upload: ${jt}`),null}finally{Nt(!1)}},ef=async()=>{var We;if(t==="Nome do Evento"||!t.trim()){xe.error("Por favor, defina um ttulo para o evento"),i(!0);return}if(!o.trim()){xe.error("Por favor, adicione uma descrio");return}if(!c){xe.error("Por favor, selecione o tipo de evento");return}if(!(g!=null&&g.from)||!(g!=null&&g.to)){xe.error("Por favor, selecione o perodo do evento");return}if(!_.trim()||!P||!I){xe.error("Por favor, selecione o local do evento no mapa");return}if(!ne||ne<=0){xe.error("Por favor, informe a capacidade mxima (maior que 0)");return}Et(!0);try{const{data:{session:xt}}=await Ce.auth.getSession();if(!((We=xt==null?void 0:xt.user)!=null&&We.email)){xe.error("Voc precisa estar logado"),n("/login");return}const{data:jt,error:$i}=await Ce.from("usuarios").select("nome_completo").eq("email",xt.user.email).single();let Ai=xt.user.email;if($i||!jt){const{error:In}=await Ce.from("usuarios").insert({email:xt.user.email,nome_completo:xt.user.email,perfil:"organizador"});In&&console.error("Erro ao criar usurio:",In)}else Ai=jt.nome_completo||xt.user.email;let gc=null;be&&(xe.info("Fazendo upload do banner..."),gc=await Gi(),gc||xe.warning("Evento ser criado sem banner"));const{data:fn,error:Me}=await Ce.from("eventos").insert({titulo:t.trim(),descricao:o.trim(),tipo:c,data_inicio:g.from.toISOString(),data_fim:g.to.toISOString(),local:_.trim(),latitude:P,longitude:I,raio_validacao_metros:k,campus:(D==null?void 0:D.trim())||null,sala:(X==null?void 0:X.trim())||null,capacidade_maxima:ne,vagas_disponiveis:ne,organizador_email:xt.user.email,organizador_nome:Ai,carga_horaria:ee||null,valor:de||0,gera_certificado:fe,banner_url:gc,categoria:(Q==null?void 0:Q.trim())||null,publico_alvo:(he==null?void 0:he.trim())||null,requisitos:(_e==null?void 0:_e.trim())||null,status:"pendente"}).select().single();if(Me)throw console.error("Erro do Supabase:",Me),new Error(Me.message);if(xr.length>0&&fn){const In=xr.map((cn,xc)=>({evento_id:fn.id,nome:cn.nome,tema:cn.tema,descricao:cn.descricao,ordem:xc})),{error:ln}=await Ce.from("palestrantes").insert(In);ln&&(console.error("Erro ao salvar palestrantes:",ln),xe.warning("Evento criado, mas houve erro ao salvar alguns palestrantes"))}xe.success(" Evento criado com sucesso! Aguardando aprovao."),setTimeout(()=>{n("/organizador/meus-eventos")},1e3)}catch(xt){console.error("Erro ao criar evento:",xt);const jt=xt instanceof Error?xt.message:"Erro desconhecido";jt.includes("permission denied")?xe.error(" Erro de permisso. Verifique as polticas de RLS no Supabase."):jt.includes('relation "eventos" does not exist')?xe.error(" Tabela 'eventos' no encontrada. Execute o script SQL do banco de dados."):xe.error(` Erro ao criar evento: ${jt}`)}finally{Et(!1)}},ys=()=>{n("/organizador/meus-eventos")};return h.jsxs("div",{className:"space-y-6 max-w-4xl",children:[h.jsx("h1",{className:"text-3xl font-light",children:"Criar Evento"}),h.jsxs(Fe,{className:"overflow-hidden",children:[h.jsxs("div",{className:"relative h-48 bg-muted flex flex-col items-center justify-center bg-cover bg-center gap-2",style:{backgroundImage:De?`url(${De})`:"none"},children:[h.jsx("input",{ref:e,type:"file",accept:"image/*",onChange:$e,className:"hidden"}),h.jsxs(Je,{variant:"outline",onClick:pc,disabled:Ze,className:"bg-background/80 backdrop-blur-sm",children:[h.jsx(UI,{className:"w-4 h-4 mr-2"}),Ze?"Enviando...":De?"Trocar Banner":"Adicionar Banner"]}),!De&&h.jsx("p",{className:"text-xs text-muted-foreground bg-background/80 px-3 py-1 rounded-full backdrop-blur-sm",children:"Opcional - Imagem at 5MB"})]}),h.jsxs("div",{className:"p-8 space-y-6",children:[h.jsx("div",{className:"flex items-center gap-3",children:s?h.jsx(Qt,{value:t,onChange:We=>r(We.target.value),onBlur:()=>i(!1),onKeyPress:We=>We.key==="Enter"&&i(!1),className:"text-2xl font-normal",autoFocus:!0}):h.jsxs(h.Fragment,{children:[h.jsx("h2",{className:"text-2xl font-normal",children:t}),h.jsx(Je,{variant:"ghost",size:"sm",onClick:()=>i(!0),children:h.jsx(GQ,{className:"w-4 h-4"})})]})}),h.jsxs("div",{children:[h.jsx(Tn,{children:"Tipo de Evento"}),h.jsxs(Qs,{value:c,onValueChange:f,children:[h.jsx(ks,{children:h.jsx(Js,{placeholder:"Selecione o tipo"})}),h.jsxs(Ms,{children:[h.jsx(Pt,{value:"palestra",children:"Palestra"}),h.jsx(Pt,{value:"workshop",children:"Workshop"}),h.jsx(Pt,{value:"seminario",children:"Seminrio"}),h.jsx(Pt,{value:"conferencia",children:"Conferncia"}),h.jsx(Pt,{value:"curso",children:"Curso"}),h.jsx(Pt,{value:"outro",children:"Outro"})]})]})]}),h.jsxs("div",{children:[h.jsx(Tn,{children:"Descrio do Evento"}),h.jsx(Fg,{placeholder:"Descreva o evento...",rows:4,value:o,onChange:We=>l(We.target.value)})]}),h.jsxs("div",{children:[h.jsx(Tn,{children:"Perodo do Evento"}),h.jsxs(rF,{children:[h.jsx(sF,{asChild:!0,children:h.jsxs(Je,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[h.jsx(or,{className:"mr-2 h-4 w-4"}),g!=null&&g.from?g.to?h.jsxs(h.Fragment,{children:[ht(g.from,"dd 'de' MMMM",{locale:Xt})," -"," ",ht(g.to,"dd 'de' MMMM 'de' yyyy",{locale:Xt})]}):ht(g.from,"dd 'de' MMMM 'de' yyyy",{locale:Xt}):h.jsx("span",{children:"Selecione o perodo"})]})}),h.jsx(xR,{className:"w-auto p-0",align:"start",children:h.jsx(pR,{initialFocus:!0,mode:"range",defaultMonth:g==null?void 0:g.from,selected:g,onSelect:y,numberOfMonths:2,locale:Xt})})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx(Tn,{children:"Localizao do Evento"}),h.jsx(Ile,{onLocationSelect:We=>{E(We.address),S(We.lat),N(We.lng)},initialLocation:P&&I?{lat:P,lng:I}:void 0,raioValidacaoMetros:k})]}),_&&h.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[h.jsx("p",{className:"text-sm font-medium",children:"Endereo selecionado:"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:_})]}),h.jsxs("div",{children:[h.jsx(Tn,{children:"Raio de Validao GPS"}),h.jsx("div",{className:"flex gap-3 items-start",children:h.jsxs("div",{className:"flex-1",children:[h.jsxs(Qs,{value:k.toString(),onValueChange:We=>T(Number(We)),children:[h.jsx(ks,{children:h.jsx(Js,{placeholder:"Selecione o raio"})}),h.jsxs(Ms,{children:[h.jsx(Pt,{value:"50",children:"50 metros (Dentro do prdio)"}),h.jsx(Pt,{value:"100",children:"100 metros (No campus) - Recomendado"}),h.jsx(Pt,{value:"200",children:"200 metros (rea prxima)"}),h.jsx(Pt,{value:"500",children:"500 metros (Quarteiro)"}),h.jsx(Pt,{value:"1000",children:"1 km (Eventos externos)"}),h.jsx(Pt,{value:"2000",children:"2 km (Eventos em rea ampla)"})]})]}),h.jsxs("p",{className:"text-xs text-muted-foreground mt-1.5",children:[" Alunos devem estar a at ",h.jsxs("strong",{children:[k,"m"]})," (",(k/1e3).toFixed(k>=1e3?1:2),"km) do local para confirmar presena"]})]})})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(Tn,{children:"Campus (opcional)"}),h.jsxs(Qs,{value:D,onValueChange:U,children:[h.jsx(ks,{children:h.jsx(Js,{placeholder:"Selecione o campus"})}),h.jsxs(Ms,{children:[h.jsx(Pt,{value:"",children:"Nenhum"}),z.map(We=>h.jsx(Pt,{value:We,children:We},We))]})]})]}),h.jsxs("div",{children:[h.jsx(Tn,{children:"Sala (opcional)"}),h.jsx(Qt,{placeholder:"Ex: Sala 201",value:X,onChange:We=>Z(We.target.value)})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsx(Tn,{children:"Capacidade Mxima"}),h.jsx(Qt,{type:"number",placeholder:"Ex: 100",value:ne||"",onChange:We=>se(Number(We.target.value))})]}),h.jsxs("div",{children:[h.jsx(Tn,{children:"Carga Horria (horas)"}),h.jsx(Qt,{type:"number",placeholder:"Ex: 40",value:ee||"",onChange:We=>ce(Number(We.target.value))})]}),h.jsxs("div",{children:[h.jsx(Tn,{children:"Valor da Inscrio (R$)"}),h.jsx(Qt,{type:"number",step:"0.01",placeholder:"Ex: 50.00 (0 para gratuito)",value:de||"",onChange:We=>re(Number(We.target.value))}),h.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Deixe 0 para evento gratuito"})]})]}),h.jsxs("div",{children:[h.jsx(Tn,{children:"Categoria (opcional)"}),h.jsx(Qt,{placeholder:"Ex: Tecnologia, Educao, Sade",value:Q,onChange:We=>ue(We.target.value)})]}),h.jsxs("div",{children:[h.jsx(Tn,{children:"Palestrantes"}),h.jsxs("div",{className:"space-y-3 mb-4",children:[h.jsx(Qt,{placeholder:"Nome do palestrante",value:ut,onChange:We=>st(We.target.value)}),h.jsx(Qt,{placeholder:"Tema da apresentao",value:gt,onChange:We=>at(We.target.value)}),h.jsx(Fg,{placeholder:"Descrio do que ser apresentado...",value:$n,onChange:We=>gr(We.target.value),rows:3,onKeyPress:We=>{We.key==="Enter"&&We.ctrlKey&&dl()}}),h.jsx(Je,{type:"button",variant:"outline",onClick:dl,className:"w-full",children:"Adicionar Palestrante"})]}),h.jsxs("div",{className:"space-y-3",children:[xr.map((We,xt)=>h.jsxs("div",{className:"flex items-start gap-3 p-4 border rounded-lg bg-card hover:bg-accent/50 transition-colors",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0 border-2 border-primary/20",children:h.jsx("span",{className:"text-lg font-semibold text-primary",children:We.nome.charAt(0).toUpperCase()})}),h.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[h.jsx("p",{className:"font-medium text-sm",children:We.nome}),h.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:We.tema}),h.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:We.descricao})]}),h.jsx("button",{type:"button",onClick:()=>Jh(We.nome),className:"flex-shrink-0 w-8 h-8 rounded-full hover:bg-destructive/10 hover:text-destructive transition-colors flex items-center justify-center",children:h.jsx(E5,{className:"w-4 h-4"})})]},xt)),xr.length===0&&h.jsx("p",{className:"text-sm text-muted-foreground text-center py-4 border border-dashed rounded-lg",children:"Nenhum palestrante adicionado"})]})]}),h.jsxs("div",{children:[h.jsx(Tn,{children:"Pblico Alvo (opcional)"}),h.jsx(Qt,{placeholder:"Ex: Estudantes de graduao, Professores",value:he,onChange:We=>Ee(We.target.value)})]}),h.jsxs("div",{children:[h.jsx(Tn,{children:"Requisitos (opcional)"}),h.jsx(Fg,{placeholder:"Requisitos necessrios para participar...",rows:3,value:_e,onChange:We=>Oe(We.target.value)})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"checkbox",id:"certificado",checked:fe,onChange:We=>oe(We.target.checked),className:"w-4 h-4"}),h.jsx(Tn,{htmlFor:"certificado",className:"cursor-pointer",children:"Gerar certificado para os participantes"})]}),h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx(Je,{variant:"outline",onClick:ys,disabled:Ht,children:"Cancelar"}),h.jsxs(Je,{variant:"elegant",onClick:ef,disabled:Ht||Ze,children:[h.jsx(b5,{className:"w-4 h-4 mr-2"}),Ht?"Criando...":"Criar Evento"]})]})]})]})]})}var sA="Checkbox",[kle]=ya(sA),[Mle,IR]=kle(sA);function Ole(n){const{__scopeCheckbox:e,checked:t,children:r,defaultChecked:s,disabled:i,form:o,name:l,onCheckedChange:c,required:f,value:g="on",internal_do_not_use_render:y}=n,[_,E]=Rh({prop:t,defaultProp:s??!1,onChange:c,caller:sA}),[P,S]=M.useState(null),[I,N]=M.useState(null),k=M.useRef(!1),T=P?!!o||!!P.closest("form"):!0,D={checked:_,disabled:i,setChecked:E,control:P,setControl:S,name:l,form:o,value:g,hasConsumerStoppedPropagationRef:k,required:f,defaultChecked:Th(s)?!1:s,isFormControl:T,bubbleInput:I,setBubbleInput:N};return h.jsx(Mle,{scope:e,...D,children:Dle(y)?y(D):r})}var LU="CheckboxTrigger",BU=M.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...r},s)=>{const{control:i,value:o,disabled:l,checked:c,required:f,setControl:g,setChecked:y,hasConsumerStoppedPropagationRef:_,isFormControl:E,bubbleInput:P}=IR(LU,n),S=Jt(s,g),I=M.useRef(c);return M.useEffect(()=>{const N=i==null?void 0:i.form;if(N){const k=()=>y(I.current);return N.addEventListener("reset",k),()=>N.removeEventListener("reset",k)}},[i,y]),h.jsx(_t.button,{type:"button",role:"checkbox","aria-checked":Th(c)?"mixed":c,"aria-required":f,"data-state":VU(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:S,onKeyDown:Ue(e,N=>{N.key==="Enter"&&N.preventDefault()}),onClick:Ue(t,N=>{y(k=>Th(k)?!0:!k),P&&E&&(_.current=N.isPropagationStopped(),_.current||N.stopPropagation())})})});BU.displayName=LU;var RR=M.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:f,form:g,...y}=n;return h.jsx(Ole,{__scopeCheckbox:t,checked:s,defaultChecked:i,disabled:l,required:o,onCheckedChange:f,name:r,form:g,value:c,internal_do_not_use_render:({isFormControl:_})=>h.jsxs(h.Fragment,{children:[h.jsx(BU,{...y,ref:e,__scopeCheckbox:t}),_&&h.jsx(HU,{__scopeCheckbox:t})]})})});RR.displayName=sA;var FU="CheckboxIndicator",UU=M.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:r,...s}=n,i=IR(FU,t);return h.jsx(Do,{present:r||Th(i.checked)||i.checked===!0,children:h.jsx(_t.span,{"data-state":VU(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...n.style}})})});UU.displayName=FU;var zU="CheckboxBubbleInput",HU=M.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:l,disabled:c,name:f,value:g,form:y,bubbleInput:_,setBubbleInput:E}=IR(zU,n),P=Jt(t,E),S=l7(i),I=Jj(r);M.useEffect(()=>{const k=_;if(!k)return;const T=window.HTMLInputElement.prototype,U=Object.getOwnPropertyDescriptor(T,"checked").set,z=!s.current;if(S!==i&&U){const F=new Event("click",{bubbles:z});k.indeterminate=Th(i),U.call(k,Th(i)?!1:i),k.dispatchEvent(F)}},[_,S,i,s]);const N=M.useRef(Th(i)?!1:i);return h.jsx(_t.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??N.current,required:l,disabled:c,name:f,value:g,form:y,...e,tabIndex:-1,ref:P,style:{...e.style,...I,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});HU.displayName=zU;function Dle(n){return typeof n=="function"}function Th(n){return n==="indeterminate"}function VU(n){return Th(n)?"indeterminate":n?"checked":"unchecked"}const WU=M.forwardRef(({className:n,...e},t)=>h.jsx(RR,{ref:t,className:et("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...e,children:h.jsx(UU,{className:et("flex items-center justify-center text-current"),children:h.jsx(FI,{className:"h-4 w-4"})})}));WU.displayName=RR.displayName;const UO=[{dia:"Segunda",alunos:[{nome:"Joo Silva",matricula:"20251234",hora:"09:00",status:"presente"},{nome:"Maria Santos",matricula:"20251235",hora:"09:15",status:"presente"}]},{dia:"Tera",alunos:[{nome:"Joo Silva",matricula:"20251234",hora:"09:05",status:"presente"}]}],jle=[{id:1,nome:"Joo Silva",matricula:"20251234",inscricaoStatus:"confirmada",pagamentoStatus:"aprovado"},{id:2,nome:"Maria Santos",matricula:"20251235",inscricaoStatus:"confirmada",pagamentoStatus:"pendente"},{id:3,nome:"Pedro Costa",matricula:"20251236",inscricaoStatus:"pendente",pagamentoStatus:"pendente"}];function Lle(){var y;const{id:n}=RL(),[e,t]=M.useState(!1),[r,s]=M.useState(!1),[i,o]=M.useState("Segunda"),[l,c]=M.useState("todos"),f=()=>{t(!0),xe.success("QR Code gerado com sucesso!")},g=_=>{xe.success("Pagamento validado!")};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h1",{className:"text-3xl font-light",children:"Semana de Tecnologia 2025"}),h.jsx(qt,{children:"12-16/01/2025"})]}),h.jsxs(TR,{defaultValue:"presencas",className:"w-full",children:[h.jsxs(rA,{className:"grid w-full grid-cols-4",children:[h.jsx(ec,{value:"presencas",children:"Presenas"}),h.jsx(ec,{value:"inscricoes",children:"Inscries & Pagamentos"}),h.jsx(ec,{value:"certificados",children:"Certificados"}),h.jsx(ec,{value:"relatorios",children:"Relatrios"})]}),h.jsxs(gh,{value:"presencas",className:"space-y-4",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("div",{className:"flex gap-2",children:UO.map(_=>h.jsx(Je,{variant:i===_.dia?"default":"outline",size:"sm",onClick:()=>o(_.dia),children:_.dia},_.dia))}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(Qs,{value:l,onValueChange:c,children:[h.jsx(ks,{className:"w-40",children:h.jsx(Js,{})}),h.jsxs(Ms,{children:[h.jsx(Pt,{value:"todos",children:"Todos"}),h.jsx(Pt,{value:"presente",children:"Presente"}),h.jsx(Pt,{value:"ausente",children:"Ausente"})]})]}),h.jsxs(Je,{variant:"elegant",onClick:f,children:[h.jsx(Nh,{className:"w-4 h-4 mr-2"}),"Gerar QR Code"]})]})]}),h.jsx(Fe,{className:"p-6",children:h.jsx("div",{className:"space-y-3",children:(y=UO.find(_=>_.dia===i))==null?void 0:y.alunos.map((_,E)=>h.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx(WU,{defaultChecked:_.status==="presente"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-normal",children:_.nome}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:[_.matricula," - ",_.hora]})]})]}),h.jsx(qt,{variant:_.status==="presente"?"default":"outline",children:_.status})]},E))})})]}),h.jsx(gh,{value:"inscricoes",className:"space-y-4",children:h.jsx(Fe,{className:"p-6",children:h.jsx("div",{className:"space-y-3",children:jle.map(_=>h.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-normal",children:_.nome}),h.jsx("p",{className:"text-sm text-muted-foreground",children:_.matricula})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(qt,{variant:_.inscricaoStatus==="confirmada"?"default":"outline",children:_.inscricaoStatus}),h.jsxs(qt,{variant:_.pagamentoStatus==="aprovado"?"default":"outline",children:["Pag: ",_.pagamentoStatus]}),_.pagamentoStatus==="pendente"&&h.jsx(Je,{size:"sm",variant:"elegant",onClick:()=>g(_.id),children:"Validar"})]})]},_.id))})})}),h.jsx(gh,{value:"certificados",className:"space-y-4",children:h.jsx(Fe,{className:"p-6",children:h.jsx("p",{className:"text-muted-foreground",children:"Gerenciamento de certificados em desenvolvimento"})})}),h.jsx(gh,{value:"relatorios",className:"space-y-4",children:h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(Je,{variant:"elegant",children:[h.jsx(BI,{className:"w-4 h-4 mr-2"}),"Exportar Presenas"]}),h.jsxs(Je,{variant:"elegant",children:[h.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Exportar Inscritos"]})]})})})]}),h.jsx(sy,{open:e,onOpenChange:t,children:h.jsxs(M1,{className:"max-w-md",children:[h.jsx(O1,{children:h.jsxs(D1,{children:["QR Code - ",i]})}),h.jsxs("div",{className:"space-y-6 text-center",children:[h.jsx("div",{className:"w-64 h-64 mx-auto bg-white rounded-lg p-4 flex items-center justify-center",children:h.jsx(Nh,{className:"w-full h-full text-background"})}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Chave do dia:"}),h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx("p",{className:"text-2xl font-mono tracking-wider",children:r?"ABC123":""}),h.jsx(Je,{size:"sm",variant:"ghost",onClick:()=>s(!r),children:r?h.jsx(BQ,{className:"w-4 h-4"}):h.jsx(LC,{className:"w-4 h-4"})})]})]}),h.jsxs("div",{className:"p-3 bg-muted rounded-md",children:[h.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Link compartilhvel:"}),h.jsx("code",{className:"text-xs",children:"https://signea.app/validar-presenca?e=1&d=1"})]})]})]})})]})}var Sb={},Ble=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},GU={},jo={};let kR;const Fle=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];jo.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};jo.getSymbolTotalCodewords=function(e){return Fle[e]};jo.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};jo.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');kR=e};jo.isKanjiModeEnabled=function(){return typeof kR<"u"};jo.toSJIS=function(e){return kR(e)};var iA={};(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},n.from=function(r,s){if(n.isValid(r))return r;try{return e(r)}catch{return s}}})(iA);function $U(){this.buffer=[],this.length=0}$U.prototype={get:function(n){const e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Ule=$U;function Nb(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}Nb.prototype.set=function(n,e,t,r){const s=n*this.size+e;this.data[s]=t,r&&(this.reservedBit[s]=!0)};Nb.prototype.get=function(n,e){return this.data[n*this.size+e]};Nb.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};Nb.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};var zle=Nb,qU={};(function(n){const e=jo.getSymbolSize;n.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,i=e(r),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,l=[i-7];for(let c=1;c<s-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},n.getPositions=function(r){const s=[],i=n.getRowColCoords(r),o=i.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||s.push([i[l],i[c]]);return s}})(qU);var XU={};const Hle=jo.getSymbolSize,zO=7;XU.getPositions=function(e){const t=Hle(e);return[[0,0],[t-zO,0],[0,t-zO]]};var YU={};(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},n.from=function(s){return n.isValid(s)?parseInt(s,10):void 0},n.getPenaltyN1=function(s){const i=s.size;let o=0,l=0,c=0,f=null,g=null;for(let y=0;y<i;y++){l=c=0,f=g=null;for(let _=0;_<i;_++){let E=s.get(y,_);E===f?l++:(l>=5&&(o+=e.N1+(l-5)),f=E,l=1),E=s.get(_,y),E===g?c++:(c>=5&&(o+=e.N1+(c-5)),g=E,c=1)}l>=5&&(o+=e.N1+(l-5)),c>=5&&(o+=e.N1+(c-5))}return o},n.getPenaltyN2=function(s){const i=s.size;let o=0;for(let l=0;l<i-1;l++)for(let c=0;c<i-1;c++){const f=s.get(l,c)+s.get(l,c+1)+s.get(l+1,c)+s.get(l+1,c+1);(f===4||f===0)&&o++}return o*e.N2},n.getPenaltyN3=function(s){const i=s.size;let o=0,l=0,c=0;for(let f=0;f<i;f++){l=c=0;for(let g=0;g<i;g++)l=l<<1&2047|s.get(f,g),g>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|s.get(g,f),g>=10&&(c===1488||c===93)&&o++}return o*e.N3},n.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let c=0;c<o;c++)i+=s.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*e.N4};function t(r,s,i){switch(r){case n.Patterns.PATTERN000:return(s+i)%2===0;case n.Patterns.PATTERN001:return s%2===0;case n.Patterns.PATTERN010:return i%3===0;case n.Patterns.PATTERN011:return(s+i)%3===0;case n.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case n.Patterns.PATTERN101:return s*i%2+s*i%3===0;case n.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case n.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}n.applyMask=function(s,i){const o=i.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)i.isReserved(c,l)||i.xor(c,l,t(s,c,l))},n.getBestMask=function(s,i){const o=Object.keys(n.Patterns).length;let l=0,c=1/0;for(let f=0;f<o;f++){i(f),n.applyMask(f,s);const g=n.getPenaltyN1(s)+n.getPenaltyN2(s)+n.getPenaltyN3(s)+n.getPenaltyN4(s);n.applyMask(f,s),g<c&&(c=g,l=f)}return l}})(YU);var oA={};const xh=iA,T_=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],P_=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];oA.getBlocksCount=function(e,t){switch(t){case xh.L:return T_[(e-1)*4+0];case xh.M:return T_[(e-1)*4+1];case xh.Q:return T_[(e-1)*4+2];case xh.H:return T_[(e-1)*4+3];default:return}};oA.getTotalCodewordsCount=function(e,t){switch(t){case xh.L:return P_[(e-1)*4+0];case xh.M:return P_[(e-1)*4+1];case xh.Q:return P_[(e-1)*4+2];case xh.H:return P_[(e-1)*4+3];default:return}};var KU={},aA={};const wv=new Uint8Array(512),kE=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)wv[t]=e,kE[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)wv[t]=wv[t-255]})();aA.log=function(e){if(e<1)throw new Error("log("+e+")");return kE[e]};aA.exp=function(e){return wv[e]};aA.mul=function(e,t){return e===0||t===0?0:wv[kE[e]+kE[t]]};(function(n){const e=aA;n.mul=function(r,s){const i=new Uint8Array(r.length+s.length-1);for(let o=0;o<r.length;o++)for(let l=0;l<s.length;l++)i[o+l]^=e.mul(r[o],s[l]);return i},n.mod=function(r,s){let i=new Uint8Array(r);for(;i.length-s.length>=0;){const o=i[0];for(let c=0;c<s.length;c++)i[c]^=e.mul(s[c],o);let l=0;for(;l<i.length&&i[l]===0;)l++;i=i.slice(l)}return i},n.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let i=0;i<r;i++)s=n.mul(s,new Uint8Array([1,e.exp(i)]));return s}})(KU);const ZU=KU;function MR(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}MR.prototype.initialize=function(e){this.degree=e,this.genPoly=ZU.generateECPolynomial(this.degree)};MR.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const r=ZU.mod(t,this.genPoly),s=this.degree-r.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(r,s),i}return r};var Vle=MR,QU={},Qh={},OR={};OR.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var mc={};const JU="[0-9]+",Wle="[A-Z $%*+\\-./:]+";let iy="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";iy=iy.replace(/u/g,"\\u");const Gle="(?:(?![A-Z0-9 $%*+\\-./:]|"+iy+`)(?:.|[\r
]))+`;mc.KANJI=new RegExp(iy,"g");mc.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");mc.BYTE=new RegExp(Gle,"g");mc.NUMERIC=new RegExp(JU,"g");mc.ALPHANUMERIC=new RegExp(Wle,"g");const $le=new RegExp("^"+iy+"$"),qle=new RegExp("^"+JU+"$"),Xle=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");mc.testKanji=function(e){return $le.test(e)};mc.testNumeric=function(e){return qle.test(e)};mc.testAlphanumeric=function(e){return Xle.test(e)};(function(n){const e=OR,t=mc;n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},n.getBestModeForData=function(i){return t.testNumeric(i)?n.NUMERIC:t.testAlphanumeric(i)?n.ALPHANUMERIC:t.testKanji(i)?n.KANJI:n.BYTE},n.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},n.isValid=function(i){return i&&i.bit&&i.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+s)}}n.from=function(i,o){if(n.isValid(i))return i;try{return r(i)}catch{return o}}})(Qh);(function(n){const e=jo,t=oA,r=iA,s=Qh,i=OR,o=7973,l=e.getBCHDigit(o);function c(_,E,P){for(let S=1;S<=40;S++)if(E<=n.getCapacity(S,P,_))return S}function f(_,E){return s.getCharCountIndicator(_,E)+4}function g(_,E){let P=0;return _.forEach(function(S){const I=f(S.mode,E);P+=I+S.getBitsLength()}),P}function y(_,E){for(let P=1;P<=40;P++)if(g(_,P)<=n.getCapacity(P,E,s.MIXED))return P}n.from=function(E,P){return i.isValid(E)?parseInt(E,10):P},n.getCapacity=function(E,P,S){if(!i.isValid(E))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=s.BYTE);const I=e.getSymbolTotalCodewords(E),N=t.getTotalCodewordsCount(E,P),k=(I-N)*8;if(S===s.MIXED)return k;const T=k-f(S,E);switch(S){case s.NUMERIC:return Math.floor(T/10*3);case s.ALPHANUMERIC:return Math.floor(T/11*2);case s.KANJI:return Math.floor(T/13);case s.BYTE:default:return Math.floor(T/8)}},n.getBestVersionForData=function(E,P){let S;const I=r.from(P,r.M);if(Array.isArray(E)){if(E.length>1)return y(E,I);if(E.length===0)return 1;S=E[0]}else S=E;return c(S.mode,S.getLength(),I)},n.getEncodedBits=function(E){if(!i.isValid(E)||E<7)throw new Error("Invalid QR Code version");let P=E<<12;for(;e.getBCHDigit(P)-l>=0;)P^=o<<e.getBCHDigit(P)-l;return E<<12|P}})(QU);var ez={};const Q3=jo,tz=1335,Yle=21522,HO=Q3.getBCHDigit(tz);ez.getEncodedBits=function(e,t){const r=e.bit<<3|t;let s=r<<10;for(;Q3.getBCHDigit(s)-HO>=0;)s^=tz<<Q3.getBCHDigit(s)-HO;return(r<<10|s)^Yle};var nz={};const Kle=Qh;function j1(n){this.mode=Kle.NUMERIC,this.data=n.toString()}j1.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};j1.prototype.getLength=function(){return this.data.length};j1.prototype.getBitsLength=function(){return j1.getBitsLength(this.data.length)};j1.prototype.write=function(e){let t,r,s;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),s=parseInt(r,10),e.put(s,10);const i=this.data.length-t;i>0&&(r=this.data.substr(t),s=parseInt(r,10),e.put(s,i*3+1))};var Zle=j1;const Qle=Qh,kS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function L1(n){this.mode=Qle.ALPHANUMERIC,this.data=n}L1.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};L1.prototype.getLength=function(){return this.data.length};L1.prototype.getBitsLength=function(){return L1.getBitsLength(this.data.length)};L1.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=kS.indexOf(this.data[t])*45;r+=kS.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(kS.indexOf(this.data[t]),6)};var Jle=L1;const ece=Qh;function B1(n){this.mode=ece.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}B1.getBitsLength=function(e){return e*8};B1.prototype.getLength=function(){return this.data.length};B1.prototype.getBitsLength=function(){return B1.getBitsLength(this.data.length)};B1.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};var tce=B1;const nce=Qh,rce=jo;function F1(n){this.mode=nce.KANJI,this.data=n}F1.getBitsLength=function(e){return e*13};F1.prototype.getLength=function(){return this.data.length};F1.prototype.getBitsLength=function(){return F1.getBitsLength(this.data.length)};F1.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=rce.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};var sce=F1,rz={exports:{}};(function(n){var e={single_source_shortest_paths:function(t,r,s){var i={},o={};o[r]=0;var l=e.PriorityQueue.make();l.push(r,0);for(var c,f,g,y,_,E,P,S,I;!l.empty();){c=l.pop(),f=c.value,y=c.cost,_=t[f]||{};for(g in _)_.hasOwnProperty(g)&&(E=_[g],P=y+E,S=o[g],I=typeof o[g]>"u",(I||S>P)&&(o[g]=P,l.push(g,P),i[g]=f))}if(typeof s<"u"&&typeof o[s]>"u"){var N=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(N)}return i},extract_shortest_path_from_predecessor_list:function(t,r){for(var s=[],i=r;i;)s.push(i),t[i],i=t[i];return s.reverse(),s},find_path:function(t,r,s){var i=e.single_source_shortest_paths(t,r,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(t){var r=e.PriorityQueue,s={},i;t=t||{};for(i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);return s.queue=[],s.sorter=t.sorter||r.default_sorter,s},default_sorter:function(t,r){return t.cost-r.cost},push:function(t,r){var s={value:t,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(rz);var ice=rz.exports;(function(n){const e=Qh,t=Zle,r=Jle,s=tce,i=sce,o=mc,l=jo,c=ice;function f(N){return unescape(encodeURIComponent(N)).length}function g(N,k,T){const D=[];let U;for(;(U=N.exec(T))!==null;)D.push({data:U[0],index:U.index,mode:k,length:U[0].length});return D}function y(N){const k=g(o.NUMERIC,e.NUMERIC,N),T=g(o.ALPHANUMERIC,e.ALPHANUMERIC,N);let D,U;return l.isKanjiModeEnabled()?(D=g(o.BYTE,e.BYTE,N),U=g(o.KANJI,e.KANJI,N)):(D=g(o.BYTE_KANJI,e.BYTE,N),U=[]),k.concat(T,D,U).sort(function(F,X){return F.index-X.index}).map(function(F){return{data:F.data,mode:F.mode,length:F.length}})}function _(N,k){switch(k){case e.NUMERIC:return t.getBitsLength(N);case e.ALPHANUMERIC:return r.getBitsLength(N);case e.KANJI:return i.getBitsLength(N);case e.BYTE:return s.getBitsLength(N)}}function E(N){return N.reduce(function(k,T){const D=k.length-1>=0?k[k.length-1]:null;return D&&D.mode===T.mode?(k[k.length-1].data+=T.data,k):(k.push(T),k)},[])}function P(N){const k=[];for(let T=0;T<N.length;T++){const D=N[T];switch(D.mode){case e.NUMERIC:k.push([D,{data:D.data,mode:e.ALPHANUMERIC,length:D.length},{data:D.data,mode:e.BYTE,length:D.length}]);break;case e.ALPHANUMERIC:k.push([D,{data:D.data,mode:e.BYTE,length:D.length}]);break;case e.KANJI:k.push([D,{data:D.data,mode:e.BYTE,length:f(D.data)}]);break;case e.BYTE:k.push([{data:D.data,mode:e.BYTE,length:f(D.data)}])}}return k}function S(N,k){const T={},D={start:{}};let U=["start"];for(let z=0;z<N.length;z++){const F=N[z],X=[];for(let Z=0;Z<F.length;Z++){const ne=F[Z],se=""+z+Z;X.push(se),T[se]={node:ne,lastCount:0},D[se]={};for(let ee=0;ee<U.length;ee++){const ce=U[ee];T[ce]&&T[ce].node.mode===ne.mode?(D[ce][se]=_(T[ce].lastCount+ne.length,ne.mode)-_(T[ce].lastCount,ne.mode),T[ce].lastCount+=ne.length):(T[ce]&&(T[ce].lastCount=ne.length),D[ce][se]=_(ne.length,ne.mode)+4+e.getCharCountIndicator(ne.mode,k))}}U=X}for(let z=0;z<U.length;z++)D[U[z]].end=0;return{map:D,table:T}}function I(N,k){let T;const D=e.getBestModeForData(N);if(T=e.from(k,D),T!==e.BYTE&&T.bit<D.bit)throw new Error('"'+N+'" cannot be encoded with mode '+e.toString(T)+`.
 Suggested mode is: `+e.toString(D));switch(T===e.KANJI&&!l.isKanjiModeEnabled()&&(T=e.BYTE),T){case e.NUMERIC:return new t(N);case e.ALPHANUMERIC:return new r(N);case e.KANJI:return new i(N);case e.BYTE:return new s(N)}}n.fromArray=function(k){return k.reduce(function(T,D){return typeof D=="string"?T.push(I(D,null)):D.data&&T.push(I(D.data,D.mode)),T},[])},n.fromString=function(k,T){const D=y(k,l.isKanjiModeEnabled()),U=P(D),z=S(U,T),F=c.find_path(z.map,"start","end"),X=[];for(let Z=1;Z<F.length-1;Z++)X.push(z.table[F[Z]].node);return n.fromArray(E(X))},n.rawSplit=function(k){return n.fromArray(y(k,l.isKanjiModeEnabled()))}})(nz);const lA=jo,MS=iA,oce=Ule,ace=zle,lce=qU,cce=XU,J3=YU,eP=oA,uce=Vle,ME=QU,dce=ez,hce=Qh,OS=nz;function fce(n,e){const t=n.size,r=cce.getPositions(e);for(let s=0;s<r.length;s++){const i=r[s][0],o=r[s][1];for(let l=-1;l<=7;l++)if(!(i+l<=-1||t<=i+l))for(let c=-1;c<=7;c++)o+c<=-1||t<=o+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?n.set(i+l,o+c,!0,!0):n.set(i+l,o+c,!1,!0))}}function mce(n){const e=n.size;for(let t=8;t<e-8;t++){const r=t%2===0;n.set(t,6,r,!0),n.set(6,t,r,!0)}}function pce(n,e){const t=lce.getPositions(e);for(let r=0;r<t.length;r++){const s=t[r][0],i=t[r][1];for(let o=-2;o<=2;o++)for(let l=-2;l<=2;l++)o===-2||o===2||l===-2||l===2||o===0&&l===0?n.set(s+o,i+l,!0,!0):n.set(s+o,i+l,!1,!0)}}function gce(n,e){const t=n.size,r=ME.getEncodedBits(e);let s,i,o;for(let l=0;l<18;l++)s=Math.floor(l/3),i=l%3+t-8-3,o=(r>>l&1)===1,n.set(s,i,o,!0),n.set(i,s,o,!0)}function DS(n,e,t){const r=n.size,s=dce.getEncodedBits(e,t);let i,o;for(i=0;i<15;i++)o=(s>>i&1)===1,i<6?n.set(i,8,o,!0):i<8?n.set(i+1,8,o,!0):n.set(r-15+i,8,o,!0),i<8?n.set(8,r-i-1,o,!0):i<9?n.set(8,15-i-1+1,o,!0):n.set(8,15-i-1,o,!0);n.set(r-8,8,1,!0)}function xce(n,e){const t=n.size;let r=-1,s=t-1,i=7,o=0;for(let l=t-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!n.isReserved(s,l-c)){let f=!1;o<e.length&&(f=(e[o]>>>i&1)===1),n.set(s,l-c,f),i--,i===-1&&(o++,i=7)}if(s+=r,s<0||t<=s){s-=r,r=-r;break}}}function vce(n,e,t){const r=new oce;t.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),hce.getCharCountIndicator(c.mode,n)),c.write(r)});const s=lA.getSymbolTotalCodewords(n),i=eP.getTotalCodewordsCount(n,e),o=(s-i)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const l=(o-r.getLengthInBits())/8;for(let c=0;c<l;c++)r.put(c%2?17:236,8);return yce(r,n,e)}function yce(n,e,t){const r=lA.getSymbolTotalCodewords(e),s=eP.getTotalCodewordsCount(e,t),i=r-s,o=eP.getBlocksCount(e,t),l=r%o,c=o-l,f=Math.floor(r/o),g=Math.floor(i/o),y=g+1,_=f-g,E=new uce(_);let P=0;const S=new Array(o),I=new Array(o);let N=0;const k=new Uint8Array(n.buffer);for(let F=0;F<o;F++){const X=F<c?g:y;S[F]=k.slice(P,P+X),I[F]=E.encode(S[F]),P+=X,N=Math.max(N,X)}const T=new Uint8Array(r);let D=0,U,z;for(U=0;U<N;U++)for(z=0;z<o;z++)U<S[z].length&&(T[D++]=S[z][U]);for(U=0;U<_;U++)for(z=0;z<o;z++)T[D++]=I[z][U];return T}function wce(n,e,t,r){let s;if(Array.isArray(n))s=OS.fromArray(n);else if(typeof n=="string"){let f=e;if(!f){const g=OS.rawSplit(n);f=ME.getBestVersionForData(g,t)}s=OS.fromString(n,f||40)}else throw new Error("Invalid data");const i=ME.getBestVersionForData(s,t);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=i;else if(e<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=vce(e,t,s),l=lA.getSymbolSize(e),c=new ace(l);return fce(c,e),mce(c),pce(c,e),DS(c,t,0),e>=7&&gce(c,e),xce(c,o),isNaN(r)&&(r=J3.getBestMask(c,DS.bind(null,c,t))),J3.applyMask(r,c),DS(c,t,r),{modules:c,version:e,errorCorrectionLevel:t,maskPattern:r,segments:s}}GU.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let r=MS.M,s,i;return typeof t<"u"&&(r=MS.from(t.errorCorrectionLevel,MS.M),s=ME.from(t.version),i=J3.from(t.maskPattern),t.toSJISFunc&&lA.setToSJISFunction(t.toSJISFunc)),wce(e,s,r,i)};var sz={},DR={};(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let r=t.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+t);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}n.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},n.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},n.getImageWidth=function(r,s){const i=n.getScale(r,s);return Math.floor((r+s.margin*2)*i)},n.qrToImageData=function(r,s,i){const o=s.modules.size,l=s.modules.data,c=n.getScale(o,i),f=Math.floor((o+i.margin*2)*c),g=i.margin*c,y=[i.color.light,i.color.dark];for(let _=0;_<f;_++)for(let E=0;E<f;E++){let P=(_*f+E)*4,S=i.color.light;if(_>=g&&E>=g&&_<f-g&&E<f-g){const I=Math.floor((_-g)/c),N=Math.floor((E-g)/c);S=y[l[I*o+N]?1:0]}r[P++]=S.r,r[P++]=S.g,r[P++]=S.b,r[P]=S.a}}})(DR);(function(n){const e=DR;function t(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(i,o,l){let c=l,f=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(f=r()),c=e.getOptions(c);const g=e.getImageWidth(i.modules.size,c),y=f.getContext("2d"),_=y.createImageData(g,g);return e.qrToImageData(_.data,i,c),t(y,f,g),y.putImageData(_,0,0),f},n.renderToDataURL=function(i,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const f=n.render(i,o,c),g=c.type||"image/png",y=c.rendererOpts||{};return f.toDataURL(g,y.quality)}})(sz);var iz={};const bce=DR;function VO(n,e){const t=n.a/255,r=e+'="'+n.hex+'"';return t<1?r+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function jS(n,e,t){let r=n+e;return typeof t<"u"&&(r+=" "+t),r}function _ce(n,e,t){let r="",s=0,i=!1,o=0;for(let l=0;l<n.length;l++){const c=Math.floor(l%e),f=Math.floor(l/e);!c&&!i&&(i=!0),n[l]?(o++,l>0&&c>0&&n[l-1]||(r+=i?jS("M",c+t,.5+f+t):jS("m",s,0),s=0,i=!1),c+1<e&&n[l+1]||(r+=jS("h",o),o=0)):s++}return r}iz.render=function(e,t,r){const s=bce.getOptions(t),i=e.modules.size,o=e.modules.data,l=i+s.margin*2,c=s.color.light.a?"<path "+VO(s.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",f="<path "+VO(s.color.dark,"stroke")+' d="'+_ce(o,i,s.margin)+'"/>',g='viewBox="0 0 '+l+" "+l+'"',_='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+g+' shape-rendering="crispEdges">'+c+f+`</svg>
`;return typeof r=="function"&&r(null,_),_};const Ece=Ble,tP=GU,oz=sz,Cce=iz;function jR(n,e,t,r,s){const i=[].slice.call(arguments,1),o=i.length,l=typeof i[o-1]=="function";if(!l&&!Ece())throw new Error("Callback required as last argument");if(l){if(o<2)throw new Error("Too few arguments provided");o===2?(s=t,t=e,e=r=void 0):o===3&&(e.getContext&&typeof s>"u"?(s=r,r=void 0):(s=r,r=t,t=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(t=e,e=r=void 0):o===2&&!e.getContext&&(r=t,t=e,e=void 0),new Promise(function(c,f){try{const g=tP.create(t,r);c(n(g,e,r))}catch(g){f(g)}})}try{const c=tP.create(t,r);s(null,n(c,e,r))}catch(c){s(c)}}Sb.create=tP.create;Sb.toCanvas=jR.bind(null,oz.render);Sb.toDataURL=jR.bind(null,oz.renderToDataURL);Sb.toString=jR.bind(null,function(n,e,t){return Cce.render(n,t)});function Ace(){const[n,e]=M.useState([]),[t,r]=M.useState(!0),[s,i]=M.useState(null),[o,l]=M.useState({});M.useEffect(()=>{c()},[]);const c=async()=>{var I;try{r(!0);const{data:{session:N},error:k}=await Ce.auth.getSession();if(k){console.error("Erro ao obter sesso:",k),xe.error("Erro ao obter sesso do usurio"),r(!1);return}if(!((I=N==null?void 0:N.user)!=null&&I.email)){console.log("Nenhum usurio autenticado"),xe.error("Usurio no autenticado"),r(!1);return}console.log("Buscando eventos para:",N.user.email);const{data:T,error:D}=await Ce.from("eventos").select("*").eq("organizador_email",N.user.email).eq("status","aprovado").order("data_inicio",{ascending:!1});if(D){console.error("Erro na query eventos:",D),xe.error(`Erro ao buscar eventos: ${D.message}`),r(!1);return}if(console.log("Eventos encontrados:",(T==null?void 0:T.length)||0),T&&T.length>0&&console.log("Primeiro evento:",T[0]),e(T||[]),!T||T.length===0){console.log("Nenhum evento aprovado encontrado, verificando todos os eventos...");const{data:U}=await Ce.from("eventos").select("id, titulo, status, organizador_email").eq("organizador_email",N.user.email);console.log("Todos os eventos do organizador:",U),U&&U.length>0&&xe.info(`Voc tem ${U.length} evento(s), mas nenhum est aprovado ainda.`)}}catch(N){console.error("Erro ao carregar eventos:",N),xe.error(`Erro: ${N.message||"Erro desconhecido"}`)}finally{r(!1)}},f=(I,N)=>(`${I}-${N}`.split("").reduce((D,U)=>D+U.charCodeAt(0),0)%9e5+1e5).toString(),g=async(I,N,k,T,D)=>{try{const U=JSON.stringify({eventoId:I,local:N,latitude:k,longitude:T,raioValidacaoMetros:D||100,geradoEm:new Date().toISOString()});return await Sb.toDataURL(U,{width:400,margin:2,color:{dark:"#000000",light:"#ffffff"}})}catch(U){return console.error("Erro ao gerar QR code:",U),xe.error("Erro ao gerar QR code"),null}},y=async I=>{if(s===I){i(null);return}i(I);const N=n.find(T=>T.id===I);if(!N)return;const k=await g(I,N.local,N.latitude,N.longitude,N.raio_validacao_metros);k&&l(T=>({...T,[I]:k}))},_=(I,N)=>{const k=document.createElement("a");k.href=I,k.download=`qrcode-${N.replace(/\s+/g,"-")}.png`,document.body.appendChild(k),k.click(),document.body.removeChild(k),xe.success("QR Code baixado!")},E=I=>{navigator.clipboard.writeText(I),xe.success("Cdigo copiado!")},P=I=>{const N=new Date(I.data_inicio),k=new Date(I.data_fim);return $M(k,N)+1},S=I=>{const N=new Date(I.data_inicio),k=new Date(I.data_fim),T=$M(k,N)+1,D=[];for(let U=0;U<T;U++)D.push(Ys(N,U));return D};return t?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Dias / QR Codes"}),h.jsx("p",{className:"text-muted-foreground",children:"Gerencie os dias e cdigos QR dos seus eventos"})]}),h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(vs,{className:"w-8 h-8 animate-spin text-muted-foreground"})})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Dias / QR Codes"}),h.jsx("p",{className:"text-muted-foreground",children:"Gerencie os dias e cdigos QR dos seus eventos"})]}),h.jsx("div",{className:"space-y-4",children:n.length===0?h.jsx(Fe,{className:"p-12",children:h.jsxs("div",{className:"text-center text-muted-foreground space-y-3",children:[h.jsx(Nh,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-lg font-normal",children:"Nenhum evento aprovado"}),h.jsx("p",{className:"text-sm mt-2",children:"Apenas eventos aprovados podem gerar QR Codes para confirmao de presena."}),h.jsx("p",{className:"text-sm mt-1",children:"Aguarde a aprovao dos seus eventos ou crie um novo evento."})]})]})}):n.map(I=>{const N=P(I),k=s===I.id;return h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("h3",{className:"text-lg font-normal",children:I.titulo}),h.jsx(qt,{className:"bg-green-500/10 text-green-500 border-green-500/20",children:" Aprovado"})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(or,{className:"w-3 h-3"}),ht(new Date(I.data_inicio),"dd/MM/yyyy",{locale:Xt})," -"," ",ht(new Date(I.data_fim),"dd/MM/yyyy",{locale:Xt})]}),h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(xs,{className:"w-3 h-3"}),N," ",N===1?"dia":"dias"]})]})]}),h.jsxs(Je,{variant:"outline",size:"sm",onClick:()=>y(I.id),children:[h.jsx(Nh,{className:"w-4 h-4 mr-2"}),k?"Ocultar":"Ver"," QR Codes",k?h.jsx(y5,{className:"w-4 h-4 ml-2"}):h.jsx(jC,{className:"w-4 h-4 ml-2"})]})]}),k&&h.jsxs("div",{className:"pt-4 border-t space-y-6",children:[h.jsxs("div",{children:[h.jsxs("h4",{className:"text-sm font-normal mb-3 flex items-center gap-2",children:[h.jsx(Nh,{className:"w-4 h-4"}),"QR Code do Evento"]}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[h.jsx("div",{className:"flex-shrink-0 text-center",children:o[I.id]?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"bg-white p-4 rounded-lg inline-block border",children:h.jsx("img",{src:o[I.id],alt:"QR Code do Evento",className:"w-64 h-64"})}),h.jsxs(Je,{variant:"outline",size:"sm",onClick:()=>_(o[I.id],I.titulo),className:"w-full mt-3",children:[h.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Baixar QR Code"]})]}):h.jsx("div",{className:"flex items-center justify-center h-64 w-64",children:h.jsx(vs,{className:"w-8 h-8 animate-spin text-muted-foreground"})})}),h.jsxs("div",{className:"flex-1 space-y-4",children:[h.jsxs("div",{children:[h.jsx("h5",{className:"font-normal mb-2",children:"Como funciona:"}),h.jsxs("ul",{className:"text-sm text-muted-foreground space-y-2",children:[h.jsxs("li",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-primary",children:""}),h.jsx("span",{children:"O aluno escaneia este QR Code com o celular"})]}),h.jsxs("li",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-primary",children:""}),h.jsx("span",{children:"Presena s  confirmada durante o horrio do evento"})]}),h.jsxs("li",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-primary",children:""}),h.jsxs("span",{children:["GPS verifica se est no local: ",h.jsx("strong",{children:I.local})]})]}),h.jsxs("li",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-primary",children:""}),h.jsxs("span",{children:["Aluno deve estar a at ",h.jsxs("strong",{children:[I.raio_validacao_metros||100,"m"]})," do evento"]})]}),h.jsxs("li",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-primary",children:""}),h.jsx("span",{children:"Se o QR Code no funcionar, use o cdigo secreto do dia"})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm p-3 bg-primary/5 rounded-lg",children:[h.jsx(fp,{className:"w-4 h-4 text-primary"}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-muted-foreground",children:"Local:"}),h.jsx("span",{className:"font-normal",children:I.local})]}),I.latitude&&I.longitude&&h.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[" GPS: ",I.latitude.toFixed(6),", ",I.longitude.toFixed(6)]}),I.raio_validacao_metros&&h.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[" Raio de validao: ",h.jsxs("strong",{children:[I.raio_validacao_metros,"m"]})," (",(I.raio_validacao_metros/1e3).toFixed(I.raio_validacao_metros>=1e3?1:2),"km)"]})]})]})]})]})})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"text-sm font-normal mb-3 flex items-center gap-2",children:[h.jsx(w5,{className:"w-4 h-4"}),"Cdigos Secretos (Alternativa ao QR Code)"]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:S(I).map((T,D)=>{const U=ht(T,"yyyy-MM-dd"),z=f(I.id,U);return h.jsx(Fe,{className:"p-4",children:h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsxs("p",{className:"text-sm font-normal",children:["Dia ",D+1]}),h.jsx("p",{className:"text-xs text-muted-foreground",children:ht(T,"dd/MM/yyyy",{locale:Xt})})]}),h.jsx(qt,{variant:"outline",className:"text-xs",children:"Cdigo"})]}),h.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[h.jsx("code",{className:"text-xl font-mono font-bold flex-1 text-center",children:z}),h.jsx(Je,{variant:"ghost",size:"sm",onClick:()=>E(z),children:h.jsx(LQ,{className:"w-4 h-4"})})]}),h.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Use se o QR Code no funcionar"})]})},U)})})]})]})]})},I.id)})})]})}function Sce(){const[n,e]=M.useState([]),[t,r]=M.useState(!0),[s,i]=M.useState(""),[o,l]=M.useState("todos"),[c,f]=M.useState("todos"),[g,y]=M.useState([]),[_,E]=M.useState(null);M.useEffect(()=>{P()},[]);async function P(){var X;try{r(!0);const{data:{session:Z},error:ne}=await Ce.auth.getSession();if(ne){console.error("Erro ao obter sesso:",ne),xe.error("Erro ao obter sesso"),r(!1);return}if(!((X=Z==null?void 0:Z.user)!=null&&X.email)){xe.error("Voc precisa estar logado"),r(!1);return}console.log("Email do organizador:",Z.user.email);const{data:se,error:ee}=await Ce.from("eventos").select("id, titulo").eq("organizador_email",Z.user.email).order("titulo");if(ee){console.error("Erro ao buscar eventos:",ee),xe.error(`Erro ao carregar eventos: ${ee.message}`),r(!1);return}if(console.log("Eventos encontrados:",(se==null?void 0:se.length)||0),y(se||[]),!se||se.length===0){xe.info("Voc ainda no criou nenhum evento"),e([]),r(!1);return}const ce=se.map(oe=>oe.id),{data:de,error:re}=await Ce.from("inscricoes").select(`
          id,
          evento_id,
          usuario_email,
          status,
          created_at
        `).in("evento_id",ce).order("created_at",{ascending:!1});if(re){console.error("Erro ao buscar inscries:",re),xe.error(`Erro ao carregar inscries: ${re.message}`),r(!1);return}console.log("Inscries encontradas:",(de==null?void 0:de.length)||0);const fe=await Promise.all((de||[]).map(async oe=>{const{data:Q}=await Ce.from("eventos").select("titulo, data_inicio, data_fim, local, valor, tipo, organizador_email").eq("id",oe.evento_id).single();return{...oe,eventos:Q||{titulo:"Evento no encontrado",data_inicio:new Date().toISOString(),data_fim:new Date().toISOString(),local:"N/A",valor:0,tipo:"N/A",organizador_email:Z.user.email}}}));e(fe)}catch(Z){console.error("Erro ao carregar inscries:",Z),xe.error(`Erro: ${Z.message||"Erro desconhecido"}`)}finally{r(!1)}}async function S(X){try{const{error:Z}=await Ce.from("inscricoes").update({status:"cancelada"}).eq("id",X);if(Z)throw Z;xe.success("Inscrio cancelada com sucesso"),P()}catch(Z){console.error("Erro ao cancelar inscrio:",Z),xe.error("Erro ao cancelar inscrio")}finally{E(null)}}function I(){const X=N(),Z=[["Evento","Email","Status","Data Inscrio","Valor"].join(","),...X.map(ee=>[ee.eventos.titulo,ee.usuario_email,ee.status,ht(new Date(ee.created_at),"dd/MM/yyyy HH:mm",{locale:Xt}),`R$ ${(ee.eventos.valor||0).toFixed(2)}`].join(","))].join(`
`),ne=new Blob([Z],{type:"text/csv;charset=utf-8;"}),se=document.createElement("a");se.href=URL.createObjectURL(ne),se.download=`inscricoes_${ht(new Date,"yyyy-MM-dd")}.csv`,se.click(),xe.success("Relatrio exportado com sucesso")}function N(){return n.filter(X=>{const Z=s===""||X.eventos.titulo.toLowerCase().includes(s.toLowerCase())||X.usuario_email.toLowerCase().includes(s.toLowerCase()),ne=o==="todos"||X.evento_id===o,se=c==="todos"||X.status===c;return Z&&ne&&se})}function k(X){const Z={confirmada:{color:"bg-green-500/10 text-green-500 border-green-500/20",icon:sc,label:"Confirmada"},cancelada:{color:"bg-red-500/10 text-red-500 border-red-500/20",icon:Po,label:"Cancelada"},pendente:{color:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",icon:xs,label:"Pendente"}},ne=Z[X]||Z.pendente,se=ne.icon;return h.jsxs(qt,{className:ne.color,children:[h.jsx(se,{className:"w-3 h-3 mr-1"}),ne.label]})}const T=N(),D=T.length,U=T.filter(X=>X.status==="confirmada").length,z=T.filter(X=>X.status==="cancelada").length,F=T.filter(X=>X.status==="pendente").length;return t?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Inscries"}),h.jsx("p",{className:"text-muted-foreground",children:"Gerencie as inscries dos seus eventos"})]}),h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Inscries"}),h.jsx("p",{className:"text-muted-foreground",children:"Gerencie as inscries dos seus eventos"})]}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[h.jsxs(Fe,{children:[h.jsxs(_f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(Ef,{className:"text-sm font-medium",children:"Total"}),h.jsx(Zs,{className:"h-4 w-4 text-muted-foreground"})]}),h.jsxs(ld,{children:[h.jsx("div",{className:"text-2xl font-bold",children:D}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"inscries"})]})]}),h.jsxs(Fe,{children:[h.jsxs(_f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(Ef,{className:"text-sm font-medium",children:"Confirmadas"}),h.jsx(sc,{className:"h-4 w-4 text-green-500"})]}),h.jsxs(ld,{children:[h.jsx("div",{className:"text-2xl font-bold",children:U}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"participantes confirmados"})]})]}),h.jsxs(Fe,{children:[h.jsxs(_f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(Ef,{className:"text-sm font-medium",children:"Pendentes"}),h.jsx(xs,{className:"h-4 w-4 text-yellow-500"})]}),h.jsxs(ld,{children:[h.jsx("div",{className:"text-2xl font-bold",children:F}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"aguardando confirmao"})]})]}),h.jsxs(Fe,{children:[h.jsxs(_f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(Ef,{className:"text-sm font-medium",children:"Canceladas"}),h.jsx(Po,{className:"h-4 w-4 text-red-500"})]}),h.jsxs(ld,{children:[h.jsx("div",{className:"text-2xl font-bold",children:z}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"inscries canceladas"})]})]})]}),h.jsxs(Fe,{children:[h.jsxs(_f,{children:[h.jsx(Ef,{children:"Filtros"}),h.jsx(X3,{children:"Encontre inscries especficas"})]}),h.jsxs(ld,{className:"space-y-4",children:[h.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[h.jsxs("div",{className:"relative",children:[h.jsx(Q1,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),h.jsx(Qt,{placeholder:"Buscar por evento, nome ou email...",value:s,onChange:X=>i(X.target.value),className:"pl-9"})]}),h.jsxs(Qs,{value:o,onValueChange:l,children:[h.jsx(ks,{children:h.jsx(Js,{placeholder:"Filtrar por evento"})}),h.jsxs(Ms,{children:[h.jsx(Pt,{value:"todos",children:"Todos os eventos"}),g.map(X=>h.jsx(Pt,{value:X.id,children:X.titulo},X.id))]})]}),h.jsxs(Qs,{value:c,onValueChange:f,children:[h.jsx(ks,{children:h.jsx(Js,{placeholder:"Filtrar por status"})}),h.jsxs(Ms,{children:[h.jsx(Pt,{value:"todos",children:"Todos os status"}),h.jsx(Pt,{value:"confirmada",children:"Confirmada"}),h.jsx(Pt,{value:"pendente",children:"Pendente"}),h.jsx(Pt,{value:"cancelada",children:"Cancelada"})]})]})]}),h.jsx("div",{className:"flex justify-end",children:h.jsxs(Je,{onClick:I,variant:"outline",size:"sm",children:[h.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Exportar CSV"]})})]})]}),T.length===0?h.jsx(Fe,{children:h.jsxs(ld,{className:"flex flex-col items-center justify-center py-12",children:[h.jsx(Zs,{className:"w-12 h-12 text-muted-foreground mb-4"}),h.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nenhuma inscrio encontrada"}),h.jsx("p",{className:"text-muted-foreground text-center",children:s||o!=="todos"||c!=="todos"?"Tente ajustar os filtros de busca":"Aguarde os participantes se inscreverem nos seus eventos"})]})}):h.jsx("div",{className:"space-y-4",children:T.map(X=>h.jsxs(Fe,{children:[h.jsx(_f,{children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx(Ef,{className:"text-lg",children:X.eventos.titulo}),h.jsxs(X3,{className:"flex items-center gap-4 text-sm",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(or,{className:"w-3 h-3"}),ht(new Date(X.eventos.data_inicio),"dd 'de' MMMM",{locale:Xt})]}),h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(fp,{className:"w-3 h-3"}),X.eventos.local]})]})]}),k(X.status)]})}),h.jsxs(ld,{children:[h.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(BC,{className:"w-4 h-4 text-muted-foreground"}),h.jsx("span",{className:"font-medium",children:X.usuario_email})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[h.jsx(VQ,{className:"w-4 h-4"}),h.jsx("span",{children:X.usuario_email})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"text-sm",children:[h.jsx("span",{className:"text-muted-foreground",children:"Data da inscrio:"}),h.jsx("span",{className:"ml-2 font-medium",children:ht(new Date(X.created_at),"dd/MM/yyyy 's' HH:mm",{locale:Xt})})]}),h.jsxs("div",{className:"text-sm",children:[h.jsx("span",{className:"text-muted-foreground",children:"Valor:"}),h.jsx("span",{className:"ml-2 font-medium",children:X.eventos.valor>0?`R$ ${X.eventos.valor.toFixed(2)}`:"Gratuito"})]})]})]}),X.status==="confirmada"&&h.jsx("div",{className:"mt-4 flex justify-end",children:h.jsxs(Je,{variant:"outline",size:"sm",onClick:()=>E(X.id),children:[h.jsx(Po,{className:"w-4 h-4 mr-2"}),"Cancelar Inscrio"]})})]})]},X.id))}),h.jsx(dp,{open:!!_,onOpenChange:()=>E(null),children:h.jsxs(kh,{children:[h.jsxs(Mh,{children:[h.jsx(Dh,{children:"Cancelar Inscrio"}),h.jsx(hI,{children:"Tem certeza que deseja cancelar esta inscrio? Esta ao no pode ser desfeita."})]}),h.jsxs(Oh,{children:[h.jsx(ob,{children:"No, manter"}),h.jsx(jh,{onClick:()=>_&&S(_),className:"bg-red-500 hover:bg-red-600",children:"Sim, cancelar"})]})]})})]})}function Nce(){const[n,e]=M.useState([]),[t,r]=M.useState([]),[s,i]=M.useState(!0),[o,l]=M.useState(""),[c,f]=M.useState("todos"),g=M.useCallback(async()=>{var N;try{i(!0);const{data:{session:k},error:T}=await Ce.auth.getSession();if(T||!((N=k==null?void 0:k.user)!=null&&N.email)){xe.error("Voc precisa estar logado"),i(!1);return}const{data:D,error:U}=await Ce.from("eventos").select("id, titulo, data_inicio, data_fim").eq("organizador_email",k.user.email).order("data_inicio",{ascending:!1});if(U){console.error("Erro ao buscar eventos:",U),xe.error(`Erro ao carregar eventos: ${U.message}`),i(!1);return}if(r(D||[]),!D||D.length===0){xe.info("Voc ainda no criou nenhum evento"),e([]),i(!1);return}const z=D.map(Z=>Z.id),{data:F,error:X}=await Ce.from("presencas").select("*").in("evento_id",z).order("data_presenca",{ascending:!1});if(X){console.error("Erro ao buscar presenas:",X),xe.error(`Erro ao carregar presenas: ${X.message}`),i(!1);return}e(F||[])}catch(k){console.error("Erro ao carregar dados:",k),xe.error(`Erro: ${k.message||"Erro desconhecido"}`)}finally{i(!1)}},[]);M.useEffect(()=>{g()},[g]);const y=()=>n.filter(N=>{var D;const k=!o||N.usuario_email.toLowerCase().includes(o.toLowerCase())||((D=N.usuario_nome)==null?void 0:D.toLowerCase().includes(o.toLowerCase())),T=c==="todos"||N.evento_id===c;return k&&T}),_=()=>{const N=y(),k=[["Evento","Participante","Email","Data/Hora","Dia","Validado Por"].join(","),...N.map(U=>{const z=t.find(F=>F.id===U.evento_id);return[(z==null?void 0:z.titulo)||"N/A",U.usuario_nome||"N/A",U.usuario_email,ht(new Date(U.data_presenca),"dd/MM/yyyy HH:mm",{locale:Xt}),U.dia_evento||"N/A",U.validado_por||"Auto"].join(",")})].join(`
`),T=new Blob([k],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a");D.href=URL.createObjectURL(T),D.download=`presencas-${ht(new Date,"yyyy-MM-dd")}.csv`,document.body.appendChild(D),D.click(),document.body.removeChild(D),xe.success("CSV exportado com sucesso!")},E=N=>{var k;return((k=t.find(T=>T.id===N))==null?void 0:k.titulo)||"Evento no encontrado"},P=y(),S=P.length,I=P.filter(N=>{const k=new Date;return new Date(N.data_presenca).toDateString()===k.toDateString()}).length;return s?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Presenas"}),h.jsx("p",{className:"text-muted-foreground",children:"Acompanhe as presenas dos participantes"})]}),h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(vs,{className:"w-8 h-8 animate-spin text-muted-foreground"})})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Presenas"}),h.jsx("p",{className:"text-muted-foreground",children:"Acompanhe as presenas dos participantes"})]}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:h.jsx(sc,{className:"w-6 h-6 text-primary"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Presenas"}),h.jsx("p",{className:"text-2xl font-normal",children:S})]})]})}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"p-3 bg-green-500/10 rounded-lg",children:h.jsx(xs,{className:"w-6 h-6 text-green-500"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Presenas Hoje"}),h.jsx("p",{className:"text-2xl font-normal",children:I})]})]})}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"p-3 bg-blue-500/10 rounded-lg",children:h.jsx(Zs,{className:"w-6 h-6 text-blue-500"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Eventos com Presenas"}),h.jsx("p",{className:"text-2xl font-normal",children:[...new Set(n.map(N=>N.evento_id))].length})]})]})})]}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[h.jsx("div",{className:"flex-1",children:h.jsxs("div",{className:"relative",children:[h.jsx(Q1,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),h.jsx(Qt,{placeholder:"Buscar por participante ou email...",value:o,onChange:N=>l(N.target.value),className:"pl-10"})]})}),h.jsxs(Qs,{value:c,onValueChange:f,children:[h.jsx(ks,{className:"w-full md:w-[250px]",children:h.jsx(Js,{placeholder:"Filtrar por evento"})}),h.jsxs(Ms,{children:[h.jsx(Pt,{value:"todos",children:"Todos os eventos"}),t.map(N=>h.jsx(Pt,{value:N.id,children:N.titulo},N.id))]})]}),h.jsxs(Je,{variant:"outline",onClick:_,disabled:P.length===0,children:[h.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Exportar CSV"]})]})}),P.length===0?h.jsxs(Fe,{className:"p-12 text-center text-muted-foreground",children:[h.jsx(sc,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),h.jsx("p",{children:"Nenhuma presena registrada"})]}):h.jsx("div",{className:"space-y-3",children:P.map(N=>h.jsx(Fe,{className:"p-4",children:h.jsx("div",{className:"flex items-center justify-between gap-4",children:h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("h3",{className:"font-normal",children:E(N.evento_id)}),h.jsxs(qt,{variant:"default",className:"gap-1",children:[h.jsx(sc,{className:"w-3 h-3"}),"Confirmada"]})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(Zs,{className:"w-3 h-3"}),N.usuario_nome||N.usuario_email]}),h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(or,{className:"w-3 h-3"}),ht(new Date(N.data_presenca),"dd/MM/yyyy 's' HH:mm",{locale:Xt})]}),N.dia_evento&&h.jsxs("span",{children:["Dia ",N.dia_evento]}),N.validado_por&&h.jsxs("span",{className:"text-xs",children:["Validado por: ",N.validado_por]})]})]})})},N.id))})]})}function Tce(){const[n,e]=M.useState([]),[t,r]=M.useState([]),[s,i]=M.useState(!0),[o,l]=M.useState(""),[c,f]=M.useState("todos"),[g,y]=M.useState("todos"),_=M.useCallback(async()=>{var T;try{i(!0);const{data:{session:D},error:U}=await Ce.auth.getSession();if(U||!((T=D==null?void 0:D.user)!=null&&T.email)){xe.error("Voc precisa estar logado"),i(!1);return}const{data:z,error:F}=await Ce.from("eventos").select("id, titulo, valor, data_inicio, data_fim").eq("organizador_email",D.user.email).gt("valor",0).order("data_inicio",{ascending:!1});if(F){console.error("Erro ao buscar eventos:",F),xe.error(`Erro ao carregar eventos: ${F.message}`),i(!1);return}if(r(z||[]),!z||z.length===0){xe.info("Voc no tem eventos pagos cadastrados"),e([]),i(!1);return}const X=z.map(ee=>ee.id),{data:Z,error:ne}=await Ce.from("inscricoes").select("*").in("evento_id",X).order("created_at",{ascending:!1});if(ne){console.error("Erro ao buscar inscries:",ne),xe.error(`Erro ao carregar inscries: ${ne.message}`),i(!1);return}const se=(Z||[]).map(ee=>{const ce=z.find(de=>de.id===ee.evento_id);return{inscricao:ee,evento:ce,valorPago:ee.status==="confirmada"&&(ce==null?void 0:ce.valor)||0}});e(se)}catch(D){console.error("Erro ao carregar dados:",D),xe.error(`Erro: ${D.message||"Erro desconhecido"}`)}finally{i(!1)}},[]);M.useEffect(()=>{_()},[_]);const E=()=>n.filter(T=>{const D=!o||T.inscricao.usuario_email.toLowerCase().includes(o.toLowerCase())||T.evento.titulo.toLowerCase().includes(o.toLowerCase()),U=c==="todos"||T.evento.id===c,z=g==="todos"||T.inscricao.status===g;return D&&U&&z}),P=()=>{const T=E(),D=[["Evento","Participante","Email","Valor","Status","Data"].join(","),...T.map(F=>[F.evento.titulo,F.inscricao.usuario_email,F.inscricao.usuario_email,`R$ ${(F.evento.valor||0).toFixed(2)}`,F.inscricao.status,ht(new Date(F.inscricao.created_at),"dd/MM/yyyy HH:mm",{locale:Xt})].join(","))].join(`
`),U=new Blob([D],{type:"text/csv;charset=utf-8;"}),z=document.createElement("a");z.href=URL.createObjectURL(U),z.download=`pagamentos-${ht(new Date,"yyyy-MM-dd")}.csv`,document.body.appendChild(z),z.click(),document.body.removeChild(z),xe.success("CSV exportado com sucesso!")},S=E(),I=S.filter(T=>T.inscricao.status==="confirmada").reduce((T,D)=>T+D.valorPago,0),N=S.filter(T=>T.inscricao.status==="pendente").reduce((T,D)=>T+(D.evento.valor||0),0),k=S.filter(T=>T.inscricao.status==="confirmada").length;return s?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Pagamentos"}),h.jsx("p",{className:"text-muted-foreground",children:"Gerencie os pagamentos das inscries"})]}),h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(vs,{className:"w-8 h-8 animate-spin text-muted-foreground"})})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Pagamentos"}),h.jsx("p",{className:"text-muted-foreground",children:"Gerencie os pagamentos das inscries"})]}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"p-3 bg-green-500/10 rounded-lg",children:h.jsx(ic,{className:"w-6 h-6 text-green-500"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Recebido"}),h.jsxs("p",{className:"text-2xl font-normal",children:["R$ ",I.toFixed(2)]})]})]})}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"p-3 bg-yellow-500/10 rounded-lg",children:h.jsx(xs,{className:"w-6 h-6 text-yellow-500"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Pendente"}),h.jsxs("p",{className:"text-2xl font-normal",children:["R$ ",N.toFixed(2)]})]})]})}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"p-3 bg-blue-500/10 rounded-lg",children:h.jsx(sc,{className:"w-6 h-6 text-blue-500"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Pagamentos Confirmados"}),h.jsx("p",{className:"text-2xl font-normal",children:k})]})]})})]}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[h.jsx("div",{className:"flex-1",children:h.jsxs("div",{className:"relative",children:[h.jsx(Q1,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),h.jsx(Qt,{placeholder:"Buscar por evento ou participante...",value:o,onChange:T=>l(T.target.value),className:"pl-10"})]})}),h.jsxs(Qs,{value:c,onValueChange:f,children:[h.jsx(ks,{className:"w-full md:w-[200px]",children:h.jsx(Js,{placeholder:"Filtrar por evento"})}),h.jsxs(Ms,{children:[h.jsx(Pt,{value:"todos",children:"Todos os eventos"}),t.map(T=>h.jsx(Pt,{value:T.id,children:T.titulo},T.id))]})]}),h.jsxs(Qs,{value:g,onValueChange:y,children:[h.jsx(ks,{className:"w-full md:w-[180px]",children:h.jsx(Js,{placeholder:"Status"})}),h.jsxs(Ms,{children:[h.jsx(Pt,{value:"todos",children:"Todos os status"}),h.jsx(Pt,{value:"confirmada",children:"Confirmado"}),h.jsx(Pt,{value:"pendente",children:"Pendente"}),h.jsx(Pt,{value:"cancelada",children:"Cancelado"})]})]}),h.jsxs(Je,{variant:"outline",onClick:P,disabled:S.length===0,children:[h.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Exportar CSV"]})]})}),S.length===0?h.jsxs(Fe,{className:"p-12 text-center text-muted-foreground",children:[h.jsx(ic,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),h.jsx("p",{children:"Nenhum pagamento encontrado"})]}):h.jsx("div",{className:"space-y-3",children:S.map(T=>h.jsx(Fe,{className:"p-4",children:h.jsx("div",{className:"flex items-center justify-between gap-4",children:h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("h3",{className:"font-normal",children:T.evento.titulo}),h.jsx(qt,{variant:T.inscricao.status==="confirmada"?"default":T.inscricao.status==="pendente"?"outline":"destructive",className:"gap-1",children:T.inscricao.status==="confirmada"?h.jsxs(h.Fragment,{children:[h.jsx(sc,{className:"w-3 h-3"})," Confirmado"]}):T.inscricao.status==="pendente"?h.jsxs(h.Fragment,{children:[h.jsx(xs,{className:"w-3 h-3"})," Pendente"]}):h.jsxs(h.Fragment,{children:[h.jsx(Po,{className:"w-3 h-3"})," Cancelado"]})})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(Zs,{className:"w-3 h-3"}),T.inscricao.usuario_email]}),h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(ic,{className:"w-3 h-3"}),"R$ ",(T.evento.valor||0).toFixed(2)]}),h.jsx("span",{children:ht(new Date(T.inscricao.created_at),"dd/MM/yyyy 's' HH:mm",{locale:Xt})})]})]})})},T.inscricao.id))})]})}function Pce(){const[n,e]=M.useState([]),[t,r]=M.useState([]),[s,i]=M.useState(!0),[o,l]=M.useState(""),[c,f]=M.useState("todos"),[g,y]=M.useState(!1),[_,E]=M.useState(null),P=M.useCallback(async()=>{var z;try{i(!0);const{data:{session:F},error:X}=await Ce.auth.getSession();if(X||!((z=F==null?void 0:F.user)!=null&&z.email)){xe.error("Voc precisa estar logado"),i(!1);return}const{data:Z,error:ne}=await Ce.from("eventos").select("id, titulo, data_inicio, data_fim, carga_horaria, gera_certificado").eq("organizador_email",F.user.email).eq("gera_certificado",!0).eq("status","finalizado").order("data_inicio",{ascending:!1});if(ne){console.error("Erro ao buscar eventos:",ne),xe.error(`Erro ao carregar eventos: ${ne.message}`),i(!1);return}const se=await Promise.all((Z||[]).map(async ce=>{const{count:de}=await Ce.from("inscricoes").select("*",{count:"exact",head:!0}).eq("evento_id",ce.id).eq("status","confirmada"),{data:re}=await Ce.from("presencas").select("usuario_email").eq("evento_id",ce.id),fe=[...new Set(re==null?void 0:re.map(Q=>Q.usuario_email))].length,{count:oe}=await Ce.from("certificados").select("*",{count:"exact",head:!0}).eq("evento_id",ce.id);return{...ce,totalInscritos:de||0,totalPresencas:fe,certificadosEmitidos:oe||0}}));e(se);const ee=se.map(ce=>ce.id);if(ee.length>0){const{data:ce,error:de}=await Ce.from("certificados").select("*").in("evento_id",ee).order("data_emissao",{ascending:!1});de?console.error("Erro ao buscar certificados:",de):r(ce||[])}}catch(F){console.error("Erro ao carregar dados:",F),xe.error(`Erro: ${F.message||"Erro desconhecido"}`)}finally{i(!1)}},[]);M.useEffect(()=>{P()},[P]);const S=async z=>{try{y(!0);const{data:F}=await Ce.from("presencas").select("usuario_email, usuario_nome").eq("evento_id",z);if(!F||F.length===0){xe.error("Nenhuma presena registrada para este evento");return}const X=F.reduce((de,re)=>(de[re.usuario_email]=(de[re.usuario_email]||0)+1,de),{}),Z=n.find(de=>de.id===z),ne=Math.ceil((new Date(Z.data_fim).getTime()-new Date(Z.data_inicio).getTime())/(1e3*60*60*24))+1,se=Object.entries(X).filter(([de,re])=>re/ne>=.75).map(([de])=>de);if(se.length===0){xe.error("Nenhum participante atingiu 75% de presena");return}const ee=se.map(de=>{const re=F.find(fe=>fe.usuario_email===de);return{evento_id:z,usuario_email:de,usuario_nome:(re==null?void 0:re.usuario_nome)||de,codigo_validacao:`CERT-${Date.now()}-${Math.random().toString(36).substr(2,9)}`.toUpperCase(),data_emissao:new Date().toISOString()}}),{error:ce}=await Ce.from("certificados").upsert(ee,{onConflict:"evento_id,usuario_email",ignoreDuplicates:!1});if(ce)throw ce;xe.success(`${se.length} certificados emitidos com sucesso!`),P()}catch(F){console.error("Erro ao emitir certificados:",F),xe.error(`Erro ao emitir certificados: ${F.message}`)}finally{y(!1),E(null)}},I=()=>t.filter(z=>{var Z;const F=!o||z.usuario_email.toLowerCase().includes(o.toLowerCase())||((Z=z.usuario_nome)==null?void 0:Z.toLowerCase().includes(o.toLowerCase()))||z.codigo_validacao.toLowerCase().includes(o.toLowerCase()),X=c==="todos"||z.evento_id===c;return F&&X}),N=()=>{const z=I(),F=[["Evento","Participante","Email","Cdigo Validao","Data Emisso"].join(","),...z.map(ne=>{const se=n.find(ee=>ee.id===ne.evento_id);return[(se==null?void 0:se.titulo)||"N/A",ne.usuario_nome||"N/A",ne.usuario_email,ne.codigo_validacao,ht(new Date(ne.data_emissao),"dd/MM/yyyy HH:mm",{locale:Xt})].join(",")})].join(`
`),X=new Blob([F],{type:"text/csv;charset=utf-8;"}),Z=document.createElement("a");Z.href=URL.createObjectURL(X),Z.download=`certificados-${ht(new Date,"yyyy-MM-dd")}.csv`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),xe.success("CSV exportado com sucesso!")},k=z=>{var F;return((F=n.find(X=>X.id===z))==null?void 0:F.titulo)||"Evento no encontrado"},T=I(),D=T.length,U=[...new Set(T.map(z=>z.evento_id))].length;return s?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Certificados"}),h.jsx("p",{className:"text-muted-foreground",children:"Gerencie a emisso de certificados"})]}),h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(vs,{className:"w-8 h-8 animate-spin text-muted-foreground"})})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Certificados"}),h.jsx("p",{className:"text-muted-foreground",children:"Gerencie a emisso de certificados"})]}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:h.jsx(Su,{className:"w-6 h-6 text-primary"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Certificados"}),h.jsx("p",{className:"text-2xl font-normal",children:D})]})]})}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"p-3 bg-green-500/10 rounded-lg",children:h.jsx(sc,{className:"w-6 h-6 text-green-500"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Eventos com Certificados"}),h.jsx("p",{className:"text-2xl font-normal",children:U})]})]})}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"p-3 bg-blue-500/10 rounded-lg",children:h.jsx(ac,{className:"w-6 h-6 text-blue-500"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Eventos Finalizados"}),h.jsx("p",{className:"text-2xl font-normal",children:n.length})]})]})})]}),n.length>0&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("h2",{className:"text-lg font-normal",children:"Eventos Finalizados"}),h.jsx("div",{className:"grid gap-4",children:n.map(z=>h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center justify-between gap-4",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-normal mb-2",children:z.titulo}),h.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[h.jsxs("span",{children:[z.carga_horaria,"h"]}),h.jsx("span",{children:""}),h.jsxs("span",{children:[z.totalInscritos," inscritos"]}),h.jsx("span",{children:""}),h.jsxs("span",{children:[z.totalPresencas," com presena"]}),h.jsx("span",{children:""}),h.jsxs("span",{className:"text-primary",children:[z.certificadosEmitidos," certificados emitidos"]})]})]}),h.jsxs(Je,{variant:"elegant",onClick:()=>E(z.id),disabled:g,children:[h.jsx(Su,{className:"w-4 h-4 mr-2"}),z.certificadosEmitidos>0?"Reemitir":"Emitir"," Certificados"]})]})},z.id))})]}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[h.jsx("div",{className:"flex-1",children:h.jsxs("div",{className:"relative",children:[h.jsx(Q1,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),h.jsx(Qt,{placeholder:"Buscar por participante, email ou cdigo...",value:o,onChange:z=>l(z.target.value),className:"pl-10"})]})}),h.jsxs(Qs,{value:c,onValueChange:f,children:[h.jsx(ks,{className:"w-full md:w-[250px]",children:h.jsx(Js,{placeholder:"Filtrar por evento"})}),h.jsxs(Ms,{children:[h.jsx(Pt,{value:"todos",children:"Todos os eventos"}),n.map(z=>h.jsx(Pt,{value:z.id,children:z.titulo},z.id))]})]}),h.jsxs(Je,{variant:"outline",onClick:N,disabled:T.length===0,children:[h.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Exportar CSV"]})]})}),T.length===0?h.jsxs(Fe,{className:"p-12 text-center text-muted-foreground",children:[h.jsx(Su,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),h.jsx("p",{children:"Nenhum certificado emitido ainda"})]}):h.jsx("div",{className:"space-y-3",children:T.map(z=>h.jsx(Fe,{className:"p-4",children:h.jsx("div",{className:"flex items-center justify-between gap-4",children:h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("h3",{className:"font-normal",children:k(z.evento_id)}),h.jsxs(qt,{variant:"default",className:"gap-1",children:[h.jsx(sc,{className:"w-3 h-3"}),"Emitido"]})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(Zs,{className:"w-3 h-3"}),z.usuario_nome||z.usuario_email]}),h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(ac,{className:"w-3 h-3"}),z.codigo_validacao]}),h.jsx("span",{children:ht(new Date(z.data_emissao),"dd/MM/yyyy 's' HH:mm",{locale:Xt})})]})]})})},z.id))}),h.jsx(dp,{open:_!==null,onOpenChange:()=>E(null),children:h.jsxs(kh,{children:[h.jsxs(Mh,{children:[h.jsx(Dh,{children:"Emitir Certificados"}),h.jsx(hI,{children:"Certificados sero emitidos para todos os participantes com pelo menos 75% de presena. Esta ao pode sobrescrever certificados j emitidos."})]}),h.jsxs(Oh,{children:[h.jsx(ob,{children:"Cancelar"}),h.jsx(jh,{onClick:()=>_&&S(_),disabled:g,children:g?"Emitindo...":"Confirmar"})]})]})})]})}function Ice(){const[n,e]=M.useState([]),[t,r]=M.useState(!0),[s,i]=M.useState("todos"),o=M.useCallback(async()=>{var g;try{r(!0);const{data:{session:y},error:_}=await Ce.auth.getSession();if(_||!((g=y==null?void 0:y.user)!=null&&g.email)){xe.error("Voc precisa estar logado"),r(!1);return}const{data:E,error:P}=await Ce.from("eventos").select("*").eq("organizador_email",y.user.email).order("data_inicio",{ascending:!1});if(P){console.error("Erro ao buscar eventos:",P),xe.error(`Erro ao carregar eventos: ${P.message}`),r(!1);return}if(!E||E.length===0){xe.info("Voc ainda no criou nenhum evento"),e([]),r(!1);return}const S=await Promise.all(E.map(async I=>{const{data:N}=await Ce.from("inscricoes").select("status").eq("evento_id",I.id),k=(N==null?void 0:N.length)||0,T=(N==null?void 0:N.filter(se=>se.status==="confirmada").length)||0,D=(N==null?void 0:N.filter(se=>se.status==="pendente").length)||0,U=(N==null?void 0:N.filter(se=>se.status==="cancelada").length)||0,{data:z}=await Ce.from("presencas").select("usuario_email").eq("evento_id",I.id),F=(z==null?void 0:z.length)||0,X=[...new Set(z==null?void 0:z.map(se=>se.usuario_email))].length,{count:Z}=await Ce.from("certificados").select("*",{count:"exact",head:!0}).eq("evento_id",I.id),ne=(I.valor||0)*T;return{...I,totalInscritos:k,inscritosConfirmados:T,inscritosPendentes:D,inscritosCancelados:U,totalPresencas:F,participantesComPresenca:X,certificadosEmitidos:Z||0,valorArrecadado:ne}}));e(S)}catch(y){console.error("Erro ao carregar dados:",y),xe.error(`Erro: ${y.message||"Erro desconhecido"}`)}finally{r(!1)}},[]);M.useEffect(()=>{o()},[o]);const l=s==="todos"?n:n.filter(g=>g.id===s),c=l.reduce((g,y)=>({inscritos:g.inscritos+y.totalInscritos,presencas:g.presencas+y.totalPresencas,certificados:g.certificados+y.certificadosEmitidos,valorArrecadado:g.valorArrecadado+y.valorArrecadado}),{inscritos:0,presencas:0,certificados:0,valorArrecadado:0}),f=()=>{const g=[["Evento","Tipo","Status","Data Incio","Data Fim","Capacidade","Vagas Disponveis","Inscritos","Confirmados","Pendentes","Cancelados","Total Presenas","Participantes c/ Presena","Certificados","Valor","Arrecadado"].join(","),...l.map(E=>[E.titulo,E.tipo,E.status,ht(new Date(E.data_inicio),"dd/MM/yyyy",{locale:Xt}),ht(new Date(E.data_fim),"dd/MM/yyyy",{locale:Xt}),E.capacidade_maxima,E.vagas_disponiveis,E.totalInscritos,E.inscritosConfirmados,E.inscritosPendentes,E.inscritosCancelados,E.totalPresencas,E.participantesComPresenca,E.certificadosEmitidos,`R$ ${(E.valor||0).toFixed(2)}`,`R$ ${E.valorArrecadado.toFixed(2)}`].join(","))].join(`
`),y=new Blob([g],{type:"text/csv;charset=utf-8;"}),_=document.createElement("a");_.href=URL.createObjectURL(y),_.download=`relatorio-eventos-${ht(new Date,"yyyy-MM-dd")}.csv`,document.body.appendChild(_),_.click(),document.body.removeChild(_),xe.success("Relatrio exportado com sucesso!")};return t?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Relatrios"}),h.jsx("p",{className:"text-muted-foreground",children:"Visualize relatrios detalhados dos seus eventos"})]}),h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(vs,{className:"w-8 h-8 animate-spin text-muted-foreground"})})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Relatrios"}),h.jsx("p",{className:"text-muted-foreground",children:"Visualize relatrios detalhados dos seus eventos"})]}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Filtrar por Evento"}),h.jsxs(Qs,{value:s,onValueChange:i,children:[h.jsx(ks,{children:h.jsx(Js,{placeholder:"Selecione um evento"})}),h.jsxs(Ms,{children:[h.jsx(Pt,{value:"todos",children:"Todos os eventos"}),n.map(g=>h.jsx(Pt,{value:g.id,children:g.titulo},g.id))]})]})]}),h.jsxs(Je,{variant:"outline",onClick:f,disabled:l.length===0,children:[h.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Exportar Relatrio"]})]})}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"p-3 bg-blue-500/10 rounded-lg",children:h.jsx(Zs,{className:"w-6 h-6 text-blue-500"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Inscritos"}),h.jsx("p",{className:"text-2xl font-normal",children:c.inscritos})]})]})}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"p-3 bg-green-500/10 rounded-lg",children:h.jsx(sc,{className:"w-6 h-6 text-green-500"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Presenas"}),h.jsx("p",{className:"text-2xl font-normal",children:c.presencas})]})]})}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"p-3 bg-purple-500/10 rounded-lg",children:h.jsx(Su,{className:"w-6 h-6 text-purple-500"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Certificados"}),h.jsx("p",{className:"text-2xl font-normal",children:c.certificados})]})]})}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-lg",children:h.jsx(ic,{className:"w-6 h-6 text-emerald-500"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Arrecadado"}),h.jsxs("p",{className:"text-2xl font-normal",children:["R$ ",c.valorArrecadado.toFixed(2)]})]})]})})]}),l.length===0?h.jsxs(Fe,{className:"p-12 text-center text-muted-foreground",children:[h.jsx(MQ,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),h.jsx("p",{children:"Nenhum evento encontrado"})]}):h.jsx("div",{className:"space-y-4",children:l.map(g=>{const y=(g.capacidade_maxima-g.vagas_disponiveis)/g.capacidade_maxima*100,_=g.totalInscritos>0?g.participantesComPresenca/g.inscritosConfirmados*100:0;return h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"flex items-start justify-between gap-4",children:h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("h3",{className:"text-lg font-normal",children:g.titulo}),h.jsx(qt,{variant:g.status==="aprovado"?"default":g.status==="pendente"?"outline":g.status==="finalizado"?"secondary":"destructive",children:g.status}),h.jsx(qt,{variant:"outline",children:g.tipo})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(or,{className:"w-3 h-3"}),ht(new Date(g.data_inicio),"dd/MM/yyyy",{locale:Xt})," - ",ht(new Date(g.data_fim),"dd/MM/yyyy",{locale:Xt})]}),h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(xs,{className:"w-3 h-3"}),g.carga_horaria,"h"]}),g.valor&&g.valor>0&&h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(ic,{className:"w-3 h-3"}),"R$ ",g.valor.toFixed(2)]})]})]})}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[h.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[h.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Capacidade"}),h.jsx("p",{className:"text-lg font-normal",children:g.capacidade_maxima})]}),h.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[h.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Vagas Livres"}),h.jsx("p",{className:"text-lg font-normal",children:g.vagas_disponiveis})]}),h.jsxs("div",{className:"p-3 bg-blue-500/10 rounded-lg",children:[h.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Inscritos"}),h.jsx("p",{className:"text-lg font-normal text-blue-500",children:g.totalInscritos})]}),h.jsxs("div",{className:"p-3 bg-green-500/10 rounded-lg",children:[h.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Confirmados"}),h.jsx("p",{className:"text-lg font-normal text-green-500",children:g.inscritosConfirmados})]}),h.jsxs("div",{className:"p-3 bg-yellow-500/10 rounded-lg",children:[h.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Pendentes"}),h.jsx("p",{className:"text-lg font-normal text-yellow-600",children:g.inscritosPendentes})]}),h.jsxs("div",{className:"p-3 bg-red-500/10 rounded-lg",children:[h.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Cancelados"}),h.jsx("p",{className:"text-lg font-normal text-red-500",children:g.inscritosCancelados})]}),h.jsxs("div",{className:"p-3 bg-purple-500/10 rounded-lg",children:[h.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Presenas"}),h.jsx("p",{className:"text-lg font-normal text-purple-500",children:g.totalPresencas})]}),h.jsxs("div",{className:"p-3 bg-indigo-500/10 rounded-lg",children:[h.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Participantes"}),h.jsx("p",{className:"text-lg font-normal text-indigo-500",children:g.participantesComPresenca})]}),g.gera_certificado&&h.jsxs("div",{className:"p-3 bg-amber-500/10 rounded-lg",children:[h.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Certificados"}),h.jsx("p",{className:"text-lg font-normal text-amber-600",children:g.certificadosEmitidos})]}),g.valor&&g.valor>0&&h.jsxs("div",{className:"p-3 bg-emerald-500/10 rounded-lg",children:[h.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Arrecadado"}),h.jsxs("p",{className:"text-lg font-normal text-emerald-600",children:["R$ ",g.valorArrecadado.toFixed(2)]})]}),h.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[h.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Taxa Ocupao"}),h.jsxs("p",{className:"text-lg font-normal",children:[y.toFixed(1),"%"]})]}),h.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[h.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Comparecimento"}),h.jsxs("p",{className:"text-lg font-normal",children:[_.toFixed(1),"%"]})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-1",children:[h.jsx("span",{children:"Ocupao"}),h.jsxs("span",{children:[y.toFixed(1),"%"]})]}),h.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-blue-500 transition-all",style:{width:`${y}%`}})})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-1",children:[h.jsx("span",{children:"Comparecimento"}),h.jsxs("span",{children:[_.toFixed(1),"%"]})]}),h.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-green-500 transition-all",style:{width:`${_}%`}})})]})]})]})},g.id)})})]})}function Rce(){const[n,e]=M.useState([]),[t,r]=M.useState(!0),[s,i]=M.useState(null),[o,l]=M.useState(!1),[c,f]=M.useState(!1),[g,y]=M.useState(""),[_,E]=M.useState(!1);M.useEffect(()=>{P();const T=Ce.channel("eventos-pendentes").on("postgres_changes",{event:"*",schema:"public",table:"eventos",filter:"status=eq.pendente"},()=>{P()}).subscribe();return()=>{Ce.removeChannel(T)}},[]);const P=async()=>{try{const{data:T,error:D}=await Ce.from("eventos").select("*").eq("status","pendente").order("created_at",{ascending:!1});if(D)throw D;e(T||[])}catch(T){console.error("Erro ao carregar eventos:",T),xe.error("Erro ao carregar solicitaes")}finally{r(!1)}},S=async()=>{var T;if(s){E(!0);try{const{data:{session:D}}=await Ce.auth.getSession();if(!((T=D==null?void 0:D.user)!=null&&T.email)){xe.error("Voc precisa estar logado");return}const{error:U}=await Ce.from("eventos").update({status:"aprovado",aprovador_email:D.user.email,data_aprovacao:new Date().toISOString()}).eq("id",s.id);if(U)throw U;xe.success("Solicitao aprovada com sucesso!"),l(!1),P()}catch(D){console.error("Erro ao aprovar:",D),xe.error("Erro ao aprovar evento")}finally{E(!1)}}},I=async()=>{var T;if(!g.trim()){xe.error("Por favor, descreva os ajustes necessrios");return}if(s){E(!0);try{const{data:{session:D}}=await Ce.auth.getSession();if(!((T=D==null?void 0:D.user)!=null&&T.email)){xe.error("Voc precisa estar logado");return}const{error:U}=await Ce.from("eventos").update({status:"rejeitado",aprovador_email:D.user.email,data_aprovacao:new Date().toISOString(),motivo_rejeicao:`Ajustes necessrios: ${g}`}).eq("id",s.id);if(U)throw U;xe.success("Feedback enviado para ajustes!"),f(!1),l(!1),y(""),P()}catch(D){console.error("Erro ao solicitar ajustes:",D),xe.error("Erro ao enviar feedback")}finally{E(!1)}}},N=async()=>{var T;if(s){E(!0);try{const{data:{session:D}}=await Ce.auth.getSession();if(!((T=D==null?void 0:D.user)!=null&&T.email)){xe.error("Voc precisa estar logado");return}const{error:U}=await Ce.from("eventos").update({status:"rejeitado",aprovador_email:D.user.email,data_aprovacao:new Date().toISOString(),motivo_rejeicao:"Solicitao rejeitada"}).eq("id",s.id);if(U)throw U;xe.success("Solicitao rejeitada!"),l(!1),P()}catch(D){console.error("Erro ao rejeitar:",D),xe.error("Erro ao rejeitar evento")}finally{E(!1)}}},k=T=>({palestra:"Palestra",workshop:"Workshop",seminario:"Seminrio",conferencia:"Conferncia",curso:"Curso",outro:"Outro"})[T]||T;return t?h.jsxs("div",{className:"space-y-6",children:[h.jsx("h1",{className:"text-3xl font-light",children:"Solicitaes Pendentes"}),h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsx("p",{className:"text-muted-foreground",children:"Carregando solicitaes..."})})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsx("h1",{className:"text-3xl font-light",children:"Solicitaes Pendentes"}),n.length===0?h.jsx(Fe,{className:"p-12 text-center",children:h.jsx("p",{className:"text-muted-foreground",children:"Nenhuma solicitao pendente no momento"})}):h.jsx("div",{className:"space-y-4",children:n.map(T=>h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("h3",{className:"text-lg font-normal",children:T.titulo}),h.jsxs(qt,{variant:"outline",className:"gap-1",children:[h.jsx(xs,{className:"w-3 h-3"}),"Pendente"]}),T.categoria&&h.jsx(qt,{variant:"secondary",children:T.categoria})]}),h.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[h.jsxs("p",{children:["Solicitado por: ",T.organizador_nome||T.organizador_email]}),h.jsxs("p",{className:"flex items-center gap-2",children:[h.jsx(or,{className:"w-3 h-3"}),ht(new Date(T.data_inicio),"dd/MM/yyyy",{locale:Xt})," - ",ht(new Date(T.data_fim),"dd/MM/yyyy",{locale:Xt})]}),h.jsxs("p",{className:"flex items-center gap-2",children:[h.jsx(fp,{className:"w-3 h-3"}),T.local,T.campus&&` - ${T.campus}`]}),h.jsxs("p",{className:"flex items-center gap-2",children:[h.jsx(Zs,{className:"w-3 h-3"}),T.capacidade_maxima," vagas  ",T.carga_horaria||0,"h"]})]})]}),h.jsxs(Je,{variant:"elegant",size:"sm",onClick:()=>{i(T),l(!0)},children:[h.jsx(LC,{className:"w-4 h-4 mr-2"}),"Analisar"]})]})},T.id))}),h.jsx(sy,{open:o,onOpenChange:l,children:h.jsxs(M1,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[h.jsx(O1,{children:h.jsx(D1,{children:"Analisar Solicitao"})}),h.jsxs("div",{className:"space-y-6",children:[(s==null?void 0:s.banner_url)&&h.jsx("img",{src:s.banner_url,alt:s.titulo,className:"w-full h-48 object-cover rounded-lg"}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-normal mb-4",children:s==null?void 0:s.titulo}),h.jsxs("div",{className:"space-y-2 text-sm",children:[h.jsxs("p",{children:[h.jsx("span",{className:"text-muted-foreground",children:"Tipo:"})," ",s&&k(s.tipo)]}),h.jsxs("p",{children:[h.jsx("span",{className:"text-muted-foreground",children:"Solicitante:"})," ",(s==null?void 0:s.organizador_nome)||(s==null?void 0:s.organizador_email)]}),h.jsxs("p",{children:[h.jsx("span",{className:"text-muted-foreground",children:"Perodo:"})," ",s&&ht(new Date(s.data_inicio),"dd/MM/yyyy HH:mm",{locale:Xt})," at ",s&&ht(new Date(s.data_fim),"dd/MM/yyyy HH:mm",{locale:Xt})]}),h.jsxs("p",{children:[h.jsx("span",{className:"text-muted-foreground",children:"Local:"})," ",s==null?void 0:s.local,(s==null?void 0:s.campus)&&` - ${s.campus}`,(s==null?void 0:s.sala)&&` (${s.sala})`]}),h.jsxs("p",{children:[h.jsx("span",{className:"text-muted-foreground",children:"Capacidade:"})," ",s==null?void 0:s.capacidade_maxima," pessoas"]}),h.jsxs("p",{children:[h.jsx("span",{className:"text-muted-foreground",children:"Carga horria:"})," ",(s==null?void 0:s.carga_horaria)||0,"h"]}),h.jsxs("p",{children:[h.jsx("span",{className:"text-muted-foreground",children:"Gera certificado:"})," ",s!=null&&s.gera_certificado?"Sim":"No"]}),h.jsxs("p",{children:[h.jsx("span",{className:"text-muted-foreground",children:"Data de envio:"})," ",s&&ht(new Date(s.created_at),"dd/MM/yyyy HH:mm",{locale:Xt})]})]})]}),(s==null?void 0:s.descricao)&&h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium mb-2",children:"Descrio"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:s.descricao})]}),(s==null?void 0:s.tags)&&s.tags.length>0&&h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium mb-2",children:"Palestrantes"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((T,D)=>h.jsx(qt,{variant:"secondary",children:T},D))})]}),(s==null?void 0:s.publico_alvo)&&h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium mb-2",children:"Pblico Alvo"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:s.publico_alvo})]}),(s==null?void 0:s.requisitos)&&h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium mb-2",children:"Requisitos"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:s.requisitos})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(Je,{variant:"elegant",onClick:S,className:"flex-1",disabled:_,children:[h.jsx(bi,{className:"w-4 h-4 mr-2"}),"Aprovar"]}),h.jsxs(Je,{variant:"outline",onClick:()=>f(!0),className:"flex-1",disabled:_,children:[h.jsx(ac,{className:"w-4 h-4 mr-2"}),"Solicitar Ajustes"]}),h.jsxs(Je,{variant:"outline",onClick:N,className:"flex-1 text-destructive",disabled:_,children:[h.jsx(Po,{className:"w-4 h-4 mr-2"}),"Rejeitar"]})]})]})]})}),h.jsx(sy,{open:c,onOpenChange:f,children:h.jsxs(M1,{className:"max-w-md",children:[h.jsx(O1,{children:h.jsx(D1,{children:"Solicitar Ajustes"})}),h.jsxs("div",{className:"space-y-4",children:[h.jsx(Fg,{value:g,onChange:T=>y(T.target.value),placeholder:"Descreva os ajustes necessrios...",rows:6}),h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx(Je,{variant:"outline",onClick:()=>f(!1),disabled:_,children:"Cancelar"}),h.jsx(Je,{variant:"elegant",onClick:I,disabled:_||!g.trim(),children:"Enviar Feedback"})]})]})]})})]})}function kce(){const[n,e]=M.useState([]),[t,r]=M.useState(!0);M.useEffect(()=>{s();const i=Ce.channel("eventos-aprovados-changes").on("postgres_changes",{event:"*",schema:"public",table:"eventos",filter:"status=eq.aprovado"},()=>{s()}).subscribe();return()=>{Ce.removeChannel(i)}},[]);const s=async()=>{try{r(!0);const{data:i,error:o}=await Ce.from("eventos").select("id, titulo, organizador_nome, updated_at, carga_horaria").eq("status","aprovado").order("updated_at",{ascending:!1});if(o)throw o;e(i||[])}catch(i){console.error("Erro ao carregar eventos aprovados:",i),xe.error("Erro ao carregar eventos aprovados")}finally{r(!1)}};return t?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Solicitaes Aprovadas"}),h.jsx("p",{className:"text-muted-foreground",children:"Visualize todas as solicitaes que foram aprovadas"})]}),h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(vs,{className:"w-8 h-8 animate-spin text-muted-foreground"})})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Solicitaes Aprovadas"}),h.jsx("p",{className:"text-muted-foreground",children:"Visualize todas as solicitaes que foram aprovadas"})]}),h.jsx("div",{className:"space-y-4",children:n.length===0?h.jsx(Fe,{className:"p-12",children:h.jsxs("div",{className:"text-center text-muted-foreground",children:[h.jsx(bi,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),h.jsx("p",{children:"Nenhum evento aprovado ainda"})]})}):n.map(i=>h.jsx(Fe,{className:"p-6",children:h.jsx("div",{className:"flex justify-between items-start",children:h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("h3",{className:"text-lg font-normal",children:i.titulo}),h.jsxs(qt,{variant:"default",className:"gap-1",children:[h.jsx(bi,{className:"w-3 h-3"}),"Aprovado"]})]}),h.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[h.jsxs("p",{children:["Solicitado por: ",i.organizador_nome]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(or,{className:"w-3 h-3"}),"Aprovado em: ",ht(new Date(i.updated_at),"dd/MM/yyyy",{locale:Xt})]}),i.carga_horaria&&h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(xs,{className:"w-3 h-3"}),i.carga_horaria,"h"]})]})]})]})})},i.id))})]})}function Mce(){const[n,e]=M.useState([]),[t,r]=M.useState(!0);M.useEffect(()=>{s();const i=Ce.channel("eventos-rejeitados-changes").on("postgres_changes",{event:"*",schema:"public",table:"eventos",filter:"status=eq.rejeitado"},()=>{s()}).subscribe();return()=>{Ce.removeChannel(i)}},[]);const s=async()=>{try{r(!0);const{data:i,error:o}=await Ce.from("eventos").select("id, titulo, organizador_nome, updated_at, carga_horaria, motivo_rejeicao").eq("status","rejeitado").order("updated_at",{ascending:!1});if(o)throw o;e(i||[])}catch(i){console.error("Erro ao carregar eventos rejeitados:",i),xe.error("Erro ao carregar eventos rejeitados")}finally{r(!1)}};return t?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Solicitaes Rejeitadas"}),h.jsx("p",{className:"text-muted-foreground",children:"Visualize todas as solicitaes que foram rejeitadas"})]}),h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(vs,{className:"w-8 h-8 animate-spin text-muted-foreground"})})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Solicitaes Rejeitadas"}),h.jsx("p",{className:"text-muted-foreground",children:"Visualize todas as solicitaes que foram rejeitadas"})]}),h.jsx("div",{className:"space-y-4",children:n.length===0?h.jsx(Fe,{className:"p-12",children:h.jsxs("div",{className:"text-center text-muted-foreground",children:[h.jsx(Po,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),h.jsx("p",{children:"Nenhum evento rejeitado"})]})}):n.map(i=>h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{className:"flex-1 space-y-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("h3",{className:"text-lg font-normal",children:i.titulo}),h.jsxs(qt,{variant:"destructive",className:"gap-1",children:[h.jsx(Po,{className:"w-3 h-3"}),"Rejeitado"]})]}),h.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[h.jsxs("p",{children:["Solicitado por: ",i.organizador_nome]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(or,{className:"w-3 h-3"}),"Rejeitado em: ",ht(new Date(i.updated_at),"dd/MM/yyyy",{locale:Xt})]}),i.carga_horaria&&h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(xs,{className:"w-3 h-3"}),i.carga_horaria,"h"]})]}),i.motivo_rejeicao&&h.jsx("div",{className:"mt-2 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:h.jsxs("p",{className:"text-sm",children:[h.jsx("span",{className:"font-normal",children:"Motivo:"})," ",i.motivo_rejeicao]})})]})]}),h.jsxs(Je,{variant:"outline",size:"sm",children:[h.jsx(LC,{className:"w-4 h-4 mr-2"}),"Ver Detalhes"]})]})},i.id))})]})}function Oce(){const{id:n}=RL();return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Analisar Evento"}),h.jsxs("p",{className:"text-muted-foreground",children:["Analise detalhadamente a solicitao do evento #",n]})]}),h.jsx("div",{className:"grid gap-4",children:h.jsx("div",{className:"border border-border rounded-lg p-6",children:h.jsx("p",{className:"text-muted-foreground",children:"Funcionalidade em desenvolvimento"})})})]})}function Dce(){const[n,e]=M.useState([]),[t,r]=M.useState(!0),[s,i]=M.useState("todos");M.useEffect(()=>{o();const c=Ce.channel("historico-changes").on("postgres_changes",{event:"*",schema:"public",table:"eventos"},()=>{o()}).subscribe();return()=>{Ce.removeChannel(c)}},[]);const o=async()=>{try{r(!0);const{data:c,error:f}=await Ce.from("eventos").select("id, titulo, organizador_nome, updated_at, carga_horaria, status, motivo_rejeicao").in("status",["aprovado","rejeitado"]).order("updated_at",{ascending:!1});if(f)throw f;e(c||[])}catch(c){console.error("Erro ao carregar histrico:",c),xe.error("Erro ao carregar histrico")}finally{r(!1)}},l=s==="todos"?n:n.filter(c=>c.status===s);return t?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Histrico"}),h.jsx("p",{className:"text-muted-foreground",children:"Visualize o histrico de todas as aprovaes"})]}),h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(vs,{className:"w-8 h-8 animate-spin text-muted-foreground"})})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Histrico"}),h.jsx("p",{className:"text-muted-foreground",children:"Visualize o histrico de todas as aprovaes"})]}),h.jsxs(TR,{value:s,onValueChange:c=>i(c),className:"w-full",children:[h.jsxs(rA,{children:[h.jsxs(ec,{value:"todos",children:["Todos (",n.length,")"]}),h.jsxs(ec,{value:"aprovado",children:["Aprovados (",n.filter(c=>c.status==="aprovado").length,")"]}),h.jsxs(ec,{value:"rejeitado",children:["Rejeitados (",n.filter(c=>c.status==="rejeitado").length,")"]})]}),h.jsx(gh,{value:s,className:"space-y-4 mt-6",children:l.length===0?h.jsx(Fe,{className:"p-12",children:h.jsxs("div",{className:"text-center text-muted-foreground",children:[h.jsx(UQ,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),h.jsx("p",{children:"Nenhum evento no histrico"})]})}):l.map(c=>h.jsx(Fe,{className:"p-6",children:h.jsx("div",{className:"flex justify-between items-start",children:h.jsxs("div",{className:"flex-1 space-y-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("h3",{className:"text-lg font-normal",children:c.titulo}),c.status==="aprovado"?h.jsxs(qt,{variant:"default",className:"gap-1",children:[h.jsx(bi,{className:"w-3 h-3"}),"Aprovado"]}):h.jsxs(qt,{variant:"destructive",className:"gap-1",children:[h.jsx(Po,{className:"w-3 h-3"}),"Rejeitado"]})]}),h.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[h.jsxs("p",{children:["Solicitado por: ",c.organizador_nome]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(or,{className:"w-3 h-3"}),c.status==="aprovado"?"Aprovado":"Rejeitado"," em:"," ",ht(new Date(c.updated_at),"dd/MM/yyyy 's' HH:mm",{locale:Xt})]}),c.carga_horaria&&h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(xs,{className:"w-3 h-3"}),c.carga_horaria,"h"]})]}),c.status==="rejeitado"&&c.motivo_rejeicao&&h.jsx("div",{className:"mt-2 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:h.jsxs("p",{className:"text-sm",children:[h.jsx("span",{className:"font-normal",children:"Motivo:"})," ",c.motivo_rejeicao]})})]})]})})},c.id))})]})]})}function jce(){const[n,e]=M.useState({totalEventos:0,eventosAprovados:0,eventosRejeitados:0,eventosPendentes:0,cargaHorariaTotal:0,eventosPorMes:[]}),[t,r]=M.useState(!0);M.useEffect(()=>{s();const l=Ce.channel("relatorios-changes").on("postgres_changes",{event:"*",schema:"public",table:"eventos"},()=>{s()}).subscribe();return()=>{Ce.removeChannel(l)}},[]);const s=async()=>{try{r(!0);const{data:l,error:c}=await Ce.from("eventos").select("status, carga_horaria, created_at");if(c)throw c;const f=(l==null?void 0:l.length)||0,g=(l==null?void 0:l.filter(P=>P.status==="aprovado").length)||0,y=(l==null?void 0:l.filter(P=>P.status==="rejeitado").length)||0,_=(l==null?void 0:l.filter(P=>P.status==="pendente").length)||0,E=(l==null?void 0:l.reduce((P,S)=>P+(S.carga_horaria||0),0))||0;e({totalEventos:f,eventosAprovados:g,eventosRejeitados:y,eventosPendentes:_,cargaHorariaTotal:E,eventosPorMes:[]})}catch(l){console.error("Erro ao carregar relatrios:",l),xe.error("Erro ao carregar relatrios")}finally{r(!1)}},i=n.totalEventos>0?(n.eventosAprovados/n.totalEventos*100).toFixed(1):"0",o=n.totalEventos>0?(n.eventosRejeitados/n.totalEventos*100).toFixed(1):"0";return t?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Relatrios"}),h.jsx("p",{className:"text-muted-foreground",children:"Visualize relatrios detalhados de aprovaes"})]}),h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(vs,{className:"w-8 h-8 animate-spin text-muted-foreground"})})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Relatrios"}),h.jsx("p",{className:"text-muted-foreground",children:"Visualize relatrios detalhados de aprovaes"})]}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Eventos"}),h.jsx("h3",{className:"text-2xl font-light mt-2",children:n.totalEventos})]}),h.jsx(ac,{className:"w-8 h-8 text-muted-foreground opacity-50"})]})}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Aprovados"}),h.jsx("h3",{className:"text-2xl font-light mt-2",children:n.eventosAprovados}),h.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Taxa: ",i,"%"]})]}),h.jsx(bi,{className:"w-8 h-8 text-green-600 opacity-50"})]})}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Rejeitados"}),h.jsx("h3",{className:"text-2xl font-light mt-2",children:n.eventosRejeitados}),h.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Taxa: ",o,"%"]})]}),h.jsx(Po,{className:"w-8 h-8 text-red-600 opacity-50"})]})}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Pendentes"}),h.jsx("h3",{className:"text-2xl font-light mt-2",children:n.eventosPendentes}),h.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Aguardando anlise"})]}),h.jsx(xs,{className:"w-8 h-8 text-orange-600 opacity-50"})]})})]}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[h.jsxs(Fe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-normal",children:"Carga Horria Total"}),h.jsx(or,{className:"w-5 h-5 text-muted-foreground"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("p",{className:"text-3xl font-light",children:[n.cargaHorariaTotal,"h"]}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"De eventos aprovados"})]})]}),h.jsxs(Fe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-normal",children:"Performance de Aprovao"}),h.jsx(_5,{className:"w-5 h-5 text-muted-foreground"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[h.jsx("span",{className:"text-muted-foreground",children:"Taxa de Aprovao"}),h.jsxs("span",{className:"font-normal text-green-600",children:[i,"%"]})]}),h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:h.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all",style:{width:`${i}%`}})})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[h.jsx("span",{className:"text-muted-foreground",children:"Taxa de Rejeio"}),h.jsxs("span",{className:"font-normal text-red-600",children:[o,"%"]})]}),h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:h.jsx("div",{className:"bg-red-600 h-2 rounded-full transition-all",style:{width:`${o}%`}})})]})]})]})]}),h.jsxs(Fe,{className:"p-6",children:[h.jsx("h3",{className:"text-lg font-normal mb-4",children:"Resumo Geral"}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Processado"}),h.jsxs("p",{className:"text-xl font-light",children:[n.eventosAprovados+n.eventosRejeitados," eventos"]})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Aguardando Anlise"}),h.jsxs("p",{className:"text-xl font-light",children:[n.eventosPendentes," eventos"]})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Mdia de Carga Horria"}),h.jsxs("p",{className:"text-xl font-light",children:[n.eventosAprovados>0?(n.cargaHorariaTotal/n.eventosAprovados).toFixed(1):"0","h por evento"]})]})]})]})]})}const Lce=[{label:"Eventos Ativos",value:"12",icon:or,color:"text-blue-500"},{label:"Usurios Totais",value:"1,248",icon:Zs,color:"text-green-500"},{label:"Certificados Emitidos",value:"3,456",icon:Su,color:"text-purple-500"},{label:"Taxa de Presena",value:"87%",icon:_5,color:"text-orange-500"}];function Bce(){return h.jsxs("div",{className:"space-y-6",children:[h.jsx("h1",{className:"text-3xl font-light",children:"Viso Geral do Campus"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Lce.map((n,e)=>{const t=n.icon;return h.jsxs(Fe,{className:"p-6",children:[h.jsx("div",{className:"flex items-center justify-between mb-4",children:h.jsx(t,{className:`w-8 h-8 ${n.color}`})}),h.jsx("p",{className:"text-3xl font-light mb-1",children:n.value}),h.jsx("p",{className:"text-sm text-muted-foreground",children:n.label})]},e)})}),h.jsxs(Fe,{className:"p-6",children:[h.jsx("h2",{className:"text-xl font-light mb-4",children:"Eventos Recentes"}),h.jsx("div",{className:"space-y-3",children:[1,2,3].map(n=>h.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[h.jsxs("p",{className:"font-normal",children:["Evento de Exemplo ",n]}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Data: 12/01/2025"})]},n))})]})]})}function Fce(){return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Eventos do Campus"}),h.jsx("p",{className:"text-muted-foreground",children:"Visualize todos os eventos do campus"})]}),h.jsx("div",{className:"grid gap-4",children:h.jsx("div",{className:"border border-border rounded-lg p-6",children:h.jsx("p",{className:"text-muted-foreground",children:"Funcionalidade em desenvolvimento"})})})]})}function Uce(){return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Usurios"}),h.jsx("p",{className:"text-muted-foreground",children:"Gerencie os usurios do campus"})]}),h.jsx("div",{className:"grid gap-4",children:h.jsx("div",{className:"border border-border rounded-lg p-6",children:h.jsx("p",{className:"text-muted-foreground",children:"Funcionalidade em desenvolvimento"})})})]})}const az=M.forwardRef(({className:n,...e},t)=>h.jsx("div",{className:"relative w-full overflow-auto",children:h.jsx("table",{ref:t,className:et("w-full caption-bottom text-sm",n),...e})}));az.displayName="Table";const lz=M.forwardRef(({className:n,...e},t)=>h.jsx("thead",{ref:t,className:et("[&_tr]:border-b",n),...e}));lz.displayName="TableHeader";const cz=M.forwardRef(({className:n,...e},t)=>h.jsx("tbody",{ref:t,className:et("[&_tr:last-child]:border-0",n),...e}));cz.displayName="TableBody";const zce=M.forwardRef(({className:n,...e},t)=>h.jsx("tfoot",{ref:t,className:et("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...e}));zce.displayName="TableFooter";const nP=M.forwardRef(({className:n,...e},t)=>h.jsx("tr",{ref:t,className:et("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",n),...e}));nP.displayName="TableRow";const Cf=M.forwardRef(({className:n,...e},t)=>h.jsx("th",{ref:t,className:et("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...e}));Cf.displayName="TableHead";const Af=M.forwardRef(({className:n,...e},t)=>h.jsx("td",{ref:t,className:et("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...e}));Af.displayName="TableCell";const Hce=M.forwardRef(({className:n,...e},t)=>h.jsx("caption",{ref:t,className:et("mt-4 text-sm text-muted-foreground",n),...e}));Hce.displayName="TableCaption";const Vce=[{id:1,hash:"a1b2c3d4e5f6",aluno:"Joo Silva",evento:"Semana de Tecnologia 2025",dataEmissao:"16/01/2025",cargaHoraria:40},{id:2,hash:"x9y8z7w6v5u4",aluno:"Maria Santos",evento:"Workshop de React",dataEmissao:"05/02/2025",cargaHoraria:8},{id:3,hash:"m1n2o3p4q5r6",aluno:"Ana Costa",evento:"Hackathon 2024",dataEmissao:"12/12/2024",cargaHoraria:24}];function Wce(){const[n,e]=M.useState(""),t=Vce.filter(r=>n===""||r.aluno.toLowerCase().includes(n.toLowerCase())||r.evento.toLowerCase().includes(n.toLowerCase())||r.hash.includes(n));return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Certificados"}),h.jsx("p",{className:"text-muted-foreground",children:"Visualize todos os certificados emitidos"})]}),h.jsx(Fe,{className:"p-6",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx(Q1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),h.jsx(Qt,{placeholder:"Buscar por aluno, evento ou hash...",value:n,onChange:r=>e(r.target.value),className:"pl-10"})]}),h.jsx("div",{className:"border border-border rounded-lg",children:h.jsxs(az,{children:[h.jsx(lz,{children:h.jsxs(nP,{children:[h.jsx(Cf,{children:"Hash"}),h.jsx(Cf,{children:"Aluno"}),h.jsx(Cf,{children:"Evento"}),h.jsx(Cf,{children:"Data de Emisso"}),h.jsx(Cf,{children:"Carga Horria"}),h.jsx(Cf,{children:"Aes"})]})}),h.jsx(cz,{children:t.map(r=>h.jsxs(nP,{children:[h.jsx(Af,{className:"font-mono text-sm",children:r.hash}),h.jsx(Af,{children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(BC,{className:"w-4 h-4 text-muted-foreground"}),r.aluno]})}),h.jsx(Af,{children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ac,{className:"w-4 h-4 text-muted-foreground"}),r.evento]})}),h.jsx(Af,{children:h.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[h.jsx(or,{className:"w-4 h-4"}),r.dataEmissao]})}),h.jsxs(Af,{children:[r.cargaHoraria,"h"]}),h.jsx(Af,{children:h.jsxs(Je,{variant:"outline",size:"sm",children:[h.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Baixar"]})})]},r.id))})]})})]})})]})}function Gce(){return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Auditoria"}),h.jsx("p",{className:"text-muted-foreground",children:"Visualize os logs de auditoria do sistema"})]}),h.jsx("div",{className:"grid gap-4",children:h.jsx("div",{className:"border border-border rounded-lg p-6",children:h.jsx("p",{className:"text-muted-foreground",children:"Funcionalidade em desenvolvimento"})})})]})}function $ce(){return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Configuraes"}),h.jsx("p",{className:"text-muted-foreground",children:"Configure as opes do campus"})]}),h.jsx("div",{className:"grid gap-4",children:h.jsx("div",{className:"border border-border rounded-lg p-6",children:h.jsx("p",{className:"text-muted-foreground",children:"Funcionalidade em desenvolvimento"})})})]})}const qce=new QX,Xce=()=>h.jsx(eY,{client:qce,children:h.jsx(oK,{defaultTheme:"dark",children:h.jsx(cK,{children:h.jsxs(L$,{children:[h.jsx(F$,{}),h.jsx(AX,{children:h.jsx(QY,{children:h.jsxs(WY,{children:[h.jsx(Mt,{path:"/",element:h.jsx(ste,{})}),h.jsx(Mt,{path:"/login",element:h.jsx(yte,{})}),h.jsx(Mt,{path:"/cadastro",element:h.jsx(Bie,{})}),h.jsx(Mt,{path:"/validar-presenca",element:h.jsx(zM,{children:h.jsx(Fie,{})})}),h.jsx(Mt,{path:"/validar-certificado",element:h.jsx(zM,{children:h.jsx(jae,{})})}),h.jsx(Mt,{path:"/usuario",element:h.jsx(nn,{children:h.jsx(hf,{to:"/usuario/eventos",replace:!0})})}),h.jsx(Mt,{path:"/usuario/eventos",element:h.jsx(nn,{children:h.jsx(Vp,{children:h.jsx(zae,{})})})}),h.jsx(Mt,{path:"/usuario/minhas-inscricoes",element:h.jsx(nn,{children:h.jsx(Vp,{children:h.jsx(Hae,{})})})}),h.jsx(Mt,{path:"/usuario/registrar-presenca",element:h.jsx(nn,{children:h.jsx(Vp,{children:h.jsx(ble,{})})})}),h.jsx(Mt,{path:"/usuario/meus-certificados",element:h.jsx(nn,{children:h.jsx(Vp,{children:h.jsx(_le,{})})})}),h.jsx(Mt,{path:"/usuario/perfil",element:h.jsx(nn,{children:h.jsx(Vp,{children:h.jsx(Ele,{})})})}),h.jsx(Mt,{path:"/usuario/minhas-solicitacoes",element:h.jsx(nn,{children:h.jsx(Vp,{children:h.jsx(Cle,{})})})}),h.jsx(Mt,{path:"/organizador",element:h.jsx(nn,{children:h.jsx(hf,{to:"/organizador/meus-eventos",replace:!0})})}),h.jsx(Mt,{path:"/organizador/meus-eventos",element:h.jsx(nn,{children:h.jsx(Tc,{children:h.jsx(Ale,{})})})}),h.jsx(Mt,{path:"/organizador/criar-evento",element:h.jsx(nn,{children:h.jsx(Tc,{children:h.jsx(Rle,{})})})}),h.jsx(Mt,{path:"/organizador/evento/:id",element:h.jsx(nn,{children:h.jsx(Tc,{children:h.jsx(Lle,{})})})}),h.jsx(Mt,{path:"/organizador/dias-qrcodes",element:h.jsx(nn,{children:h.jsx(Tc,{children:h.jsx(Ace,{})})})}),h.jsx(Mt,{path:"/organizador/inscricoes",element:h.jsx(nn,{children:h.jsx(Tc,{children:h.jsx(Sce,{})})})}),h.jsx(Mt,{path:"/organizador/presencas",element:h.jsx(nn,{children:h.jsx(Tc,{children:h.jsx(Nce,{})})})}),h.jsx(Mt,{path:"/organizador/pagamentos",element:h.jsx(nn,{children:h.jsx(Tc,{children:h.jsx(Tce,{})})})}),h.jsx(Mt,{path:"/organizador/certificados",element:h.jsx(nn,{children:h.jsx(Tc,{children:h.jsx(Pce,{})})})}),h.jsx(Mt,{path:"/organizador/relatorios",element:h.jsx(nn,{children:h.jsx(Tc,{children:h.jsx(Ice,{})})})}),h.jsx(Mt,{path:"/aprovador",element:h.jsx(nn,{children:h.jsx(hf,{to:"/aprovador/solicitacoes-pendentes",replace:!0})})}),h.jsx(Mt,{path:"/aprovador/solicitacoes-pendentes",element:h.jsx(nn,{children:h.jsx(Wp,{children:h.jsx(Rce,{})})})}),h.jsx(Mt,{path:"/aprovador/solicitacoes-aprovadas",element:h.jsx(nn,{children:h.jsx(Wp,{children:h.jsx(kce,{})})})}),h.jsx(Mt,{path:"/aprovador/solicitacoes-rejeitadas",element:h.jsx(nn,{children:h.jsx(Wp,{children:h.jsx(Mce,{})})})}),h.jsx(Mt,{path:"/aprovador/analisar-evento/:id",element:h.jsx(nn,{children:h.jsx(Wp,{children:h.jsx(Oce,{})})})}),h.jsx(Mt,{path:"/aprovador/historico",element:h.jsx(nn,{children:h.jsx(Wp,{children:h.jsx(Dce,{})})})}),h.jsx(Mt,{path:"/aprovador/relatorios",element:h.jsx(nn,{children:h.jsx(Wp,{children:h.jsx(jce,{})})})}),h.jsx(Mt,{path:"/campus",element:h.jsx(nn,{children:h.jsx(hf,{to:"/campus/visao-geral",replace:!0})})}),h.jsx(Mt,{path:"/campus/visao-geral",element:h.jsx(nn,{children:h.jsx(Gp,{children:h.jsx(Bce,{})})})}),h.jsx(Mt,{path:"/campus/eventos",element:h.jsx(nn,{children:h.jsx(Gp,{children:h.jsx(Fce,{})})})}),h.jsx(Mt,{path:"/campus/usuarios",element:h.jsx(nn,{children:h.jsx(Gp,{children:h.jsx(Uce,{})})})}),h.jsx(Mt,{path:"/campus/certificados",element:h.jsx(nn,{children:h.jsx(Gp,{children:h.jsx(Wce,{})})})}),h.jsx(Mt,{path:"/campus/auditoria",element:h.jsx(nn,{children:h.jsx(Gp,{children:h.jsx(Gce,{})})})}),h.jsx(Mt,{path:"/campus/configuracoes",element:h.jsx(nn,{children:h.jsx(Gp,{children:h.jsx($ce,{})})})}),h.jsx(Mt,{path:"/dashboard/*",element:h.jsx(nn,{children:h.jsx(hf,{to:"/usuario/eventos",replace:!0})})}),h.jsx(Mt,{path:"/aluno",element:h.jsx(nn,{children:h.jsx(hf,{to:"/usuario/eventos",replace:!0})})}),h.jsx(Mt,{path:"/admin",element:h.jsx(nn,{children:h.jsx(hf,{to:"/organizador/meus-eventos",replace:!0})})}),h.jsx(Mt,{path:"*",element:h.jsx(Lae,{})})]})})})]})})})});h6(document.getElementById("root")).render(h.jsx(Xce,{}));
